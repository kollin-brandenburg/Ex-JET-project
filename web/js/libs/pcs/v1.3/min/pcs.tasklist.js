/**
 * @license RequireJS text 2.0.12 Copyright (c) 2010-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */

/*
 RequireJS i18n 2.0.2 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 Available via the MIT or new BSD license.
 see: http://github.com/requirejs/i18n for details
*/

define("text",["module"],function(e){"use strict";var t,n,r,i,s,o=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],u=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,a=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,f=typeof location!="undefined"&&location.href,l=f&&location.protocol&&location.protocol.replace(/\:/,""),c=f&&location.hostname,h=f&&(location.port||undefined),p={},d=e.config&&e.config()||{};t={version:"2.0.12",strip:function(e){if(e){e=e.replace(u,"");var t=e.match(a);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:d.createXhr||function(){var e,t,n;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;if(typeof ActiveXObject!="undefined")for(t=0;t<3;t+=1){n=o[t];try{e=new ActiveXObject(n)}catch(r){}if(e){o=[n];break}}return e},parseName:function(e){var t,n,r,i=!1,s=e.indexOf("."),o=e.indexOf("./")===0||e.indexOf("../")===0;return s!==-1&&(!o||s>1)?(t=e.substring(0,s),n=e.substring(s+1,e.length)):t=e,r=n||t,s=r.indexOf("!"),s!==-1&&(i=r.substring(s+1)==="strip",r=r.substring(0,s),n?n=r:t=r),{moduleName:t,ext:n,strip:i}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,r,i){var s,o,u,a=t.xdRegExp.exec(e);return a?(s=a[2],o=a[3],o=o.split(":"),u=o[1],o=o[0],(!s||s===n)&&(!o||o.toLowerCase()===r.toLowerCase())&&(!u&&!o||u===i)):!0},finishLoad:function(e,n,r,i){r=n?t.strip(r):r,d.isBuild&&(p[e]=r),i(r)},load:function(e,n,r,i){if(i&&i.isBuild&&!i.inlineText){r();return}d.isBuild=i&&i.isBuild;var s=t.parseName(e),o=s.moduleName+(s.ext?"."+s.ext:""),u=n.toUrl(o),a=d.useXhr||t.useXhr;if(u.indexOf("empty:")===0){r();return}!f||a(u,l,c,h)?t.get(u,function(n){t.finishLoad(e,s.strip,n,r)},function(e){r.error&&r.error(e)}):n([o],function(e){t.finishLoad(s.moduleName+"."+s.ext,s.strip,e,r)})},write:function(e,n,r,i){if(p.hasOwnProperty(n)){var s=t.jsEscape(p[n]);r.asModule(e+"!"+n,"define(function () { return '"+s+"';});\n")}},writeFile:function(e,n,r,i,s){var o=t.parseName(n),u=o.ext?"."+o.ext:"",a=o.moduleName+u,f=r.toUrl(o.moduleName+u)+".js";t.load(a,r,function(n){var r=function(e){return i(f,e)};r.asModule=function(e,t){return i.asModule(e,f,t)},t.write(e,a,r,s)},s)}};if(d.env==="node"||!d.env&&typeof process!="undefined"&&process.versions&&!!process.versions.node&&!process.versions["node-webkit"])n=require.nodeRequire("fs"),t.get=function(e,t,r){try{var i=n.readFileSync(e,"utf8");i.indexOf("﻿")===0&&(i=i.substring(1)),t(i)}catch(s){r&&r(s)}};else if(d.env==="xhr"||!d.env&&t.createXhr())t.get=function(e,n,r,i){var s=t.createXhr(),o;s.open("GET",e,!0);if(i)for(o in i)i.hasOwnProperty(o)&&s.setRequestHeader(o.toLowerCase(),i[o]);d.onXhr&&d.onXhr(s,e),s.onreadystatechange=function(t){var i,o;s.readyState===4&&(i=s.status||0,i>399&&i<600?(o=new Error(e+" HTTP status: "+i),o.xhr=s,r&&r(o)):n(s.responseText),d.onXhrComplete&&d.onXhrComplete(s,e))},s.send(null)};else if(d.env==="rhino"||!d.env&&typeof Packages!="undefined"&&typeof java!="undefined")t.get=function(e,t){var n,r,i="utf-8",s=new java.io.File(e),o=java.lang.System.getProperty("line.separator"),u=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),i)),a="";try{n=new java.lang.StringBuffer,r=u.readLine(),r&&r.length()&&r.charAt(0)===65279&&(r=r.substring(1)),r!==null&&n.append(r);while((r=u.readLine())!==null)n.append(o),n.append(r);a=String(n.toString())}finally{u.close()}t(a)};else if(d.env==="xpconnect"||!d.env&&typeof Components!="undefined"&&Components.classes&&Components.interfaces)r=Components.classes,i=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),s="@mozilla.org/windows-registry-key;1"in r,t.get=function(e,t){var n,o,u,a={};s&&(e=e.replace(/\//g,"\\")),u=new FileUtils.File(e);try{n=r["@mozilla.org/network/file-input-stream;1"].createInstance(i.nsIFileInputStream),n.init(u,1,0,!1),o=r["@mozilla.org/intl/converter-input-stream;1"].createInstance(i.nsIConverterInputStream),o.init(n,"utf-8",n.available(),i.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),o.readString(n.available(),a),o.close(),n.close(),t(a.value)}catch(f){throw new Error((u&&u.path||"")+": "+f)}};return t}),define("text!pcs/tasklist/templates/psc-tasklist-container.html",[],function(){return'<div class="oj-panel oj-margin">\n	<!-- outer offcanvas wrapper -->\n	<div id="root" class="oj-offcanvas-outer-wrapper">\n		<div class="oj-offcanvas-inner-wrapper">\n			<!-- left menu -->\n			<div id="pcs-tl-leftMenu"\n				 class="oj-offcanvas-start oj-panel oj-panel-alt5 oj-lg-3 oj-md-12 oj-sm-12">\n				<div>\n					<div\n							data-bind="ojModule: { name: \'pcs/tasklist/viewModel/filters\',\n						 						viewName: \'pcs/tasklist/templates/filters\'}"></div>\n				</div>\n			</div>\n			<!-- main content -->\n			<div id="pcs-tl-main" class="oj-flex oj-md-12 oj-sm-12" data-bind="css: tlMainWidth">\n				<div class="oj-flex-item">\n					<div class="oj-flex">\n						<div id="pcs-tl-actions" class="oj-flex oj-lg-12 oj-md-12 oj-sm-12 oj-lg-align-items-flex-end"\n							 data-bind="visible: !hideToolbar, component: { name: \'tasklistActions\', params : toolbarParams}"></div>\n						<div id="pcs-tl-list">\n							<div id="pcs-tl-listview">\n								<ul data-bind="ojComponent: {component: \'ojListView\',\n																data: tasklistData,\n																item: {template: \'pcs-tl-tasklist_template\'},\n																selectionMode: \'single\',\n																selection: selectedTask,\n																rootAttributes: {style: \'width:100%\'},\n																translations : {\n																	msgNoData: bundle.pcs.tasklist.emptyTasks,\n																	msgFetchingData: bundle.pcs.tasklist.loadingTxt\n																	}\n																}">\n								</ul>\n							</div>\n							<a href="#" class="oj-label-inline pcs-tl-floatRight pcs-tl-action-font"\n							   data-bind="visible: hasMoreRecs, click:loadMoreTasks, text: bundle.pcs.tasklist.loadMore, title: bundle.pcs.tasklist.loadMore">\n							</a>\n							<span class="oj-label-inline pcs-tl-floatRight pcs-tl-gray pcs-tl-action-font"\n								  style="float: right" data-bind="text: pagingInfoText, title: pagingInfoText"></span>\n						</div>\n						<div id="taskDetail" class="pcs-tl-taskDetail"></div>\n					</div>\n				</div>\n			</div>\n		</div>\n		<div id="pcs-tasklist-actions-confirmation-dialog"\n			 data-bind="ojComponent:{component: \'ojDialog\', title: bundle.pcs.taskActions.confirmation + displayActionName(), close: handleClose,\n		 	rootAttributes: { style: \'width: 500px; min-width: 100px; max-width 500px;\'}}">\n			<div class="oj-dialog-body" id="pcs-tasklist-actions-confirmation-dialog-content">\n				<div class="oj-flex-item">\n					<label for="comments" data-bind="text:bundle.pcs.taskActions.comments"></label>\n							<textarea id="comments" style="resize: both" data-bind="ojComponent:\n                   {component: \'ojTextArea\', rootAttributes: {style:\'min-width:100%\'}, value:actionComments, required: false}">\n							</textarea>\n				</div>\n			</div>\n			<div class="oj-dialog-footer" id="pcs-tasklist-actions-confirmation-dialog-footer">\n				<button id="okButton"\n						data-bind="ojComponent: {component: \'ojButton\', label: bundle.pcs.taskActions.ok}, click: handleSubmit"></button>\n				<button id="cancelButton"\n						data-bind="ojComponent: {component: \'ojButton\', label: bundle.pcs.taskActions.cancel}, click: handleClose"></button>\n			</div>\n		</div>\n	</div>\n	<div id="pcs-tl-overlay"></div>\n</div>\n<script type="text/html" id="pcs-tl-tasklist_template">\n	<li>\n		<div class="oj-flex">\n			<div class="oj-lg-2 oj-md-4 oj-sm-5">\n				<div class="pcs-tl-checkbox-holder" tabindex="0"\n					 data-bind="style: {background:boxHolderColor},\n								click: $parent.onTaskCheck,\n								attr: {title: $parent.bundle.pcs.tasklist.taskTitle + getNumber(), id:\'taskCheck\' + getNumber()},\n								event: {keypress: $parent.onTaskCheck }">\n					<span class="pcs-tl-tasknumber" data-bind="text: getNumber(), visible: false"></span>\n					<span class="pcs-tl-checkbox-font pcs-tl-process-initials" data-bind="text: processInitials"></span>\n					<span class="pcs-tl-checkmark"></span>\n				</div>\n				<div data-bind="attr: {class : \'pcs-tl-priority-\' + getPriority(), title : \'Priority \' +getPriority()}">&nbsp;</div>\n			</div>\n			<div class="oj-lg-10 oj-md-8 oj-sm-7">\n				<div class="oj-flex row oj-lg-align-items-center" id="pcs-tl-taskinfo-div" tabindex="0">\n					<div class="oj-lg-7 oj-md-12 oj-sm-12 ">\n						<div class="pcs-tl-task-title"><b><span class="header"\n																data-bind="text: getTitle(), attr: {title: getTitle()}"></span></b>\n						</div>\n						<div class="pcs-tl-task-summary"><span class="header"\n															   data-bind="visible: !$parent.hideSummary, text: getShortSummary(), attr: {title: getShortSummary()}"></span>\n						</div>\n						<div class="pcs-tl-tasklist-text"><span\n								data-bind="text:$parent.bundle.pcs.tasklist.application"></span> <span\n								class="pcs-tl-task-processName"\n								data-bind="text: getProcessName(), attr: {title: getProcessName()}"></span></div>\n					</div>\n					<div class="oj-lg-2 oj-md-6 oj-sm-6">\n						<div class="pcs-tl-tasklist-text" data-bind="visible: !$parent.hideFromUserName">\n							<span data-bind="text:$parent.bundle.pcs.tasklist.from"></span>\n							<span\n								class="pcs-tl-task-userName"\n								data-bind="text: getFromUserDisplayName(), attr: {title: getFromUserDisplayName()}"></span>\n						</div>\n						<div class="pcs-tl-f12" data-bind="visible: !$parent.hideAssignedDate">\n							<span data-bind="formatDateInMillis: getAssignedDate(), datePattern:\'MMM d, yyyy\'"></span>\n						</div>\n					</div>\n					<div class="oj-lg-2 oj-md-6 oj-sm-6">\n						<div data-bind="visible: !$parent.hideDueDate && getDueDate() && $parent.lastSelectedSort() === \'dueDate\'">\n							<span class="pcs-tl-tasklist-text" data-bind="text:$parent.bundle.pcs.tasklist.dueOn"></span><br>\n							<span\n								class="pcs-tl-f12"\n								data-bind="formatDateInMillis: getDueDate(), datePattern:\'MMM d, yyyy\'"></span>\n						</div>\n						<div data-bind="visible: !$parent.hideCreatedDate && getUpdatedDate() && $parent.lastSelectedSort() === \'updatedDate\'">\n							<span class="pcs-tl-tasklist-text" data-bind="text:$parent.bundle.pcs.tasklist.updatedOn"></span><br>\n							<span\n									class="pcs-tl-f12"\n									data-bind="formatDateInMillis: getUpdatedDate(), datePattern:\'MMM d, yyyy\'"></span>\n						</div>\n					</div>\n					<div class="oj-lg-1 oj-md-6 oj-sm-6" data-bind="visible: !$parent.hideCustomActions">\n						<button tabindex="0" data-bind="ojComponent: {\n									component:\'ojButton\',\n									chroming: \'half\',\n									label: $parent.bundle.pcs.tasklist.customActions,\n									display: \'icons\',\n									menu: \'#actionMenu\' + getNumber(),\n									icons: {start:\'oj-fwk-icon pcs-tl-actions-icon\'}\n								}, attr: {id: \'pcs-tl-task-actions-\'+ getNumber()}">\n						</button>\n					</div>\n				</div>\n				<ul class="pcs-tl-hidden"\n					data-bind="ojComponent: {component: \'ojMenu\', select: $parent.onActionSelect}, attr: {id: \'actionMenu\'+ getNumber()}">\n					<!-- ko foreach: getActionList() -->\n					<!-- ko if: actionType == \'Custom\' -->\n					<li>\n						<a href="#" class="pcs-tl-action-menu-item" data-bind="text:title, value:$parent.getNumber()"></a>\n					</li>\n					<!-- /ko -->\n					<!-- /ko -->\n				</ul>\n			</div>\n		</div>\n	</li>\n</script>\n'}),define("pcs/util/pcsUtil",["module","knockout","ojs/ojcore","jquery"],function(e,t,n,r){"use strict";function a(){var e={},t;if(window.location.href.indexOf("?")===-1)return e;var n=window.location.href.slice(window.location.href.indexOf("?")+1).split("&");for(var r=0;r<n.length;r++){t=n[r].split("=");var i=decodeURIComponent(t[0]),s=decodeURIComponent(t[1]),o=JSON.parse(s);e[i]=o}return e}var i={};r.CustomEvent=function(e){var t,n=e&&i[e];return n||(t=r.Callbacks(),n={publish:t.fire,subscribe:t.add,unsubscribe:t.remove},e&&(i[e]=n)),n};var s={addHandler:function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n},removeHandler:function(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent?e.detachEvent("on"+t,n):e["on"+t]=null}};String.prototype.startsWith||Object.defineProperty(String.prototype,"startsWith",{enumerable:!1,value:function(e,t){return t=t||0,this.substr(t,e.length)===e}}),String.prototype.endsWith||Object.defineProperty(String.prototype,"endsWith",{enumerable:!1,value:function(e,t){var n=this.toString();if(typeof t!="number"||!isFinite(t)||Math.floor(t)!==t||t>n.length)t=n.length;t-=e.length;var r=n.indexOf(e,t);return r!==-1&&r===t}});var o=function(e){typeof window.doADFProxyCall=="function"?window.doADFProxyCall(e):e&&window.location.assign(e)},u=function(e){function a(e){var t=e.split("\r\n"),n="text/plain",r="pcsFormUrl",i={contentType:n,fieldName:r};for(var s=1;s<t.length;s++){var o=t[s],u=o.match(/^.*filename="([^"]*)"/);if(u)i.fieldName=u[1];else{var a="Content-Type:";o.indexOf(a)>-1&&(u=o.substring(o.indexOf(a)+a.length)),u&&(i.contentType=u.trim())}}return i}var t=e.getResponseHeader("Content-Type"),n=e.response,r=t.match(/boundary=(?:'([^']+)'|([^;]+))/i);if(!r)throw new Error("Bad content-type header, no multipart boundary");var i=r[1]||r[2],s=typeof n!="string",o,u;i="\r\n--"+i;if(s){var f=new Uint8Array(n),l=32768,c=[];for(u=0;u<f.length;u+=l)c.push(String.fromCharCode.apply(null,f.subarray(u,u+l)));o=c.join("")}else o=n;o="\r\n"+o;var h=o.split(new RegExp(i)),p={};for(u=1;u<h.length-1;u++){var d="\r\n\r\n",v=h[u].substring(h[u].indexOf(d)+d.length),m=h[u].substring(0,h[u].indexOf(d)),g=a(m),y=!1;s&&!g.contentType.startsWith("text")&&(y=!0),p[g.fieldName]={data:v,contentType:g.contentType,fileName:g.fieldName}}return p},f=function(e){return r.ajax({type:"GET",url:e,dataType:"text",xhrFields:{withCredentials:!0}})};return t.bindingHandlers.formatDateInMillis={update:function(e,r,i){var s=t.unwrap(r());if(!s)return;var o={formatType:"date",pattern:i().datePattern},u=n.Validation.converterFactory("datetime").createConverter(o),a=u.format(n.IntlConverterUtils.dateToLocalIso(new Date(s)));t.bindingHandlers.text.update(e,function(){return a})}},{adfProxyCall:o,getAuthToken:f,multipartParse:u,getUrlParametersObject:a,eventHandler:s,initComponentForIFrame:function(e,t,n){if(!r.isEmptyObject(r.pcsConnection))t();else{r.pcsConnection={};if(!r.isEmptyObject(e)){e.testMode&&(r.pcsConnection.testMode=e.testMode),e.serverURL&&(r.pcsConnection.serverURL=e.serverURL);if(e.authInfo){r.pcsConnection.authInfo=e.authInfo,t();return}}var i=this,s=function(){var e=i.getServerURL();console.log("Script loaded and ready, getting token"),i.getAuthToken(e+"/bpm/workspace/auth/token").done(function(e){e&&e.startsWith("<html")?n.text("User cannot be authorized").show():(r.pcsConnection.authInfo="Bearer "+e,t())}).fail(function(e){n.text("User cannot be authorized").show()})},o=document.createElement("script");o.onload=s,o.onreadystatechange=function(){this.readyState==="complete"&&s()};var u=this.getServerURL();o.src=u+"/bpm/workspace/faces/js/homePage.js",document.getElementsByTagName("head")[0].appendChild(o)}},getCookie:function(e){var t;return(t=(new RegExp("(?:^|; )"+encodeURIComponent(e)+"=([^;]*)")).exec(document.cookie))?t[1]:null},getServerURL:function(){if(r.pcsConnection&&r.pcsConnection.serverURL)return r.pcsConnection.serverURL.endsWith("/")?r.pcsConnection.serverURL.substring(0,r.pcsConnection.serverURL.length-1):r.pcsConnection.serverURL;if(e.uri.indexOf(".")===0||e.uri.indexOf("/")===0)return window.location.origin;try{return(new URL(e.uri)).origin}catch(t){return window.location.origin}},getRestUri:function(){return"/bpm/api/3.0/"},getAuthInfo:function(){if(r.pcsConnection&&r.pcsConnection.authInfo){var e=r.pcsConnection.authInfo;return!e.startsWith("Bearer ")&&!e.startsWith("Basic ")&&(e="Bearer "+e),e}return""},getRestURL:function(){if(r.pcsConnection&&r.pcsConnection.restURL)return r.pcsConnection.restURL;var e=this.getServerURL()+this.getRestUri();return r.pcsConnection&&(r.pcsConnection.restURL=e),e},isTestMode:function(){return r.pcsConnection&&r.pcsConnection.testMode?!0:!1},taskIconColor:function(e){if(!e)return"grey";var t=0,n,r,i;for(n=0,i=e.length;n<i;n++)r=e.charCodeAt(n),t=(t<<5)-t+r,t|=0;var s=t,o=s&255;s>>=8;var u=s&255;s>>=8;var a=s&255;return"rgb("+a+","+u+","+o+")"},taskInitials:function(e){if(!e)return"NA";e=e.replace(" ","");var t=e.charAt(0).toUpperCase(),n="";for(var r=1;r<e.length;r++)if(e.charAt(r)===e.charAt(r).toUpperCase()){n=e.charAt(r);break}return t+n},getRandomInt:function(e,t){return Math.floor(Math.random()*(t-e+1))+e},unApplyBindings:function(e,n){e.find("*").each(function(){r(this).off(),r(this).unbind()}),e.off(),n?(t.cleanNode(e[0]),e.find("*").each(function(){r(this).remove()}),t.removeNode(e)):(t.cleanNode(e),e.find("*").each(function(){r(this).remove()}))}}}),define("pcs/data-services/DataServices",["require","jquery","pcs/util/pcsUtil"],function(e){"use strict";var t=e("jquery"),n=e("pcs/util/pcsUtil");return function(){function f(){return{get:function(e,n,r){return e.indexOf(i(r))===-1&&(e=i(r)+e),n&&n.queryParams&&(e+="?"+u(n.queryParams)),t.ajax({type:"GET",url:e,beforeSend:o,xhrFields:{withCredentials:!0},contentType:n&&n.contentType?n.contentType:"application/json",dataType:n&&n.dataType?n.dataType:"json"})},post:function(e,n,r){e.indexOf(i(r))===-1&&(e=i(r)+e),n.contentType==null&&(n.contentType="application/json");var s=a(n.contentType,n.payload);return t.ajax({type:"POST",url:e,cache:!1,processData:!1,data:s,beforeSend:o,xhrFields:{withCredentials:!0},contentType:n.contentType,dataType:n&&n.dataType?n.dataType:"json"})},put:function(e,n,r){e.indexOf(i(r))===-1&&(e=i(r)+e),n.contentType==null&&(n.contentType="application/json");var s=a(n.contentType,n.payload);return t.ajax({type:"PUT",url:e,cache:!1,processData:!1,data:s,beforeSend:o,xhrFields:{withCredentials:!0},contentType:n.contentType,dataType:n&&n.dataType?n.dataType:"json"})},"delete":function(e,t){}}}var e,r={credentials:n.getAuthInfo(),baseUrl:n.getServerURL()+"/bpm/api/3.0"},i=function(e){return e?n.getServerURL()+"/bpm/api/"+e:n.getServerURL()+"/bpm/api/3.0"},s=function(){return n.getAuthInfo()},o=function(e){e.setRequestHeader("Authorization",s()),n.isTestMode()&&e.setRequestHeader("pcs_mode","dev")},u=function(e){var t=[];if(e instanceof Array)e.forEach(function(e){for(var n in e)e.hasOwnProperty(n)&&t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]))});else for(var n in e)e.hasOwnProperty(n)&&t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")},a=function(e,t){var n=JSON.stringify(t);if(!e&&e.startsWith("multipart")){n=new Uint8Array(t.length);for(var r=0;r<t.length;r++)n[r]=t.charCodeAt(r)}return n};return{getInstance:function(t){return e||(e=f()),t?e.connection=t:r&&(e.connection=r),e},setConnection:function(t){e||(e=f()),e.connection=t},serializeUrlParams:function(e){return u(e)}}}()}),define("pcs/tasklist/viewModel/Task",[],function(){"use strict";return function(e,t){if(t&&t.hasOwnProperty("update"))for(var n in e){if(!e.hasOwnProperty(n))continue;t.update.hasOwnProperty(n)&&(e[n]=typeof t.update[n]=="function"?t.update[n](e[n]):e[n])}return{getTitle:function(){return e.title},getNumber:function(){return e.number},getFromUser:function(){return e.fromUserDisplayName},getState:function(){return e.state},getAssignees:function(){return e.assignees.items},getCreator:function(){return e.creatorName},getAssignedDate:function(){return e.assignedDate},getCreatedDate:function(){return e.createdDate},getPriority:function(){return e.priority},getFromUserName:function(){return e.fromUserName},getFromUserDisplayName:function(){return e.fromUserDisplayName},getShortSummary:function(){return e.shortSummary},getDueDate:function(){return e.dueDate},getProcessName:function(){return e.processName},getUpdatedDate:function(){return e.updatedDate},getActionList:function(){return e.actionList}}}}),define("pcs/tasklist/viewModel/TaskList",["jquery","pcs/data-services/DataServices","pcs/tasklist/viewModel/Task"],function(e,t,n){"use strict";var r={tasks:"/tasks",taskSearch:"/tasks/search"},i=t.getInstance();return function(t){var s={};s.options=t;var o={tasks:{url:"/tasks"}},u=function(t,o,u,a){var f={payload:{action:{id:o.toUpperCase(),type:u}}};t==null&&(t=s.selectedTask?s.selectedTask:null),a&&a.trim()!==""&&(f.payload.comment={commentStr:a,commentScope:"BPM"});var l=e.Deferred();if(t!=null){var c=r.tasks+"/"+t.getNumber();i.put(c,f).then(function(e){l.resolve(new n(e))}).fail(function(e){l.reject(e)})}else l.reject("Task is null or undefined");return l};return{fetchTasks:function(t,o){var u=r.tasks,a=e.Deferred();if(!t)return a.resolve(s.tasks),a;var f={queryParams:o};return i.get(u,f).done(function(e){var t=function(e){return e?Date.parse(e.toString().replace(" ","T")):0},r={update:{assignedDate:function(e){return t(e)},dueDate:function(e){return t(e)},updatedDate:function(e){return t(e)}}},i=e.items.map(function(e){return new n(e,r)});i.count=e.count,s.tasks=i,a.resolve(i)}).fail(function(e){a.reject(e)}),a},queryTasksBySearchableFields:function(t,o){var u=r.taskSearch,a=e.Deferred();if(!t)return a.resolve(s.tasks),a;var f={payload:{query:o.query,start:o.start,offset:o.offset,sorts:o.sorts,fields:o.fields,language:o.language}};return i.post(u,f).done(function(e){var t=function(e){return e?Date.parse(e.replace(" ","T")):0},r={update:{assignedDate:function(e){return t(e)},dueDate:function(e){return t(e)},updatedDate:function(e){return t(e)}}},i=e.items.map(function(e){return new n(e,r)});s.tasks=i,a.resolve(i)}).fail(function(e){a.reject(e)}),a},getTaskDetail:function(t,r){var u=e.Deferred();if(!t)return u.reject("Task is not passed");var a=r?{queryParams:r}:null,f=o.tasks.url+"/"+t.getNumber();return i.get(f,a).then(function(e){var t=new n(e);s.selectedTask=t,u.resolve(t)}).fail(function(e){u.reject(e)}),u},doCustomActionOnTask:function(e,t,n){return u(e,t,"CUSTOM",n)},listRecentFilters:function(){},listStandardFilters:function(){},listSavedFilters:function(e){},selectFilter:function(e){s.selectedFilter=e},getSelectedFilter:function(){return s.selectedFilter},saveFilter:function(e,t){},deleteFilter:function(e){}}}}),function(){function e(e,t,n,r,i,s){return t[e]||(e=e.replace(/^zh-(Hans|Hant)-([^-]+)$/,"zh-$2")),t[e]?(n.push(e),!0!==t[e]&&1!==t[e]||r.push(i+e+"/"+s),!0):!1}function t(e){var t=e.toLowerCase().split(/-|_/);e=[t[0]];var n=1,r;for(r=1;r<t.length;r++){var i=t[r],s=i.length;if(1==s)break;switch(n){case 1:if(n=2,4==s){e.push(i.charAt(0).toUpperCase()+i.slice(1));break};case 2:n=3,e.push(i.toUpperCase());break;default:e.push(i)}}if(!("zh"!=e[0]||1<e.length&&4==e[1].length)){t="Hans",n=1<e.length?e[1]:null;if("TW"===n||"MO"===n||"HK"===n)t="Hant";e.splice(1,0,t)}return e}function n(e,t){for(var r in t)t.hasOwnProperty(r)&&(null==e[r]?e[r]=t[r]:"object"==typeof t[r]&&"object"==typeof e[r]&&n(e[r],t[r]))}var r=/(^.*(^|\/)nls(\/|$))([^\/]*)\/?([^\/]*)/;define("ojL10n",["module"],function(i){var s=i.config?i.config():{};return{version:"2.0.1+",load:function(i,o,u,a){a=a||{},a.locale&&(s.locale=a.locale);var f=r.exec(i),l=f[1],c,h=f[5],p,d=[],v={},m,g="",w,E,S,T,N,C;f[5]?(l=f[1],i=l+h,c=f[4]):(h=f[4],c=s.locale,"undefined"!=typeof document?(c||(c=a.isBuild?"root":document.documentElement.lang)||(c=void 0===navigator?"root":navigator.language||navigator.userLanguage||"root"),s.locale=c):c="root"),p=t(c),w=s.noOverlay,E=s.defaultNoOverlayLocale;if(f=s.merge)if(S=f[l+h])f=r.exec(S),T=f[1],N=f[4];C=[];for(m=0;m<p.length;m++)f=p[m],g+=(g?"-":"")+f,C.push(g);a.isBuild?(d.push(i),S&&d.push(S),o(d,function(){u()})):("query"==s.includeLocale&&(i=o.toUrl(i+".js"),i+=(-1===i.indexOf("?")?"?":"&")+"loc="+c),a=[i],S&&a.push(S),o(a,function(t,r){var i=[],s,a=!1,f=w||!0===t.__noOverlay,c=E||t.__defaultNoOverlayLocale;for(m=C.length-1;0<=m&&(!a||!f);m--)a=e(C[m],t,i,d,l,h);f&&!a&&c&&e(c,t,i,d,l,h),e("root",t,i,d,l,h),s=i.length;if(r){a=!1,f=!0===r.__noOverlay,c=r.__defaultNoOverlayLocale;for(m=C.length-1;0<=m&&(!a||!f);m--)a=e(C[m],r,i,d,T,N);f&&!a&&c&&e(c,r,i,d,T,N),e("root",r,i,d,T,N)}o(d,function(){var e,a,f;for(e=s;e<i.length&&i[e];e++){f=i[e],a=r[f];if(!0===a||1===a)a=o(T+f+"/"+N);n(v,a)}for(e=0;e<s&&i[e];e++){f=i[e],a=t[f];if(!0===a||1===a)a=o(l+f+"/"+h);n(v,a)}v._ojLocale_=p.join("-"),u(v)})}))}}})}(),define("text!pcs/taskdetail/templates/pcs-taskdetail.html",[],function(){return'<div id="pcs-td-mainContainer" class="oj-row oj-panel">\n\n    <div class="oj-message oj-message-error" id="pcs-td-error" style="display: none;margin:20px" >\n            <span class="oj-component-icon oj-message-status-icon oj-message-error-icon"\n                  role="img">\n            </span>\n            <span class="oj-message-content">\n                <div class="oj-message-summary" data-bind="text:bundle.pcs.taskdetail.detail_error" >\n                </div>\n            </span>\n            <div id="pcs-td-error-msg"  style="margin-top:10px; white-space: normal !important;"></div>\n    </div>\n\n    <div id="pcs-td-detailContainer">\n\n        <div style="display:none" id="pcs-td-close-dialog" class="pcs-td-close-dialog"\n             data-bind="attr : { title : bundle.pcs.taskdetail.dialog_confirm },\n              ojComponent:{component: \'ojDialog\', initialVisibility: \'hide\'}">\n            <div class="oj-dialog-body">\n                <div data-bind="text : bundle.pcs.taskdetail.dialog_close_msg"/>\n            </div>\n            <div class="oj-dialog-footer">\n                <button\n                        data-bind="click : yesDiscardDialog ,\n                        ojComponent: {component: \'ojButton\', label: bundle.pcs.taskdetail.dialog_yes}"></button>\n                <button\n                        data-bind="click : noDiscardDialog ,\n                        ojComponent: {component: \'ojButton\', label: bundle.pcs.taskdetail.dialog_no}"></button>\n            </div>\n        </div>\n\n        <h1 style="float: left">\n            <div data-bind="text :taskObject.title" class="pcs-td-title" id="pcs-td-title"></div>\n        </h1>\n		<div>\n			<span class="pcs-td-priority" data-bind="visible: taskObject.priority()[0] === \'HIGH\',\n														attr : { title : bundle.pcs.taskdetail.priority_high }"></span>\n		</div>\n\n\n        <div class="oj-sm-text-align-end">\n            <span id="pcs-td-custom-actions">\n            <!-- ko foreach: taskObject.customActions -->\n                <button class="pcs-td-custom-actions"\n                        data-bind="ojComponent: {\n                            component:\'ojButton\', label: $data.title,\n                            chroming: \'full\',\n                        }, click : $parent.submitTaskDetail">\n                </button>\n            <!-- /ko -->\n            </span>\n            <button id="pcs-td-save"\n                    data-bind="ojComponent: {\n                        component:\'ojButton\', label: bundle.pcs.taskdetail.save, disabled : readOnly,\n                        chroming: \'full\',\n                    } , click :saveTaskDetail">\n            </button>\n            <button id="pcs-td-close" class="oj-button-sm "\n                    aria-label="Close" role="button"\n                    data-bind="click: closeTaskDetail, ojComponent: {component:\'ojButton\',\n                                         label: bundle.pcs.taskdetail.close,\n                                         display: \'icons\',  chroming: \'half\',\n                                         icons: {start: \'pcs-td-close oj-fwk-icon\'}}">\n            </button>\n			<span id="pcs-td-expand" data-bind="visible:showResize, ojComponent: {component: \'ojButtonset\', checked: viewExpanded}">\n				<label for="pcs-td-resize"></label>\n				<input type="checkbox" id="pcs-td-resize" value="true"\n					   data-bind="attr:{title: bundle.pcs.taskdetail.resize},\n						ojComponent: { component: \'ojButton\',\n						label: bundle.pcs.taskdetail.resize,\n						display: \'icons\', chroming: \'half\',\n						icons: {start: \'pcs-td-resize oj-fwk-icon\'},\n						rootAttributes: {class:\'oj-button-sm\'}}"/>\n			</span>\n        </div>\n\n        <div data-bind="text:taskObject.shortSummary" style="margin-bottom: 20px;clear:both" class="pcs-td-summary" id="pcs-td-summary"></div>\n        <hr />\n        <div id="pcs-td-links"class="oj-row pcs-common-center-align" style="margin-top:20px">\n            <div  class="pcs-common-center-align">\n                <span id="pcs-td-link-comments">\n                    <a data-bind="click:openComments, text:bundle.pcs.taskdetail.comments" ></a>\n                    <span class="pcs-common-bar"></span>\n                </span>\n                <span id="pcs-td-link-attachments">\n                    <a data-bind="click:openAttachments, text:bundle.pcs.taskdetail.attachments" ></a>\n                    <span class="pcs-common-bar"></span>\n                </span>\n                <span id="pcs-td-link-history">\n                    <a data-bind="click:openHistory, text:bundle.pcs.taskdetail.history"></a>\n                    <span class="pcs-common-bar"></span>\n                </span>\n                <span id="pcs-td-link-moreInfo">\n                    <a data-bind="click:openMoreInfo, text:bundle.pcs.taskdetail.more_info"></a>\n                    <span class="pcs-common-bar"></span>\n                </span>\n                <span id="pcs-td-link-conversation" style="display:none">\n                    <a data-bind="click:openConversation, text:bundle.pcs.taskdetail.conversation"></a>\n                </span>\n            </div>\n        </div>\n\n        <div id="pcs-td-action-success-msg-container" style="display: none;margin-bottom:20px">\n            <span title="Success" role="img" class="oj-fwk-icon-status-confirmation oj-fwk-icon"></span>\n            <span id="pcs-td-action-success-msg" class="pcs-td-action-success-msg"></span>\n        </div>\n\n        <div id="pcs-td-action-error-msg-container" class="pcs-td-action-error-msg-container"  style="display: none">\n            <span class="oj-component-icon oj-message-status-icon oj-message-error-icon" role="img" id="pcs-td-error-msg-icon" style="float: left ;margin-right:10px" ></span>\n            <pre id="pcs-td-action-error-msg" class="pcs-td-action-error-msg"></pre>\n        </div>\n\n        <div id="pcs-td-form" data-bind="ojComponent: {component: \'ojCollapsible\', expanded:true}">\n            <h3>\n                <span id="pcs-td-form-title"  data-bind="text:bundle.pcs.taskdetail.form"></span>\n            </h3>\n            <div id="pcs-td-form-frame" class="oj-row">\n                <div class="oj-row pcs-common-center-align" id="pcs-td-form-loading" style="display:none">\n                    <div class="pcs-common-center-align pcs-common-loading"/>\n                </div>\n\n\n				<div id="pcs-td-form-error-container" style="display: none">\n					<span class="oj-component-icon oj-message-status-icon oj-message-error-icon" role="img" style="float: left ;margin-right:10px" ></span>\n					<pre id="pcs-td-form-error-msg" class="pcs-td-form-error-msg"></pre>\n				</div>\n\n                <div class="oj-xl-12 oj-lg-12 oj-md-12 oj-col" id="pcs-td-form-container">\n                    <iframe id="pcs-td-form-iframe" data-bind="attr: {src: formURL}" frameborder="0" id="pcs-td-iframe" seamless="seamless" scrolling="auto"\n                            style="overflow-x:hidden;width:100%"  width="100%" >\n                        <p data-bind="text:bundle.pcs.taskdetail.frame_error"></p>\n                    </iframe>\n                </div>\n            </div>\n        </div>\n\n        <div id="pcs-td-comments" data-bind="ojComponent: {component: \'ojCollapsible\', expanded:false}">\n            <h3>\n                <span id="pcs-td-comments-title" data-bind="text:bundle.pcs.taskdetail.comments"></span>\n            </h3>\n            <div>\n                <div class="pcs-td-comments-container" id="pcs-td-comments-container"></div>\n            </div>\n        </div>\n\n        <div id="pcs-td-attachments" data-bind="ojComponent: {component: \'ojCollapsible\', expanded:false}">\n            <h3>\n                <span id="pcs-td-attachment-title" data-bind="text:bundle.pcs.taskdetail.attachments" ></span>\n            </h3>\n            <div>\n                <div class="pcs-td-attachment-container" id="pcs-td-attachment-container"></div>\n            </div>\n        </div>\n\n        <div id="pcs-td-history" data-bind="ojComponent: {component: \'ojCollapsible\', expanded:false}">\n            <h3>\n                <span id="pcs-td-history-title" data-bind="text:bundle.pcs.taskdetail.history" ></span>\n            </h3>\n            <div>\n                <div id="pcs-td-history-container" class="pcs-td-history-container"\n                     data-bind=\'component: {name: "taskHistory", params : {taskNumber : taskNumber , rootElement :rootElement} }\'></div>\n            </div>\n        </div>\n\n        <div id="pcs-td-moreInfo" data-bind="ojComponent: {component: \'ojCollapsible\', expanded:false}">\n            <h3>\n                <span id="pcs-td-moreInfo-title" data-bind="text:bundle.pcs.taskdetail.more_info"></span>\n            </h3>\n            <div>\n                <div id="pcs-td-moreInfo-container" class="pcs-td-moreInfo-container" data-bind="template: { name: \'pcs-td-moreInfo-template\', data: $data }"></div>\n            </div>\n        </div>\n\n\n        <div id="pcs-td-conversation" data-bind="ojComponent: {component: \'ojCollapsible\'}" style="display:none">\n            <h3>\n                <span id="pcs-td-conversation-title" data-bind="text:bundle.pcs.taskdetail.conversation"></span>\n            </h3>\n            <div>\n                <div id="pcs-td-conversation-container" ></div>\n            </div>\n        </div>\n\n        <div id="pcs-td-overlay"/>\n    </div>\n</div>\n'}),define("pcs/taskdetail/services/taskdetailDataService",["jquery","pcs/util/pcsUtil"],function(e,t){"use strict";function n(){var n=this;n.paths={task:"tasks/{taskNumber}",history:"tasks/{taskNumber}/history",liveForm:"tasks/{taskNumber}/form/live?getURI=true",taskPayload:"tasks/{taskNumber}/payload",executePCSFormRest:"webforms/{formDefId}/executeRest/{restExecutionId}"};var r=function(n,r,i){return t.adfProxyCall(),e.ajax({type:"GET",url:n,beforeSend:function(e){e.setRequestHeader("Authorization",t.getAuthInfo()),t.isTestMode()&&e.setRequestHeader("pcs_mode","dev")},xhrFields:{withCredentials:!0},contentType:r,dataType:i,cache:!1})},i=function(n,r,i,s){return t.adfProxyCall(),e.ajax({type:"POST",url:n,cache:!1,processData:!1,data:r,dataType:s,beforeSend:function(e){e.setRequestHeader("Authorization",t.getAuthInfo()),t.isTestMode()&&e.setRequestHeader("pcs_mode","dev")},xhrFields:{withCredentials:!0},contentType:i})},s=function(n,r){return t.adfProxyCall(),e.ajax({type:"PUT",url:n,cache:!1,processData:!1,data:r,beforeSend:function(e){e.setRequestHeader("Authorization",t.getAuthInfo()),t.isTestMode()&&e.setRequestHeader("pcs_mode","dev")},xhrFields:{withCredentials:!0},contentType:"application/json"})},o=function(n,r,i){return t.adfProxyCall(),e.ajax({url:n,type:"GET",dataType:"json",data:r,beforeSend:function(e){e.setRequestHeader("Authorization",t.getAuthInfo()),t.isTestMode()&&e.setRequestHeader("pcs_mode","dev")},xhrFields:{withCredentials:!0},contentType:i,cache:!1})};n.getTaskObject=function(e){var i=t.getRestURL()+n.paths.task.replace("{taskNumber}",e);return r(i,"application/json","json")},n.performTaskAction=function(e,r){var i=t.getRestURL()+n.paths.task.replace("{taskNumber}",e);return console.log(r),s(i,r)},n.getTaskHistory=function(e){var i=t.getRestURL()+n.paths.history.replace("{taskNumber}",e);return r(i,"application/json","json")},n.getFrevvoFormUrl=function(e){var i=t.getRestURL()+n.paths.liveForm.replace("{taskNumber}",e);return r(i,"text/plain","text")},n.saveFrevvoForm=function(e,r){var i=t.getRestURL()+n.paths.liveForm.replace("{taskNumber}",e);return s(i,r)},n.getTaskFolderName=function(e){return r(e,"text/plain","text")},n.getFormMetaDataByURL=function(e){return r(e,"application/json","json")},n.getTaskPayloadByURL=function(e){return r(e,"application/json","json")},n.postTaskPayload=function(e,r){var s=t.getRestURL()+n.paths.taskPayload.replace("{taskNumber}",e);return i(s,r,"application/json","text")};var u=function(e,t){return e.replace(/{\w+}/g,function(e){return t[e]})};n.executePCSFormRest=function(e,r){var s=t.getRestURL()+n.paths.executePCSFormRest;return s=u(s,e),i(s,r,"application/json","json")},n.executeRest=function(e,n){var r=t.getRestURL()+e;return o(r,n,"application/json")}}return new n}),define("pcs/pcsform/PCSFormService",["require","pcs/util/pcsUtil"],function(e){"use strict";function u(e){var o={};return{getFormMetaData:function(e){var t=$.Deferred();if(o.form&&o.form[e])return t.resolve(o.form[e]),t;var n={};return s(e).done(function(n){o.form===undefined&&(o.form={}),o.form[e]=n,t.resolve(n)}).fail(function(e){t.reject(e)}),t},getFormMetaDataByURL:function(e){return s(e)},executePCSFormRest:function(e,s){var o=t.getRestURL()+n.executePCSFormRest;return o=r(o,e),i(o,s)},executeRest:function(e,n){var r=t.getRestURL()+e;return s(r,n)}}}var t=e("pcs/util/pcsUtil"),n={executePCSFormRest:"webforms/{formDefId}/executeRest/{restExecutionId}"},r=function(e,t){return e.replace(/{\w+}/g,function(e){return t[e]})},i=function(e,n){t.adfProxyCall();var r=new Uint8Array(n.length);for(var i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return $.ajax({type:"POST",url:e,cache:!1,processData:!1,data:r,beforeSend:function(e){e.setRequestHeader("Authorization",t.getAuthInfo()),t.isTestMode()&&e.setRequestHeader("pcs_mode","dev")},xhrFields:{withCredentials:!0},contentType:"application/json"})},s=function(e,n){return t.adfProxyCall(),$.ajax({url:e,type:"GET",dataType:"json",data:n,beforeSend:function(e){e.setRequestHeader("Authorization",t.getAuthInfo()),t.isTestMode()&&e.setRequestHeader("pcs_mode","dev")},xhrFields:{withCredentials:!0},contentType:"application/json",cache:!1})},o;return{getInstance:function(e){return o||(o=new u(e)),o}}}),define("text",["module"],function(e){"use strict";var t,n,r,i,s,o=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],u=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,a=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,f="undefined"!=typeof location&&location.href,l=f&&location.protocol&&location.protocol.replace(/\:/,""),c=f&&location.hostname,h=f&&(location.port||void 0),p={},d=e.config&&e.config()||{};return t={version:"2.0.12",strip:function(e){if(e){e=e.replace(u,"");var t=e.match(a);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:d.createXhr||function(){var e,t,n;if("undefined"!=typeof XMLHttpRequest)return new XMLHttpRequest;if("undefined"!=typeof ActiveXObject)for(t=0;t<3;t+=1){n=o[t];try{e=new ActiveXObject(n)}catch(e){}if(e){o=[n];break}}return e},parseName:function(e){var t,n,r,i=!1,s=e.indexOf("."),o=0===e.indexOf("./")||0===e.indexOf("../");return-1!==s&&(!o||s>1)?(t=e.substring(0,s),n=e.substring(s+1,e.length)):t=e,r=n||t,s=r.indexOf("!"),-1!==s&&(i="strip"===r.substring(s+1),r=r.substring(0,s),n?n=r:t=r),{moduleName:t,ext:n,strip:i}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,r,i){var s,o,u,a=t.xdRegExp.exec(e);return!a||(s=a[2],o=a[3],o=o.split(":"),u=o[1],o=o[0],!(s&&s!==n||o&&o.toLowerCase()!==r.toLowerCase()||(u||o)&&u!==i))},finishLoad:function(e,n,r,i){r=n?t.strip(r):r,d.isBuild&&(p[e]=r),i(r)},load:function(e,n,r,i){if(i&&i.isBuild&&!i.inlineText)return void r();d.isBuild=i&&i.isBuild;var s=t.parseName(e),o=s.moduleName+(s.ext?"."+s.ext:""),u=n.toUrl(o),a=d.useXhr||t.useXhr;if(0===u.indexOf("empty:"))return void r();!f||a(u,l,c,h)?t.get(u,function(n){t.finishLoad(e,s.strip,n,r)},function(e){r.error&&r.error(e)}):n([o],function(e){t.finishLoad(s.moduleName+"."+s.ext,s.strip,e,r)})},write:function(e,n,r,i){if(p.hasOwnProperty(n)){var s=t.jsEscape(p[n]);r.asModule(e+"!"+n,"define(function () { return '"+s+"';});\n")}},writeFile:function(e,n,r,i,s){var o=t.parseName(n),u=o.ext?"."+o.ext:"",a=o.moduleName+u,f=r.toUrl(o.moduleName+u)+".js";t.load(a,r,function(n){var r=function(e){return i(f,e)};r.asModule=function(e,t){return i.asModule(e,f,t)},t.write(e,a,r,s)},s)}},"node"===d.env||!d.env&&"undefined"!=typeof process&&process.versions&&process.versions.node&&!process.versions["node-webkit"]?(n=require.nodeRequire("fs"),t.get=function(e,t,r){try{var i=n.readFileSync(e,"utf8");0===i.indexOf("﻿")&&(i=i.substring(1)),t(i)}catch(e){r&&r(e)}}):"xhr"===d.env||!d.env&&t.createXhr()?t.get=function(e,n,r,i){var s,o=t.createXhr();if(o.open("GET",e,!0),i)for(s in i)i.hasOwnProperty(s)&&o.setRequestHeader(s.toLowerCase(),i[s]);d.onXhr&&d.onXhr(o,e),o.onreadystatechange=function(t){var i,s;4===o.readyState&&(i=o.status||0,i>399&&i<600?(s=new Error(e+" HTTP status: "+i),s.xhr=o,r&&r(s)):n(o.responseText),d.onXhrComplete&&d.onXhrComplete(o,e))},o.send(null)}:"rhino"===d.env||!d.env&&"undefined"!=typeof Packages&&"undefined"!=typeof java?t.get=function(e,t){var n,r,i="utf-8",s=new java.io.File(e),o=java.lang.System.getProperty("line.separator"),u=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),i)),a="";try{for(n=new java.lang.StringBuffer,r=u.readLine(),r&&r.length()&&65279===r.charAt(0)&&(r=r.substring(1)),null!==r&&n.append(r);null!==(r=u.readLine());)n.append(o),n.append(r);a=String(n.toString())}finally{u.close()}t(a)}:("xpconnect"===d.env||!d.env&&"undefined"!=typeof Components&&Components.classes&&Components.interfaces)&&(r=Components.classes,i=Components.interfaces,Components.utils.import("resource://gre/modules/FileUtils.jsm"),s="@mozilla.org/windows-registry-key;1"in r,t.get=function(e,t){var n,o,u,a={};s&&(e=e.replace(/\//g,"\\")),u=new FileUtils.File(e);try{n=r["@mozilla.org/network/file-input-stream;1"].createInstance(i.nsIFileInputStream),n.init(u,1,0,!1),o=r["@mozilla.org/intl/converter-input-stream;1"].createInstance(i.nsIConverterInputStream),o.init(n,"utf-8",n.available(),i.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),o.readString(n.available(),a),o.close(),n.close(),t(a.value)}catch(e){throw new Error((u&&u.path||"")+": "+e)}}),t}),define("text!iconTemplate",[],function(){return'<img src="#" alt="" class="icon" data-bind="attr:{src: icon.getDataValue(), alt: alt}, css: styleClass"/>\n<img src="#" alt="" class="icon-hover" data-bind="attr:{src: icon.getDataHover(), alt: alt}, css: styleClass + \'-hover\'"/>\n<img src="#" alt="" class="icon-active" data-bind="attr:{src: icon.getDataActive(), alt: alt}, css: styleClass + \'-active\'"/>'}),define("text!rendererControl",[],function(){return"<div class=\"oj-row row-control\" data-bind=\"asyncTemplate: {name:'columnControl', foreach: $data.controls, as: 'control',pageSize: 1, afterLazyRenderAll: context.registerAsyncTemplate(context, $data.controls())},visible: !hide()\">\n\n</div>\n"}),define("text!rendererMoneyControl",[],function(){return"<!-- ko with: properties -->\n<div data-bind=\"template:{afterRender: $parent.afterRenderMoney}\">\n    <label data-bind=\"attr: {for : $parent.domIdPrefix + $parent.id}, text: label, style: {'color': formattedStyle().labelColor, 'font-size': formattedStyle().labelSize}\"></label>\n    <input data-bind=\"attr: {id: $parent.domIdPrefix + $parent.id, name: $parent.name, autofocus: autoFocus() ? 'autofocus' : null, autocomplete: autoComplete() ? 'on' : 'off', style: parsedStyle},\n                        ojComponent: {\n                                        component: 'ojInputNumber',\n                                        title: hint,\n                                        validators: $parent.validators,\n                                        readOnly: $parent.readOnly() || readonly(),\n                                        value: $parent.value,\n                                        rawValue: $parent.rawValue,\n                                        max: maxValue,\n                                        min: minValue,\n                                        step: step,\n                                        required: required,\n                                        disabled: $parent.readOnly() ? !$parent.readOnly() : disabled(),\n                                        help: {definition: help()},\n                                        converter: converterOptions()\n                                      }, handleEvents: $parent\"/>\n</div>\n<!-- /ko -->"}),define("text!rendererButtonControl",[],function(){return'<!-- ko with: properties -->\n<div>\n    <button type="button" data-bind="attr: {id: $parent.domIdPrefix + $parent.id, name: $parent.name, autofocus: autoFocus() ? \'autofocus\' : null, style: parsedStyle},\n                                    ojComponent: {component: \'ojButton\', label: label, disabled: $parent.readOnly() ||disabled()}, handleEvents: $parent" class="button-control">\n    </button>\n</div>\n<!-- /ko -->'}),define("text!rendererChecklistControl",[],function(){return"<!-- ko with: properties -->\n<label data-bind =\"attr: {for: $parent.domIdPrefix + $parent.id, id: $parent.id + '_mainLabel'}, text: label(), style: {'color': formattedStyle().labelColor, 'font-size': formattedStyle().labelSize}\"></label>\n<div data-bind = \"attr: {id: $parent.domIdPrefix + $parent.id, style: parsedStyle}, ojComponent: {\n    component: 'ojCheckboxset',\n    validators: $parent.validators,\n	invalidComponentTracker: $parent.tracker,\n	disabled: $parent.readOnly() || disabled(),\n	value: $parent.value,\n	rawValue: $parent.rawValue,\n	help: {definition: help()},\n    required: required}, handleEvents: $parent,\n    refresh: computedOptions\">\n	<!-- ko foreach: computedOptions -->\n	    <span class =\"oj-choice-row\" data-bind=\"attr: {id: $parents[1].id + '_row' + $index()}, css: {'oj-choice-row-inline': $parent.inline() === true}\">\n	      <input data-bind=\"value: value, attr:{id: $parents[1].id + '_choice' +  $index(), autofocus: $parent.autoFocus()[0] === value ? 'autofocus' : null}\"  type =\"checkbox\">\n	      <label data-bind=\"for: $parents[1].id + '_choice' + $index(), text: label, style: {'fontSize': $parent.formattedStyle().fontSize}\"></label>\n	    </span>\n	<!-- /ko -->\n</div>\n<!-- /ko -->"}),define("text!rendererCheckboxControl",[],function(){return"<!-- ko with: properties -->\n<div data-bind = \"attr: {id: $parent.domIdPrefix + $parent.id, style: parsedStyle}, ojComponent: {\n    component: 'ojCheckboxset',\n    validators: $parent.validators,\n	invalidComponentTracker: $parent.tracker,\n	disabled: $parent.readOnly() || disabled(),\n	value: $parent.checkboxValue,\n	rawValue: $parent.rawValue,\n	help: {definition: help()},\n    required: required}, handleEvents: $parent\">\n	<span class =\"oj-choice-row\" data-bind=\"attr: {id: $parent.id + '_check'}\">\n		<input data-bind=\"value: 'true', attr:{id: $parent.id + '_checked'}\"  type =\"checkbox\">\n		<label data-bind =\"attr: {for: $parent.domIdPrefix + $parent.id, id: $parent.id + '_mainLabel'}, text: label(), style: {'color': formattedStyle().labelColor, 'font-size': formattedStyle().labelSize}\"></label>\n	</span>\n</div>\n<!-- /ko -->"}),define("text!rendererDateControl",[],function(){return"<!-- ko with: properties -->\n<div data-bind=\"template:{afterRender: $parent.afterRenderDate}\">\n    <label data-bind=\"attr: {for: $parent.domIdPrefix + $parent.id}, text: label, style: {'color': formattedStyle().labelColor, 'font-size': formattedStyle().labelSize}\"></label>\n    <input data-bind=\"attr: {id: $parent.domIdPrefix + $parent.id, name: $parent.name, style: parsedStyle, autofocus: autoFocus() ? 'autofocus' : null},\n                        ojComponent: {component: 'ojInputDate',\n                            validators: $parent.validators,\n                            disabled: disabled,\n                            placeholder: placeHolder,\n                            readOnly: $parent.readOnly() || readonly(),\n                            required: required,\n							help: {definition: help()},\n                            value: $parent.value,\n                            rawValue: $parent.rawValue,\n                            max: maxValue,\n                            min: minValue,\n                            invalidComponentTracker: $parent.tracker,\n                            converter: dateConverter,\n                            datePicker: {\n                              changeMonth: 'none',\n                              changeYear: 'none'\n                            }\n                        }, handleEvents: $parent\"/>\n    </div>\n\n<!-- /ko -->"}),define("text!rendererDateTimeControl",[],function(){return"<!-- ko with: properties -->\n<div data-bind=\"template:{afterRender: $parent.afterRenderTime}\">\n    <label data-bind=\"attr: {for: $parent.domIdPrefix + $parent.id}, text: label, style: {'color': formattedStyle().labelColor, 'font-size': formattedStyle().labelSize}\"></label>\n    <input data-bind=\"attr: {id: $parent.domIdPrefix + $parent.id, name: $parent.name, style: parsedStyle, autofocus: autoFocus() ? 'autofocus' : null},\n                        ojComponent: {component: 'ojInputDateTime',\n                            validators: $parent.validators,\n                            disabled: disabled,\n                            placeholder: placeHolder,\n                            readOnly: $parent.readOnly() || readonly(),\n                            required: required,\n                            value: $parent.value,\n                            rawValue: $parent.rawValue,\n                            invalidComponentTracker: $parent.tracker,\n                            max: maxValue,\n                            min: minValue,\n                            help: {definition: help()},\n                            converter: dateConverter,\n                            datePicker: {\n                              changeMonth: 'none',\n                              changeYear: 'none'\n                            },\n                            timePicker: {\n                                timeIncrement: step()[0]\n                            }\n                        }, handleEvents: $parent\"/>\n</div>\n<!-- /ko -->"}),define("text!rendererEmailControl",[],function(){return"<!-- ko with: properties -->\n<label data-bind=\"attr: {for: $parent.domIdPrefix + $parent.id}, text: label, style: {'color': formattedStyle().labelColor, 'font-size': formattedStyle().labelSize}\"></label>\n<input data-bind=\"attr: {id: $parent.domIdPrefix + $parent.id, name: $parent.name, autocomplete: autoComplete() ? 'on' : 'off', style: parsedStyle, autofocus: autoFocus() ? 'autofocus' : null},\n					ojComponent: {\n									component: 'ojInputText',\n								 	title: hint,\n								 	placeholder: placeHolder,\n								 	validators: $parent.validators,\n								 	readOnly: $parent.readOnly() || readonly(),\n								 	required: required,\n								 	invalidComponentTracker: $parent.tracker,\n								 	value: $parent.value,\n								 	rawValue: $parent.rawValue,\n								 	disabled: disabled,\n								 	help: {definition: help()}\n								 }, handleEvents: $parent\"/>\n<!-- /ko -->"}),define("text!rendererLinkControl",[],function(){return"<!-- ko with: properties -->\r\n<div>\r\n	<a class=\"anchorLink\" data-bind=\"text: (labelVal() === '') ? defaultLabel : labelVal  , attr: {id: $parents[1].domIdPrefix + $parents[1].id, name: $parents[1].name, style: parsedStyle,\r\n		 href : ($parent.value() === '') ? undefined : $parent.value ,\r\n		 target: anchor() ? null : target},  handleEvents: $parent\" />\r\n\r\n</div>\r\n<!-- /ko -->"}),define("text!rendererMessageControl",[],function(){return"<!-- ko with: properties -->\n    <!-- ko template: {name: 'renderer' +  type()[0] + 'Template', data: {properties: $data, message: $parent.value()}} -->\n    <!-- /ko -->\n<!-- /ko -->"}),define("text!rendererMessageTypeParagraphTemplate",[],function(){return'<p data-bind="attr: {id: $parents[1].domIdPrefix + $parents[1].id, name: $parents[1].name, style: properties.parsedStyle}, text: message"></p>'}),define("text!rendererMessageTypeHeading1Template",[],function(){return'<h1 data-bind="attr: {id: $parents[1].domIdPrefix + $parents[1].id, name: $parents[1].name, style: properties.parsedStyle}, text: message"></h1>'}),define("text!rendererMessageTypeHeading2Template",[],function(){return'<h2 data-bind="attr: {id: $parents[1].domIdPrefix + $parents[1].id, name: $parents[1].name, style: properties.parsedStyle}, text: message"></h2>'}),define("text!rendererMessageTypeHeading3Template",[],function(){return'<h3 data-bind="attr: {id: $parents[1].domIdPrefix + $parents[1].id, name: $parents[1].name, style: properties.parsedStyle}, text: message"></h3>'}),define("text!rendererMessageTypeHeading4Template",[],function(){return'<h4 data-bind="attr: {id: $parents[1].domIdPrefix + $parents[1].id, name: $parents[1].name, style: properties.parsedStyle}, text: message"></h4>'}),define("text!rendererMessageTypeHeading5Template",[],function(){return'<h5 data-bind="attr: {id: $parents[1].domIdPrefix + $parents[1].id, name: $parents[1].name, style: properties.parsedStyle}, text: message"></h5>'}),define("text!rendererMessageTypeHeading6Template",[],function(){return'<h6 data-bind="attr: {id: $parents[1].domIdPrefix + $parents[1].id, name: $parents[1].name, style: properties.parsedStyle}, text: message"></h6>'}),define("text!rendererNumberControl",[],function(){return"<!-- ko with: properties -->\n<div data-bind=\"template:{afterRender: $parent.afterRenderNumber}\">\n    <label data-bind=\"attr: {for:$parent.domIdPrefix + $parent.id}, text: label, style: {'color': formattedStyle().labelColor, 'font-size': formattedStyle().labelSize}\"></label>\n    <input data-bind=\"attr: {id: $parent.domIdPrefix + $parent.id, name: $parent.name, autocomplete: autoComplete() ? 'on' : 'off', style: parsedStyle, autofocus: autoFocus() ? 'autofocus' : null},\n                        ojComponent: {\n                                        component: 'ojInputNumber',\n                                        title: hint,\n                                        validators: $parent.validators,\n                                        readOnly: $parent.readOnly() || readonly(),\n                                        required: required,\n                                        max: maxValue,\n                                        min: minValue,\n                                        step: step,\n                                        invalidComponentTracker: $parent.tracker,\n                                        value: $parent.value,\n                                        rawValue: $parent.rawValue,\n                                        disabled: $parent.readOnly() ? !$parent.readOnly() : disabled(),\n                                        help: {definition: help()}\n                                     }, handleEvents: $parent\"/>\n</div>\n<!-- /ko -->"}),define("text!rendererRadioButtonControl",[],function(){return'<!-- ko with: properties -->\n<label data-bind ="attr: {for: $parent.domIdPrefix + $parent.id, id: $parent.id + \'_mainLabel\'}, text: label, style: {\'color\': formattedStyle().labelColor, \'font-size\': formattedStyle().labelSize}"></label>\n<!-- ko if: !optionsFeed().optionsResolver().loading() -->\n<div data-bind = "attr: {id: $parent.domIdPrefix + $parent.id, style: parsedStyle}, ojComponent: {\n    component: \'ojRadioset\',\n    validators: $parent.validators,\n	disabled: $parent.readOnly() ||disabled(),\n	help: {definition: help()},\n	messagesCustom: optionsFeed().optionsResolver().customValidationMessages(),\n	value: $parent.value}, handleEvents: $parent,\n    refresh: computedOptions">\n    <!-- ko foreach: computedOptions -->\n	    <span class ="oj-choice-row" data-bind="css: {\'oj-choice-row-inline\': $parent.inline() === true}">\n	      <input data-bind="value: value, attr:{id: $parents[1].id + $index(), name: $parents[1].name, autofocus: $parent.autoFocus()[0] === value ? \'autofocus\' : null}" type ="radio">\n	      <label data-bind="for: $parents[1].id + $index(), text: label, style: {\'fontSize\': $parent.formattedStyle().fontSize}"></label>\n	    </span>\n    <!-- /ko -->\n</div>\n<!-- /ko -->\n\n<!-- ko if: optionsFeed().optionsResolver().loading -->\n<div class="loadingControl" data-bind="ojComponent:{\n	  component: \'ojProgressbar\',\n	  value: -1}">\n</div >\n<!-- /ko -->\n\n<!-- /ko -->'}),define("text!rendererSelectControl",[],function(){return"<!-- ko with: properties -->\n<div data-bind=\"template:{afterRender: $parent.afterRenderSelect}\">\n    <label data-bind=\"attr: {for: $parent.domIdPrefix + $parent.id}, text: label, style: {'color': formattedStyle().labelColor, 'font-size': formattedStyle().labelSize}\"></label>\n    <!-- ko if: !optionsFeed().optionsResolver().loading() -->\n\n    <!-- ko template: multiple() ? 'rendererMultiSelectTemplate' : 'rendererSingleSelectTemplate'-->\n    <!-- /ko -->\n    <!-- /ko -->\n</div>\n\n<!-- ko if: optionsFeed().optionsResolver().loading -->\n<div class=\"loadingControl\" data-bind=\"ojComponent:{\n	  component: 'ojProgressbar',\n	  value: -1}\">\n</div >\n<!-- /ko -->\n\n<!-- /ko -->"}),define("text!rendererSingleSelectTemplate",[],function(){return"<select data-bind=\"attr: {autofocus: autoFocus() ? 'autofocus' : null, id: $parent.domIdPrefix + $parent.id, name: $parent.name}, ojComponent: {component: 'ojSelect',\n                                    disabled: $parent.readOnly() ||disabled(),\n                                    title: hint,\n                                    help: {\n                                        definition: help()\n                                    },\n                                    placeholder: placeHolder,\n                                    required: required,\n                                    value: $parent.value,\n                                    rawValue: $parent.rawValue,\n                                    invalidComponentTracker: $parent.tracker,\n                                    messagesCustom: optionsFeed().optionsResolver().customValidationMessages(),\n                                    validators: $parent.validators}, handleEvents: $parent\">\n    <!-- ko foreach: computedOptions() -->\n        <option data-bind=\"value: value, text:label\"></option>\n    <!-- /ko -->\n</select>"}),define("text!rendererMultiSelectTemplate",[],function(){return"<select data-bind=\"attr: {autofocus: autoFocus() ? 'autofocus' : null, id: $parent.domIdPrefix + $parent.id, name: $parent.name}, ojComponent: {component: 'ojSelect',\n                                    disabled: $parent.readOnly() ||disabled(),\n                                    title: hint,\n                                    placeholder: placeHolder,\n                                    help: {\n                                        definition: help()\n                                    },\n                                    required: required,\n                                    value: $parent.value,\n                                    rawValue: $parent.rawValue,\n                                    multiple: true,\n                                    invalidComponentTracker: $parent.tracker,\n                                    messagesCustom: optionsFeed().optionsResolver().customValidationMessages(),\n                                    validators: $parent.validators}, handleEvents: $parent\">\n    <!-- ko foreach: computedOptions() -->\n        <option data-bind=\"value: value, text:label\"></option>\n    <!-- /ko -->\n</select>"}),define("text!rendererTextAreaControl",[],function(){return"<!-- ko with: properties -->\r\n<label data-bind=\"attr: {for: $parent.domIdPrefix + $parent.id}, text: label, style: {'color': formattedStyle().labelColor, 'font-size': formattedStyle().labelSize}\"></label>\r\n<textarea data-bind=\"attr: {id: $parent.domIdPrefix + $parent.id, name: $parent.name, autocomplete: autoComplete() ? 'on' : 'off', autofocus: autoFocus() ? 'autofocus' : null, rows: rows, style: parsedStyle},\r\n                    ojComponent: {\r\n                        component: 'ojTextArea',\r\n                        title: hint,\r\n                        placeholder: placeHolder,\r\n                        validators: $parent.validators,\r\n                        readOnly: $parent.readOnly() || readonly(),\r\n                        required: required,\r\n                        value: $parent.value,\r\n                        rawValue: $parent.rawValue,\r\n                        disabled: disabled,\r\n                        invalidComponentTracker: $parent.tracker,\r\n                        help: {\r\n                            definition: help()\r\n                            }\r\n                        }, handleEvents: $parent\"></textarea>\r\n<!-- /ko -->"}),define("text!rendererTextControl",[],function(){return"<!-- ko with: properties -->\r\n<label data-bind=\"attr: {for: $parent.domIdPrefix + $parent.id}, text: label, style: {'color': formattedStyle().labelColor, 'font-size': formattedStyle().labelSize}\"></label>\r\n<input data-bind=\"attr: {id: $parent.domIdPrefix + $parent.id, name: $parent.name, autofocus: autoFocus() ? 'autofocus' : null, autocomplete: autoComplete() ? 'on' : 'off', style: parsedStyle},\r\n					ojComponent: {\r\n									component: 'ojInputText',\r\n								 	title: hint,\r\n								 	placeholder: placeHolder,\r\n								 	validators: $parent.validators,\r\n								 	readOnly: $parent.readOnly() || readonly(),\r\n								 	required: required,\r\n								 	value: $parent.value,\r\n								 	disabled: disabled,\r\n								 	help: {definition: help()},\r\n								 	rawValue: $parent.rawValue,\r\n								 	invalidComponentTracker: $parent.tracker\r\n								 }, handleEvents: $parent\"/>\r\n<!-- /ko -->"}),define("text!rendererTimeControl",[],function(){return"<!-- ko with: properties -->\n<div data-bind=\"template:{afterRender: $parent.afterRenderTime}\">\n    <label data-bind=\"attr: {for: $parent.domIdPrefix + $parent.id}, text: label, style: {'color': formattedStyle().labelColor, 'font-size': formattedStyle().labelSize}\"></label>\n    <input data-bind=\"attr: {id: $parent.domIdPrefix + $parent.id, name: $parent.name, style: parsedStyle, autofocus: autoFocus() ? 'autofocus' : null},\n                        ojComponent: {component: 'ojInputTime',\n                            validators: $parent.validators,\n                            disabled: disabled,\n                            placeholder: placeHolder,\n                            readOnly: $parent.readOnly() || readonly(),\n                            required: required,\n                            value: $parent.value,\n                            rawValue: $parent.rawValue,\n                            max: maxValue,\n                            min: minValue,\n                            invalidComponentTracker: $parent.tracker,\n                            help: {definition: help()},\n                            timePicker: {\n                                timeIncrement: step()[0]\n                            }},\n                        }, handleEvents: $parent\"/>\n</div>\n<!-- /ko -->"}),define("text!rendererUrlControl",[],function(){return"<!-- ko with: properties -->\n<label data-bind=\"attr: {for: $parent.domIdPrefix + $parent.id}, text: label, style: {'color': formattedStyle().labelColor, 'font-size': formattedStyle().labelSize} \"></label>\n<input data-bind=\"attr: {id: $parent.domIdPrefix + $parent.id, name: $parent.name, autocomplete: autoComplete() ? 'on' : 'off', style: parsedStyle, autofocus: autoFocus() ? 'autofocus' : null},\n					ojComponent: {\n									component: 'ojInputText',\n								 	title: hint,\n								 	placeholder: placeHolder,\n								 	validators: $parent.validators,\n								 	readOnly: $parent.readOnly() || readonly(),\n								 	required: required,\n								 	value: $parent.value,\n								 	rawValue: $parent.rawValue,\n								 	invalidComponentTracker: $parent.tracker,\n								 	disabled: disabled,\n								 	help: {definition: help()}\n								 }, handleEvents: $parent\"/>\n<!-- /ko -->"}),define("text!rendererPhoneControl",[],function(){return"<!-- ko with: properties -->\n<label data-bind=\"attr: {for : $parent.domIdPrefix + $parent.id}, text: label, style: {'color': formattedStyle().labelColor, 'font-size': formattedStyle().labelSize}\"></label>\n<input data-bind=\"attr: {id: $parent.domIdPrefix + $parent.id, name: $parent.name, autocomplete: autoComplete() ? 'on' : 'off', style: parsedStyle, autofocus: autoFocus() ? 'autofocus' : null},\n					ojComponent: {\n									component: 'ojInputText',\n								 	placeholder: placeHolder,\n								 	title: hint,\n								 	validators: $parent.validators,\n								 	readOnly: $parent.readOnly() ||readonly(),\n								 	required: required,\n								 	value: $parent.value,\n								 	rawValue: $parent.rawValue,\n								 	disabled: disabled,\n								 	help: {definition: help()},\n								 }, handleEvents: $parent\"/>\n<!-- /ko -->\n"}),define("text!rendererImageControl",[],function(){return"<!-- ko with: properties -->\n<label class='oj-label' data-bind=\"attr: {for : $parent.domIdPrefix + $parent.id}, text: label, style: {'color': formattedStyle().labelColor, 'font-size': formattedStyle().labelSize}\"></label>\n<img class=\"image-control\" data-bind=\"attr: {\n                    id: $parent.domIdPrefix + $parent.id,\n                    name: $parent.name,\n                    style: parsedStyle,\n                    alt : alt,\n                    src: $parent.value}, handleEvents: $parent\"/>\n\n<!-- /ko -->\n\n\n"}),define("text!rendererFormReferenceControl",[],function(){return'<!-- ko with: properties -->\n    <!-- ko if: $parent.isValidReference() -->\n        <label data-bind="attr: {for: $parent.domIdPrefix + $parent.id}, text: label, style: {\'color\': formattedStyle().labelColor, \'font-size\': formattedStyle().labelSize}" class="oj-label oj-component oj-inputtext-label"></label>\n        <form-renderer data-bind="attr: {id: $parent.domIdPrefix + $parent.id}" params="value: { form: $parent.selectedPresentation(),\n            controlBindings: control.context.payloadContext.getBindingControlFor(control),\n            bindingContext: control.context.payloadContext.getFullBindingContextFor(control),\n            config: $parent.getConfig()}, formId: $parent.properties.reference().formId,\n            onValidStateChange: $parent.onValidStateChange,\n            presentationId: $parent.properties.reference().presentationId,\n            loadedCallback: $parent.loadedCallback">\n        </form-renderer>\n    <!-- /ko -->\n\n    <!-- ko if: !$parent.isValidReference() -->\n        <label data-bind="text: label, style: {\'color\': formattedStyle().labelColor, \'font-size\': formattedStyle().labelSize}" class="oj-label oj-component oj-inputtext-label"></label>\n        <div class="broken-reference">\n            <span class="broken-reference-text" data-bind="text: $parent.msg.FAILED_TO_LOAD_FORM_CONTENT, attr: {title: $parent.msg.FAILED_TO_LOAD_FORM_CONTENT}">Failed to load form content</span>\n        </div>\n    <!-- /ko -->\n<!-- /ko -->'}),define("text!rendererVideoControl",[],function(){return"<!-- ko with: properties -->\n<label class=\"oj-label\" data-bind=\"attr: {for: $parent.domIdPrefix + $parent.id}, text: label, style: {'color': formattedStyle().labelColor, 'font-size': formattedStyle().labelSize}\"></label>\n\n<div class=\"wrapper\" data-bind=\"attr: {'style': parsedStyle}\">\n    <iframe data-bind=\"attr: {\n                        id: $parent.domIdPrefix + $parent.id,\n                        name: $parent.name,\n                    allowfullscreen : allowFullScreen() ? 'allowfullscreen' : null,\n                    msallowfullscreen : allowFullScreen() ? 'msallowfullscreen' : null,\n                    mozallowfullscreen : allowFullScreen() ? 'mozallowfullscreen' : null,\n                    oallowfullscreen : allowFullScreen() ? 'oallowfullscreen' : null,\n                    webkitallowfullscreen : allowFullScreen() ? 'webkitallowfullscreen' : null,\n                    src: parsedVideoSrcLink\n                    }, handleEvents: $parent\">\n    </iframe>\n</div>\n<!-- /ko -->\n"}),define("text!rendererIdentityControl",[],function(){return"<div data-bind=\"template:{afterRender: afterRenderIdentity}\">\r\n    <label data-bind=\"attr: {for: domIdPrefix + id},\r\n                            text: properties.label,\r\n                            style: {'color': properties.formattedStyle().labelColor,\r\n                                'font-size': properties.formattedStyle().labelSize}\"></label>\r\n    <select data-bind=\"attr: {autofocus: properties.autoFocus() ? 'autofocus' : null,\r\n                            id: domIdPrefix + id, name: name}, ojComponent: ojIdentityObj, handleEvents: $parent\">\r\n    </select>\r\n</div>"}),define("text!rendererTemplate",[],function(){return'<div class="oj-row form-container" id="form-renderer-container" data-bind="subscribe:{afterRender: registerCustomEvents, beforeRemove: detachCustomListeners}, clean: rendererContext.getScope()">\n    <div class="oj-sm-12 oj-md-12 oj-col">\n        <form id="rForm" class="form-horizontal" role="form">\n            <div class="canvas-container">\n                <div class="canvas" data-bind="with: form()">\n                    <div id="creatorLoading" class="spinnerContainer" style="display: none">\n                        <div id="spinner" class="spinner">\n                            <div id="bounce1" class="spinner__bounce spinner-object spinner-object-1"></div>\n                            <div id="bounce2" class="spinner__bounce spinner-object spinner-object-2"></div>\n                            <div id="bounce3" class="spinner__bounce spinner-object spinner-object-3"></div>\n                        </div>\n                    </div>\n\n                    <div class="oj-panel js-renderer-container"\n                         data-bind="style: {\'border-color\' : properties.borderColor ? properties.borderColor() : \'null\',\n                                                                                         \'border-width\': properties.borderWidth ? properties.borderWidth() : \'null\',\n                                                                                         \'border-style\' : properties.borderStyle? properties.borderStyle() : \'null\',\n                                                                                         \'background-color\' : properties.backgroundColor? properties.backgroundColor() : \'null\'}">\n                        <!--  if: shouldRender -->\n                        <div data-bind="asyncTemplate:{name: \'rendererControl\', foreach: controls(), afterLazyRenderAll: afterRenderingRowControls.bind($data), pageSize: 1, hideLoading: true}"></div>\n                        <!-- / -->\n                    </div>\n                </div>\n            </div>\n        </form>\n    </div>\n</div>'}),define("text!rendererPanelControl",[],function(){return'<div class="oj-row panel" data-bind="attr: {style: $data.properties.parsedStyle}" style="width:100%; min-height: 50px;">\n    <label class="oj-label" data-bind="text:  $data.properties.label, visible: $data.properties.label() !== \'\'"></label>\n    <div data-bind="asyncTemplate: {name:\'rendererPanelItem\', foreach: $data.controls(), as: \'control\', pageSize: 2, afterLazyRenderAll: context.registerAsyncTemplate(context, $data.controls())}"></div>\n</div>'}),define("text!rendererSectionControl",[],function(){return'<div class="oj-row panel" style="width:100%; min-height: 50px;" data-bind="ojComponent: {component: \'ojCollapsible\',\n    expanded: $data.properties.expanded}, attr: {id: \'section-\' + id, style: $data.properties.parsedStyle}, handleEvents: $data" >\n    <div style="display: flex;" data-bind="template: { name: \'renderer\' + properties.headerType()[0] + \'Template\', data: {properties: properties, message: properties.label }}, css:{isContentInvalid:!isValid()}"></div>\n\n        <!-- ko if: $data.renderContent -->\n    <div data-bind="asyncTemplate: {name:\'rendererSectionRow\', foreach: $data.controls(), pageSize: 2, afterLazyRenderAll: $data.registerAsyncTemplate(context, $data.controls()),hideLoading: true}">\n    </div>\n    <!-- /ko -->\n</div>\n'}),define("text!rendererTableControl",[],function(){return'\n\n<div style="height: 25px; z-index: 1000" data-bind="visible: properties.canAddDelete">\n    <button type="button" class="definition-action delete remove-row" data-bind="event: {click: removeSelectedRow.bind($data), touchend: removeSelectedRow.bind($data)},\n    disable: (selectedRows().length === 0 || readOnly()), css: {disabled: (selectedRows().length === 0 || readOnly())}">\n        <actionable-icon params="{icon: removeColumnIcon, styleClass:  \'definition-img\', alt: msg.DELETE}"></actionable-icon>\n    </button>\n    <button type="button" class="definition-action add add-row" data-bind="disable: (!canAddRows() || readOnly()), css: {disabled: (!canAddRows() || readOnly())},\n    event:{click: addRow.bind($data),touchend: addRow.bind($data)}">\n        <actionable-icon params="{icon: addColumnIcon, styleClass:  \'definition-img\', alt: msg.CREATE}"></actionable-icon>\n    </button>\n</div>\n\n<div class="oj-table oj-table-container table-container" style="width: 100%; max-height: 100%; table-layout: fixed">\n    <label class="oj-label" data-bind="text:  properties.label, visible: properties.label() !== \'\', style: {\'color\': properties.formattedStyle().labelColor, \'font-size\': properties.formattedStyle().labelSize}"></label>\n    <table class="table-control table-control-renderer oj-table-element">\n        <thead class="oj-table-header">\n        <tr class="oj-table-header-row">\n            <th style="width: 10px"></th>\n            <!-- ko foreach: controls -->\n            <th class="oj-table-column-header-cell" data-bind="attr:{title: properties.label}, style: {\'width\': properties.formattedStyle().tableColumnWidth}">\n                <div class="oj-table-column-header">\n                    <div class="oj-table-column-header-text" data-bind="text: properties.label"></div>\n                </div>\n            </th>\n            <!-- /ko -->\n        </tr>\n        </thead>\n        <tbody class="oj-table-body" data-bind="css: {hideTableLabels: properties.hideLabels()}, asyncTemplate:{name:\'rendererTableRow\', foreach: dataSource, pageSize: 5, afterLazyRenderAll: context.registerAsyncTemplate(context, dataSource), hideLoading: true}">\n        </tbody>\n    </table>\n    <!-- ko if: dataSource().length === 0 -->\n    <div class="oj-table-body-row oj-table-hgrid-lines" style="padding-top: 20px">\n        <span style="padding: 5px;" data-bind="text: msg.NO_ROWS"></span>\n    </div>\n    <!-- /ko -->\n    <!-- ko if: dataSource().length > properties.maxRows() -->\n    <div class="oj-table-body-row oj-table-hgrid-lines" style="padding-top: 20px">\n        <span style="padding: 5px;" data-bind="text: StringUtils.format(msg.TOO_MANY_ROWS, properties.maxRows(), dataSource().length)"></span>\n    </div>\n    <!-- /ko -->\n</div>\n\n<script type="text/html" id="renderer-table-cell">\n    <!-- ko if: controls().length > 0 -->\n    <!-- ko with: controls()[0] -->\n    <div class="oj-row">\n        <div data-bind="attr: { id: \'renderer-control-\' + id }">\n            <div data-bind="template: {name: controlTemplate, data: $data, as: \'control\', afterRender: $data.afterRender}, visible: !properties.hide()"></div>\n        </div>\n    </div>\n    <!-- /ko -->\n    <!-- /ko -->\n</script>'}),define("text!rendererRepeatableSectionControl",[],function(){return'\n\n<div data-bind="visible: properties.canAddDelete" style="z-index: 1000">\n    <button type="button" class="definition-action delete remove-row" data-bind="event: {click: removeSelectedRow.bind($data), touchend: removeSelectedRow.bind($data)},\n    disable: (selectedRows().length === 0 || readOnly()), css: {disabled: (selectedRows().length === 0 || readOnly())}">\n        <actionable-icon params="{icon: removeColumnIcon, styleClass:  \'definition-img\', alt: msg.DELETE}"></actionable-icon>\n    </button>\n    <button type="button" class="definition-action add add-row" data-bind="disable: (!canAddRows() || readOnly()), css: {disabled: (!canAddRows() || readOnly())},\n    event: {click: addRow.bind($data), touchend: addRow.bind($data)}">\n        <actionable-icon params="{icon: addColumnIcon, styleClass:  \'definition-img\', alt: msg.CREATE}"></actionable-icon>\n    </button>\n</div>\n\n<div data-bind="asyncTemplate:{name:\'rendererRepeatableRow\', foreach: dataSource, pageSize: 1, afterLazyRenderAll: context.registerAsyncTemplate(context, dataSource), hideLoading: true}">\n</div>\n\n<!-- ko if: dataSource().length === 0 -->\n<div class="oj-panel oj-row panel repeatable-section" style="padding: 20px 20px 20px 30px;">\n    <span data-bind="text: msg.NO_ROWS"></span>\n</div>\n<!-- /ko -->\n<!-- ko if: dataSource().length > properties.maxRows() -->\n<div class="oj-panel oj-row panel repeatable-section" style="padding: 20px 20px 20px 30px;">\n    <span data-bind="text: StringUtils.format(msg.TOO_MANY_ROWS, properties.maxRows(), dataSource().length)"></span>\n</div>\n<!-- /ko -->\n'}),define("text!rendererTabControl",[],function(){return'<div class="oj-row panel" style="width:100%; min-height: 50px;"\n     data-bind="asyncTemplate: {name:\'rendererSectionRow\', foreach: $data.controls(), pageSize: 2, afterLazyRenderAll: context.registerAsyncTemplate(context, $data.controls()), hideLoading: true}">\n</div>\n\n'}),define("text!rendererTableRow",[],function(){return'<tr class="oj-table-body-row oj-table-hgrid-lines"\n    data-bind="css:{\'oj-selected\': isRowSelected},\n                attr: {id: \'renderer-control-\' + $parent.domIdPrefix + id}"> <!--oj-hover && oj-selected -->\n    <td>\n        <input type="checkbox" data-bind="checked: isRowSelected"/>\n    </td>\n    <!-- ko foreach: controls -->\n    <td class="table-cell oj-table-data-cell oj-table-vgrid-lines" data-bind="\n                css:{\'oj-selected\': $parent.isRowSelected},\n                template:{name: \'renderer-table-cell\', data: $data}"></td>\n    <!-- /ko -->\n</tr>'}),define("text!rendererRepeatableRow",[],function(){return'<div class="oj-panel oj-row panel repeatable-section" data-bind="attr: {style: $parent.properties.parsedStyle, id: \'renderer-control-\' + $parent.domIdPrefix + id},\n            css:{\'oj-selected\': isRowSelected}" style="width:100%; min-height: 50px;">\n    <span>\n        <input type="checkbox" data-bind="checked: isRowSelected"/>\n        <label class="oj-label" data-bind="text:  properties.label, visible: properties.label() !== \'\',style: {\'color\': $parent.properties.formattedStyle().labelColor, \'font-size\': $parent.properties.formattedStyle().labelSize}"></label>\n    </span>\n    <div data-bind="asyncTemplate: {name:\'rendererRepeatableItem\', foreach: $data.controls(), pageSize: 2, afterLazyRenderAll: context.registerAsyncTemplate(context, $data.controls())}"></div>\n</div>'}),define("text!columnControl",[],function(){return'<div class="oj-col" data-bind="css: $parent.columnSpan.getStyle($data, $data.selectedMedia().value)">\n    <div class="control-container-renderer" data-bind="attr: { id: \'renderer-control-\' + domIdPrefix + $data.id }">\n        <div data-bind="template: {name: $data.controlTemplate, data: $data, afterRender: $data.afterRender}, visible: !$data.properties.hide(), style: {\'text-align\' : $data.properties.formattedStyle().controlAlign}, css: $data.properties.formattedStyle().controlClassName"></div>\n    </div>\n</div>'}),define("text!rendererSectionRow",[],function(){return'<div data-bind="visible: !$data.properties.hide() || $data.properties.visible && $data.properties.visible()">\n    <div data-bind="attr: { id: \'renderer-control-\' + domIdPrefix + $data.id }">\n        <div data-bind="template: {name: $data.controlTemplate, data: $data, afterRender: $data.afterRender}, style: {\'text-align\' : $data.properties.formattedStyle().controlAlign}, css: $data.properties.formattedStyle().controlClassName"></div>\n    </div>\n</div>'}),define("text!rendererPanelItem",[],function(){return'<div data-bind="css: $parent.colStyle($data, $data.selectedMedia().value)">\n    <div data-bind="attr: { id: \'renderer-control-\' + domIdPrefix + $data.id }">\n        <div data-bind="template: {name: $data.controlTemplate, data: $data, afterRender: $data.afterRender}, visible: !$data.properties.hide(), style: {\'text-align\' : $data.properties.formattedStyle().controlAlign}, css: $data.properties.formattedStyle().controlClassName"></div>\n    </div>\n</div>'}),define("text!rendererRepeatableItem",[],function(){return'<div data-bind="css: $parents[1].colStyle($data, $data.selectedMedia().value)">\n    <div data-bind="attr: { id: \'renderer-control-\' + domIdPrefix + $data.id }">\n        <div data-bind="template: {name: $data.controlTemplate, data: $data, afterRender: $data.afterRender}, visible: !$data.properties.hide()"></div>\n    </div>\n</div>\n\n<!--TODO check how to merge with rendererPanelItem-->'}),define("text!rendererTabContainerControl",[],function(){return'<!-- tablet and desktop version -->\n<div data-bind="ifMedia: \'oj-md\'" data-bind="handleEvents: $data">\n    <div class="tab-container" data-bind="ojComponent:{component: \'ojTabs\', disabledTabs: $data.disabledTabs, \'selected\': properties.selectedPosition}">\n        <!-- tab bar -->\n        <ul>\n            <!-- ko foreach: { data: $data.controls(), as: \'control\'} -->\n                <li data-bind="visible: !control.properties.hide()">\n                    <span data-bind="text: control.properties.label, css:{isContentInvalid:!control.isValid()}"></span>\n                </li>\n            <!-- /ko -->\n        </ul>\n\n        <!-- tab contents -->\n        <!-- ko foreach: { data: $data.controls(), as: \'control\'} -->\n            <div data-bind="visible: !control.properties.hide(), style: {\'text-align\' : control.properties.formattedStyle().controlAlign}, css: control.properties.formattedStyle().controlClassName, handleEvents: control">\n                <!-- ko if: control.rendered -->\n                <div data-bind="template: {name: control.controlTemplate, data: control, afterRender: control.afterRender}"></div>\n                <!-- /ko -->\n            </div>\n        <!-- /ko -->\n    </div>\n</div>\n\n<!-- mobile version (accordion) -->\n<div data-bind="ifMedia: \'oj-sm-only\'">\n    <div class="tab-container" data-bind="ojComponent: {component: \'ojAccordion\', \'expanded\': properties.selectedPositionAsArrayComputed}">\n        <!-- ko foreach: { data: $data.controls(), as: \'control\'} -->\n        <div data-bind="visible: !control.properties.hide(), ojComponent: {component: \'ojCollapsible\', disabled: control.properties.disabled}">\n            <span data-bind="text: control.properties.label"></span>\n            <div data-bind="style: {\'text-align\' : control.properties.formattedStyle().controlAlign}, css: control.properties.formattedStyle().controlClassName">\n                <!-- ko if: control.rendered -->\n                <div data-bind="template: {name: control.controlTemplate, data: control, afterRender: control.afterRender}"></div>\n                <!-- /ko -->\n            </div>\n        </div>\n        <!-- /ko -->\n    </div>\n</div>'}),define("ojidentity",["require","ojs/ojcore","jquery","ojs/ojeditablevalue"],function(e){var t=e("ojs/ojcore"),n=e("jquery");e("ojs/ojeditablevalue");var r={GENERATED_OPTIONS_SELECTOR:"oj-select-options-generated",KEY:{TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isControl:function(e){switch(e.which){case r.KEY.SHIFT:case r.KEY.CTRL:case r.KEY.ALT:return!0}return!!e.metaKey||!!e.ctrlKey},isFunctionKey:function(e){return(e=e.which?e.which:e)>=112&&e<=123}},DEFAULT_QUERY_DELAY:70,ValueChangeTriggerTypes:{ENTER_PRESSED:"enter_pressed",OPTION_SELECTED:"option_selected",OPTION_REMOVED:"option_removed",BLUR:"blur",SEARCH_ICON_CLICKED:"search_icon_clicked"},lastMousePosition:{x:0,y:0},nextUid:function(){var e=1;return function(){return e++}}(),scrollBarDimensions:null,each2:function(e,t){for(var r=n(n.isFunction(e[0])?e[0]():e[0]),i=-1,s=e.length;++i<s&&(r.context=r[0]=n.isFunction(e[0])?e[i]():e[i])&&!1!==t.call(r[0],i,r););return e},measureScrollbar:function(){var e=n("<div class='oj-listbox-measure-scrollbar'></div>");e.appendTo("body");var t={width:e.width()-e[0].clientWidth,height:e.height()-e[0].clientHeight};return e.remove(),t},splitVal:function(e,t){var r,i,s;if(null===e||e.length<1)return[];for(r=e.split(t),i=0,s=r.length;i<s;i+=1)r[i]=n.trim(r[i]);return r},getSideBorderPadding:function(e){return e.outerWidth(!1)-e.width()},installKeyUpChangeEvent:function(e){var t="keyup-change-value";e.on("keydown",function(){void 0===n.data(e,t)&&n.data(e,t,e.val())}),e.on("keyup",function(i){if(i.which===r.KEY.ENTER)return void i.stopPropagation();var s=n.data(e,t);void 0!==s&&e.val()!==s&&(n.removeData(e,t),e.trigger("keyup-change"))})},installFilteredMouseMove:function(e){e.on("mousemove",function(e){var t=r.lastMousePosition;void 0!==t&&t.x===e.pageX&&t.y===e.pageY||(n(e.target).trigger("mousemove-filtered",e),r.lastMousePosition.x=e.pageX,r.lastMousePosition.y=e.pageY)})},thunk:function(e){var t,n=!1;return function(){return!1===n&&(t=e(),n=!0),t}},_focus:function(e){e[0]!==document.activeElement&&window.setTimeout(function(){var t,n=e[0],r=e.val().length;e.focus(),e.is(":visible")&&n===document.activeElement&&(n.setSelectionRange?n.setSelectionRange(r,r):n.createTextRange&&(t=n.createTextRange(),t.collapse(!1),t.select()))},40)},getCursorInfo:function(e){e=n(e)[0];var t=0,r=0;if("selectionStart"in e)t=e.selectionStart,r=e.selectionEnd-t;else if("selection"in document){e.focus();var i=document.selection.createRange();r=document.selection.createRange().text.length,i.moveStart("character",-e.value.length),t=i.text.length-r}return{offset:t,length:r}},killEvent:function(e){e.preventDefault(),e.stopPropagation()},killEventImmediately:function(e){e.preventDefault(),e.stopImmediatePropagation()},defaultEscapeMarkup:function(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};return String(e).replace(/[&<>"'\\]/g,function(e){return t[e]})},local:function(e,t){var i,s,o=e,u=function(e){return""+e.label};n.isArray(o)&&(s=o,o={results:s}),!1===n.isFunction(o)&&(s=o,o=function(){return s});var a=o();return a&&a.text&&(u=a.text,n.isFunction(u)||(i=a.text,u=function(e){return e[i]})),function(e){var i=e.term,s={results:[]};if(""===i&&!t)return void e.callback(o());o()&&r.each2(n(o().results),function(n,i){r._processData(e,i,s.results,t,!0,u)}),e.callback(s)}},cleanupResults:function(e){e.children().remove(),e.removeClass("oj-listbox-result-with-children")},remote:function(e,i){return function(s){var o={},u=this,a=function(e){var t={results:[]};u.inputSearch=o.searchPattern,r.each2(n(e),function(e,n){r._processData(s,n,t.results,i,!1)}),s.callback(t)};if(s.value)a(s.value);else{var f=n.trim(s.term);if(f&&(o.searchPattern="*"!==f?"*"+s.term+"*":f),n.extend(!0,o,{scope:this.defaultScope}),!o.searchPattern)return void a(this.results||[]);this.inputSearch&&this.inputSearch===o.searchPattern?a(this.results):(clearTimeout(this.queryTimer),this.queryTimer=setTimeout(function(){u.loading.hasClass("identity-show-inline")||u.loading.addClass("identity-show-inline"),e(o).then(function(e){u.results=e&&Array.isArray(e)?e:[],a(u.results),u.loading.removeClass("identity-show-inline"),u.ojContext._setOption("messagesCustom",[])}).catch(function(e){u.loading.removeClass("identity-show-inline"),u.ojContext._setOption("messagesCustom",[new t.Message(e)])})},1e3))}}},_processData:function(e,t,i,s,o,u){var a,f,l={};if(n.extend(!0,l,t[0]),t[0].label&&s&&s.label&&"label"!==s.label&&(l[s.label]=t[0].label,delete l.label),t[0].value&&s&&s.value&&"value"!==s.label&&(l[s.value]=t[0].value,delete l.value),!l.children&&s&&s.children&&(l.children=l[s.children],delete l[s.children]),l.children){a={};for(f in l)l.hasOwnProperty(f)&&(a[f]=l[f]);a.children=[],r.each2(n(l.children),function(t,n){r._processData(e,n,a.children,s&&s.childKeys?s.childKeys:null,o,u)}),(!o||a.children.length||e.matcher(e.term,a[s.label],l))&&i.push(a)}else o&&!e.matcher(e.term,l[s.label],l)||i.push(l)},clazz:function(e,r){var i=function(){};return t.Object.createSubclass(i,e,""),i.prototype=n.extend(i.prototype,r),i},LAST_QUERY_RESULT:"last-query-result",getLastQueryResult:function(e){return n.data(e.container,e._classNm+"-"+r.LAST_QUERY_RESULT)},saveLastQueryResult:function(e,t){n.data(e.container,e._classNm+"-"+r.LAST_QUERY_RESULT,t)}},i=r.clazz(Object,{_bind:function(e){var t=this;return function(){e.apply(t,arguments)}},_init:function(e){var t,i=this._classNm,s=this._elemNm,o=".oj-listbox-results";this.ojContext=e.ojContext,this.opts=e=this._prepareOpts(e),this.id=e.id,this.headerInitialized=!1,void 0!==e.element.data(s)&&null!==e.element.data(s)&&e.element.data(s)._destroy(),this.container=this._createContainer();var u=this.opts.rootAttributes;this.containerId=u&&u.id?u.id:"ojChoiceId_"+(e.element.attr("id")||"autogen"+r.nextUid()),this.containerSelector="#"+this.containerId.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.body=r.thunk(function(){return n("#__oj_zorder_container").length?n("#__oj_zorder_container"):e.element.closest("body")}),this.container.attr("style",e.element.attr("style")),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.showScopeFilter&&(this.container.addClass("hasFilter"),this.container.find(".oj-identity-filter").addClass("showFilter")),this.opts.element.data(s,this).attr("tabindex","-1").before(this.container),this.container.data(s,this),this.dropdown=this.container.find(".oj-listbox-drop"),this.dropdown.data("ojlistbox",this),this.opts.showScopeFilter&&this.container.on("click",".oj-identity-filter",n.proxy(this._showFilter,this)),this.opts.loading=this.container.find(".oj-identity-loading-container");var a=this.containerId;if(this.dropdown.attr("data-oj-containerid",a),this.results=this.container.find(o),this.results.on("click",r.killEvent),e.list&&n("#"+e.list).is("ul")){var f=n("#"+e.list);this.dropdownListParent=f.parent(),f.addClass("oj-listbox-results").attr("role","listbox"),this.results.replaceWith(f),this.results=this.container.find(o),this.results.css("display","")}t="oj-select"==i?this.container.find("input.oj-listbox-input"):this.container.find("input."+i+"-input"),this.search=t,this.queryCount=0,this.resultsPage=0,this.context=null,this._initContainer(),this.container.on("click",r.killEvent),r.installFilteredMouseMove(this.results),this.dropdown.on("mousemove-filtered touchstart touchmove touchend",o,this._bind(this._highlightUnderEvent)),n(this.container).on("change","."+i+"-input",function(e){e.stopPropagation()}),n(this.dropdown).on("change","."+i+"-input",function(e){e.stopPropagation()});var l=this;r.installKeyUpChangeEvent(t),t.on("keyup-change input paste",this._bind(this._updateResults)),t.on("focus",function(){t.addClass(i+"-focused"),"oj-select"!==i&&l.container.addClass("oj-focus")}),t.on("blur",function(){t.removeClass(i+"-focused"),"oj-select"!==i&&l.container.removeClass("oj-focus")}),this.dropdown.on("mouseup",o,this._bind(function(e){var t=n(e.target);if(this._selectionEvent=e,t.closest(".oj-listbox-result-selectable").length>0)if(this.opts.multiple&&this.opts.selectAll&&t.hasClass("oj-identity-checkbox")){var i=this.getVal(),s=t.closest(".oj-listbox-result").data(this._elemNm),o=i?i.slice(0):[],u={optionMetadata:{trigger:r.ValueChangeTriggerTypes.OPTION_SELECTED}};t.hasClass("selected")?(o.splice(this.opts.indexOf.call(o,s),1),u.optionMetadata.trigger=r.ValueChangeTriggerTypes.OPTION_REMOVED,t.attr("checked",!1)):o.push(s),this.opts.contains.call(this.opts.results,o)?this.opts.checkAll.addClass("selected"):this.opts.checkAll.removeClass("selected"),t.toggleClass("selected"),this.setVal(o,e,u)}else this._highlightUnderEvent(e),this._selectHighlighted(null,e);else if(this.opts.multiple&&this.opts.selectAll&&t.hasClass("oj-identity-checkbox")){var a=t.parent().nextAll().find(".oj-identity-checkbox"),f=this,i=this.getVal(),o=i?i.slice(0):[],u={optionMetadata:{trigger:r.ValueChangeTriggerTypes.OPTION_SELECTED}};t.toggleClass("selected");var l=t.hasClass("selected");a.each(function(){var e=n(this.parentNode).data(f._elemNm);l?o.push(e):o.splice(f.opts.indexOf.call(o,e),1)}),l?a.addClass("selected"):(u.optionMetadata.trigger=r.ValueChangeTriggerTypes.OPTION_REMOVED,t.attr("checked",!1),a.removeClass("selected")),this.setVal(o,e,u)}})),this.dropdown.on("click mouseup mousedown",function(e){e.stopPropagation()}),n.isFunction(this.opts.initSelection)&&this._initSelection();var c=e.element.prop("disabled");void 0===c&&(c=!1),this._enable(!c);var h=e.element.prop("readonly");void 0===h&&(h=!1),this._readonly(h),r.scrollBarDimensions=r.scrollBarDimensions||r.measureScrollbar(),this.autofocus=e.element.prop("autofocus"),e.element.prop("autofocus",!1),this.autofocus&&this._focus()},_showFilter:function(e){var t=e.target;if(e=n.Event(e),this._enabled){if(!this.filterDropdown){var i=this,s=this.opts.scopesOptions||[],o=r.nextUid();this.filterDropdown=n('<div class="oj-identity-filter-drop"></div>'),this.filterDropdown.appendTo(document.body),this.filterDropdown.ojPopup(),this.filterDropdown.ojPopup("option",{tail:"none",modality:"modeless"});for(var u=0,a=s.length;u<a;u++){var f=n('<div><input type="radio" name="oj-identity-'+o+'" value="'+s[u].value+'" '+(s[u].value==i.opts.defaultScope?"checked ":"")+"/> "+s[u].label+"</div>");this.filterDropdown.append(f)}this.filterDropdown.on("click","input",function(){i.opts.defaultScope=n(this).val()})}this.filterDropdown.ojPopup("open",t)}},_clickAwayHandler:function(e){var t,r=this.dropdown;n(e.target).closest(r).length||n(e.target).closest("#"+r.attr("data-oj-containerid")).length||r.length>0&&(t=r.data("ojlistbox"))&&t.close(e)},_surrogateRemoveHandler:function(){this.dropdown&&this.dropdown.remove()},_destroy:function(){var e=this._closeDelayTimer;isNaN(e)||(delete this._closeDelayTimer,window.clearTimeout(e));var t=this.opts.element,n=t.data(this._elemNm);this.close(),this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.opts.list&&this.results&&(this._cleanupList(this.results),this.dropdownListParent&&this.dropdownListParent.append(this.results)),void 0!==n&&(n.container.remove(),n.dropdown.remove(),t.removeAttr("aria-hidden").removeData(this._elemNm).off("."+this._classNm).prop("autofocus",this.autofocus||!1),this.elementTabIndex?t.attr({tabindex:this.elementTabIndex}):t.removeAttr("tabindex"),t.show())},_cleanupList:function(e){if(e&&e.is("ul")){e.removeClass("oj-listbox-results oj-listbox-result-sub"),e.removeAttr("role");for(var t=e.children().length-1;t>=0;t--)this._cleanupList(n(e.children()[t]))}else if(e.is("li")){(e.hasClass("oj-listbox-placeholder")||e.hasClass("oj-listbox-no-results"))&&e.remove(),e.attr("class")&&e.attr("class",e.attr("class").replace(/\oj-listbox-\S+/g,""));var r=e.children(".oj-listbox-result-label");r&&r.contents().unwrap(),"none"==e.css("display")&&e.css("display",""),this._cleanupList(e.children("ul"))}},_optionToData:function(e){if(e.is("option"))return{value:e.prop("value"),label:e.text(),element:e.get(),css:e.attr("class"),disabled:e.prop("disabled"),locked:"locked"===e.attr("locked")||!0===e.data("locked")};if(e.is("optgroup"))return{label:e.attr("label"),children:[],element:e.get(),css:e.attr("class")};if(e.is("li")){var t,n=null,r=e.children();return r&&r.length>0&&r.is("ul")?(t=e.attr("oj-data-label")?e.attr("oj-data-label"):e.clone().children().remove().end().text().trim(),n=[]):t=e.attr("oj-data-label")?e.attr("oj-data-label"):e.text().trim(),{value:e.attr("oj-data-value"),label:t,element:e.get(),css:e.attr("class"),children:n}}},_prepareOpts:function(e){var t,i,o=this;e.options&&Array.isArray(e.options)&&e.optionsKeys&&(e.options=n.extend(!0,[],e.options)),t=e.element;var u=t.get(0).tagName.toLowerCase();return"input"===u&&t.attr("list")?this.datalist=i=n("#"+t.attr("list")):"select"===u&&t.children().length>0?this.datalist=i=t:e.list&&(this.datalist=i=n("#"+e.list)),e=n.extend({},{populateResults:function(t,i,s,o){var u,a=n.proxy(this.opts.id,this),f=this,l=this.opts.optionRenderer;"function"!=typeof l&&(l=null),(u=function(t,i,o,c,h){var p,d,v,m,g,y,b,w,E=function(e,t){if(t.children&&t.children.length>0){var r=t.element&&n(t.element[0]).is("li")&&n(t.element[0]).children("ul"),i=r?n(t.element[0]).children("ul"):n("<ul></ul>");i.hasClass("oj-listbox-result-sub")||i.addClass("oj-listbox-result-sub"),u(t,t.children,i,c+1,!1),r||e.append(i)}},S=function(e,t,n){function r(e,n){var i=0;if(3===e.nodeType){var s=e.data.toUpperCase().indexOf(n);if(s>=0){var o=document.createElement("span");o.className=t;var u=e.splitText(s),a=(u.splitText(n.length),u.cloneNode(!0));o.appendChild(a),u.parentNode.replaceChild(o,u),i=1}}else if(1===e.nodeType&&e.childNodes&&!/(script|style)/i.test(e.tagName))for(var f=0;f<e.childNodes.length;++f)f+=r(e.childNodes[f],n);return i}e.length&&n&&n.length&&e.each(function(){r(this,n.toUpperCase())})},x=function(n,r){if(l){var i={index:p,depth:c,leaf:!r.children,parent:t,data:r,component:e.ojContext,parentElement:n.get(0)},o=l.call(e.ojContext,i);null!==o&&(null===o.parentNode||o.parentNode instanceof DocumentFragment)&&n.appendChild(o)}else void 0!==(w=e.formatResult(r))&&n.text(w);if(!0!==s.initial){var u=n.find(".oj-listbox-highlighter-section");u.length||(u=n),S(u,"oj-listbox-highlighter",s.term)}},T=function(t){e._placeholderData||(v={},v[e.optionsKeys.label]=t,e.optionsKeys.label!==e.optionsKeys.value&&(v[e.optionsKeys.value]=""),e._placeholderData=v),y=n("<li></li>"),y.addClass("oj-listbox-placeholder oj-listbox-results-depth-0 oj-listbox-result oj-listbox-result-selectable"),y.attr("role","presentation"),b=n(document.createElement("div")),b.addClass("oj-listbox-result-label"),b.attr("id","oj-listbox-result-label-"+r.nextUid()),b.attr("role","option"),b.text(e._placeholderData[e.optionsKeys.label]),y.append(b),y.data(f._elemNm,e._placeholderData),o.prepend(y)},N=f._getPlaceholder(),C=f.getVal();C&&0!==C.length&&(h&&N&&!s.term?T(N):e.multiple||(T(""),e.placeholder=""));var L=e.multiple&&e.selectAll;if(e.results=i,C=f.getVal(),L){var A=n("<li class='oj-listbox-results-depth-0' role='presentation'></li>"),O=r.nextUid(),M=n(document.createElement("input")),_=!1;C&&Array.isArray(C)&&(_=e.contains.call(i,C));var D=n(document.createElement("span"));D.addClass("oj-listbox-result-label"),D.attr("id","oj-listbox-result-label-"+O),D.attr("role","option"),D.text(e.selectLabel),M.attr({id:"oj-checkbox-"+O,"class":"oj-identity-checkbox",type:"checkbox",checked:_});var P=n(document.createElement("label"));P.attr({"for":"oj-checkbox-"+O,"class":"oj-identity-checkbox"+(_?" selected":""),"aria-label":_?"selected":"unselected"}),e.checkAll=P,A.append([P,D]),o.prepend(A)}var H=!!e.resultTemplateKeys&&!!Array.isArray(e.resultTemplateKeys);for(p=0,d=i.length;p<d;p+=1){v=i[p],g=!0===v.disabled,m=!g&&void 0!==a(v);var B=v.element&&n(v.element[0]).is("li");if(y=n(B?v.element[0]:"<li></li>"),y.hasClass("oj-listbox-result"))v.children&&v.children.length>0&&E(y,v),n(v.element[0]).css("display","");else{var F=r.nextUid();if(y.addClass("oj-listbox-results-depth-"+c),y.addClass("oj-listbox-result"),y.addClass(m?"oj-listbox-result-selectable":"oj-listbox-result-unselectable"),g&&y.addClass("oj-disabled"),v.children&&y.addClass("oj-listbox-result-with-children"),y.attr("role","presentation"),L){var _=!1;C&&Array.isArray(C)&&(_=-1!==e.indexOf.call(C,v));var P=n(document.createElement("label"));P.attr({"for":"oj-checkbox-"+F,"class":"oj-identity-checkbox"+(_?" selected":""),"aria-label":_?"selected":"unselected"}),y.append(P)}var I=v.identityType?v.identityType:"";if(I||(I=v.type||""),I){var q=n(document.createElement("span"));q.attr("class","oj-identity-type "+I),y.append(q)}if(b=n(document.createElement("div")),b.addClass("oj-listbox-result-label"),b.attr("id","oj-listbox-result-label-"+F),b.attr("role","option"),g&&b.attr("aria-disabled","true"),!B){if(x(b,v),H)for(var R=e.resultTemplateKeys,U=0,z=R.length;U<z;U++)v.hasOwnProperty(R[U])&&v[R[U]]&&b.append([n("<span> | </span>"),n("<span class='info'> "+v[R[U]]+"</span>")]);else v.email&&b.append([n("<span> | <span>"),n("<span class='info'> "+v.email+"</span>")]);b[0].title=b.text(),y.append(b)}v.children&&v.children.length>0&&E(y,v),y.data(f._elemNm,v),B?(n(v.element[0]).contents().filter(function(){return"UL"!==this.tagName}).wrapAll(b),n(v.element[0]).css("display","")):o.append(y)}}})(null,i,t,0,o)}},s,e),e.id=function(e){return e[this.opts.optionsKeys.value]},e.formatResult=function(e){return isNaN(e[this.optionsKeys.label])?e[this.optionsKeys.label]:this.ojContext._formatValue(e[this.optionsKeys.label])},e.formatSelection=function(e){return e&&e[this.optionsKeys.label]?isNaN(e[this.optionsKeys.label])?e[this.optionsKeys.label]:this.ojContext._formatValue(e[this.optionsKeys.label]):void 0},"select"!==u&&null!==e.manageNewEntry&&(e.manageNewEntry=function(t){var r={};return r[e.optionsKeys.value]=r[e.optionsKeys.label]=n.trim(t),r}),i?e.query=this._bind(function(e){var t,n,s={results:[],more:!1},u=e.term;n=function(t,i){var s,a=t.children()&&t.children().length>0&&t.children().is("ul");t.is("option")||t.is("li")&&!a?e.matcher(u,t.text(),t)&&i.push(o._optionToData(t)):(t.is("optgroup")||t.is("li")&&a)&&(s=o._optionToData(t),r.each2(t.is("optgroup")?t.children():t.children("ul").children(),function(e,t){n(t,s.children)}),s.children.length>0&&i.push(s))},t=i.children(),void 0!==this._getPlaceholder()&&t.length>0&&""==t.first().attr("value")&&(t=t.slice(1)),r.each2(t,function(e,t){n(t,s.results)}),e.callback(s)}):"options"in e&&(n.isFunction(e.options)?e.query=r.remote(e.options,e.optionsKeys?e.optionsKeys:null):e.query=r.local(e.options,e.optionsKeys?e.optionsKeys:null)),e},_createHeader:function(){var e=this.opts.element.find(".oj-listbox-header");if(e.length){this.header=n("<li>",{"class":"oj-listbox-result-header oj-listbox-result-unselectable",role:"presentation"}),this.header.append(e.children()),this._initializeHeaderItems();var t=n("<ul>",{"class":"oj-listbox-results-with-header",role:"listbox"});t.append(this.header),t.appendTo(this.results.parent());var r=n("<li>",{role:"presentation"});t.append(r),this.results.attr("role","presentation"),this.results.appendTo(r)}this.headerInitialized=!0},_initializeHeaderItems:function(){this.headerItems=this.header.find("li[role='option'], li:not([role])"),this.headerItems.uniqueId(),this.header.find("ul").attr("role","presentation"),this.header.find("li:not([role])").attr("role","option"),this.header.find("a, input, select, textarea, button, object, .oj-component-initnode").each(function(){n(this).attr("tabIndex",-1)})},_isHeaderItem:function(e){var t=!1;return this.headerItems.each(function(){if(n(this).attr("id")===e)return t=!0,!1}),t},_getNextHeaderItem:function(e){if(!this.headerItems)return null;if(!e)return this.headerItems.first();var t=!1,r=null;return this.headerItems.each(function(){if(t)return r=n(this),!1;t=n(this).attr("id")===e}),r},_getPreviousHeaderItem:function(e){if(!this.headerItems)return null;var t=null;return this.headerItems.each(function(){if(n(this).attr("id")===e)return!1;t=n(this)}),t},_setFocusOnHeaderItem:function(e){var t=e.find(".oj-component .oj-enabled").first();0===t.length&&(t=e.find("a, input, select, textarea, button, object, .oj-component-initnode").first(),0===t.length&&(t=e.children().first())),t&&t.addClass("oj-focus")},_removeHighlightFromHeaderItems:function(){this.headerItems&&this.headerItems.find(".oj-focus").removeClass("oj-focus")},_triggerSelect:function(e){var t=n.Event(this._elemNm+"-selecting",{val:this.id(e),object:e});return this.opts.element.trigger(t),!t.isDefaultPrevented()},_isInterfaceEnabled:function(){return!0===this.enabledInterface},_enableInterface:function(){var e=this._enabled&&!this._readonly,t=!e;return e!==this.enabledInterface&&(this.container.toggleClass("oj-disabled",t),this.close(),this.enabledInterface=e,!0)},_enable:function(e){void 0===e&&(e=!0),this._enabled!==e&&(this._enabled=e,this.opts.element.prop("disabled",!e),this.container.toggleClass("oj-enabled",e),this.container.find(".oj-identity-filter").toggleClass("disabled-filter",!e),this._enableInterface())},_disable:function(){this._enable(!1)},_readonly:function(e){return void 0===e&&(e=!1),this._readonly!==e&&(this._readonly=e,this.opts.element.prop("readonly",e),this._enableInterface(),!0)},_opened:function(){return this.container.hasClass("oj-listbox-dropdown-open")},_usingHandler:function(e,t){if(d(t))return void (this._closeDelayTimer=window.setTimeout(n.proxy(this.close,this),1));var r=this.container,i=t.element.element;i.css(e),"bottom"===t.vertical?(r.addClass("oj-listbox-drop-above"),i.addClass("oj-listbox-drop-above")):(r.removeClass("oj-listbox-drop-above"),i.removeClass("oj-listbox-drop-above"))},_getDropdownPosition:function(){var e={my:"start top",at:"start bottom",of:this.container.children().first(),collision:"flip",using:n.proxy(this._usingHandler,this)},t="rtl"===c();return v(e,t)},_positionDropdown:function(){this.dropdown.css("width",this.container.outerWidth()),this.dropdown.position(this._getDropdownPosition())},_shouldOpen:function(e){if(this._opened())return n.isFunction(this.opts.options);if(!1===this._enabled||!0===this._readonly)return!1;var t={component:this.opts.element};return this.ojContext._trigger("beforeExpand",e,t)},_clearDropdownAlignmentPreference:function(){this.container.removeClass("oj-listbox-drop-above"),this.dropdown.removeClass("oj-listbox-drop-above")},open:function(e,t){return!!this._shouldOpen(e)&&(this._opening(e,t),!0)},_opening:function(){this.headerInitialized||this._createHeader(),this.container.addClass("oj-listbox-dropdown-open")},_showDropDown:function(){if(this._opened()){this.windowEventBind=n.proxy(this._positionDropdown,this),this.documentEventBind=n.proxy(this._clickAwayHandler,this),window.addEventListener("resize",this.windowEventBind,!0),window.addEventListener("scroll",this.windowEventBind,!0),document.documentElement.addEventListener("mousedown",this.documentEventBind,!0);if("true"!==this._getActiveContainer().attr("aria-expanded")){this._clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body().children().last()[0]&&this.dropdown.detach().appendTo(this.body()),this.dropdown.appendTo(this.body()),this.header&&(this.dropdown.find(".oj-listbox-results-with-header").prepend(this.header),this.header.show()),this.dropdown.position(this._getDropdownPosition()).show(),n("#oj-listbox-drop").removeAttr("id"),this.dropdown.attr("id","oj-listbox-drop");var e=this.containerId;this.dropdown.attr("data-oj-containerid",e),this._positionDropdown(),this._getActiveContainer().attr("aria-expanded",!0)}}},close:function(e){if(this._opened()){if(this._selectionEvent&&this._selectionEvent.target&&n(this._selectionEvent.target).hasClass("oj-identity-checkbox"))return void (this._selectionEvent=null);this.container.removeClass("oj-listbox-dropdown-open");var t=this._getActiveContainer().attr("aria-expanded");if(t&&"false"!==t){window.removeEventListener("resize",this.windowEventBind,!0),window.removeEventListener("scroll",this.windowEventBind,!0),document.documentElement.removeEventListener("mousedown",this.documentEventBind,!0);var r=this.containerId,i="scroll."+r,s="resize."+r,o="orientationchange."+r;this.container.parents().add(window).each(function(){n(this).off(i).off(s).off(o)}),this._clearDropdownAlignmentPreference(),this.header&&(this.header.hide(),this.header.appendTo(this.container)),this.dropdown.removeAttr("data-oj-containerid"),this.dropdown.removeAttr("id"),this.opts.list?this._removeHighlight():(this.dropdown.detach(),this.results.empty()),this._getActiveContainer().attr("aria-expanded",!1),this.ojContext._IsRequired()&&this.ojContext.validate()}}},_clearSearch:function(){},_ensureHighlightVisible:function(){var e,t,r,i,s,o,u,a=this.results;if(!((t=this._highlight())<0)){if(0==t)return void a.scrollTop(0);e=this._findHighlightableChoices().find(".oj-listbox-result-label"),r=n(e[t]),i=r.offset().top+r.outerHeight(!0),t===e.length-1&&(u=a.find("li.oj-listbox-more-results"),u.length>0&&(i=u.offset().top+u.outerHeight(!0))),s=a.offset().top+a.outerHeight(!0),i>s&&a.scrollTop(a.scrollTop()+(i-s)),o=r.offset().top-a.offset().top,o<0&&"none"!=r.css("display")&&a.scrollTop(a.scrollTop()+o)}},_findHighlightableChoices:function(){return this.results.find(".oj-listbox-result-selectable:not(.oj-disabled, .oj-selected)").filter(function(){return"none"!=n(this).css("display")})},_moveHighlight:function(e){var t=this._findHighlightableChoices(),r=this._highlight();if(this.header&&(r<=0||r===t.length-1)){var i=this._getActiveContainer().attr("aria-activedescendant"),s=this._isHeaderItem(i);s||(i=null);var o=null;if(e>0&&(r<0||r===t.length-1)?o=this._getNextHeaderItem(i):e<0&&(s&&r<0||0===r)&&(o=this._getPreviousHeaderItem(i)),o)return this._removeHighlight(),this._setFocusOnHeaderItem(o),void this._getActiveContainer().attr("aria-activedescendant",o.attr("id"));s&&e<0&&(r=0)}for(;r>=-1&&r<t.length;){r+=e,r==t.length?r=0:-1==r&&(r=t.length-1);var u=n(t[r]);if(u.hasClass("oj-listbox-result-selectable")&&!u.hasClass("oj-disabled")&&!u.hasClass("oj-selected")){this._highlight(r);break}}},_highlight:function(e){var t,r=this._findHighlightableChoices();if(0===arguments.length){var i=r.filter(".oj-hover");return i.length||(i=r.children(".oj-hover").closest(".oj-listbox-result")),r.get().indexOf(i[0])}e>=r.length&&(e=r.length-1),e<0&&(e=0),this._removeHighlight(),t=n(r[e]),t.hasClass("oj-listbox-result-with-children")?t.children(".oj-listbox-result-label").addClass("oj-hover"):t.addClass("oj-hover"),this._getActiveContainer().attr("aria-activedescendant",t.find(".oj-listbox-result-label").attr("id")),this._ensureHighlightVisible()},_removeHighlight:function(){this.results.find(".oj-hover").removeClass("oj-hover"),this._removeHighlightFromHeaderItems()},_highlightUnderEvent:function(e){var t=n(e.target).closest(".oj-listbox-result-selectable");if(t.length>0&&!t.is(".oj-hover")){var r=this._findHighlightableChoices();this._highlight(r.index(t))}else 0==t.length&&this._removeHighlight()},_updateResults:function(e){var t=this.search,i=this,s=t.val(),o=n.data(this.container,this._classNm+"-last-term");if((!0===e||!o||s!==o)&&(o||s||!e||"input"!==e.type)){n.data(this.container,this._classNm+"-last-term",s);var u=this.opts.minLength||0;s.length>=u?(clearTimeout(this.queryTimer),e&&!0!==e?this.queryTimer=setTimeout(function(){i._queryResults(e)},r.DEFAULT_QUERY_DELAY):this._queryResults(e)):this.close()}},_queryResults:function(e){function t(){if(a._positionDropdown(),a.header&&a.headerItems.length){var e=a._findHighlightableChoices(),t=a.headerItems.length+e.length;if(a.headerItems.attr("aria-setsize",t),e.length){var n=e.children("[role='option']");n.attr("aria-setsize",t),n.first().attr("aria-posinset",a.headerItems.length+1)}}}var i,s=this.search,o=this.results,u=this.opts,a=this,f=s.val();if((u.minLength||0)>f.length)return void this.close();this.open(null,!0),++this.queryCount,this._removeHighlight(),i=this.search.val(),f=void 0!==i&&null!==i&&(!0!==e||u.inputSearch||u.minLength>0)?i:"",this.resultsPage=1,u.query({element:u.element,term:f,page:this.resultsPage,context:null,matcher:u.matcher,callback:this._bind(function(i){if(this._opened())if(this.context=i&&void 0!==i.context?i.context:null,i&&0!==i.results.length)r.saveLastQueryResult(this,i.results),this._showDropDown(),this._preprocessResults(o),a.opts.populateResults.call(this,o,i.results,{term:s.val(),page:this.resultsPage,context:null,initial:e},this._showPlaceholder()),this._postprocessResults(i,e),t();else if("oj-select"===this._classNm&&!0!==this.opts.multiple||this.opts.inputSearch&&""!==n.trim(this.opts.inputSearch)||this.header){var f=n("<li>");f.addClass("oj-listbox-no-results"),f.text(u.noMatchesFound),this._showDropDown(),this._preprocessResults(o),o.append(f),t()}})})},_preprocessResults:function(e){if(this.opts.list){var t=e.children();this._hideResultList(t)}else e.empty()},_hideResultList:function(e){for(var t=0;t<e.length;t++){n(e[t]).is("LI")&&((n(e[t]).hasClass("oj-listbox-no-results")||n(e[t]).hasClass("oj-listbox-placeholder"))&&n(e[t]).remove(),n(e[t]).css("display","none"),n(e[t]).hasClass("oj-selected")&&n(e[t]).removeClass("oj-selected"));var r=n(e[t]).children("ul");r&&r.children()&&this._hideResultList(r.children())}},_cancel:function(e){this.close(e)},_focusSearch:function(){r._focus(this.search)},_selectHighlighted:function(e,t){if(this.header){var i=this._getActiveContainer().attr("aria-activedescendant");if(this._isHeaderItem(i)){var s=n("#"+i),o="a, input, select, textarea, button, object",u=s.find(o).first();return 0===u.length&&(u=s.children()),u.length&&u[0].click(),void this.close(t)}}var a=this._highlight(),f=this.results.find(".oj-hover"),l=f.closest(".oj-listbox-result").data(this._elemNm);l?(this._highlight(a),e=e||{},e.trigger=r.ValueChangeTriggerTypes.OPTION_SELECTED,l!==this.opts._placeholderData?this._onSelect(l,e,t):this._onSelect([],e,t)):e&&e.noFocus&&this.close(t)},_getPlaceholder:function(){return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder},_setPlaceholder:function(){var e=this._getPlaceholder();e&&(this.search.attr("placeholder",e),this.container.removeClass(this._classNm+"-allowclear"))},_initContainerWidth:function(){function e(){var e,t,n,r,i,s;if(void 0!==(e=this.opts.element.attr("style")))for(t=e.split(";"),r=0,i=t.length;r<i;r+=1)if(s=t[r].replace(/\s/g,""),null!==(n=s.match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i))&&n.length>=1)return n[1]}var t=e.call(this);null!==t&&this.container.css("width",t)},getVal:function(){return this.ojContext.option("value")},setVal:function(e,t,n){var r={doValueChangeCheck:!1};n&&(r._context=n),"string"!=typeof e&&Array.isArray(e)||(e=[e]),this.opts.element.val(0!==e.length?e:null),this.ojContext._updateValue(e,t,r)},_showPlaceholder:function(){return!1},_getActiveContainer:function(){return this.search},_hasSearchBox:function(){return void 0!==this.opts.minimumResultsForSearch&&void 0!==this.container._hasSearchBox},_findItem:function(e,t){for(var r=0;r<e.length;r++)if(n(e[r]).data(this._elemNm).value===t)return e[r];return null}}),s={closeOnSelect:!0,openOnEnter:!0,id:function(e){return e.id},matcher:function(e,t){return(""+t).toUpperCase().indexOf((""+e).toUpperCase())>=0},separator:","},o=r.clazz(i,{_enableInterface:function(){o.superclass._enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this._isInterfaceEnabled())},_focus:function(){this._opened()&&this.close()},_destroy:function(){n("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id")),o.superclass._destroy.apply(this,arguments)},_clear:function(e){this.selection.data(this._elemNm),this.search.val(""),this.selection.removeData(this._elemNm),this._setPlaceholder()},_initSelection:function(){var e=this.opts.element;this.opts.initSelection.call(null,e,this._bind(this._updateSelectedOption))},_containerKeydownHandler:function(e){if(this._isInterfaceEnabled()){if(e.which===r.KEY.PAGE_UP||e.which===r.KEY.PAGE_DOWN)return void r.killEvent(e);switch(e.which){case r.KEY.UP:case r.KEY.DOWN:return this._opened()?this._moveHighlight(e.which===r.KEY.UP?-1:1):this.open(e),void r.killEvent(e);case r.KEY.ENTER:return this._selectHighlighted(null,e),r.killEvent(e),void (this._opened()||(this._userTyping=!1));case r.KEY.TAB:return this.close(e),void (this._userTyping=!1);case r.KEY.ESC:return this._opened()&&(this._cancel(e),r.killEvent(e)),void (this._userTyping=!1)}this._userTyping=!0}},_containerKeyupHandler:function(e){this._isInterfaceEnabled()&&(this._opened()||this.open(e))},_initContainer:function(){var e,t,i=this.container,s=(this.dropdown,this.opts.rootAttributes),o=s&&s.id?s.id:this.opts.element.attr("id")||r.nextUid();this.selection=e=i.find("."+this._classNm+"-choice"),e.attr("id",this._classNm+"-choice-"+o),t=n("label[for='"+this.opts.element.attr("id")+"']"),t.attr("id")||t.attr("id",this._classNm+"-label-"+o),e.find("."+this._classNm+"-input").attr("id",this._classNm+"-input-"+o),this.results.attr("id")||this.results.attr("id","oj-listbox-results-"+o),this.search.attr("aria-owns",this.results.attr("id")),this.search.attr("aria-labelledby",t.attr("id")),this.opts.element.attr("aria-labelledby",t.attr("id")),this.search.attr("id")&&t.attr("for",this.search.attr("id")),this.opts.element.attr("aria-label")&&this.search.attr("aria-label",this.opts.element.attr("aria-label")),this.opts.element.attr("aria-controls")&&this.search.attr("aria-controls",this.opts.element.attr("aria-controls")),e.on("keydown",this._bind(this._containerKeydownHandler)),e.on("mousedown","abbr",this._bind(function(e){this._isInterfaceEnabled()&&(this._clear(e),r.killEventImmediately(e),this.close(e),this.selection.focus())})),e.on("mousedown",this._bind(function(e){this.opts.element.prop("disabled")&&r.killEvent(e),this._opened()?this.close(e):this._isInterfaceEnabled()&&this.open(e);var t=this.search.parent().attr("aria-hidden");t&&"true"==t?this.selection.focus():this.search.focus(),this.container.addClass("oj-active")})),e.on("mouseup",this._bind(function(e){this.container.removeClass("oj-active")})),e.on("focus",this._bind(function(e){r.killEvent(e)})),this.search.on("blur keyup",this._bind(function(e){if("keyup"!==e.type||10===e.keyCode||13===e.keyCode){if(void 0!==this.search.val()&&this.results.find(".oj-hover").length<=0)if(this.opts.manageNewEntry){var t=this.selection.data(this._elemNm);if(!t&&""!==this.search.val()||t&&(t.label!==this.search.val()||!this.ojContext.isValid())){var n=this.opts.manageNewEntry(this.search.val()),i="blur"===e.type?r.ValueChangeTriggerTypes.BLUR:r.ValueChangeTriggerTypes.ENTER_PRESSED,s={trigger:i};this._onSelect(n,s,e)}}else if(null==this.opts.manageNewEntry){var n=this.selection.data(this._elemNm);if(""==this.search.val())this._clear(e);else if("oj-select"!==this._classNm){var o=this.opts.formatSelection(n);void 0!==o&&this.search.val(o)}}this.search.removeClass(this._classNm+"-focused"),this.container.removeClass("oj-focus")}})),this._initContainerWidth(),this.opts.element.hide().attr("aria-hidden",!0),this._setPlaceholder()},_prepareOpts:function(){var e=o.superclass._prepareOpts.apply(this,arguments),t=this,i=this.getVal(),s=e.element.get(0).tagName.toLowerCase();if("input"===s&&e.element.attr("list")||"select"===s&&e.element.children().length>0||e.list){var u=e.list?"li":"option";e.initSelection=function(e,n){var r,i=t.getVal();Array.isArray(i)&&(i=i[0]),r=void 0!==i&&null!==i?t._optionToData(e.find(u).filter(function(){return"li"==u?this.getAttribute("oj-data-value")===i:"option"==u?this.value===i:void 0})):t._optionToData(e.find(u).filter(function(){return"li"==u?!0===this.getAttribute("oj-data-selected"):"option"==u?this.selected:void 0})),n(r)},e.validate=function(e,n){var r;return void 0!==n&&null!==n&&(r=t._optionToData(e.find(u).filter(function(){return"li"==u?this.getAttribute("oj-data-value")===n:"option"==u?this.value===n:void 0}))),!!r}}else("options"in e||i&&i.length>0)&&(n.isFunction(e.options)?(e.initSelection=function(s,o){var u=function(e,t){for(var n=0,r=e.length;n<r;n++){var i=e[n];if(JSON.stringify(t)===JSON.stringify(i))return i;if(i.children){var s=u(i.children,t);if(s)return s}}return null};i=t.getVal();var a="";i&&i.length&&(a=i[0]);var f=null;if(!a)return void o(f);var l=r.getLastQueryResult(t);if(l&&(f=u(l,a)),!f){var c=t.currentItem;c&&c.length&&a===c[0]&&(f=c[0])}f||t.valueChangeTrigger?o(f):e.query({value:[a],callback:n.isFunction(o)?function(e){e&&e.results&&(f=u(e.results,a)),o(f)}:n.noop})},e.validate||(e.validate=function(e,t){return!0})):(e.initSelection=function(r,o){var u="";(i=t.getVal())&&i.length&&(u=i[0]);var a="select"==s&&t.ojContext._HasPlaceholderSet()&&!t.ojContext._IsRequired(),f=a?t._getPlaceholder():null,l=null;e.query({matcher:function(e,t,n){var r=JSON.stringify(u)===JSON.stringify(n);return r&&(l=n),null==f&&(f=n),r},callback:n.isFunction(o)?function(){l||"select"!==s||(l=f),o(l)}:n.noop})},e.validate=function(t,r){var i=r,s=null;return e.query({matcher:function(e,t,n){var r=JSON.stringify(i)===JSON.stringify(n);return r&&(s=n),r},callback:n.noop}),!!s}));return e},_postprocessResults:function(e,t,n){var i,s=-1,o=this;i=this._findHighlightableChoices(),r.each2(i,function(e,t){var n=o.getVal();if(n&&n[0]===o.id(t.data(o._elemNm)))return s=e,!1}),!1!==n&&!0===t&&s>=0&&this._highlight(s)},_onSelect:function(e,t,n){if(this._triggerSelect(e)){var r;t&&t.trigger&&(r={optionMetadata:{trigger:t.trigger}}),this.setVal(e||[],n,r),this.close(n),this._focusSearch()}},_clearSearch:function(){this.search.val("")}}),u=r.clazz(o,{_elemNm:"ojidentity",_classNm:"oj-select",_userTyping:!1,_createContainer:function(){return n(document.createElement("div")).attr({"class":"oj-identity oj-select oj-component"}).html(["<div class='oj-select-choice' tabindex='0' role='combobox' ","     aria-autocomplete='none' aria-expanded='false' aria-ready='true'>","  <span class='oj-select-chosen'></span>","  <abbr class='oj-select-search-choice-close' role='presentation'></abbr>","  <a class='oj-select-arrow oj-component-icon oj-clickable-icon-nocontext oj-select-open-icon' role='presentation'>","</a></div>","<span class='oj-identity-filter'></span>","<div class='oj-listbox-drop oj-identity-container' style='display:none' role='presentation'>","  <div class='oj-listbox-search-wrapper'>","  <div class='oj-listbox-search'>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off'","           spellcheck='false' class='oj-listbox-input' title='Search field' ","           role='combobox' aria-expanded='false' aria-autocomplete='list' />","    <span class='oj-listbox-spyglass-box'>","      <span class='oj-component-icon oj-clickable-icon-nocontext oj-listbox-search-icon' role='presentation'>","       <b role='presentation'></b></span>","    </span>","    <span class='oj-identity-loading-container oj-select-loading'>","      <span class='oj-identity-loading' role='presentation'>","       &nbsp;</span>","    </span>","  </div>","  </div>","   <ul class='oj-listbox-results' role='listbox'>","   </ul>","</div>"].join(""))},_enable:function(e){u.superclass._enable.apply(this,arguments),this._enabled?(this.container.find(".oj-select-choice").attr("tabindex","0"),this.container.find(".oj-select-arrow").removeClass("oj-disabled")):(this.container.find(".oj-select-choice").attr("tabindex","-1"),this.container.find(".oj-select-arrow").addClass("oj-disabled"))},close:function(e){this._opened()&&(u.superclass.close.apply(this,arguments),this.container.find(".oj-select-choice").attr("aria-expanded",!1),this._testClear(e)||this._clearSearch(),e instanceof MouseEvent&&e.target!=this.selection&&e.target!=this.search||r._focus(this.selection),this.container.find(".oj-listbox-spyglass-box").off("mouseup click"))},_opening:function(e,t){u.superclass._opening.apply(this,arguments);var n;e&&"keydown"==e.type&&e.which!=r.KEY.UP&&e.which!=r.KEY.DOWN&&e.which!=r.KEY.LEFT&&e.which!=r.KEY.RIGHT&&(n=String.fromCharCode(e.which),r.killEvent(e)),this._opened()&&(n=this.search.val()),this._showSearchBox(n),t||(n?this._updateResults():this._updateResults(!0))},_showDropDown:function(){if(this._opened()){u.superclass._showDropDown.apply(this,arguments),this.container.find(".oj-select-choice").attr("aria-expanded",!0);var e,t,n;this._hasSearchBox()&&(e=this.search.get(0),e.createTextRange?(t=e.createTextRange(),t.collapse(!1),t.select()):e.setSelectionRange&&(n=this.search.val().length,e.setSelectionRange(n,n)))}},_initContainer:function(){var e=this.containerId+"_selected";this.text=this.container.find(".oj-select-chosen").attr("id",e),u.superclass._initContainer.apply(this,arguments),this.container.find(".oj-select-choice").attr({"aria-owns":this.search.attr("aria-owns"),"aria-labelledby":this.search.attr("aria-labelledby"),"aria-describedby":e});var t=this.opts.element.attr("aria-label");t&&this.selection.attr("aria-label",t),this.search.on("keydown",this._bind(this._containerKeydownHandler)),this.search.on("keyup-change input",this._bind(this._containerKeyupHandler));var n=this;this.selection.on("blur",function(e){n._testClear(e)})},_initSelection:function(){this._isPlaceholderOptionSelected()?(this._updateSelection(null),this.close(),this._setPlaceholder()):u.superclass._initSelection.apply(this,arguments)},_updateSelectedOption:function(e){if(void 0!==e&&null!==e){var t=this.getVal();t=Array.isArray(t)?t[0]:t,JSON.stringify(t)!==JSON.stringify(e)&&(void 0===t||null===t?this.ojContext.options.value=Array.isArray(e)?e:[e]:this.setVal(Array.isArray(e)?e:[e])),this._updateSelection(e),this.close()}},_updateSelection:function(e){this.selection.data(this._elemNm,e),null!==e&&this.text.text(e[this.opts.optionsKeys.label]),e&&""!=e.id&&this.text.removeClass(this._classNm+"-default"),this.opts.allowClear&&this.container.addClass(this._classNm+"-allowclear")},_getActiveContainer:function(){return this.search.attr("aria-expanded")&&this._hasSearchBox()?this.search:this.selection},_isPlaceholderOptionSelected:function(){if(null===this._getPlaceholder())return!1;var e=this.getVal();return""===(e=Array.isArray(e)?e[0]:e)||void 0===e||null===e},_getPlaceholder:function(){return this.opts.placeholder},_showPlaceholder:function(){return!0},_setPlaceholder:function(){var e=this._getPlaceholder();this._isPlaceholderOptionSelected()&&void 0!==e&&(void 0===e&&(e=""),this.text.text(e).addClass(this._classNm+"-default"),this.container.removeClass(this._classNm+"-allowclear"))},setVal:function(e,t,n){u.superclass.setVal.call(this,e,t,n),this.selection.data("selectVal",e)},_containerKeydownHandler:function(e){if(!(r.KEY.isControl(e)&&e.which!=r.KEY.SHIFT||r.KEY.isFunctionKey(e))){switch(e.which){case r.KEY.TAB:return this.close(e),this.selection.focus(),void this._testClear(e);case r.KEY.ENTER:if(e.target===this.selection[0]&&!this._opened())return this.open(e),void r.killEvent(e)}var t=this._hasSearchBox();if(u.superclass._containerKeydownHandler.apply(this,arguments),this._userTyping&&!this._opened()&&this.open(e),!t&&this._userTyping){var n;e.which!=r.KEY.LEFT&&e.which!=r.KEY.RIGHT&&(n=String.fromCharCode(e.which)),this._showSearchBox(n),this._updateResults(),r.killEvent(e)}}},_testClear:function(e){return""==this.text.text()&&(this._clear(e),!0)},_showSearchBox:function(e){var t=!1,i=this.dropdown.find(".oj-listbox-search");if(i&&(this._hasSearchBox()?(this.dropdown.find(".oj-listbox-search-wrapper").removeClass("oj-helper-hidden-accessible"),n(i).removeAttr("aria-hidden"),this.search.val(e),t=!0):(this.dropdown.find(".oj-listbox-search-wrapper").addClass("oj-helper-hidden-accessible"),n(i).attr("aria-hidden","true"))),r._focus(t?this.search:this.selection),t){var s=this;i.find(".oj-listbox-spyglass-box").on("mouseup click",function(e){s.search.focus(),e.stopPropagation()})}},_hasSearchBox:function(){var e=this.opts.minimumResultsForSearch;return(this.opts.list?n("#"+this.opts.list).find("li").length:this.datalist?this.datalist[0].length:this.opts.options?this.opts.options.length:0)>e||this._userTyping||n.isFunction(this.opts.options)}}),a=r.clazz(i,{_prepareOpts:function(){var e=a.superclass._prepareOpts.apply(this,arguments),t=this,i=e.element.get(0).tagName.toLowerCase();if("input"===i&&e.element.attr("list")||"select"===i&&e.element.children().length>0||e.list){var s=e.list?"li":"option";e.initSelection=function(e,n){var o,u=[],a=t.getVal();if(a)for(var f=a,l=0;l<f.length;l++){var c=f[l];o=e.find(s).filter(function(){return"option"===s?this.value===c:"li"===s?this.getAttribute("oj-data-value")===c:void 0}),o&&o.length?u.push(t._optionToData(o)):u.push({value:c,label:c})}else"select"!==i&&(o=e.find(s).filter(function(){return"option"===s?this.selected:"li"===s?!0===this.getAttribute("oj-data-selected"):void 0}),r.each2(o,function(e,n){u.push(t._optionToData(n))}));n(u)}}else"options"in e&&(n.isFunction(e.options)?e.initSelection=function(i,s){var o=function(t,r){for(var i=[],s=0,u=t.length;s<u;s++){var a=t[s];if(e.indexOf.call(t,a)>=0&&i.push(a),a.children){var f=o(a.children,r);f&&f.length&&n.merge(i,f)}}return i},u=t.getVal(),a=[],f=r.getLastQueryResult(t);f&&(a=o(f,u));var l=function(){for(var e=[],n=0;n<u.length;n++){for(var r=u[n],i=!1,o=0;o<a.length;o++){var f=a[o];if(JSON.stringify(r)===JSON.stringify(f)){e.push(f),a.splice(o,1),i=!0;break}}if(!i){var l=t.currentItem;if(l&&l.length)for(var c=0;c<l.length;c++)if(JSON.stringify(r)===JSON.stringify(l[c])){e.push(l[c]),i=!0;break}i||e.push(r)}}s(e)};t.valueChangeTrigger?l():e.query({value:u,callback:function(e){if(e&&e.results){var t=o(e.results,u);t&&t.length&&n.merge(a,t)}l()}})}:e.initSelection=e.initSelection||function(r,i){var s=t.getVal(),o=[];e.query({matcher:function(e,t,r){var i=n.grep(s,function(e){return JSON.stringify(e)===JSON.stringify(r)}).length;return i&&o.push(r),i},callback:n.isFunction(i)?function(){for(var e=[],t=0;t<s.length;t++){for(var n=s[t],r=!1,u=0;u<o.length;u++){var a=o[u];if(JSON.stringify(n)===JSON.stringify(a)){e.push(a),o.splice(u,1),r=!0;break}}r||e.push(n)}i(e)}:n.noop})});return e},_selectChoice:function(e){var t=this.container.find("."+this._classNm+"-selected-choice.oj-focus");t.length&&e&&e[0]==t[0]||(t.length&&this.opts.element.trigger("choice-deselected",t),t.removeClass("oj-focus"),e&&e.length&&(this.close(),e.addClass("oj-focus"),this.container.find("."+this._classNm+"-description").text(e.attr("valueText")+". Press back space to delete.").attr("aria-live","assertive"),this.opts.element.trigger("choice-selected",e)))},_destroy:function(){n("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id")),a.superclass._destroy.apply(this,arguments)},_initContainer:function(){var e,t,i="."+this._classNm+"-choices",s=r.nextUid();this.searchContainer=this.container.find("."+this._classNm+"-search-field"),this.selection=e=this.container.find(i);var o=this;this.selection.on("click","."+this._classNm+"-selected-choice:not(."+this._classNm+"-locked)",function(e){o.search[0].focus(),o._selectChoice(n(this))}),t=n("label[for='"+this.opts.element.attr("id")+"']"),t.attr("id")||t.attr("id",this._classNm+"-label-"+s),e.find("."+this._classNm+"-input").attr("id",this._classNm+"-input-"+s),this.results.attr("id")||this.results.attr("id","oj-listbox-results-"+s),this.search.attr("aria-owns",this.results.attr("id")),this.search.attr("aria-labelledby",t.attr("id")),this.opts.element.attr("aria-labelledby",t.attr("id")),this.search.attr("id")&&t.attr("for",this.search.attr("id")),this.opts.element.attr("aria-label")&&this.search.attr("aria-label",this.opts.element.attr("aria-label")),this.opts.element.attr("aria-controls")&&this.search.attr("aria-controls",this.opts.element.attr("aria-controls")),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this._bind(function(t){if(this._isInterfaceEnabled()){++this.keydowns;var n=e.find("."+this._classNm+"-selected-choice.oj-focus"),i=n.prev("."+this._classNm+"-selected-choice:not(."+this._classNm+"-locked)"),s=n.next("."+this._classNm+"-selected-choice:not(."+this._classNm+"-locked)"),o=r.getCursorInfo(this.search);if(!(!n.length||t.which!=r.KEY.LEFT&&t.which!=r.KEY.RIGHT&&t.which!=r.KEY.BACKSPACE&&t.which!=r.KEY.DELETE&&t.which!=r.KEY.ENTER)){var u=n;return t.which==r.KEY.LEFT&&i.length?u=i:t.which==r.KEY.RIGHT?u=s.length?s:null:t.which===r.KEY.BACKSPACE?(this._unselect(n.first(),t),this.search.width(10),u=i.length?i:s):t.which==r.KEY.DELETE?(this._unselect(n.first(),t),this.search.width(10),u=s.length?s:null):t.which==r.KEY.ENTER&&(u=null),this._selectChoice(u),r.killEvent(t),void (u&&u.length||this.open())}if((t.which===r.KEY.BACKSPACE&&1==this.keydowns||t.which==r.KEY.LEFT)&&0==o.offset&&!o.length)return this._selectChoice(e.find("."+this._classNm+"-selected-choice:not(."+this._classNm+"-locked)").last()),void r.killEvent(t);if(this._selectChoice(null),this._opened())switch(t.which){case r.KEY.UP:case r.KEY.DOWN:return this._moveHighlight(t.which===r.KEY.UP?-1:1),void r.killEvent(t);case r.KEY.ENTER:return this._selectHighlighted(null,t),void r.killEvent(t);case r.KEY.TAB:return void this.close(t);case r.KEY.ESC:return this._cancel(t),void r.killEvent(t)}if(!(t.which===r.KEY.TAB||r.KEY.isControl(t)||r.KEY.isFunctionKey(t)||t.which===r.KEY.ESC||t.which===r.KEY.ENTER&&this.search.val()&&"ojcombobox"===this._elemNm))switch(t.which){case r.KEY.UP:case r.KEY.DOWN:return this.open(),void r.killEvent(t);case r.KEY.PAGE_UP:case r.KEY.PAGE_DOWN:case r.KEY.ENTER:return void r.killEvent(t)}}})),this.search.on("keyup",this._bind(function(e){this.keydowns=0})),this.search.on("blur keyup",this._bind(function(e){if("keyup"!==e.type||10===e.keyCode||13===e.keyCode){if(this.opts.manageNewEntry&&this.search.val()&&this.results.find(".oj-hover").length<=0){var t=this.opts.manageNewEntry(this.search.val()),n="blur"===e.type?r.ValueChangeTriggerTypes.BLUR:r.ValueChangeTriggerTypes.ENTER_PRESSED,i={trigger:n};this._onSelect(t,i,e)}this.search.removeClass(this._classNm+"-focused"),this.container.removeClass("oj-focus"),this._selectChoice(null),this._opened()||this._clearSearch(),e.stopImmediatePropagation()}})),this.container.on("click touchstart",i,this._bind(function(e){this._isInterfaceEnabled()&&(n(e.target).closest("."+this._classNm+"-selected-choice").length>0||(this._selectChoice(null),this._opened()?this.close(e):(this.open(),this._focusSearch()),e.preventDefault()))})),this.container.on("focus",i,this._bind(function(){this._isInterfaceEnabled()})),this._initContainerWidth(),this.opts.element.hide().attr("aria-hidden",!0),this._clearSearch()},_enableInterface:function(){a.superclass._enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this._isInterfaceEnabled())},_initSelection:function(){var e=this.getVal();if(null!==e&&0!==e.length||"oj-select"!==this._classNm&&""!==this.opts.element.text()||(this._updateSelection([]),this.close(),this._clearSearch()),null!==e&&e.length){var t=this,n=this.opts.element;this.opts.initSelection.call(null,n,function(e){void 0!==e&&null!==e&&0!==e.length&&(t._updateSelection(e),t.close(),t._clearSearch())})}},_clearSearch:function(){var e=this._getPlaceholder(),t=this._getMaxSearchWidth(),n=this.getVal();void 0===e||n&&0!==n.length?(this.search.attr("placeholder",""),this.search.val("").width(10),this.searchContainer.width("auto")):(this.search.attr("placeholder",e),this.search.val("").width(t>0?t:this.container.css("width")),this.searchContainer.width("100%"))},_opening:function(e,t){this._resizeSearch(),a.superclass._opening.apply(this,arguments),this._focusSearch(),t||this._updateResults(!0),this.search.focus()},close:function(e){this._opened()&&a.superclass.close.apply(this,arguments)},_focus:function(){this.close(),this.search.focus()},_updateSelection:function(e){var t=[],r=[],i=this;n(e).each(function(){i.opts.indexOf.call(t,this)<0&&(t.push(this),r.push(this))}),e=r,this.selection.find("."+this._classNm+"-selected-choice").remove(),n(e).each(function(){i._addSelectedChoice(this)}),this.currentItem=e,this.opts.element.val(0===t.length?[]:t),i._postprocessResults(),setTimeout(function(){i._positionDropdown()},0)},_onSelect:function(e,t,r){if(this._triggerSelect(e)){var i,s=this;t&&t.trigger&&(i={optionMetadata:{trigger:t.trigger}});var o=this.getVal(),u=o?o.slice(0):[];n(e).each(function(){s.opts.indexOf.call(u,this)<0&&u.push(this)}),this.setVal(u,r,i),!this.select&&this.opts.closeOnSelect||this._postprocessResults(e,!1,!0===this.opts.closeOnSelect),this.opts.closeOnSelect&&(this.close(r),this.search.width(10)),t&&t.noFocus||this._focusSearch()}},_cancel:function(e){this.close(e),this._focusSearch()},_addSelectedChoice:function(e){var t,i=!e.locked,s=n("<li class='"+this._classNm+"-selected-choice'>    <div></div>    <a href='#' onclick='return false;' role='button' aria-label='remove' class='"+this._classNm+"-clear-entry       oj-component-icon oj-clickable-icon-nocontext "+this._classNm+"-clear-entry-icon' tabindex='-1'>    </a></li>"),o=n("<li class='"+this._classNm+"-selected-choice "+this._classNm+"-locked'><div></div></li>"),u=i?s:o;this.id(e),t=this.opts.formatSelection(e),void 0!==t&&(u.find("div").addClass(this._classNm+"-selected-choice-label").text(t),u.find("."+this._classNm+"-clear-entry").attr("aria-label",t+" remove"),u.attr("valueText",t)),i&&u.find("."+this._classNm+"-clear-entry").on("mousedown",r.killEvent).on("click dblclick",this._bind(function(e){this._isInterfaceEnabled()&&(n(e.target).closest("."+this._classNm+"-selected-choice").fadeOut("fast",this._bind(function(){this._unselect(n(e.target),e),this.selection.find("."+this._classNm+"-selected-choice.oj-focus").removeClass("oj-focus"),this.close(e),this._focusSearch()})).dequeue(),r.killEvent(e))})),u.data(this._elemNm,e),u.insertBefore(this.searchContainer)},_unselect:function(e,t){var n,r,i=this.getVal(),s=i?i.slice(0):[],o=this;if(e=e.closest("."+this._classNm+"-selected-choice"),0===e.length)throw"Invalid argument: "+e+". Must be ."+this._classNm+"-selected-choice";if(n=e.data(this._elemNm)){for(;(r=o.opts.indexOf.call(s,n))>=0;)s.splice(r,1),this.setVal(s,t),this.select&&this._postprocessResults();this.ojContext._IsRequired()&&0===s.length||e.remove(),this.ojContext._IsRequired()&&this.ojContext.validate()}},_postprocessResults:function(e,t,n){var i=this.getVal(),s=i&&(this.opts.element.val()||this.ojContext.isValid())?i:[],o=this.results.find(".oj-listbox-result"),u=this;r.each2(o,function(e,t){var n=u.id(t.data(u._elemNm));s&&u.opts.indexOf.call(s,n)>=0&&(t.addClass("oj-selected"),t.find(".oj-listbox-result-selectable").addClass("oj-selected"))}),!o.filter(".oj-listbox-result:not(.oj-selected)").length>0&&this.close()},_getMaxSearchWidth:function(){return this.selection.width()-r.getSideBorderPadding(this.search)},_textWidth:function(e){var t=document.createElement("span"),r=document.createTextNode(e);t.style.display="none",t.appendChild(r),n("body").append(t);var i=n("body").find("span:last").width();return n("body").find("span:last").remove(),i},_resizeSearch:function(){var e,t,n,i,s,o=r.getSideBorderPadding(this.search);e=this._textWidth(this.search.val())+10,t=this.search.offset().left,n=this.selection.width(),i=this.selection.offset().left,s=n-(t-i)-o,s<e&&(s=n-o),s<40&&(s=n-o),s<=0&&(s=e),this.search.width(Math.floor(s))},setVal:function(e,t,n){var i=[],s=this;"string"==typeof e&&(e=r.splitVal(e,this.opts.separator));for(var o=0;o<e.length;o++)s.opts.indexOf.call(i,e[o])<0&&i.push(e[o]);var u={doValueChangeCheck:!1};n&&(u._context=n),this.opts.element.val(0!==e.length?e:null),this.ojContext._updateValue(i,t,u),this.search.attr("aria-activedescendant",this.opts.element.attr("id"))}}),f=r.clazz(a,{_elemNm:"ojidentity",_classNm:"oj-select",_createContainer:function(){return n(document.createElement("div")).attr({"class":"oj-identity oj-select oj-select-multi oj-component"}).html(["<div class='oj-identity-select'>","  <ul class='oj-select-choices'>","    <li class='oj-select-search-field'>","      <input type='text' role='combobox' aria-expanded='false' aria-autocomplete='list' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='oj-listbox-input'>","    <span class='oj-identity-loading-container oj-multi-loading'>","      <span class='oj-identity-loading' role='presentation'>","       &nbsp;</span>","    </li>","  </ul>","</div>","<span class='oj-identity-filter multiple'></span>","<div class='oj-select-description oj-helper-hidden-accessible'/>","<div class='oj-listbox-drop oj-identity-container oj-listbox-drop-multi' style='display:none'>","   <ul class='oj-listbox-results' role='listbox'>","   </ul>","</div>"].join(""))}}),l=function(e,t,r,i){if(n.widget(e,t,r),i){var s=e.split(".")[1];delete n.fn[s]}if("oj.oj"===e.substring(0,5)||"oj._oj"===e.substring(0,6))var o=e.split(".");var u,a=o[0],f=o[1],l=a+"-"+f,c="_"===f.substring(0,1);u=c?"_"+a+"-"+f.substring(3):a+"-"+f.substring(2),n.expr[":"][u.toLowerCase()]=function(e){return!!n.data(e,l)}},c=function(){var e=document.documentElement.getAttribute("dir");return e&&(e=e.toLowerCase()),"rtl"===e?"rtl":"ltr"},h=function(){var e=20;if(n.isNumeric(e))return e;var t=n("<div />");n(document.body).append(t),t.width(50).height(50).css({overflow:"scroll",visibility:"hidden",position:"absolute"});var r=n("<div />");r.height(1),t.append(r);var i=r.width(),s=t.width();return t.remove(),e=s-i}(),p=function(e,t){function r(e,t){if(e.bottom-t.top<-1)return!1;var n="auto"===t.overflowY||"scroll"===t.overflowY?h:0;return!(t.bottom-n-e.top<1)&&(n="auto"!==t.overflowX&&"scroll"!==t.overflowX||"rtl"!==c()?0:h,!(e.right-(t.left+n)<-1)&&(n="auto"!==t.overflowX&&"scroll"!==t.overflowX||"ltr"!==c()?0:h,!(e.left-(t.right-n)>-1)))}function i(e){return"visible"!==e.css("overflow-x")||"visible"!==e.css("overflow-y")}function s(e){var t=e[0];if(1===t.nodeType){var r=t.getBoundingClientRect();return r.overflowX=e.css("overflow-x"),r.overflowY=e.css("overflow-y"),r}if(n.isWindow(t)){var r={width:t.innerWidth,height:t.innerHeight,top:0,bottom:t.innerHeight,left:0,right:t.innerWidth};return r}return{height:0,width:0}}if(!e)return!1;var o=s(e);if(t&&!r(o,s(n(window))))return!1;for(var u=!0,a=e.parent();u&&a&&a.length>0&&1===a[0].nodeType;){if(i(a)){var f=s(a);f.height>0&&f.width>0&&(u=r(o,f))}a=a.parent()}return u},d=function(e){if(e.target&&e.target.height>0&&e.target.width>0){var t=e.target.element;return!p(t)}return!1},v=function(e,t){for(var r=n.extend({},e),i=0;i<m.length;i++){var s=m[i],o=r[s];o&&(r[s]=o.replace("start",t?"right":"left").replace("end",t?"left":"right").replace("<",t?"+":"-").replace(">",t?"-":"+"))}return r},m=["my","at"],g={defaultElement:"<select>",widgetEventPrefix:"oj",options:{minimumResultsForSearch:10,noMatchesFound:"No matches found",placeholder:null,list:void 0,multiple:!0,options:null,optionsKeys:{label:"id",value:"id"},beforeExpand:null,selectAll:!0,selectLabel:"Select All",defaultScope:"user",showScopeFilter:!1,scopesOptions:[{label:"All",value:"all"},{label:"User",value:"user"},{label:"Group",value:"group"},{label:"Role",value:"role"}],indexOf:function(e){if(!e)return-1;var t=this.length,n=0;for(e=JSON.stringify(e);n<t;n++)if(JSON.stringify(this[n])===e)return n;return-1},contains:function(e){if(!e)return!1;for(var t=e.length,n=this.length,r=0,i=0,s=0;r<n;r++){var o=JSON.stringify(this[r]);for(i=0;i<t;i++)if(o===JSON.stringify(e[i])){++s;break}}return s===n}},widget:function(){return this.select?this.select.container:this.element.parent()},_ComponentCreate:function(){this._super(),this._setup()},_nativeSetDisabled:function(e){e?(this.element.attr("disabled",""),this.element.parent().addClass("oj-disabled").removeClass("oj-enabled")):(this.element.removeAttr("disabled"),this.element.parent().removeClass("oj-disabled").addClass("oj-enabled"))},_nativeChangeHandler:function(e){},_jetSetup:function(){var e={},t=this.options.multiple;e.element=this.element,e.ojContext=this,e=n.extend(this.options,e),this.select=t?new f:new u,this.select._init(e);var r=this.select.opts;this.select.container.addClass("oj-select-jet oj-form-control"),this.element.val=function(e){return arguments.length&&(r.value=e),r.value||[]}},_setup:function(){this._jetSetup()},refresh:function(){this._super(),this._cleanup(),this._setup()},_destroy:function(){this._super(),this._cleanup()},_NotifyDetached:function(){this.select.close()},_NotifyHidden:function(){this.select.close()},_SetPlaceholder:function(e){},_updateValue:function(e,t,r){t&&(r._context=r._context||{},n.extend(!0,r._context,{optionMetadata:{trigger:"option_selected",writeback:"shouldWrite"},originalEvent:t.originalEvent||t}),this.valueUpdated=!0,this.option({value:e},r),this.select._initSelection()),this._IsRequired()&&0!==e.length&&(this.select.container.removeClass("oj-invalid"),this.select.container.find(".oj-messaging-inline-container").remove())},_SetPlaceholderOption:function(e){this._super(e)},_HasPlaceholderSet:function(){return"string"==typeof this.options.placeholder},_IsRequired:function(){return this.options.required},_ClearPlaceholder:function(){this._SetPlaceholderOption(null),this._SetPlaceholder(null)},_InitOptions:function(e,n){var i=[{attribute:"disabled",validateOption:!0},{attribute:"placeholder"},{attribute:"required",coerceDomValue:!0,validateOption:!0},{attribute:"title"}];if(this._super(e,n),t.EditableValueUtils.initializeOptionsFromDom(i,n,this),void 0===this.options.value)this.options.value=void 0!==this.element.attr("value")?r.splitVal(this.element.val(),","):null;else{var s=this.options.value;Array.isArray(s)&&(s=s.slice(0)),this.options.value=s}},_SetDisplayValue:function(e){},_GetDisplayValue:function(){return this.select.opts.value},_updateDisplayValue:function(){this.valueUpdated?this.valueUpdated=!1:this.select._initSelection()},_setOption:function(e,t,n){if("value"===e){var r=this.select.opts.element;t||(t=[]),Array.isArray(t)||(t=[t]);for(var i=[],s=0;s<t.length;s++)(this.options.multiple||this.select.opts.validate(r,t[s]))&&i.push(t[s]);return this._super(e,i,n),void this._updateDisplayValue()}"placeholder"===e?(this.select.opts.placeholder=t||null,this.select._setPlaceholder()):"minimumResultsForSearch"===e?this.select.opts.minimumResultsForSearch=t:"multiple"===e?(this.options.multiple=t,this.refresh()):"defaultScope"===e&&(this.options.defaultScope=t,this.refresh()),"disabled"===e?t?this.select._disable():this.select._enable():"options"===e?(this.select.opts.options=t,this.select.opts=this.select._prepareOpts(this.select.opts),this._super("value",this.select.getVal())):this._super(e,t,n)},_getDropdown:function(){if(this.select&&this.select._opened()){var e=this.select.dropdown;if(e&&e.attr("data-oj-containerid")===this.select.containerId)return e}return null},_cleanup:function(){this.select._destroy(),this.select=void 0},getNodeBySubId:function(e){var t,r=null;if(null==e){var i=this.widget();return i?i[0]:null}if(this._isNative())return null;if(!(r=this._super(e))){var s=this._getDropdown();switch(t=e.subId){case"oj-select-drop":s&&(r=s[0]);break;case"oj-select-results":s&&(r=s.find(".oj-listbox-results")[0]);break;case"oj-select-search":s&&(r=s.find(".oj-listbox-search")[0]);break;case"oj-select-input":case"oj-listbox-input":!0===this.options.multiple?r=this.widget().find(".oj-listbox-input")[0]:s&&(r=s.find(".oj-listbox-input")[0]);break;case"oj-select-choice":case"oj-select-chosen":case"oj-select-arrow":r=this.widget().find("."+t)[0];break;case"oj-listitem":if(s){var o=s.find(".oj-listbox-result");r=this.select._findItem(o,e.value)}break;case"oj-select-remove":var u=this.widget().find(".oj-select-selected-choice"),a=this.select._findItem(u,e.value);r=a?n(a).find(".oj-select-clear-entry-icon")[0]:null;break;case"oj-listbox-result-label":if(s){var f=n("#"+this.select.results.attr("id")).children(),l=e.index;f.length&&l<f.length&&(r=f.eq(l).find("."+t)[0])}}}return r||null},getSubIdByNode:function(e){if(this._isNative())return this._super(e);var t=null;if(null!=e){var r=n(e);r.hasClass("oj-listbox-input")?t={subId:"oj-select-input"}:r.hasClass("oj-select-arrow")?t={subId:"oj-select-arrow"}:r.hasClass("oj-listbox-result")?t={subId:"oj-listitem",value:r.data("ojidentity").value}:r.hasClass("oj-select-clear-entry-icon")&&(t={subId:"oj-select-remove",value:r.closest(".oj-select-selected-choice").data("ojidentity").value})}return t},_GetDefaultStyleClass:function(){return"oj-select"},_GetMessagingLauncherElement:function(){return this.select?this.select.selection:this.element}};l("oj.ojIdentity",n.oj.editableValue,g)}),define("RendererTemplateLoader",["require","knockout","ojs/ojcore","!text!iconTemplate","!text!rendererControl","!text!rendererMoneyControl","!text!rendererButtonControl","!text!rendererChecklistControl","!text!rendererCheckboxControl","!text!rendererDateControl","!text!rendererDateTimeControl","!text!rendererEmailControl","!text!rendererLinkControl","!text!rendererMessageControl","!text!rendererMessageTypeParagraphTemplate","!text!rendererMessageTypeHeading1Template","!text!rendererMessageTypeHeading2Template","!text!rendererMessageTypeHeading3Template","!text!rendererMessageTypeHeading4Template","!text!rendererMessageTypeHeading5Template","!text!rendererMessageTypeHeading6Template","!text!rendererNumberControl","!text!rendererRadioButtonControl","!text!rendererSelectControl","!text!rendererSingleSelectTemplate","!text!rendererMultiSelectTemplate","!text!rendererTextAreaControl","!text!rendererTextControl","!text!rendererTimeControl","!text!rendererUrlControl","!text!rendererPhoneControl","!text!rendererImageControl","!text!rendererFormReferenceControl","!text!rendererVideoControl","!text!rendererIdentityControl","!text!rendererTemplate","!text!rendererPanelControl","!text!rendererSectionControl","!text!rendererTableControl","!text!rendererRepeatableSectionControl","!text!rendererTabControl","!text!rendererTableRow","!text!rendererRepeatableRow","!text!columnControl","!text!rendererSectionRow","!text!rendererPanelItem","!text!rendererRepeatableItem","!text!rendererTabContainerControl","ojs/ojknockout","ojs/ojcheckboxset","ojs/ojradioset","ojs/ojselectcombobox","ojs/ojinputnumber","ojs/ojdatetimepicker","ojs/ojknockout-validation","ojidentity"],function(e){"use strict";var t=e("knockout"),n=e("ojs/ojcore"),r={iconTemplate:e("!text!iconTemplate"),rendererControl:e("!text!rendererControl"),rendererMoneyControl:e("!text!rendererMoneyControl"),rendererButtonControl:e("!text!rendererButtonControl"),rendererChecklistControl:e("!text!rendererChecklistControl"),rendererCheckboxControl:e("!text!rendererCheckboxControl"),rendererDateControl:e("!text!rendererDateControl"),rendererDateTimeControl:e("!text!rendererDateTimeControl"),rendererEmailControl:e("!text!rendererEmailControl"),rendererLinkControl:e("!text!rendererLinkControl"),rendererMessageControl:e("!text!rendererMessageControl"),rendererMessageTypeParagraphTemplate:e("!text!rendererMessageTypeParagraphTemplate"),rendererMessageTypeHeading1Template:e("!text!rendererMessageTypeHeading1Template"),rendererMessageTypeHeading2Template:e("!text!rendererMessageTypeHeading2Template"),rendererMessageTypeHeading3Template:e("!text!rendererMessageTypeHeading3Template"),rendererMessageTypeHeading4Template:e("!text!rendererMessageTypeHeading4Template"),rendererMessageTypeHeading5Template:e("!text!rendererMessageTypeHeading5Template"),rendererMessageTypeHeading6Template:e("!text!rendererMessageTypeHeading6Template"),rendererNumberControl:e("!text!rendererNumberControl"),rendererRadioButtonControl:e("!text!rendererRadioButtonControl"),rendererSelectControl:e("!text!rendererSelectControl"),rendererSingleSelectTemplate:e("!text!rendererSingleSelectTemplate"),rendererMultiSelectTemplate:e("!text!rendererMultiSelectTemplate"),rendererTextAreaControl:e("!text!rendererTextAreaControl"),rendererTextControl:e("!text!rendererTextControl"),rendererTimeControl:e("!text!rendererTimeControl"),rendererUrlControl:e("!text!rendererUrlControl"),rendererPhoneControl:e("!text!rendererPhoneControl"),rendererImageControl:e("!text!rendererImageControl"),rendererFormReferenceControl:e("!text!rendererFormReferenceControl"),rendererVideoControl:e("!text!rendererVideoControl"),rendererIdentityControl:e("!text!rendererIdentityControl"),rendererTemplate:e("!text!rendererTemplate"),rendererPanelControl:e("!text!rendererPanelControl"),rendererSectionControl:e("!text!rendererSectionControl"),rendererTableControl:e("!text!rendererTableControl"),rendererRepeatableSectionControl:e("!text!rendererRepeatableSectionControl"),rendererTabControl:e("!text!rendererTabControl"),rendererTableRow:e("!text!rendererTableRow"),rendererRepeatableRow:e("!text!rendererRepeatableRow"),columnControl:e("!text!columnControl"),rendererSectionRow:e("!text!rendererSectionRow"),rendererPanelItem:e("!text!rendererPanelItem"),rendererRepeatableItem:e("!text!rendererRepeatableItem"),rendererTabContainerControl:e("!text!rendererTabContainerControl")};e("ojs/ojknockout"),e("ojs/ojcheckboxset"),e("ojs/ojradioset"),e("ojs/ojselectcombobox"),e("ojs/ojinputnumber"),e("ojs/ojdatetimepicker"),e("ojs/ojknockout-validation"),e("ojidentity"),n.koStringTemplateEngine.install();for(var i in r)r.hasOwnProperty(i)&&(t.templates[i]=r[i])}),define("Class",["require","underscore"],function(e){"use strict";function t(e,t){return function(){e.apply(this,arguments)}}var n=e("underscore"),r=!1,i=/xyz/.test(function(){xyz})?/\b_super\b/:/.*/,s=function(e,t,n){for(var r in n)e[r]="function"==typeof n[r]&&"function"==typeof t[r]&&i.test(n[r])?function(e,n){return function(){var r=this._super;this._super=t[e];var i=n.apply(this,arguments);return this._super=r,i}}(r,n[r]):n[r]},o=function(e,t){for(var n in t)e[n]=t[n]},u=function(){},a="_protected";return u.subClass=function f(e,t){function i(e){for(var t=Object.getPrototypeOf(Object.getPrototypeOf(e));t;){if(n.has(t,a)){var r=n(t[a]).clone();e[a]=n.extend(t[a],e[a]),t[a]=r}t=Object.getPrototypeOf(t)}}function l(e,t){for(var r=Object.getPrototypeOf(Object.getPrototypeOf(e));r;){if(n.has(r,t)){var i=n(r[t]).clone();e[t]=n.union(r[t],e[t]),r[t]=i}r=Object.getPrototypeOf(r)}}function p(){if(!r&&this.init){for(var e in this)n.isFunction(this[e])||(this[e]=n(this[e]).clone(),e===a?i(this):n.isArray(this[e])&&l(this,e));this._class=p,this.init.apply(this,arguments)}}var v=this.prototype;r=!0;var m=new this;return r=!1,this._super&&o(p,this),e&&o(p,e),t&&s(m,this.prototype,t),p.prototype=m,p.prototype.constructor=p,p._super=v,p.subClass=f,p.extend=u.extend,p.include=u.include,p.prototype.parent=function(e,t){var n=Array.prototype.slice.call(arguments,2);e.prototype[t].apply(this,n)},p.prototype.proxy=function(e){var t=this;return function(){return e.apply(t,arguments)}},p.prototype.extend=function(e){o(this,e)},p.proxy=function(e){var t=this;return function(){return e.apply(t,arguments)}},p},u.extend=function(e){o(this,e)},u.include=function(e){s.call(this,this.prototype,this._super,e)},u.extendClass=function(e,n){for(var r in n)e[r]="init"===r?t(e[r],n[r]):e[r]?e[r]:n[r]},u}),function(){function e(e,t,n,r,i,s){return t[e]||(e=e.replace(/^zh-(Hans|Hant)-([^-]+)$/,"zh-$2")),!!t[e]&&(n.push(e),!0!==t[e]&&1!==t[e]||r.push(i+e+"/"+s),!0)}function t(e){var t=e.toLowerCase().split(/-|_/);e=[t[0]];var n,r=1;for(n=1;n<t.length;n++){var i=t[n],s=i.length;if(1==s)break;switch(r){case 1:if(r=2,4==s){e.push(i.charAt(0).toUpperCase()+i.slice(1));break};case 2:r=3,e.push(i.toUpperCase());break;default:e.push(i)}}return"zh"!=e[0]||1<e.length&&4==e[1].length||(t="Hans",r=1<e.length?e[1]:null,"TW"!==r&&"MO"!==r&&"HK"!==r||(t="Hant"),e.splice(1,0,t)),e}function n(e,t){for(var r in t)t.hasOwnProperty(r)&&(null==e[r]?e[r]=t[r]:"object"==typeof t[r]&&"object"==typeof e[r]&&n(e[r],t[r]))}var r=/(^.*(^|\/)nls(\/|$))([^\/]*)\/?([^\/]*)/;define("ojL10n",["module"],function(i){var s=i.config?i.config():{};return{version:"2.0.1+",load:function(i,o,u,l){l=l||{},l.locale&&(s.locale=l.locale);var h,p,v,m,g,y,w,E,S,x=r.exec(i),T=x[1],N=x[5],C=[],k={},L="";for(x[5]?(T=x[1],i=T+N,h=x[4]):(N=x[4],h=s.locale,"undefined"!=typeof document?(h||(h=l.isBuild?"root":document.documentElement.lang)||(h=void 0===navigator?"root":navigator.language||navigator.userLanguage||"root"),s.locale=h):h="root"),p=t(h),m=s.noOverlay,g=s.defaultNoOverlayLocale,(x=s.merge)&&(y=x[T+N])&&(x=r.exec(y),w=x[1],E=x[4]),S=[],v=0;v<p.length;v++)x=p[v],L+=(L?"-":"")+x,S.push(L);l.isBuild?(C.push(i),y&&C.push(y),o(C,function(){u()})):("query"==s.includeLocale&&(i=o.toUrl(i+".js"),i+=(-1===i.indexOf("?")?"?":"&")+"loc="+h),l=[i],y&&l.push(y),o(l,function(t,r){var i,s=[],f=!1,l=m||!0===t.__noOverlay,h=g||t.__defaultNoOverlayLocale;for(v=S.length-1;0<=v&&(!f||!l);v--)f=e(S[v],t,s,C,T,N);if(l&&!f&&h&&e(h,t,s,C,T,N),e("root",t,s,C,T,N),i=s.length,r){for(f=!1,l=!0===r.__noOverlay,h=r.__defaultNoOverlayLocale,v=S.length-1;0<=v&&(!f||!l);v--)f=e(S[v],r,s,C,w,E);l&&!f&&h&&e(h,r,s,C,w,E),e("root",r,s,C,w,E)}o(C,function(){var e,a,f;for(e=i;e<s.length&&s[e];e++)f=s[e],a=r[f],!0!==a&&1!==a||(a=o(w+f+"/"+E)),n(k,a);for(e=0;e<i&&s[e];e++)f=s[e],a=t[f],!0!==a&&1!==a||(a=o(T+f+"/"+N)),n(k,a);k._ojLocale_=p.join("-"),u(k)})}))}}})}(),define("rendererMsg/nls/renderer",{root:!0,ar:!1,pt:!0,"fr-CA":!1,cs:!1,da:!1,nl:!1,fi:!1,fr:!0,de:!0,el:!1,he:!1,hu:!1,it:!0,ja:!0,ko:!0,no:!1,pl:!1,"pt-PT":!1,ro:!1,ru:!1,"zh-Hans":!0,sk:!1,es:!0,sv:!1,th:!1,"zh-Hant":!0,tr:!1}),define("ColumnSpanTypeId",["require","ojL10n!rendererMsg/nls/renderer"],function(e){"use strict";var t=e("ojL10n!rendererMsg/nls/renderer");return{SMALL:{value:"SMALL",cssStyle:"media__icon media__small-icon",label:t.MEDIA_SMALL},MEDIUM:{value:"MEDIUM",cssStyle:"media__icon media__medium-icon",label:t.MEDIA_MEDIUM},LARGE:{value:"LARGE",cssStyle:"media__icon media__large-icon",label:t.MEDIA_LARGE},EXTRA_LARGE:{value:"EXTRA_LARGE",cssStyle:"media__icon media__extra-large-icon",label:t.MEDIA_EXTRA_LARGE},ALL:{value:"ALL",cssStyle:"media__icon media__all-icon",label:t.MEDIA_ALL}}}),define("StringUtils",["require","Class"],function(e){"use strict";var t=e("Class"),n=String.prototype.trim,r=function(e){return e.replace(/([-.*+?^${}()|[\]\/\\])/g,"\\$1")},i=function(e){return null!=e?"["+r(""+e)+"]":"\\s"},s=t.subClass({underscored:function(e){return this.trim(e).replace(/([a-z\d])([A-Z]+)/g,"$1_$2").replace(/[-\s]+/g,"_").toLowerCase()},trim:function(e,t){return e=this._makeString(e),!t&&n?n.call(e):(t=i(t),e.replace(new RegExp("^"+t+"+|"+t+"+$","g"),""))},humanize:function(e){return this.capitalize(this.underscored(e).replace(/_id$/,"").replace(/_/g," "))},capitalize:function(e){return e=this._makeString(e),e.charAt(0).toUpperCase()+e.substring(1)},words:function(e,t){return this.trim(e,t).split(t||/\s+/)},titleize:function(e){return(""+e).replace(/\b./g,function(e){return e.toUpperCase()})},classify:function(e){return e=this._makeString(e),this.titleize(e.replace(/_/g," ")).replace(/\s/g,"")},camelize:function(e,t){return e=this.trim(e).replace(/[-_\s]+(.)?/g,function(e,t){return t?t.toUpperCase():""}),!0===t?this.decap(e):e},decap:function(e){return e=this._makeString(e),e.charAt(0).toLowerCase()+e.slice(1)},startsWith:function(e,t){return e=this._makeString(e),0===e.indexOf(t)},endsWith:function(e,t){return e=this._makeString(e),-1!==e.indexOf(t,e.length-t.length)},_makeString:function(e){return null==e?"":""+e},wordwrap:function(e,t,n){if(e=this._makeString(e),0===e.length)return[];t=t||75;var r=".{1,"+t+"}(\\s|$)"+(n?"|.{"+t+"}|.+$":"|\\S+?(\\s|$)");return e.match(RegExp(r,"g"))},format:function(e){var t=arguments;return e.replace(/{(\d+)}/g,function(e,n){return s._makeString(t[Number(n)+1])})},generateLabelWithDots:function(e,t){return e.length>=t?e.substring(0,t-1)+"...":e}},{});return s}),define("DotExpressionResolver",["require","StringUtils","underscore"],function(e){"use strict";function t(e,t){return e[t]}function n(e){return e=r.trim(e).replace(/[-\s]+(.)?/g,function(e,t){return t?t.toUpperCase():""}),r.decap(e)}var r=e("StringUtils"),i=e("underscore"),s={_getValue:function(e,t,n){var r,i=t.shift();return i?(r=n(e,i))&&(r=s._getValue(r,t,n)):r=e,r},getValue:function(e,n){if(r.trim(n).length>0){var i=n.split(".");return s._getValue(e,i,t)}},getPCSCompatibleValue:function(e,o){if(r.trim(o).length>0){var u=o.split(".");return s._getValue(e,u,function(e,r){var s={};return i.each(e,function(e,t){var r=n(t);s[r]=e}),t(s,n(r))})}}};return s}),define("ValueScope",["require","Class","underscore","DotExpressionResolver"],function(e){"use strict";var t=e("Class"),n=e("underscore"),r=e("DotExpressionResolver");return t.subClass({},{eventControl:null,init:function(e){this.scopes=e?[e]:[],this.values={}},clearValues:function(){this.values={}},setValue:function(e,t){this.values[e]=t},getAttributes:function(){return[]},getValue:function(e){var t=r.getPCSCompatibleValue(this.values,e);return n.each(this.scopes,function(n){t||(t=n.getValue(e))}),t},getRootType:function(){return this.rootType}})}),define("TreeUtil",["require","Class","knockout","DotExpressionResolver","underscore"],function(e){"use strict";var t=e("Class"),n=e("knockout"),r=e("DotExpressionResolver"),i=e("underscore"),s=t.subClass({treeToList:function(e,t){for(var r=[],o=0;o<e.length;o++){var u=e[o],a=i.isFunction(u[t])?u[t]():u[t];if(a){var l=n.unwrap(a);r=r.concat(l),r=r.concat(s.treeToList(l,t))}}return r},find:function(e,t,n,r){var o=i.isFunction(e[t])?e[t]():e[t];return o&&o.constructor===Array?s._find(o,t,n,r,e):null},_find:function(e,t,n,o,u){for(var a=null,l=0;l<e.length;l++){var c=e[l],h=r.getValue(c,n);if((i.isFunction(h)?h():h)===o){a={node:c,parent:u};break}var p=i.isFunction(c[t])?c[t]():c[t];if(p&&p.constructor===Array&&(a=s._find(p,t,n,o,c)))break}return a}},{});return s}),define("ValidationHelper",["require","Class","ojs/ojcore","jquery","underscore","knockout","TreeUtil","ojL10n!rendererMsg/nls/renderer"],function(e){"use strict";var t=e("Class"),n=e("ojs/ojcore"),r=e("jquery"),i=e("underscore"),s=e("knockout"),o=e("TreeUtil"),u=e("ojL10n!rendererMsg/nls/renderer"),a="^(http(s)?:\\/\\/.)?(www\\.)?[-a-zA-Z0-9@:%._\\+~#=]{2,256}\\.[a-z]{2,6}\\b([-a-zA-Z0-9@:%_\\+.~#?&//=]*)$";return t.subClass({positiveValueValidator:function(e){return[{validate:function(t){if(t<=0)throw new n.ValidatorError(u.INCORRECT_FORMAT_MESSAGE,e);return!0}}]},dimensionValidator:function(e){return[{type:"regExp",options:{pattern:"^(auto|0)$|^[0-9]+(\\.[0-9]+)?(px|em|ex|%|in|cm|mm|pt|pc)$",messageSummary:u.INCORRECT_FORMAT_MESSAGE,messageDetail:e}}]},borderDimensionValidator:function(e){return[{type:"regExp",options:{pattern:"^(auto|0)$|^[0-9]+(\\.[0-9]+)?(px|em|ex|in|cm|mm|pt|pc)$",messageSummary:u.INCORRECT_FORMAT_MESSAGE,messageDetail:e}}]},hexValueValidator:function(e){return[{type:"regExp",options:{pattern:"^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$",messageSummary:u.INCORRECT_FORMAT_MESSAGE,messageDetail:e}}]},cssClassNameValidator:function(e){return[{type:"regExp",options:{pattern:"^((([a-zA-Z_]|-[a-zA-Z_-])[a-zA-Z0-9_-]*)\\s*)*$",messageSummary:u.INCORRECT_FORMAT_MESSAGE,messageDetail:e}}]},urlPattern:a,urlValidator:function(){return[{type:"regExp",options:{pattern:a,messageDetail:u.URL_FORMAT_ERROR_MESSAGE}}]},videoUrlValidator:function(){return[{type:"regExp",options:{pattern:"^(https?:\\/\\/)?(player.|www.)?(vimeo\\.com|youtu(be\\.com|\\.be|be\\.googleapis\\.com))\\/(watch\\?v=|video\\/|embed\\/)?([A-Za-z0-9._%-]*)(\\&\\S+)?$",messageDetail:u.URL_FORMAT_ERROR_MESSAGE}}]},optionsLengthValidator:function(e,t){return[{validate:function(r){var i=e.optionsNames.peek().split("\n").length;if(r.split("\n").length!==i)throw new n.ValidatorError(t);return!0}}]},optionsBlankValueValidator:function(e){return[{validate:function(t){for(var i=t.split("\n"),s=0;s<i.length;s++)if(""===r.trim(i[s]))throw new n.ValidatorError(e);return!0}}]},optionsUniqueValueValidator:function(e){return[{validate:function(t){var r=t.split("\n");if(i.uniq(r).length!==r.length)throw new n.ValidatorError(e);return!0}}]},uniqueControlNameValidator:function(e,t){return[{validate:function(r){var u=o.treeToList(t.viewModel.form().presentation().controls(),"controls");if(s.unwrap(t.name).toLowerCase()!==r.toLowerCase()&&i.find(u,function(e){return s.unwrap(e.name).toLowerCase()===r.toLowerCase()}))throw new n.ValidatorError(e);return!0}}]}},{})}),define("StyleTypeId",["require","ojL10n!rendererMsg/nls/renderer","ValidationHelper"],function(e){"use strict";var t=e("ojL10n!rendererMsg/nls/renderer"),n=e("ValidationHelper");return{BACKGROUND_COLOR:{styleType:"inline",controlType:"color",name:"backgroundColor",label:t.LABEL_BACKGROUND_COLOR,help:null,attrName:"background-color",group:"color","default":"#fcfdfe",validators:n.hexValueValidator(t.HEX_COLOR_FORMAT_ERROR_MESSAGE)},COLOR:{styleType:"inline",controlType:"color",name:"color",label:t.LABEL_COLOR,help:null,attrName:"color",group:"color","default":"#333333",validators:n.hexValueValidator(t.HEX_COLOR_FORMAT_ERROR_MESSAGE)},SIZE:{styleType:"inline",controlType:"select",name:"fontSize",label:t.LABEL_FONT_SIZE,help:null,attrName:"font-size",options:[{label:t.LABEL_FONT_SIZE_XSMALL,value:"x-small"},{label:t.LABEL_FONT_SIZE_SMALL,value:"small"},{label:t.LABEL_FONT_SIZE_NORMAL,value:"14px"},{label:t.LABEL_FONT_SIZE_LARGE,value:"large"},{label:t.LABEL_FONT_SIZE_XLARGE,value:"x-large"}],"default":"14px"},TEXT_ALIGN:{styleType:"inline",controlType:"select",name:"textAlign",label:t.LABEL_TEXT_ALIGN,help:null,attrName:"text-align",options:[{label:t.LABEL_TEXT_ALIGN_LEFT,value:"left"},{label:t.LABEL_TEXT_ALIGN_RIGHT,value:"right"},{label:t.LABEL_TEXT_ALIGN_CENTER,value:"center"}],"default":"",group:"align"},WIDTH:{styleType:"inline",controlType:"text",name:"width",label:t.LABEL_WIDTH,help:t.WIDTH_INLINE_HELP,attrName:"width",group:"size",validators:n.dimensionValidator(t.INVALID_WIDTH)},HEIGHT:{styleType:"inline",controlType:"text",name:"height",label:t.LABEL_HEIGHT,help:t.HEIGHT_INLINE_HELP,attrName:"height",group:"size",validators:n.dimensionValidator(t.INVALID_HEIGHT)},BORDER_COLOR:{styleType:"inline",controlType:"color",name:"borderColor",label:t.LABEL_BORDER_COLOR,help:null,attrName:"border-color",group:"border","default":"#dfe4e7",validators:n.hexValueValidator(t.HEX_COLOR_FORMAT_ERROR_MESSAGE)},BORDER_STYLE:{styleType:"inline",controlType:"select",name:"borderStyle",label:t.LABEL_BORDER_STYLE,help:null,attrName:"border-style",placeholder:"",options:[{label:t.LABEL_SOLID,value:"solid"},{label:t.LABEL_DOTTED,value:"dotted"},{label:t.LABEL_DASHED,value:"dashed"}],group:"border"},BORDER_WIDTH:{styleType:"inline",controlType:"text",name:"borderWidth",label:t.LABEL_BORDER_WIDTH,help:null,attrName:"border-width",group:"border",validators:n.borderDimensionValidator(t.INVALID_BORDER_WIDTH)},BORDER_RADIUS:{styleType:"inline",controlType:"text",name:"borderRadius",label:t.LABEL_BORDER_RADIUS,help:null,attrName:"border-radius",group:"border",validators:n.dimensionValidator(t.INVALID_BORDER_RADIUS)},CONTROL_ALIGN:{styleType:"",controlType:"select",name:"controlAlign",label:t.LABEL_CONTROL_ALIGNMENT,help:null,options:[{label:t.LABEL_TEXT_ALIGN_LEFT,value:"left"},{label:t.LABEL_TEXT_ALIGN_RIGHT,value:"right"},{label:t.LABEL_TEXT_ALIGN_CENTER,value:"center"}],"default":"",group:"align"},LABEL_COLOR:{styleType:"",controlType:"color",name:"labelColor",label:t.LABEL_LABEL_COLOR,help:null,group:"label","default":"#4f4f4f",validators:n.hexValueValidator(t.HEX_COLOR_FORMAT_ERROR_MESSAGE)},LABEL_SIZE:{styleType:"",controlType:"select",name:"labelSize",label:t.LABEL_LABEL_SIZE,help:null,options:[{label:t.LABEL_FONT_SIZE_XSMALL,value:"x-small"},{label:t.LABEL_FONT_SIZE_SMALL,value:"small"},{label:t.LABEL_FONT_SIZE_NORMAL,value:"15px"},{label:t.LABEL_FONT_SIZE_LARGE,value:"large"},{label:t.LABEL_FONT_SIZE_XLARGE,value:"x-large"}],"default":"",group:"label"},CLASS_NAME:{styleType:"",controlType:"text",name:"controlClassName","default":"",help:t.CONTROL_CLASS_NAME_INLINE_HELP,label:t.LABEL_CONTROL_CLASS_NAME,validators:n.cssClassNameValidator(t.INVALID_CLASS_NAME)},TABLE_WIDTH:{styleType:"",controlType:"tableWidth",name:t.LABEL_TABLE_COLUMNS_WIDTH,"default":"",help:t.TABLE_WIDTH_INLINE_HELP,label:t.LABEL_TABLE_WIDTH,validators:n.cssClassNameValidator(t.INVALID_CLASS_NAME)},TABLE_COLUMN_WIDTH:{styleType:"inline",controlType:"tableColumnWidth",name:"tableColumnWidth",label:t.LABEL_WIDTH,help:t.WIDTH_INLINE_HELP,attrName:"width",group:"size",validators:n.dimensionValidator(t.INVALID_WIDTH)}}}),define("StyleControlMapper",["require","StyleTypeId","jquery"],function(e){"use strict";var t=e("StyleTypeId"),n=e("jquery"),r=[t.CONTROL_ALIGN],i=[t.LABEL_SIZE,t.LABEL_COLOR],s=i.concat([t.BACKGROUND_COLOR,t.COLOR,t.WIDTH,t.HEIGHT,t.SIZE,t.TEXT_ALIGN,t.BORDER_COLOR,t.BORDER_WIDTH,t.BORDER_STYLE,t.BORDER_RADIUS]),o=function(e){var t=n.extend(!0,{},e);return t.important=!0,t};return{INPUT_TEXT:r.concat(s,t.CLASS_NAME),TEXT_AREA:r.concat(s,t.CLASS_NAME),BUTTON:r.concat([t.BACKGROUND_COLOR,t.COLOR,t.WIDTH,t.HEIGHT,t.SIZE,t.TEXT_ALIGN,t.BORDER_WIDTH,t.BORDER_STYLE,t.BORDER_COLOR,t.BORDER_RADIUS],t.CLASS_NAME),SELECT:r.concat(s,t.CLASS_NAME),IDENTITY_BROWSER:r.concat(s,t.CLASS_NAME),CHECKLIST:r.concat(i,[t.BACKGROUND_COLOR,t.COLOR,t.SIZE],t.CLASS_NAME),CHECKBOX:r.concat(i,[t.BACKGROUND_COLOR,t.COLOR,t.SIZE],t.CLASS_NAME),RADIO_BUTTON:r.concat(i,[t.BACKGROUND_COLOR,t.COLOR,t.SIZE],t.CLASS_NAME),NUMBER:r.concat(i,[t.BACKGROUND_COLOR,t.COLOR,t.WIDTH,t.HEIGHT,t.SIZE,t.TEXT_ALIGN,t.BORDER_COLOR,t.BORDER_WIDTH,t.BORDER_STYLE],t.CLASS_NAME),DATE:r.concat(s,t.CLASS_NAME),TIME:r.concat(s,t.CLASS_NAME),DATE_TIME:r.concat(s,t.CLASS_NAME),EMAIL:r.concat(s,t.CLASS_NAME),URL:r.concat(s,t.CLASS_NAME),MESSAGE:r.concat([t.BACKGROUND_COLOR,t.COLOR,t.SIZE],t.CLASS_NAME),LINK:r.concat([t.BACKGROUND_COLOR,o(t.COLOR),t.SIZE,t.TEXT_ALIGN],t.CLASS_NAME),MONEY:r.concat(i,[t.BACKGROUND_COLOR,t.COLOR,t.WIDTH,t.HEIGHT,t.SIZE,t.TEXT_ALIGN,t.BORDER_COLOR,t.BORDER_WIDTH,t.BORDER_STYLE],t.CLASS_NAME),PHONE:r.concat(s,t.CLASS_NAME),IMAGE:r.concat(i,[t.BACKGROUND_COLOR],t.CLASS_NAME),VIDEO:r.concat(i,[t.BACKGROUND_COLOR],t.CLASS_NAME),PANEL:i.concat([t.BACKGROUND_COLOR,t.BORDER_COLOR,t.BORDER_WIDTH,t.BORDER_STYLE,t.BORDER_RADIUS],t.CLASS_NAME),SECTION:[t.BACKGROUND_COLOR,t.COLOR,t.BORDER_COLOR,t.BORDER_WIDTH,t.BORDER_STYLE,t.BORDER_RADIUS,t.CLASS_NAME],REPEATABLE_SECTION:i,TABLE:i.concat([t.TABLE_WIDTH]),TABLE_COLUMN:[t.TABLE_COLUMN_WIDTH],FORM_REFERENCE:i,FORM_PRESENTATION:[]}}),define("Style",["require","Class","knockout"],function(e){"use strict";var t=e("Class"),n=e("knockout");return t.subClass({},{init:function(e,t,r){this.type=t,this.domId=e+t.name,this.rawValue=n.observable(r||""),this.value=n.computed({read:function(){return this.rawValue()||t.default},write:function(e){null!==e&&void 0!==e&&this.rawValue(e)},owner:this})}})}),define("StyleHandler",["require","knockout","underscore","Class","StyleControlMapper","Style"],function(e){"use strict";var t=e("knockout"),n=e("underscore"),r=e("Class"),i=e("StyleControlMapper"),s=e("Style");return r.subClass({},{init:function(){},getAllStyles:function(e,r){var o=[];if(i[e.type]){var u=n.groupBy(i[e.type],"group");n.each(u,function(t,i){n.each(t,function(n){var u,l="undefined"===i?12:Math.ceil(12/t.length);r.formattedStyle&&(u=r.formattedStyle[n.name]),n.computedClass="oj-col oj-sm-"+l,o.push(new s(e.id,n,u))},this)},this)}return t.observableArray(o)},getParsedStyle:function(e){return t.computed(function(){var r=t.utils.unwrapObservable(e.styles),i="";return r.forEach(function(e){var r=t.utils.unwrapObservable(e.rawValue);r=r instanceof Array?r[0]:r,"inline"!==e.type.styleType||n.isUndefined(r)||n.isNull(r)||""===r||r===e.type.default||(!n.isUndefined(e.type.important)&&e.type.important?i+=e.type.attrName+":"+r+" !important;":i+=e.type.attrName+":"+r+";")}),i},e)},getFormattedStyle:function(e){return t.computed(function(){var r=t.utils.unwrapObservable(e.styles),i={};return r.forEach(function(e){var r=t.utils.unwrapObservable(e.rawValue);r=r instanceof Array?r[0]:r,n.isUndefined(r)||n.isNull(r)||""===r||r===e.type.default||(i[e.type.name]=r)}),i},e)}})}),define("ControlTypeId",[],function(){"use strict";return{FORM_PRESENTATION:"FORM_PRESENTATION",INPUT_TEXT:"INPUT_TEXT",TEXT_AREA:"TEXT_AREA",BUTTON:"BUTTON",SELECT:"SELECT",CHECKLIST:"CHECKLIST",CHECKBOX:"CHECKBOX",RADIO_BUTTON:"RADIO_BUTTON",NUMBER:"NUMBER",DATE:"DATE",TIME:"TIME",DATE_TIME:"DATE_TIME",EMAIL:"EMAIL",URL:"URL",MESSAGE:"MESSAGE",LINK:"LINK",MONEY:"MONEY",PHONE:"PHONE",IMAGE:"IMAGE",VIDEO:"VIDEO",IDENTITY_BROWSER:"IDENTITY_BROWSER",ROW:"ROW",PANEL:"PANEL",FORM_REFERENCE:"FORM_REFERENCE",SECTION:"SECTION",TAB:"TAB",TAB_CONTAINER:"TAB_CONTAINER",REPEATABLE_SECTION:"REPEATABLE_SECTION",REPEATABLE_SECTION_ROW:"REPEATABLE_SECTION_ROW",TABLE:"TABLE",TABLE_COLUMN:"TABLE_COLUMN",TABLE_ROW:"TABLE_ROW",BUSINESS_TYPE:"BUSINESS_TYPE"}}),define("FormContext",["require","Class","knockout","underscore","ColumnSpanTypeId","ValueScope","StringUtils","StyleHandler","ControlTypeId"],function(e){"use strict";var t=e("Class"),n=e("knockout"),r=e("underscore"),i=e("ColumnSpanTypeId"),s=e("ValueScope"),o=e("StringUtils"),u=e("StyleHandler"),a=e("ControlTypeId");return t.subClass({},{init:function(e,t,r){this.viewModel=r,this.config=n.observable(e),this.payload=n.observable(),this.config().resolveDependencies(t||[]),this.styleHandler=new u;var o;o=e&&e.selectedMedia&&i[e.selectedMedia]?i[e.selectedMedia]:this._getDefaultSelectedMedia(),this.selectedMedia=n.observable(o),this.scopeFactory={Scope:s,ErrorScope:s}},getControlDefinition:function(e){if(e.type===a.FORM_REFERENCE){var t=e.properties.reference,r=n.isObservable(t)?t().get():t;return this.getFormReferenceControlDefinition(r,this.config().formHandler)}return this.getControlDefinitionByType(e.type)},getControlDefinitionByType:function(e){throw new Error("Unsupported operation")},getFormReferenceControlDefinition:function(e,t){throw new Error("Unsupported operation")},properties:function(){return{eventsQueue:this.eventsQueue,domIdPrefix:this.config().domIdPrefix,styleHandler:this.styleHandler,viewModel:this.viewModel,selectedMedia:function(){return this.selectedMedia}.bind(this),StringUtils:function(){return o}}},addControlDecorators:function(e){throw new Error("Unsupported operation")},_getDefaultSelectedMedia:function(){return i.ALL},findCallDefinition:function(e){return r.find(this.calls(),function(t){return t.id===e})}})}),define("ControlDefinition",["require","Class"],function(e){"use strict";return e("Class").subClass({},{init:function(e,t){this.id=e,this.controlTemplate=t},properties:function(){return{controlTemplate:this.controlTemplate}},isBindable:function(){return!1}})}),define("InputControlDefinition",["require","ControlDefinition","underscore"],function(e){"use strict";var t=e("ControlDefinition"),n=e("underscore");return t.subClass({},{init:function(e,t,n){this._super(e,n),this.dataType=t},properties:function(){return n.extend(this._super(),{dataType:this.dataType})},isBindable:function(){return!0}})}),define("Enum",["require","underscore","Class"],function(e){"use strict";var t=e("underscore");return e("Class").subClass({valueOf:function(e){return this[t.find(t.keys(this),function(t){return t===e})]}},{})}),define("TypeDescription",["require","Enum","ControlTypeId"],function(e){"use strict";var t=e("Enum"),n=e("ControlTypeId");return t.subClass({ARRAY:{name:"ARRAY",defaultControl:null},BOOLEAN:{name:"BOOLEAN",defaultControl:n.CHECKBOX},DATE_TIME:{name:"DATE_TIME",defaultControl:n.DATE_TIME},DATE:{name:"DATE",defaultControl:n.DATE},ENUM:{name:"ENUM",defaultControl:null},NUMBER:{name:"NUMBER",defaultControl:n.NUMBER},OBJECT:{name:"OBJECT",defaultControl:n.SECTION},OBJECT_REF:{name:"OBJECT_REF",defaultControl:null},STRING:{name:"STRING",defaultControl:n.INPUT_TEXT},TIME:{name:"TIME",defaultControl:n.TIME},UNKNOWN:{name:"UNKNOWN",defaultControl:null},getControlForArray:function(e){switch(e.name){case this.STRING.name:return n.CHECKLIST;case this.OBJECT.name:return n.REPEATABLE_SECTION;default:return this.ARRAY.defaultControl}},equals:function(e,t){return e.name===t.name}},{})}),define("DataType",["require","Class","knockout","TypeDescription"],function(e){"use strict";var t=e("Class"),n=e("knockout"),r=e("TypeDescription");return t.subClass({},{init:function(e,t,r,i,s){var o=this;o.id=n.observable(e),o.name=n.observable(t),o.label=n.observable(r),o.icon=n.observable(i),o._schema=s},isObject:function(){return this.hasOwnProperty("attributes")&&!r.equals(this.getTypeDescription(),r.UNKNOWN)},isContainer:function(){return r.equals(this.getTypeDescription(),r.OBJECT)},isArray:function(){return!1},getTypeDescription:function(){throw new Error("This function must be overridden")},getTypeName:function(){return this.getTypeDescription().name},getDefaultControl:function(){return this.getTypeDescription().defaultControl},toJS:function(){return this.schema()},isCompatible:function(e){return this.id()===e.id()},schema:function(){return this._schema}})}),define("SimpleType",["require","DataType"],function(e){"use strict";return e("DataType").subClass({},{init:function(e,t,n,r,i){this._super(this.getTypeName(),e,t,n,{type:r,format:i})}})}),define("StringType",["require","SimpleType","TypeDescription"],function(e){"use strict";var t=e("SimpleType"),n=e("TypeDescription");return t.subClass({},{init:function(e){this._super(e,"String","","string","string")},getTypeDescription:function(){return n.STRING}})}),define("NumberType",["require","SimpleType","TypeDescription"],function(e){"use strict";var t=e("SimpleType"),n=e("TypeDescription");return t.subClass({},{init:function(e){this._super(e,"Number","","number","")},getTypeDescription:function(){return n.NUMBER}})}),define("BooleanType",["require","SimpleType","TypeDescription"],function(e){"use strict";var t=e("SimpleType"),n=e("TypeDescription");return t.subClass({},{init:function(e){this._super(e,"Boolean","","boolean","")},getTypeDescription:function(){return n.BOOLEAN}})}),define("DateType",["require","SimpleType","TypeDescription"],function(e){"use strict";var t=e("SimpleType"),n=e("TypeDescription");return t.subClass({},{init:function(e){this._super(e,"Date","","string","date")},getTypeDescription:function(){return n.DATE}})}),define("TimeType",["require","SimpleType","TypeDescription"],function(e){"use strict";var t=e("SimpleType"),n=e("TypeDescription");return t.subClass({},{init:function(e){this._super(e,"Time","","string","time")},getTypeDescription:function(){return n.TIME}})}),define("DateTimeType",["require","SimpleType","TypeDescription"],function(e){"use strict";var t=e("SimpleType"),n=e("TypeDescription");return t.subClass({},{init:function(e){this._super(e,"Date Time","","string","date-time")},getTypeDescription:function(){return n.DATE_TIME}})}),define("ArrayType",["require","DataType","knockout","underscore","TypeDescription"],function(e){"use strict";var t=e("DataType"),n=e("knockout"),r=e("underscore"),i=e("TypeDescription");return t.subClass({},{init:function(e,t,r){this._super(this.getTypeName()+"#"+t.id(),e,t.label()+" [ ]","",{type:"array",items:r||t.schema()}),this.itemType=n.observable(t),this.itemType().isObject()&&(this.attributes=n.pureComputed(function(){return this.itemType().attributes()}.bind(this)))},isCompatible:function(e){return e.isArray()&&this.itemType().isCompatible(e.itemType())},isArray:function(){return!0},isObject:function(){return this.itemType().isObject()},isContainer:function(){return this.itemType().isContainer()},getTypeDescription:function(){return i.ARRAY},getDefaultControl:function(){return i.getControlForArray(this.itemType().getTypeDescription())},schema:function(){var e=this._super();if(this.itemType().isObject()){var t={};r.each(this.attributes(),function(e){t[e.name()]=e.toJS()},this),e.items.properties=t}return e}})}),define("EnumType",["require","DataType","knockout","TypeDescription"],function(e){"use strict";var t=e("DataType"),n=e("knockout"),r=e("TypeDescription");return t.subClass({},{init:function(e,t){this._super(this.getTypeName(),e,e,"",{"enum":t}),this.attributes=n.observableArray(t)},getTypeDescription:function(){return r.ENUM}})}),define("NameGenerator",["require","Class","StringUtils","TreeUtil","knockout","jquery"],function(e){"use strict";var t=e("Class"),n=e("StringUtils"),r=e("TreeUtil"),i=e("knockout"),s=e("jquery"),o=function(e){return e=n.trim(e).replace(/[\s]+(.)?/g,function(e,t){return t.toUpperCase()})},u=t.subClass({generateName:function(e,t,n,r){e=o(e);var a=r?e+r:e;r=r||0;var l=n||"name";return s.each(i.unwrap(t),function(n,s){if(i.unwrap(s[l])===a)return r++,a=u.generateName(e,t,l,r),!1}),a},generateNameFromTree:function(e,t,n,i,s){var o=r.treeToList(t,n);return u.generateName(e,o,i,s)}},{});return u}),define("ObjectAttribute",["require","Class","knockout"],function(e){"use strict";var t=e("Class"),n=e("knockout");return t.subClass({},{init:function(e,t){this.name=n.observable(e),this.dataType=n.observable(t)},toJS:function(){return this.dataType().toJS()}})}),define("ObjectType",["require","DataType","knockout","underscore","TypeDescription","NameGenerator","ObjectAttribute","StringUtils"],function(e){"use strict";var t=e("DataType"),n=e("knockout"),r=e("underscore"),i=e("TypeDescription"),s=e("NameGenerator"),o=e("ObjectAttribute"),u=e("StringUtils");return t.subClass({},{init:function(e,t,r){this._super(e,t,t,"",{$schema:"http://json-schema.org/draft-04/schema#",$id:e,$name:t,type:"object",properties:{}}),this.attributes=n.observableArray(r)},isCompatible:function(e){return e.isObject()},getTypeDescription:function(){return i.OBJECT},addAttribute:function(e,t){return e=s.generateName(u.decap(e),r.keys(this.schema().properties)),this.attributes.push(new o(e,t)),this.schema().properties[e]=t.toJS(),e},getAttribute:function(e){return r.find(this.attributes(),function(t){return t.name()===e})},removeAttribute:function(e){this.attributes.remove(this.getAttribute(e)),delete this.schema().properties[e]},toJS:function(){return{$ref:this.schema().$id}},schema:function(){var e={};r.each(this.attributes(),function(t){e[t.name()]=t.toJS()},this);var t=this._super();return t.properties=e,t}})}),define("ObjectTypeRef",["require","DataType","TypeDescription"],function(e){"use strict";var t=e("DataType"),n=e("TypeDescription");return t.subClass({},{init:function(e,t){this._super(e,t,t,"",{$ref:e})},getTypeDescription:function(){return n.OBJECT_REF}})}),define("UnknownType",["require","DataType","knockout","TypeDescription"],function(e){"use strict";var t=e("DataType"),n=e("knockout"),r=e("TypeDescription");return t.subClass({},{init:function(e){this._super(this.getTypeName(),"Unknown","Unknown","",e),this.attributes=n.observable([])},getTypeDescription:function(){return r.UNKNOWN}})}),define("TypeFactory",["require","Class","StringType","NumberType","BooleanType","DateType","TimeType","DateTimeType","ArrayType","EnumType","ObjectType","ObjectTypeRef","UnknownType"],function(e){"use strict";var t=e("Class"),n=e("StringType"),r=e("NumberType"),i=e("BooleanType"),s=e("DateType"),o=e("TimeType"),u=e("DateTimeType"),a=e("ArrayType"),f=e("EnumType"),l=e("ObjectType"),c=e("ObjectTypeRef"),h=e("UnknownType");return t.subClass({createStringType:function(e){return new n(e)},createNumberType:function(e){return new r(e)},createBooleanType:function(e){return new i(e)},createDateType:function(e){return new s(e)},createTimeType:function(e){return new o(e)},createDateTimeType:function(e){return new u(e)},createArrayType:function(e,t,n){return new a(e,t,n)},createEnumType:function(e,t){return new f(e,t)},createObjectType:function(e,t,n){return new l(e,t,n)},createObjectTypeRef:function(e,t){return new c(e,t)},createUnknownType:function(e){return new h(e)}},{})}),define("ParseStrategy",["require","Class"],function(e){"use strict";return e("Class").subClass({},{init:function(){},resolveReference:function(e,t){throw new Error("This function must be overridden")},getObjectType:function(e,t){throw new Error("This function must be overridden")},createObjectType:function(e,t,n){throw new Error("This function must be overridden")}})}),define("DoNotResolveRefStrategy",["require","ParseStrategy"],function(e){"use strict";return e("ParseStrategy").subClass({},{init:function(){},resolveReference:function(e,t){return t.getObjectTypesRefs()[e]},getObjectType:function(e,t){return t.getObjectTypes()[e.$id]},createObjectType:function(e,t,n){return n._createObjectType(e,t,this)}})}),define("ResolveRefStrategy",["require","ParseStrategy","DoNotResolveRefStrategy"],function(e){"use strict";var t=e("ParseStrategy"),n=e("DoNotResolveRefStrategy");return t.subClass({},{init:function(e){this.depth=e||2,this.objectsCache={}},resolveReference:function(e,t){return t._doResolveReference(t.getObjectTypesRefs()[e],this)},getObjectType:function(e,t){return this.createObjectType(e,t.getObjectTypes()[e.$id].name(),t)},createObjectType:function(e,t,r){return this.cacheObject(e.$id),this.depth>=this.objectsCache[e.$id]?r._createObjectType(e,t,this):r._createObjectType(e,t,new n)},cacheObject:function(e){this.objectsCache[e]?this.objectsCache[e]++:this.objectsCache[e]=1}})}),define("IdentityType",["require","StringType","NumberType","ObjectType"],function(e){"use strict";var t=e("StringType"),n=e("NumberType"),r=e("ObjectType"),i=new r("IdentityBrowser","IdentityBrowser",[]),s={id:new t,title:new t,firstName:new t,lastName:new t,type:new t,email:new t,mobile:new n};for(var o in s)s.hasOwnProperty(o)&&i.addAttribute(o,s[o]);return i}),define("TypeCatalog",["require","Class","knockout","TypeFactory","NameGenerator","underscore","jquery","ObjectTypeRef","DoNotResolveRefStrategy","ResolveRefStrategy","IdentityType","ObjectAttribute"],function(e){"use strict";var t=e("Class"),n=e("knockout"),r=e("TypeFactory"),i=e("NameGenerator"),s=e("underscore"),o=e("jquery"),u=e("ObjectTypeRef"),a=e("DoNotResolveRefStrategy"),f=e("ResolveRefStrategy"),l=e("IdentityType"),c=e("ObjectAttribute"),h=function(e){p.getObjectTypes()[e.id()]=e},p=t.subClass({initTypes:function(){this.objectTypes=void 0,this.objectTypesRefs=void 0},getSimpleTypesDefinitions:function(){return void 0===this.simpleTypes&&(this.simpleTypes=n.observable({}),this.simpleTypes().STRING=r.createStringType(),this.simpleTypes().NUMBER=r.createNumberType(),this.simpleTypes().BOOLEAN=r.createBooleanType(),this.simpleTypes().DATE=r.createDateType(),this.simpleTypes().TIME=r.createTimeType(),this.simpleTypes().DATE_TIME=r.createDateTimeType()),this.simpleTypes()},getObjectTypesRefs:function(){return void 0===this.objectTypesRefs&&(this.objectTypesRefs=n.observable({})),this.objectTypesRefs()},getObjectTypes:function(){return void 0===this.objectTypes&&(this.objectTypes=n.observable({})),this.objectTypes()},getArrayTypeDefinition:function(e){return this.getArrayType(e)},getArrayType:function(e,t,n){return r.createArrayType(t,e,n)},getIdentityType:function(){return h(l),l},parseRootType:function(e,t){return this._doParseType(e,t,new a)},parseTypePartially:function(e,t,n){return this._doParseType(e,t,new f(n))},_doParseType:function(e,t,n){if(void 0===t)return r.createUnknownType({});if(t.$ref)return void 0===this.getObjectTypesRefs()[t.$ref]&&(this.getObjectTypesRefs()[t.$ref]=r.createObjectTypeRef(t.$ref,e)),n.resolveReference(t.$ref,this);if(t.enum)return r.createEnumType(e,t.enum);switch(t.type){case"string":var s;switch(t.format){case"string":s=r.createStringType(e);break;case"date":s=r.createDateType(e);break;case"time":s=r.createTimeType(e);break;case"date-time":s=r.createDateTimeType(e);break;default:s=r.createStringType(e)}return s;case"boolean":return r.createBooleanType(e);case"number":return"base64Binary"===t.format?r.createStringType(e):r.createNumberType(e);case"array":var o=this._doParseType("itemType",t.items,n);return this.getArrayType(o,e,t.items);case"object":var u;if(this.getObjectTypes()[t.$id])u=this.getObjectTypes()[t.$id]=n.getObjectType(t,this);else{var a=i.generateName(t.$name,this.objectTypes());u=n.createObjectType(t,a,this),h(u)}return u;default:return r.createUnknownType(t)}},_createObjectType:function(e,t,n){var i=[];return s.each(s.keys(e.properties),function(t){var r=this._doParseType(t,e.properties[t],n);i.push(new c(t,r))},this),r.createObjectType(e.$id,t,i)},resolveReference:function(e){return this._getOrResolveReference(e,new f(1))},_getOrResolveReference:function(e,t){var n=s.find(this.getObjectTypes(),function(t){return t.schema().$id===e.schema().$ref},this);return n||this._doResolveReference(e,t)},_doResolveReference:function(e,t){var n=this.typeHandler.getResolvedControl(e.schema().$ref);return o.isEmptyObject(n)?r.createUnknownType(e.schema()):this._doParseType(e.name(),n,t)},getConcreteType:function(e,t){var n=this._doParseType(e,t,new a);return n instanceof u&&(n=this.resolveReference(n)),n}},{});return p}),define("FormControlDefinition",["require","InputControlDefinition","knockout","TypeCatalog"],function(e){"use strict";var t=e("InputControlDefinition"),n=e("knockout"),r=e("TypeCatalog");return t.subClass({},{init:function(e,t,n,i){this._super(e,null,i),this.reference=t,this.formHandler=n,this.form=this.formHandler.getResolvedControl(this.reference.get().formId),this.dataType=r.parseTypePartially("definition",this.form.definition)},properties:function(){return n.utils.extend(this._super(),{reference:this.reference,form:this.form,dataType:this.dataType})}})}),define("RendererControlType",["require","InputControlDefinition","ControlDefinition","ControlTypeId","TypeCatalog","FormControlDefinition"],function(e){"use strict";var t=e("InputControlDefinition"),n=e("ControlDefinition"),r=e("ControlTypeId"),i=e("TypeCatalog"),s=e("FormControlDefinition");return{INPUT_TEXT:new t(r.INPUT_TEXT,i.getSimpleTypesDefinitions().STRING,"rendererTextControl"),TEXT_AREA:new t(r.TEXT_AREA,i.getSimpleTypesDefinitions().STRING,"rendererTextAreaControl"),BUTTON:new n(r.BUTTON,"rendererButtonControl"),SELECT:new t(r.SELECT,i.getSimpleTypesDefinitions().STRING,"rendererSelectControl"),CHECKLIST:new t(r.CHECKLIST,i.getArrayType(i.getSimpleTypesDefinitions().STRING),"rendererChecklistControl"),CHECKBOX:new t(r.CHECKBOX,i.getSimpleTypesDefinitions().BOOLEAN,"rendererCheckboxControl"),RADIO_BUTTON:new t(r.RADIO_BUTTON,i.getSimpleTypesDefinitions().STRING,"rendererRadioButtonControl"),NUMBER:new t(r.NUMBER,i.getSimpleTypesDefinitions().NUMBER,"rendererNumberControl"),DATE:new t(r.DATE,i.getSimpleTypesDefinitions().DATE,"rendererDateControl"),TIME:new t(r.TIME,i.getSimpleTypesDefinitions().TIME,"rendererTimeControl"),DATE_TIME:new t(r.DATE_TIME,i.getSimpleTypesDefinitions().DATE_TIME,"rendererDateTimeControl"),EMAIL:new t(r.EMAIL,i.getSimpleTypesDefinitions().STRING,"rendererEmailControl"),URL:new t(r.URL,i.getSimpleTypesDefinitions().STRING,"rendererUrlControl"),MESSAGE:new t(r.MESSAGE,i.getSimpleTypesDefinitions().STRING,"rendererMessageControl"),LINK:new t(r.LINK,i.getSimpleTypesDefinitions().STRING,"rendererLinkControl"),MONEY:new t(r.MONEY,i.getSimpleTypesDefinitions().NUMBER,"rendererMoneyControl"),PHONE:new t(r.PHONE,i.getSimpleTypesDefinitions().STRING,"rendererPhoneControl"),IMAGE:new t(r.IMAGE,i.getSimpleTypesDefinitions().STRING,"rendererImageControl"),VIDEO:new t(r.VIDEO,i.getSimpleTypesDefinitions().STRING,"rendererVideoControl"),IDENTITY_BROWSER:new t(r.IDENTITY_BROWSER,i.getArrayType(i.getSimpleTypesDefinitions().STRING),"rendererIdentityControl"),PANEL:new n(r.PANEL,"rendererPanelControl"),SECTION:new n(r.SECTION,"rendererSectionControl"),TAB:new n(r.TAB,"rendererTabControl"),TAB_CONTAINER:new n(r.TAB_CONTAINER,"rendererTabContainerControl"),REPEATABLE_SECTION:new t(r.REPEATABLE_SECTION,i.getArrayTypeDefinition(i.getSimpleTypesDefinitions().STRING),"rendererRepeatableSectionControl"),TABLE:new t(r.TABLE,i.getArrayTypeDefinition(i.getSimpleTypesDefinitions().STRING),"rendererTableControl"),TABLE_COLUMN:new n(r.TABLE_COLUMN,""),FORM_REFERENCE:function(e,t){return new s(r.FORM_REFERENCE,e,t,"rendererFormReferenceControl")}}}),define("RendererId",[],function(){"use strict";return{FORM_RENDERER:"form-renderer"}}),define("Icon",["require","Class"],function(e){"use strict";var t=e("Class"),n="data:image/svg+xml;base64,";return t.subClass({},{init:function(e,t,n){this.value=e,this.hover=t,this.active=n},getDataValue:function(){return n+window.btoa(this.value)},getDataHover:function(){return n+window.btoa(this.hover)},getDataActive:function(){return n+window.btoa(this.active)}})}),define("EventsId",["require","ojL10n!rendererMsg/nls/renderer"],function(e){"use strict";var t=e("ojL10n!rendererMsg/nls/renderer");return{ON_LOAD:{value:"ON_LOAD",label:t.ON_LOAD,event:"load"},ON_CHANGE:{value:"ON_CHANGE",label:t.ON_CHANGE,event:"change"},ON_FOCUS:{value:"ON_FOCUS",label:t.ON_FOCUS,event:"focus"},ON_BLUR:{value:"ON_BLUR",label:t.ON_BLUR,event:"blur"},ON_EXPAND_TOGGLE:{value:"ON_EXPAND_TOGGLE",label:t.ON_EXPAND_TOGGLE,event:"expand"},ON_EXPAND:{value:"ON_EXPAND",label:t.ON_EXPAND,event:"expand"},ON_COLLAPSE:{value:"ON_COLLAPSE",label:t.ON_COLLAPSE,event:"expand"},ON_SELECTION_CHANGE:{value:"ON_SELECTION_CHANGE",label:t.ON_SELECTION_CHANGE,event:"selectionChange"},ON_SELECTED:{value:"ON_SELECTED",label:t.ON_SELECTED,event:"ojselect"},ON_UNSELECTED:{value:"ON_UNSELECTED",label:t.ON_UNSELECTED,event:"ojdeselect"},ON_CLICK:{value:"ON_CLICK",label:t.ON_CLICK,event:"click"},ON_SUBMIT:{value:"ON_SUBMIT",label:t.ON_SUBMIT,event:"submit"},ON_ADD_ROW:{value:"ON_ADD_ROW",label:t.ON_ADD_ROW,event:"addRow"},ON_REMOVE_ROW:{value:"ON_REMOVE_ROW",label:t.ON_REMOVE_ROW,event:"removeRow"},ON_CHILDREN_CHANGE:{value:"ON_CHILDREN_CHANGE",label:"ON_CHILDREN_CHANGE",event:"childrenChange"}}}),define("Handler",["require","Class"],function(e){"use strict";return e("Class").subClass({},{init:function(e){this._id=e},listControls:function(e,t){throw new Error("This function must be overridden")},getControl:function(e){throw new Error("This function must be overridden")},getResolvedControl:function(e){throw new Error("This function must be overridden")},addOrUpdateControl:function(e){throw new Error("This function must be overridden")},addResolvedControl:function(e){throw new Error("This function must be overridden")},removeControl:function(e){throw new Error("This function must be overridden")},search:function(e){throw new Error("This function must be overridden")},toJS:function(){return this._id}})}),define("ContextualHandler",["require","Handler"],function(e){"use strict";return e("Handler").subClass({},{init:function(e){this._super(e)},setContext:function(e){this.context=e},resolveDependencies:function(e){this.context.resolveDependencies(e)}})}),define("DefaultFormHandler",["require","ContextualHandler","underscore","jquery"],function(e){"use strict";var t=e("ContextualHandler"),n=e("underscore"),r=e("jquery"),i=t.subClass({},{init:function(e){this._super(e),this._references=[],this._forms=[]},listControls:function(e,t){return t=t?t+1:this._references.length,Promise.resolve(this._references.slice(e,t))},getControl:function(e){return Promise.resolve(r.extend(!0,{},n.find(this._forms,function(t){return t.id===e},this)))},getResolvedControl:function(e){return r.extend(!0,{},n.find(this._forms,function(t){return t.id===e},this))},addOrUpdateControl:function(e){var t=n.find(this._forms,function(t){return t.id===e.id},this);if(t){var r=this._forms.indexOf(t);this._forms.splice(r,1,e)}else this._forms.push(e)},addResolvedControl:function(e){this.addOrUpdateControl(e)},removeControl:function(e){throw new Error("Unsupported operation")},search:function(e){return Promise.resolve(n.filter(this._references,function(t){return t.formName.toLowerCase().indexOf(e.toLowerCase())>-1},this))}});return{create:function(){return new i("DefaultFormHandler")}}}),define("DefaultCssHandler",["require","ContextualHandler","underscore","jquery"],function(e){"use strict";var t=e("ContextualHandler"),n=e("underscore"),r=e("jquery"),i=t.subClass({},{init:function(e){this._super(e),this._references=[],this._stylesheets=[]},listControls:function(e,t){return t=t?t+1:this._references.length,Promise.resolve(this._references.slice(e,t))},getControl:function(e){return Promise.resolve(r.extend(!0,{},n.find(this._stylesheets,function(t){return t.id===e},this)))},getResolvedControl:function(e){var t=n.find(this._stylesheets,function(t){return t.id===e},this);return t?Promise.resolve(r.extend(!0,{},t,this)):this.getControl(e)},addOrUpdateControl:function(e){var t,r=n.find(this._stylesheets,function(t){return t.id===e.id},this);r?(t=this._stylesheets.indexOf(r),this._stylesheets.splice(t,1,e)):this._stylesheets.push(e);var i=n.find(this._references,function(t){return t.id===e.id},this);i?(t=this._references.indexOf(i),this._references.splice(t,1,{id:e.id})):this._references.push({id:e.id})},addResolvedControl:function(e){this.addOrUpdateControl(e)},removeControl:function(e){for(var t=this._stylesheets.length-1;t>=0;t--)this._stylesheets[t].id===e&&(this._stylesheets.splice(t,1),this._references.splice(t,1))}});return{create:function(){return new i("DefaultCssHandler")}}}),define("DefaultTypeHandler",["require","ContextualHandler","underscore","jquery"],function(e){"use strict";var t=e("ContextualHandler"),n=e("underscore"),r=e("jquery"),i=t.subClass({},{init:function(e){this._super(e),this._references=[],this._types=[]},listControls:function(e,t){return t=t?t+1:this._references.length,Promise.resolve(this._references.slice(e,t))},getControl:function(e){return Promise.resolve(r.extend(!0,{},n.find(this._types,function(t){return t.$id===e},this)))},getResolvedControl:function(e){return r.extend(!0,{},n.find(this._types,function(t){return t.$id===e},this))},addOrUpdateControl:function(e){var t=n.find(this._types,function(t){return t.$id===e.$id},this);if(t){var r=this._types.indexOf(t);this._types.splice(r,1,e)}else this._types.push(e)},addResolvedControl:function(e){this.addOrUpdateControl(e)},removeControl:function(e){throw new Error("Unsupported operation")},search:function(e){return Promise.resolve(n.filter(this._references,function(t){return t.name.toLowerCase().indexOf(e.toLowerCase())>-1},this))}});return{create:function(){return new i("DefaultTypeHandler")}}}),define("DefaultRestHandler",["require","ContextualHandler","ojL10n!rendererMsg/nls/renderer","underscore","jquery"],function(e){"use strict";var t=e("ContextualHandler"),n=e("ojL10n!rendererMsg/nls/renderer"),r=e("underscore"),i=e("jquery"),s=function(){return window.location.origin||(window.location.origin=window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:"")),window.location.origin}(),o=function(){var e="(?:^|; )"+encodeURIComponent("jwt")+"=([^;]*)",t=(new RegExp(e)).exec(document.cookie);return t?t[1]:null},u=t.subClass({},{init:function(e){this._super(e),this.restBaseUrl=s+"/bpm/api/3.0/"},getAuthInfo:function(){var e=o();return e?"Bearer "+e:null},execute:function(e,t){var s=this.restBaseUrl+e.name,o=this.getAuthInfo();return r.defaults(e,{type:"GET"}),new Promise(function(r,u){i.ajax({url:s,type:e.type,dataType:"json",data:t,beforeSend:function(e){e.setRequestHeader("content-type","application/json; charset=utf-8"),o&&e.setRequestHeader("Authorization",o)},xhrFields:{withCredentials:!0},success:function(t){r(t[e.optionsListBinding])},error:function(e){u(n.FAILED_TO_FETCH_REST)}})})}});return{create:function(){return new u("DefaultRestHandler")}}}),define("DependencyType",["require","Enum","underscore"],function(e){"use strict";var t=e("Enum"),n=e("underscore");return t.subClass({FORM:{type:"FORM",handler:"formHandler"},STYLESHEET:{type:"STYLESHEET",handler:"cssHandler"},BUSINESS_TYPE:{type:"BUSINESS_TYPE",handler:"typeHandler"},fromType:function(e){return this[n.find(n.keys(this),function(t){return t===e})]}},{})}),define("DefaultConnectorHandler",["require","ContextualHandler","jquery"],function(e){"use strict";var t=e("ContextualHandler"),n=e("jquery"),r=t.subClass({},{init:function(e){this._super(e),this._connectors=[],this._resources=[],this._operations=[],this._operationDefinitions=[]},listConnectors:function(){return Promise.resolve(this._connectors)},listResources:function(e){var t=[];return n.each(this._resources,function(n,r){r.connectorId===e&&t.push(r)}),Promise.resolve(t)},listOperations:function(e,t){var r=[];return n.each(this._operations,function(n,i){i.connectorId===e&&i.resourceId===t&&r.push(i)}),Promise.resolve(r)},getOperationDefinition:function(e,t,r){var i=null;return n.each(this._operationDefinitions,function(t,n){if(n.connectorId===e&&n.id===r)return i=n,!1}),Promise.resolve(i)},execute:function(e){return Promise.resolve({})}});return{create:function(){return new r("DefaultConnectorHandler")}}}),define("DefaultTranslationsHandler",["require","ContextualHandler","underscore"],function(e){"use strict";var t=e("ContextualHandler"),n=e("underscore"),r=t.subClass({},{init:function(e){this._super(e),this._bundles={},this._allBundles=[]},fetchBundle:function(e){var t=this;return n.each(this._allBundles,function(n){n.id===e&&(t._bundles.initLocaleBundle=n.bundle)}),Promise.resolve(this._bundles)},clearAllBundles:function(){this._allBundles=[]}});return{create:function(){return new r("DefaultTranslationsHandler")}}}),define("Configuration",["require","Class","knockout","DefaultFormHandler","DefaultCssHandler","DefaultTypeHandler","DefaultRestHandler","DependencyType","TypeCatalog","DefaultConnectorHandler","DefaultTranslationsHandler","underscore"],function(e){"use strict";var t=e("Class"),n=e("knockout"),r=e("DefaultFormHandler"),i=e("DefaultCssHandler"),s=e("DefaultTypeHandler"),o=e("DefaultRestHandler"),u=e("DependencyType"),a=e("TypeCatalog"),f=e("DefaultConnectorHandler"),l=e("DefaultTranslationsHandler"),c=e("underscore");return t.subClass({},{init:function(e){e=e||{};var t=n.utils.unwrapObservable(e.readOnly);this._initHandlers(e),this.selectedMedia=e.selectedMedia,this.convertJSON=e.convertJSON,this.readOnly=n.observable(t),this.domIdPrefix=e.domIdPrefix||""},_initHandlers:function(e){this.formHandler=this.isUndefined(e.formHandler),this.cssHandler=this.isUndefined(e.cssHandler),this.typeHandler=this.isUndefined(e.typeHandler),this.connectorHandler=this.isUndefined(e.connectorHandler),this.restHandler=this.isUndefined(e.restHandler),this.translationsHandler=this.isUndefined(e.translationsHandler),c.defaults(this.formHandler,r.create()),c.defaults(this.cssHandler,i.create()),c.defaults(this.typeHandler,s.create()),c.defaults(this.connectorHandler,f.create()),c.defaults(this.restHandler,o.create()),c.defaults(this.translationsHandler,l.create()),this.formHandler.setContext(this),this.cssHandler.setContext(this),this.typeHandler.setContext(this),a.initTypes(),a.typeHandler=this.typeHandler,this.connectorHandler.setContext(this),this.restHandler.setContext(this),this.translationsHandler.setContext(this)},isUndefined:function(e){return e||{}},resolveDependencies:function(e){c.each(e,function(e){this[u.fromType(e.type).handler].addResolvedControl(e.object)},this)},toJS:function(){return{formHandler:this.formHandler.toJS(),cssHandler:this.cssHandler.toJS(),typeHandler:this.typeHandler.toJS(),translationsHandler:this.translationsHandler.toJS(),selectedMedia:this.selectedMedia}}})}),define("koToJSUtil",["require","Class","underscore","knockout"],function(e){"use strict";function t(e){return e=i.unwrap(e),e&&e.toJS?e.toJS():e}var n=e("Class"),r=e("underscore"),i=e("knockout");return n.subClass({toJS:function(e){var n=r.isArray(e)?[]:{};return r.each(e,function(e,i){n[i]=t(e),r.isObject(n[i])&&(n[i]=this.toJS(n[i]))},this),n}},{})}),define("OptionsProperties",["require","Class","koToJSUtil"],function(e){"use strict";var t=e("Class"),n=e("koToJSUtil");return t.subClass({},{init:function(e){},observables:function(){throw new Error("Not implemented operation exception")},toJS:function(){return n.toJS(this.observables())}})}),define("StaticProperties",["require","OptionsProperties","knockout","underscore"],function(e){"use strict";var t=e("OptionsProperties"),n=e("knockout"),r=e("underscore");return t.subClass({},{init:function(e){e=e||{},r.defaults(e,{optionsNames:"option 1\noption 2",optionsValues:"option1\noption2",defaultValue:[],autoFocus:!1}),this.optionsNames=n.observable(e.optionsNames),this.optionsValues=n.observable(e.optionsValues),this.defaultValue=n.observableArray(e.defaultValue),this.autoFocus=n.observable(e.autoFocus)},observables:function(){return{optionsNames:this.optionsNames,optionsValues:this.optionsValues,defaultValue:this.defaultValue,autoFocus:this.autoFocus}}})}),define("RestProperties",["require","OptionsProperties","knockout","underscore"],function(e){"use strict";var t=e("OptionsProperties"),n=e("knockout"),r=e("underscore");return t.subClass({},{init:function(e){e=e||{},r.defaults(e,{defaultValue:[],autoFocus:!1}),this.defaultValue=n.observableArray(e.defaultValue),this.autoFocus=n.observable(e.autoFocus)},observables:function(){return{defaultValue:this.defaultValue,autoFocus:this.autoFocus}}})}),define("ResponseMapping",["require","Class","underscore","koToJSUtil","knockout"],function(e){"use strict";var t=e("Class"),n=e("underscore"),r=e("koToJSUtil"),i=e("knockout");return t.subClass({},{init:function(e){e=e||{},n.defaults(e,{optionsListBinding:"",valueBinding:"",labelBinding:""}),this.optionsListBinding=i.observable(e.optionsListBinding),this.valueBinding=i.observable(e.valueBinding),this.labelBinding=i.observable(e.labelBinding)},observables:function(){return{optionsListBinding:this.optionsListBinding,valueBinding:this.valueBinding,labelBinding:this.labelBinding}},toJS:function(){return r.toJS(this.observables())}})}),define("DynamicProperties",["require","OptionsProperties","ResponseMapping","knockout","underscore"],function(e){"use strict";var t=e("OptionsProperties"),n=e("ResponseMapping"),r=e("knockout"),i=e("underscore");return t.subClass({},{init:function(e){e=e||{},i.defaults(e,{defaultValue:[],simple:!0,autoFocus:!1}),this.response=r.observable(new n(e.response||{})),this.defaultValue=r.observableArray(e.defaultValue),this.simple=r.observable(e.simple),this.autoFocus=r.observable(e.autoFocus)},observables:function(){return{defaultValue:this.defaultValue,simple:this.simple(),response:this.response,autoFocus:this.autoFocus}}})}),define("UUID",[],function(){"use strict";return{createUuid:function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return[e()+e(),e(),e(),e(),e()+e()+e()].join("-")},createSafeUuid:function(){return("ACT"+this.createUuid()).replace(/-/g,"")}}}),define("ConnectorProperties",["require","DynamicProperties","underscore","UUID","knockout"],function(e){"use strict";var t=e("DynamicProperties"),n=e("underscore"),r=e("UUID"),i=e("knockout");return t.subClass({},{init:function(e){this._super(e),e=e||{},n.defaults(e,{id:r.createUuid(),connectorId:"",resource:"",operationId:"",headerParams:[],templateParams:[],queryParams:[],skipDuringLoad:!1}),this.id=e.id,this.connectorId=i.observable(e.connectorId),this.resource=i.observable(e.resource),this.operationId=i.observable(e.operationId),this.skipDuringLoad=i.observable(e.skipDuringLoad),this.queryParams=i.observableArray(e.queryParams),this.headerParams=i.observableArray(e.headerParams),this.templateParams=i.observableArray(e.templateParams)},clone:function(){return{id:this.id,queryParams:this.queryParams(),headerParams:this.headerParams(),templateParams:this.templateParams(),skipDuringLoad:this.skipDuringLoad(),connector:{name:this.connectorId(),resource:this.resource(),method:this.operationId()},response:this.response().toJS()}},observables:function(){var e=this._super();return n.extend(e,{skipDuringLoad:this.skipDuringLoad})},toJS:function(){return{id:this.id,skipDuringLoad:i.unwrap(this.skipDuringLoad),defaultValue:i.unwrap(this.defaultValue),autoFocus:i.unwrap(this.autoFocus)}}})}),define("OptionsPropertiesFactory",["require","Class","StaticProperties","RestProperties","ConnectorProperties","DynamicProperties"],function(e){"use strict";var t=e("Class"),n=e("StaticProperties"),r=e("RestProperties"),i=e("ConnectorProperties"),s=e("DynamicProperties");return t.subClass({createProperties:function(e,t){return(0,this[e])(t)},STATIC:function(e){return new n(e)},REST:function(e){return new r(e)},DYNAMIC:function(e){return new s(e)},CONNECTOR:function(e){return new i(e)},LIST_CONNECTOR:function(e){return new i(e)},EVENT_CONNECTOR:function(e){return new i(e)}},{})}),define("OptionsResolver",["require","Class","OptionsPropertiesFactory","knockout","ojs/ojprogressbar"],function(e){"use strict";var t=e("Class"),n=e("OptionsPropertiesFactory"),r=e("knockout");return e("ojs/ojprogressbar"),t.subClass({},{init:function(e,t,i){this.properties=r.observable(n.createProperties(e,i)),this.customValidationMessages=r.observableArray(),this.loading=r.observable(!1)},getOptions:function(){throw new Error("operation not supported exception")},getDefaultValue:function(){throw new Error("operation not supported exception")},getDefaultValueOptions:function(){throw new Error("operation not supported exception")}})}),define("OjSelectItem",["require","Class"],function(e){"use strict";return e("Class").subClass({create:function(e,t){return{value:e,label:t}}},{})}),define("DynamicOptionType",["require","OjSelectItem","ojL10n!rendererMsg/nls/renderer","underscore"],function(e){"use strict";var t=e("OjSelectItem"),n=e("ojL10n!rendererMsg/nls/renderer"),r=e("underscore");return{FIRST:r.extend(t.create("FIRST",n.FIRST_LABEL),{getValue:function(e){var t=e[0];return t?[t.value]:[]}}),LAST:r.extend(t.create("LAST",n.LAST_LABEL),{getValue:function(e){var t=e[e.length-1];return t?[t.value]:[]}})}}),define("DynamicAutoFocus",["require","knockout","DynamicOptionType"],function(e){"use strict";var t=e("knockout"),n=e("DynamicOptionType"),r=function(e){this.read=function(){var t=[],r=e.properties().autoFocus()[0];return r&&(t=n[r].getValue(e.getOptions())),t}};return{create:function(e){return t.pureComputed(new r(e))}}}),define("DynamicDefaultValue",["require","knockout","jquery","DynamicOptionType"],function(e){"use strict";var t=e("knockout"),n=e("jquery"),r=e("DynamicOptionType"),i=function(e){this.read=function(){var t=e.properties().defaultValue(),i=[];return n.each(t,function(){var t=this,n=r[t],s=n.getValue(e.getOptions());i=i.concat(s)}),i.length>0?i:[]}};return{create:function(e){return t.pureComputed(new i(e))}}}),define("DynamicOptionsResolver",["require","OptionsResolver","OjSelectItem","DynamicAutoFocus","DotExpressionResolver","DynamicDefaultValue","jquery"],function(e){"use strict";var t=e("OptionsResolver"),n=e("OjSelectItem"),r=e("DynamicAutoFocus"),i=e("DotExpressionResolver"),s=e("DynamicDefaultValue"),o=e("jquery");return t.subClass({},{init:function(e,t,n){this._super(e,t,n),this.context=t,this.autoFocus=r.create(this),this.getDefaultValue=s.create(this)},getOptions:function(){var e=[],t=this._getPayloadList(this.properties().response().optionsListBinding()),r=this.properties().simple(),s=this.properties().response().valueBinding(),u=this.properties().response().labelBinding();return o.each(t,function(){if(r)e.push(n.create(this,this));else{var t=i.getValue(this,s),o=i.getValue(this,u);e.push(n.create(t,o))}}),e},_getPayloadList:function(e){return this.context.payload()?this.context.payload().getBindingValue(e)||[]:[]}})}),define("FormsLogger",["require","Class"],function(e){"use strict";var t=e("Class"),n=t.subClass({logger:null,getLogger:function(){return n.logger||(n.logger=new n),n.logger}},{init:function(){this.debug=window.formLoggerEnabled},log:function(e){this.debug&&console.log(e)},count:function(e){this.debug&&console.count(e)},time:function(e){this.debug&&console.time(e)},timeEnd:function(e){this.debug&&console.timeEnd(e)}});return n}),define("ConnectorResolver",["require","OptionsResolver","DynamicDefaultValue","DotExpressionResolver","knockout","ojs/ojcore","FormsLogger","ojL10n!rendererMsg/nls/renderer","jquery","DynamicAutoFocus"],function(e){"use strict";var t=e("OptionsResolver"),n=e("DynamicDefaultValue"),r=e("DotExpressionResolver"),i=e("knockout"),s=e("ojs/ojcore"),o=e("FormsLogger"),u=e("ojL10n!rendererMsg/nls/renderer"),a=e("jquery"),f=e("DynamicAutoFocus");return t.subClass({},{init:function(e,t,r,s){this.controlId=s,this.requiredFormValues=[],this.formId=t.viewModel.formId,this.presentationId=t.viewModel.presentationId,r=this._fetchProperties(t,r),this._super(e,t,r),this.autoFocus=f.create(this),this.getDefaultValue=n.create(this),this._options=i.observableArray(null),this.getOptions=i.pureComputed(function(){return this._options()}.bind(this)),this._callConnector=function(e){return o.getLogger().count("[COUNT] [CONNECTOR]"),t.config().connectorHandler.execute(e)}},loadAndSetConnector:function(e){this.loading(!0),this.loadConnector(e).then(function(e){this._options(this._buildOptions(e)),this.loading(!1),this.customValidationMessages([])}.bind(this)).catch(function(e){e=JSON.parse(e),this.customValidationMessages([new s.Message(u.FAILED_TO_FETCH_CONNECTOR,e.defaultMessage)]),this.loading(!1)}.bind(this))},loadConnector:function(e){return this._findControl=e.findControlInsideRepeatable.bind(e),this._fetchOptions()},_fetchOptions:function(){var e=this._buildArguments(),t={id:this.properties().id,listBinding:this.properties().response().optionsListBinding().replace("response.",""),formValues:e,formId:this.formId,presentationId:this.presentationId};return this._callConnector(t)},_buildArguments:function(){var e={},t=this;return a.each(this.requiredFormValues,function(){var n=t._findControl(t.controlId);if(n){var r=n.findClosest(this);e[this]=r?r.getControlValue():null}}),e},_buildOptions:function(e){var t=this.properties().response().optionsListBinding();return e=e||{},r.getPCSCompatibleValue(e,t)||[]},_fetchProperties:function(e,t){var n=e.findCallDefinition(t.id);return n&&(this.requiredFormValues=n.formValues||[],t.response=n.response().toJS()),t}})}),define("ListConnectorResolver",["require","ConnectorResolver","knockout"],function(e){"use strict";var t=e("ConnectorResolver"),n=e("knockout");return t.subClass({},{init:function(e,t,r,i){function s(e){u.loading(!0),e.loaded()?u.loadAndSetConnector(e):o||(o=e.loaded.subscribe(function(){o.dispose(),u.loadAndSetConnector(e)}))}this._super(e,t,r,i);var o,u=this;n.unwrap(n.unwrap(this.properties).skipDuringLoad)||(t.viewModel.form.subscribe(s),t.viewModel.form()&&setTimeout(function(){s(t.viewModel.form())}))}})}),define("ConnectorOptionsResolver",["require","ListConnectorResolver","DotExpressionResolver","OjSelectItem","jquery"],function(e){"use strict";var t=e("ListConnectorResolver"),n=e("DotExpressionResolver"),r=e("OjSelectItem"),i=e("jquery");return t.subClass({},{init:function(e,t,n,r){this._super(e,t,n,r)},_buildOptions:function(e){var t=[],s=this.properties().response().optionsListBinding(),o=this.properties().response().valueBinding(),u=this.properties().response().labelBinding();e=e||{};var a=n.getPCSCompatibleValue(e,s)||[];return i.each(a,function(e,i){var s=n.getPCSCompatibleValue(i,o),a=n.getPCSCompatibleValue(i,u);void 0!==s&&void 0!==a&&t.push(r.create(s,a))}),t}})}),define("RestResolver",["require","OptionsResolver","DynamicDefaultValue","knockout","ojs/ojcore"],function(e){"use strict";var t=e("OptionsResolver"),n=e("DynamicDefaultValue"),r=e("knockout"),i=e("ojs/ojcore");return t.subClass({},{init:function(e,t,i,s){this._super(e,t,i),this.controlId=s,this.autoFocus=r.pureComputed({read:function(){return this.properties().autoFocus()},owner:this}),this.getDefaultValue=n.create(this),this._options=r.observableArray(null),this.getOptions=r.pureComputed(function(){return this._options()}.bind(this)),this._callRest=function(e,n){return t.config().restHandler.execute(e,n)}},loadAndSetRest:function(e,t){this.callRest(e,t).then(function(t){this._options(t[e.optionsListBinding]),this.customValidationMessages([])}.bind(this)).catch(function(e){this.customValidationMessages([new i.Message(e)])}.bind(this))},callRest:function(e,t){return this._callRest(e,t)}})}),define("RestOptionsResolver",["require","RestResolver"],function(e){"use strict";return e("RestResolver").subClass({},{init:function(e,t,n,r){this._super(e,t,n,r)}})}),define("StaticOptionsResolver",["require","OptionsResolver","OjSelectItem","koToJSUtil","knockout"],function(e){"use strict";var t=e("OptionsResolver"),n=e("OjSelectItem"),r=e("koToJSUtil"),i=e("knockout");return t.subClass({},{init:function(e,t,n){this._super(e,t,n),this.autoFocus=i.pureComputed({read:function(){return this.properties().autoFocus()},write:function(e){this.properties().autoFocus(e)},owner:this})},getOptions:function(){for(var e=r.toJS(this.properties()),t=e.optionsNames.split("\n"),i=e.optionsValues.split("\n"),s=[],o=0;o<t.length;o++)s.push(n.create(i[o],t[o]));return s},getDefaultValue:function(){return this.properties().defaultValue()},getDefaultValueOptions:function(){return this.getOptions()}})}),define("OptionsResolverFactory",["require","Class","DynamicOptionsResolver","ConnectorOptionsResolver","ConnectorResolver","ListConnectorResolver","RestOptionsResolver","StaticOptionsResolver"],function(e){"use strict";var t=e("Class"),n=e("DynamicOptionsResolver"),r=e("ConnectorOptionsResolver"),i=e("ConnectorResolver"),s=e("ListConnectorResolver"),o=e("RestOptionsResolver"),u=e("StaticOptionsResolver");return t.subClass({},{createResolver:function(e,t,n,r){return(0,this[e])(e,t,n,r)},STATIC:function(e,t,n){return new u(e,t,n)},REST:function(e,t,n,r){return new o(e,t,n,r)},DYNAMIC:function(e,t,r){return new n(e,t,r)},CONNECTOR:function(e,t,n,i){return new r(e,t,n,i)},LIST_CONNECTOR:function(e,t,n,r){return new s(e,t,n,r)},EVENT_CONNECTOR:function(e,t,n,r){return new i(e,t,n,r)}})}),define("LoVMappingAutoComplete",["require","Class"],function(e){"use strict";return e("Class").subClass({createAutoCompletes:function(e,t){},initialize:function(e,t){}},{})}),define("EventsQueue",["require","Class","FormsLogger","knockout"],function(e){"use strict";var t=e("Class"),n=e("FormsLogger"),r=e("knockout");return t.subClass({},{eventDepthCount:0,currentPromise:!1,init:function(){this.eventDepthCount=0,this.resolvedPromises=0,this.isExecuting=r.observable(!1);var e=this;e.execute=function(t,r){if(t.viewModel.form()&&t.viewModel.form().loadEventsExecuted())return e.eventDepthCount>1e3?void console.error("User Events Error: Too many recursive events. Aborting."):(e.eventDepthCount++,e.isExecuting(!0),setTimeout(function(){n.getLogger().count("[COUNT] [EVENT]");var i=t.executeEvent(r.value);1===e.eventDepthCount&&(e.resolvedPromises=0),i.then(function(){++e.resolvedPromises===e.eventDepthCount&&(e.eventDepthCount=0,e.resolvedPromises=0,e.isExecuting(!1))})}),!0)}},resolveWhenEmpty:function(){var e=this;return new Promise(function(t,n){if(e.isExecuting())var r=e.isExecuting.subscribe(function(){r.dispose(),t()});else t()})}})}),define("ObservablePayloadContext",["require","Class","knockout","ControlTypeId","underscore"],function(e){"use strict";var t=e("Class"),n=e("knockout"),r=e("ControlTypeId"),i=e("underscore");return t.subClass({},{controlBindings:{},init:function(e,t){this.controlBindings=e||{},this.bindingContext=n.unwrap(t)||""},_getParentWithBinding:function(e){for(var t=e.getParent();t.type!==r.FORM_PRESENTATION&&!t.isRepeatable()&&!t._bindingValue;)t=t.getParent();return t},getBindingControlFor:function(e){var t=this._getParentWithBinding(e);return t._bindingValue?t._bindingValue:n.unwrap(this.controlBindings)},getFullBindingContextFor:function(e){var t=this.getBindingControlFor(e),s=this._getParentWithBinding(e),o=this.bindingContext;return s.isRepeatable()||i.isArray(n.unwrap(t[o]))?"":s.type===r.FORM_PRESENTATION?(o.length>0&&(o+="."),o+e.getFullBinding()):e.properties.binding()},_getObservable:function(e,t,r){var s=this.getBindingControlFor(e),o=this.getFullBindingContextFor(e);return i.isEmpty(o)?n[t](r):(i.isUndefined(s[o])?s[o]=n[t](r):n.isObservable(s[o])||(s[o]=n[t](n.unwrap(s[o]))),s[o])},getObservableForBinding:function(e){return this._getObservable(e,"observable")},getObservableArrayForBinding:function(e){return this._getObservable(e,"observableArray",[])},getObservableValue:function(e,t){return!this.isObservableDefined(e)&&t&&(this.controlBindings[e]=n.observable(this.controlBindings[e])),this.controlBindings[e]},isObservableDefined:function(e){return n.isObservable(this.controlBindings[e])},setValue:function(e,t){this.isObservableDefined(e)?this.controlBindings[e](t):this.controlBindings[e]=t}})}),define("Reference",["require","Class"],function(e){"use strict";return e("Class").subClass({},{init:function(e){this._reference=e},get:function(){throw new Error("This function must be overridden")}})}),define("StaticFormReference",["require","Reference","knockout"],function(e){"use strict";var t=e("Reference"),n=e("knockout");return t.subClass({},{init:function(e){this._super(e),this.formId=n.observable(e.formId),this.formName=n.observable(e.formName),this.presentationId=n.observable(e.presentationId),this.icon=n.observable(e.icon)},get:function(){return{formId:this.formId(),formName:this.formName(),presentationId:this.presentationId(),icon:this.icon()}}})}),define("FormReferenceFactory",["require","Class","StaticFormReference"],function(e){"use strict";var t=e("Class"),n=e("StaticFormReference"),r="CREATE_",i=t.subClass({create:function(e){var t=e.type||"STATIC",n=i[r+t];if(n)return n(e);throw new Error("Unsupported reference type exception")},CREATE_STATIC:function(e){return new n(e)}},{});return i}),define("DecoratorsCatalog",["require","Class","underscore"],function(e){"use strict";var t=e("Class"),n=e("underscore");return t.subClass({},{init:function(){this._decorators={}},addToControl:function(e,t){var r=this.getDecorators(e);n.each(r,function(n){n.decorate(e,t)})},registerDecorator:function(e,t){t||(t="all");var r={};r[t]=[],n.defaults(this._decorators,r),this._decorators[t].push(e)},getDecorators:function(e){return n.union([],this._decorators.all,this._decorators[e.type])}})}),define("ControlDecorator",["require","Class","underscore"],function(e){"use strict";var t=e("Class"),n=e("underscore");return t.subClass({},{init:function(e,t){this.id=e,this._dependencies=t||[]},decorate:function(e,t){n.each(this.dependencies(),function(t){if(!t.isApplied(e))throw new Error("Need "+t.id+"to use decorator:"+this.id)},this),this._decorate(e,t)},_decorate:function(e,t){throw new Error("Unsupported Operation Exception")},dependencies:function(){return this._dependencies},isApplied:function(e){throw new Error("Unsupported Operation Exception")}})}),define("MinLengthValidator",["require","ojs/ojcore","ojL10n!rendererMsg/nls/renderer"],function(e){"use strict";var t=e("ojs/ojcore"),n=e("ojL10n!rendererMsg/nls/renderer"),r=function(e){this.validate=function(r){var i=e.minLength();if(r.length<i&&r.length>0)throw new t.ValidatorError(n.MIN_LENGTH_VALIDATION_MESSAGE_SUMMARY,n.MIN_LENGTH_VALIDATION_MESSAGE_DETAIL+i);return!0}};return t.Object.createSubclass(r,t.Validator,"MinLengthValidator"),r}),define("MaxLengthValidator",["require","ojs/ojcore","ojL10n!rendererMsg/nls/renderer"],function(e){"use strict";var t=e("ojs/ojcore"),n=e("ojL10n!rendererMsg/nls/renderer"),r=function(e){this.validate=function(r){var i=e.maxLength();if(r.length>i)throw new t.ValidatorError(n.MAX_LENGTH_VALIDATION_MESSAGE_SUMMARY,n.MAX_LENGTH_VALIDATION_MESSAGE_DETAIL+i);return!0}};return t.Object.createSubclass(r,t.Validator,"MaxLengthValidator"),r}),define("RequiredValidator",["require","ojs/ojcore"],function(e){"use strict";var t=e("ojs/ojcore"),n=function(e){this.validate=function(n){e.required()&&t.Validation.validatorFactory(t.ValidatorFactory.VALIDATOR_TYPE_REQUIRED).createValidator().validate(n)}};return t.Object.createSubclass(n,t.Validator,"RequiredValidator"),n}),define("OptionsFeedValidator",["require","ojs/ojcore"],function(e){"use strict";var t=e("ojs/ojcore"),n=function(e){this.validate=function(){var n=e.optionsFeed().optionsResolver().customValidationMessages();if(n.length>0){var r=n[0];throw new t.ValidatorError(r.summary,r.detail)}return!0}};return t.Object.createSubclass(n,t.Validator,"OptionsFeedValidator"),n}),define("PatternValidator",["require","ojs/ojcore","jquery","ojL10n!rendererMsg/nls/renderer"],function(e){"use strict";var t=e("ojs/ojcore"),n=e("jquery"),r=e("ojL10n!rendererMsg/nls/renderer"),i=function(e){this.validate=function(i){var s=e.pattern(),o=new RegExp(s);if(n.trim(i)&&!o.test(i)){var u=e.patternMessage()||r.PATTERN_VALIDATION_MESSAGE_DETAIL+s;throw new t.ValidatorError(r.PATTERN_VALIDATION_MESSAGE_SUMMARY,u)}return!0}};return t.Object.createSubclass(i,t.Validator,"PatternValidator"),i}),define("ValidatorFactory",["require","Class","MinLengthValidator","MaxLengthValidator","RequiredValidator","OptionsFeedValidator","PatternValidator"],function(e){"use strict";var t=e("Class"),n=e("MinLengthValidator"),r=e("MaxLengthValidator"),i=e("RequiredValidator"),s=e("OptionsFeedValidator"),o=e("PatternValidator"),u="CREATE_",a=t.subClass({createValidator:function(e,t){var n=a[u+e];if(n)return n(t);throw new Error("Unsupported operation exception")},CREATE_MIN_LENGTH:function(e){return new n(e)},CREATE_MAX_LENGTH:function(e){return new r(e)},CREATE_PATTERN:function(e){return new o(e)},CREATE_OPTIONS_FEED:function(e){return new s(e)},CREATE_REQUIRED:function(e){return new i(e)}},{});return a}),define("NumberValidator",["require","ojs/ojcore"],function(e){"use strict";var t=e("ojs/ojcore"),n=function(){this.validate=function(e){t.Validation.converterFactory(t.ConverterFactory.CONVERTER_TYPE_NUMBER).createConverter().parse(e)}};return t.Object.createSubclass(n,t.Validator,"NumberValidator"),n}),define("DateValidator",["require","ojs/ojcore"],function(e){"use strict";var t=e("ojs/ojcore"),n=function(e){this.validate=function(t){e.dateConverter().parse(t)}};return t.Object.createSubclass(n,t.Validator,"DateValidator"),n}),define("MoneyValidator",["require","ojs/ojcore"],function(e){"use strict";var t=e("ojs/ojcore"),n=function(e){this.validate=function(n){t.Validation.converterFactory(t.ConverterFactory.CONVERTER_TYPE_NUMBER).createConverter(e.converterOptions()).parse(n)}};return t.Object.createSubclass(n,t.Validator,"DateValidator"),n}),define("DateRangeValidator",["require","ojs/ojcore"],function(e){"use strict";var t=e("ojs/ojcore"),n=function(e){this.validate=function(n){var r=e.dateConverter();t.Validation.validatorFactory(t.ValidatorFactory.VALIDATOR_TYPE_DATETIMERANGE).createValidator({min:e.minValue(),max:e.maxValue(),converter:r}).validate(n)}};return t.Object.createSubclass(n,t.Validator,"DateValidator"),n}),define("NumberRangeValidator",["require","ojs/ojcore"],function(e){"use strict";var t=e("ojs/ojcore"),n=function(e){this.validate=function(n){var r=e.minValue(),i=e.maxValue(),s={};r&&(s.min=r),i&&(s.max=i),t.Validation.validatorFactory(t.ValidatorFactory.VALIDATOR_TYPE_NUMBERRANGE).createValidator(s).validate(n)}};return t.Object.createSubclass(n,t.Validator,"DateValidator"),n}),define("TypeValidatorFactory",["require","Class","NumberValidator","DateValidator","MoneyValidator","DateRangeValidator","NumberRangeValidator"],function(e){"use strict";var t=e("Class"),n=e("NumberValidator"),r=e("DateValidator"),i=e("MoneyValidator"),s=e("DateRangeValidator"),o=e("NumberRangeValidator"),u="CREATE_",a=t.subClass({createValidators:function(e,t){var n=[],r=a[u+e];return r&&(n=r(t)),n},CREATE_DATE:function(e){return[new r(e),new s(e)]},CREATE_DATE_TIME:function(e){return a.CREATE_DATE(e)},CREATE_TIME:function(e){return a.CREATE_DATE(e)},CREATE_NUMBER:function(e){return[new n(e),new o(e)]},CREATE_MONEY:function(e){return[new i(e),new o(e)]}},{});return a}),define("ValidatorTypeId",[],function(){"use strict";return{MIN_LENGTH:"MIN_LENGTH",MAX_LENGTH:"MAX_LENGTH",PATTERN:"PATTERN",OPTIONS_FEED:"OPTIONS_FEED",REQUIRED:"REQUIRED"}}),define("ValidatorBuilder",["require","Class","koToJSUtil","underscore","StringUtils","ValidatorFactory","TypeValidatorFactory","ValidatorTypeId"],function(e){"use strict";var t=e("Class"),n=e("koToJSUtil"),r=e("underscore"),i=e("StringUtils"),s=e("ValidatorFactory"),o=e("TypeValidatorFactory"),u=e("ValidatorTypeId");return t.subClass({getValidators:function(e,t){var o=[],a=n.toJS(e);return r.each(a,function(n,a){a=i.underscored(a).toUpperCase();var l=!r.isEmpty(n)||n>0;u.hasOwnProperty(a)&&l&&t.indexOf(a)<0&&o.push(s.createValidator(u[a],e))},this),o},getValidatorsForType:function(e,t){return o.createValidators(e,t)}},{})}),define("ValidationDecorator",["require","ControlDecorator","ValidatorBuilder","ValidatorTypeId","ValidatorFactory","underscore"],function(e){"use strict";var t=e("ControlDecorator"),n=e("ValidatorBuilder"),r=e("ValidatorTypeId"),i=e("ValidatorFactory"),s=e("underscore");return t.subClass({},{init:function(e){this._super("VALIDATION",e)},_decorate:function(e){e.silentlyValidated=!1,e.validators=n.getValidators(e.properties,[r.REQUIRED]),e.registerRenderListener(function(e){e.silentlyValidated&&e.validate()}),e.validate=function(){var t;return e.rendered()?t=this._validateComponent(e):(e.silentlyValidated=!0,t=this._validateSilently(e)),e.isValid(t),t}.bind(this)},_validateComponent:function(e){throw"Must be overwritten"},_validateSilently:function(e){var t=!0,r=[i.CREATE_REQUIRED(e.properties)],o=n.getValidatorsForType(e.type,e.properties);r=r.concat(o);var u=s.union(e.validators,r);return s.each(u,function(e){try{e.validate(n.value()),n._rawValue&&e.validate(n._getRawValue())}catch(n){t=!1}return t}),t&&0===this._getDeferredCustomMessages(e).length},_getDeferredCustomMessages:function(e){var t=[],n=e.getOjComponent()();return s.each(n,function(e){"option"===e[0]&&"messagesCustom"===e[1]&&void 0!==e[2]&&t.push(e[2])}),t},isApplied:function(e){return e.hasOwnProperty("silentlyValidated")}})}),define("JetValidationDecorator",["require","ValidationDecorator"],function(e){"use strict";return e("ValidationDecorator").subClass({},{init:function(e){this._super(e)},_decorate:function(e){this._super(e),e.afterOjComponentInit=this._addValidationOptionChange.bind(this,e)},_componentValidation:function(e){return e("validate")},_validateComponent:function(e){var t=e.getOjComponent();if(t.isNotLoaded)return this._validateSilently(e);var n=t("option","messagesCustom"),r=!1,i=!1;t("option","disabled")&&(t("option","disabled",!1),r=!0),t("option","readOnly")&&(t("option","readOnly",!1),i=!0);var s=this._componentValidation(t);return i&&t("option","readOnly",!0),r&&t("option","disabled",!0),t("option","messagesCustom",n),s&&0===n.length},_addValidationOptionChange:function(e){e.getOjComponent()("option","messagesShown")&&e.getOjComponent()({optionChange:function(t,n){e._isValidating||"messagesShown"!==n.option||(e._isValidating=!0,setTimeout(function(){e.isValid(e.validate()),setTimeout(function(){delete e._isValidating})}))}})}})}),define("FormValidator",["require","Class","underscore","knockout"],function(e){"use strict";var t=e("Class"),n=e("underscore"),r=e("knockout");return t.subClass({},{init:function(){},validate:function(e,t){var r=!0,i=this._filterControls(e),s=this;return n.each(i,function(e){r=s._validateControl(r,t,e)}),this._checkTracker(t,r)},validateControl:function(e,t){return this.validate([e],t)},_filterControls:function(e){return n.filter(e,function(e){return e.properties&&e.validate})},_validateControl:function(e,t,n){return n.validate()&&e},_checkTracker:function(e,t){var n=r.utils.unwrapObservable(e.tracker);return n&&n.showMessages(),t}})}),define("RepeatableValidationDecorator",["require","ValidationDecorator","underscore","FormValidator","TreeUtil"],function(e){"use strict";var t=e("ValidationDecorator"),n=e("underscore"),r=e("FormValidator"),i=e("TreeUtil");return t.subClass({},{init:function(e){this._super(e)},_validateComponent:function(e){var t=i.treeToList(e.dataSource(),"getControls"),s=!0,o=new r;return n.each(t,function(e){s=o.validateControl(e,e.context)&&s}),s},_validateSilently:function(e){var t=!0,r=i.treeToList(e.dataSource(),"getControls");r=n.filter(r,function(e){return e.validate});var s=this._super.bind(this);return n.each(r,function(e){t=s(e)&&t}),t}})}),define("SilentLoader",["require","RendererViewModel"],function(e){"use strict";return{load:function(t){var n=e("RendererViewModel"),r={value:t},i=new n(r);return i.form().initPayloadAndRunEvents(),i}}}),define("FormReferenceValidationDecorator",["require","ValidationDecorator","SilentLoader","underscore","jquery"],function(e){"use strict";var t=e("ValidationDecorator"),n=e("SilentLoader"),r=e("underscore"),i=e("jquery");return t.subClass({},{init:function(e){this._super(e)},_decorate:function(e){this._super(e),e._silentForm=r.extend({},r.clone(e.selectedPresentation()))},_validateComponent:function(e){return i("#"+e.domIdPrefix+e.id).triggerHandler("validateData")},_validateSilently:function(e){return e._silentForm.payload=e.getControlValue(),e._silentModel=n.load({form:e._silentForm,config:r.clone(e.getConfig())}),!e._silentModel||e._silentModel.validateData()}})}),define("LazyRenderingDecorator",["require","ControlDecorator","knockout","underscore"],function(e){"use strict";var t=e("ControlDecorator"),n=e("knockout"),r=e("underscore");return t.subClass({},{init:function(){this._super("LAZY_RENDERING")},_decorate:function(e,t){e.renderListeners=[],e.rendered=n.observable(!1),e.registerRenderListener=function(t){e.renderListeners.push(t)},e.detachRenderListener=function(t){e.renderListeners.splice(this.renderListeners.indexOf(t),1)},e.afterRender=function(){e.rendered(!0);var n=[];r.each(e.renderListeners,function(r){r(e,t)&&n.push(r)}),r.each(n,function(t){e.detachRenderListener(t)})}},isApplied:function(e){return e.hasOwnProperty("rendered")}})}),define("TabRenderingDecorator",["require","ControlDecorator","knockout"],function(e){"use strict";var t=e("ControlDecorator"),n=e("knockout");return t.subClass({},{init:function(e){this._super("LAZY_RENDERING",e)},_decorate:function(e){e.rendered=n.observable(!e.properties.lazyLoading())},isApplied:function(e){return e.hasOwnProperty("rendered")}})}),define("TabContainerRenderingDecorator",["require","ControlDecorator"],function(e){"use strict";return e("ControlDecorator").subClass({},{init:function(e){this._super("LAZY_RENDERING",e)},_decorate:function(e){var t=0;e._renderSelectedTab=function(n){var r=e.controls()[n];r&&r.rendered&&!r.rendered()&&(r.rendered(!0),t+=1)};var n=e.properties.selectedPosition.subscribe(function(r){e._renderSelectedTab(r),t===e.controls().length&&n.dispose()}),r=function(){return e._renderSelectedTab(e.properties.selectedPosition()),!0};e.registerRenderListener(r)},isApplied:function(e){return e.hasOwnProperty("_renderSelectedTab")}})}),define("SectionRenderingDecorator",["require","ControlDecorator","knockout"],function(e){"use strict";var t=e("ControlDecorator"),n=e("knockout");return t.subClass({},{init:function(){this._super("LAZY_RENDERING")},_decorate:function(e){var t=e.properties.lazyLoading();if(e.renderContent=n.observable(!t),t){e.properties.expanded(!1);var r=e.properties.expanded.subscribe(function(){e.renderContent(!0),r.dispose()})}},isApplied:function(e){return e.hasOwnProperty("renderContent")}})}),define("SectionAsyncRenderCallbackDecorator",["require","ControlDecorator"],function(e){"use strict";return e("ControlDecorator").subClass({},{init:function(){this._super("ASYNC_RENDER_CALLBACK")},_decorate:function(e){e.registerAsyncTemplate=function(t,n){var r=t.registerAsyncTemplate(t,n);return function(){e._refresh(),r()}}},isApplied:function(e){return e.hasOwnProperty("registerAsyncTemplate")}})}),define("TimeValidationDecorator",["require","JetValidationDecorator"],function(e){"use strict";return e("JetValidationDecorator").subClass({},{init:function(e){this._super(e)},_decorate:function(e){this._super(e)},_componentValidation:function(e){return e("validate"),e("isValid")}})}),define("RawDataDecorator",["require","ControlDecorator"],function(e){"use strict";return e("ControlDecorator").subClass({},{init:function(e){this._super("INPUT_DECORATOR",e)},_decorate:function(e){var t=function(e){return e._rawValue&&(e.setValue(e._rawValue),delete e._rawValue),!0};e.registerRenderListener(t)},isApplied:function(e){return e.hasOwnProperty("rendered")}})}),define("VideoValueDecorator",["require","ControlDecorator","knockout"],function(e){"use strict";function t(e,t,n,r){var o,u,a="";return u=i.exec(e),u&&(o=u[2],a="https://player.vimeo.com/video/"+o),u=s.exec(e),u&&(o=u[2],a="https://www.youtube.com/embed/"+o),a&&(a=a+"?loop="+Number(t)+"&controls="+Number(n),t&&(a+="&playlist="+o),a+="&autoplay="+Number(r)),a}var n=e("ControlDecorator"),r=e("knockout"),i=/vimeo\.com\/(video\/)?(.*)/,s=/(youtu\.be\/|youtube\.com\/watch\?v=|youtube.com\/embed\/)(.*)/;return n.subClass({},{init:function(e){this._super("VIDEO_VALUE",e)},_parseVideoLink:t,_decorate:function(e){var t=this;e.properties.parsedVideoSrcLink=r.pureComputed(function(){return t._parseVideoLink(this.getControlValue(),this.properties.loop(),this.properties.showControls(),this.properties.autoPlay())},e)},isApplied:function(e){return e.properties.hasOwnProperty("parsedVideoSrcLink")}})}),define("ValueHelper",["require","jquery","knockout","underscore","ojs/ojcore"],function(e){"use strict";function t(e){return i.unwrap(e.rendered)}function n(e,n,i){if(t(e)){var s=r(e.domId);s.val(i),"ojInputTime"===n&&""===i||!s[n]("instance")||s[n]("validate"),o.ComponentBinding.deliverChanges()}else e._rawValue=i}var r=e("jquery"),i=e("knockout"),s=e("underscore"),o=e("ojs/ojcore");return{getRawValue:function(e){return t(e)?r(e.domId).val():e._rawValue},setNumber:function(e,r){isNaN(r)?n(e,"ojInputNumber",r):(e.value(r),t(e)||(e._rawValue=e.value()))},setDate:function(e,t,r,i){try{e.value(r.parse(i)),s(e)||(e._rawValue=e.value())}catch(s){n(e,t,i)}},setRawValue:function(e,t,r){n(e,t,r)},isNullEmptyOrUndefined:function(e){return s.isNull(e)||s.isUndefined(e)||s.isArray(e)&&0===e.length||!s.isArray(e)&&""===e}}}),define("ValueDecorator",["require","ControlDecorator","knockout","ValueHelper"],function(e){"use strict";var t=e("ControlDecorator"),n=e("knockout"),r=e("ValueHelper");return t.subClass({},{init:function(e){this._super("VALUE",e)},_decorate:function(e){this._doDecorate(e),e.initValue(e.value())},_doDecorate:function(e){e.rawValue=n.observable(),"FORM_REFERENCE"!==e.type?e.value=e.context.payloadContext.getObservableForBinding(e):e.value=n.observable({}),e._isNullEmptyOrUndefined=function(e){return r.isNullEmptyOrUndefined(e)},e.getControlValue=function(){var t=e._getRawValue(),r=n.utils.unwrapObservable(e.value);return!e.validate||e.validate()||(r=t),r},e.initValue=function(t){var r=e._isNullEmptyOrUndefined(t)?n.unwrap(e.properties.defaultValue):t;e.setValue(r)},e.setValue=function(t){e.rendered&&e.rendered()?e.getOjComponent()("option","value",t):e.rawValue(t),e.value(t)},e._getRawValue=function(){return n.utils.unwrapObservable(e.rawValue)}},isApplied:function(e){return e.hasOwnProperty("value")}})}),define("IdentityValueDecorator",["require","ValueDecorator"],function(e){"use strict";return e("ValueDecorator").subClass({},{init:function(e){this._super(e)},_doDecorate:function(e){this._super(e),e.__superSetValue=e.setValue,e.setValue=function(t){"string"==typeof t&&(t=[]),e.__superSetValue(t)},e.ojIdentityObj.value=e.value}})}),define("CheckboxValueDecorator",["require","ValueDecorator","underscore"],function(e){"use strict";var t=e("ValueDecorator"),n=e("underscore");return t.subClass({},{init:function(e){this._super(e)},_doDecorate:function(e){this._super(e),e.setValue=function(t){n.isArray(t)&&(t="true"===t[0]),e.value(t),e.getOjComponent()("option","value",[!!t+""])},e.value.subscribe(function(t){e.setValue(t)})}})}),define("JSONConverter",["require","Class","underscore"],function(e){"use strict";function t(e){return e.replace(/\./g,"\\.")}function n(e){return e.replace(/\\\./g,".")}function r(e){var t=e.match(o);return{first:n(t[0]),rest:t.slice(1).join(".")}}var i=e("Class"),s=e("underscore"),o=/((?:\\\.|[^\.])+)/g;return i.subClass({},{init:function(){},toKeyValue:function(e){var n;return s.isArray(e)?(n=[],s.each(e,function(e){n.push(this.toKeyValue(e))},this)):s.isObject(e)?(n={},s.each(e,function(e,r){this._setKeyValue(n,t(r),e)},this)):n=e,n},toJSON:function(e){var t;return s.isArray(e)?(t=[],s.each(e,function(e){t.push(this.toJSON(e))},this)):s.isObject(e)?(t={},s.each(e,function(e,n){var i=r(n);this._setJSON(t,i.first,i.rest,e)},this)):t=e,t},_setKeyValue:function(e,n,r){s.isArray(r)?e[n]=this.toKeyValue(r):s.isObject(r)?s.size(r)>0?s.each(r,function(r,i){var s=n+"."+t(i);this._setKeyValue(e,s,r)},this):e[n]={}:e[n]=r},_setJSON:function(e,t,n,i){if(s.isEmpty(n))s.isArray(i)?(e[t]=[],s.each(i,function(n){e[t].push(this.toJSON(n))},this)):e[t]=i;else{e[t]=e[t]||{};var o=r(n);this._setJSON(e[t],o.first,o.rest,i)}}})}),define("Payload",["require","underscore","jquery","knockout","JSONConverter","TreeUtil","ControlTypeId","Class"],function(e){"use strict";var t=e("underscore"),n=e("jquery"),r=e("knockout"),i=e("JSONConverter"),s=e("TreeUtil"),o=e("ControlTypeId"),u=e("Class"),a=new i;return u.subClass({},{convertJSON:!1,payloadContext:{},init:function(e,t){this._schema=e.payload||{},t&&(this.convertJSON=t.config().convertJSON,this.convertJSON&&(this._schema=a.toKeyValue(this._schema)),this.payloadContext=t.payloadContext)},updateBindings:function(e){var n=t.filter(s.treeToList(e(),"getControls"),function(e){return e.properties&&e.properties.isBindable()});this.doUpdateBindings(n)},doUpdateBindings:function(e){t.each(e,function(e){var n=r.utils.unwrapObservable(e.properties.binding);if(n&&""!==n.trim())if(e.type===o.FORM_REFERENCE&&e.isValidReference()){var i=e.getBindings();t.each(t.keys(i),function(e){this.setBindingValue([n+"."+e],i[e])},this)}else{var s=e.getControlValue();this.setBindingValue(n,s)}},this)},getBindings:function(){return n.extend(!0,{},this._schema)},getBindingValue:function(e){return this._schema&&this._schema[e]},setBindingValue:function(e,t){this._schema[e]=t},toJS:function(){var e=this._schema;return this.convertJSON&&(e=a.toJSON(e)),e}})}),define("PayloadUtil",["require","Class","underscore","knockout","ControlTypeId","StringUtils"],function(e){"use strict";var t=e("Class"),n=e("underscore"),r=e("knockout"),i=e("ControlTypeId"),s=e("StringUtils"),o=t.subClass({initValueFromPayload:function(e,t){var n=o.getControlValueFromPayload(e,t);e.hasOwnProperty("value")&&e.initValue(r.unwrap(n))},getControlValueFromPayload:function(e,t){var r;if(e.properties.isBindable()&&!n.isEmpty(e.properties.binding()))if(e.type===i.FORM_REFERENCE){r={};var o=e.properties.binding()+".";n.each(n.keys(t),function(e){if(s.startsWith(e,o)){var n=e.substring(o.length);r[n]=t[e]}},this)}else e.type===i.LINK?(r={},r.value=t[e.properties.binding()],"true"===e.properties.isLabelBindable()&&(r.label=t[e.properties.labelBinding()])):r=t[e.properties.binding()];return n.isUndefined(r)?null:r}},{});return o}),define("RepeatableRowValueDecorator",["require","ControlDecorator","Payload","knockout","PayloadUtil","underscore"],function(e){"use strict";var t=e("ControlDecorator"),n=e("Payload"),r=e("knockout"),i=e("PayloadUtil"),s=e("underscore");return t.subClass({},{init:function(e){this._super("VALUE",e)},_decorate:function(e){e.setValue=function(t){s.each(e.getAllControls(!0),function(e){i.initValueFromPayload(e,t)})},e.initRow=function(t,n){n.properties.fromConnector()?e.setValue(t):e.initValue(t)},e.initValue=function(t){e._payload=new n({payload:t}),e.setValue(t)},e.getControlValue=function(){var t=e._payload||new n({});return t.doUpdateBindings(e.getAllControls(!0)),t.getBindings()},e.isRowSelected=r.pureComputed({read:function(){return s.contains(e._parent.selectedRows(),e)},write:function(t){var n=e.isRowSelected();t&&!n?e._parent.properties.multipleSelection()?e._parent.selectedRows.push(e):e._parent.selectedRows([e]):!t&&n&&e._parent.selectedRows.remove(e)}})},isApplied:function(e){return e.hasOwnProperty("getControlValue")}})}),define("FormReferenceValueDecorator",["require","ValueDecorator"],function(e){"use strict";return e("ValueDecorator").subClass({},{init:function(e){this._super(e)},_decorate:function(e){this._super(e),e.getControlValue=function(){return e.value()}}})}),define("SelectValueDecorator",["require","ValueDecorator","knockout","underscore"],function(e){"use strict";var t=e("ValueDecorator"),n=e("knockout"),r=e("underscore");return t.subClass({},{init:function(e){this._super(e)},_doDecorate:function(e){this._super(e),e.getControlValue=function(){var t=e.value();return null!==t&&!n.unwrap(e.properties.multiple)&&r.isArray(t)&&(t=t[0]||null),t},e.__superSetValue=e.setValue,e.setValue=function(t){r.isArray(t)?e.__superSetValue(t):e.__superSetValue([t])}}})}),define("LinkValueDecorator",["require","ValueDecorator","knockout"],function(e){"use strict";var t=e("ValueDecorator"),n=e("knockout");return t.subClass({},{init:function(e){this._super(e)},_doDecorate:function(e){this._super(e),e.getControlValue=function(){var t={value:n.utils.unwrapObservable(e.value)};return"true"!==e.properties.isLabelBindable()||e._isNullEmptyOrUndefined(e.properties.labelBinding())||(t.label=n.utils.unwrapObservable(e.properties.labelVal)),t},e.initValue=function(e){var t=this.properties.anchor()?this.resolvePreviewId(n.utils.unwrapObservable(this.properties.defaultOption)[0]):n.utils.unwrapObservable(this.properties.defaultValue),r=this._isNullEmptyOrUndefined(e)||this._isNullEmptyOrUndefined(e.value)?t:e.value;this.setValue(r);var i=this._isNullEmptyOrUndefined(e)||this._isNullEmptyOrUndefined(e.label)?n.utils.unwrapObservable(this.properties.defaultLabel):e.label;this.setLabelVal(i)}}})}),define("DateValueDecorator",["require","ValueDecorator","ValueHelper"],function(e){"use strict";var t=e("ValueDecorator"),n=e("ValueHelper");return t.subClass({},{init:function(e){this._super(e)},_doDecorate:function(e){this._super(e),e.setValue=function(t){n.setDate(e,"ojInputDate",e.properties.dateConverter(),t)},e._getRawValue=function(){return n.getRawValue(e)}}})}),define("TimeValueDecorator",["require","ValueDecorator","ValueHelper"],function(e){"use strict";var t=e("ValueDecorator"),n=e("ValueHelper");return t.subClass({},{init:function(e){this._super(e)},_doDecorate:function(e){this._super(e),e.setValue=function(t){n.setRawValue(e,"ojInputTime",t)},e._getRawValue=function(){return n.getRawValue(e)}}})}),define("NumberValueDecorator",["require","ValueDecorator","ValueHelper"],function(e){"use strict";var t=e("ValueDecorator"),n=e("ValueHelper");return t.subClass({},{init:function(e){this._super(e)},_doDecorate:function(e){this._super(e),e.setValue=function(t){n.setNumber(e,t)},e._getRawValue=function(){return n.getRawValue(e)}}})}),define("RepeatableValueDecorator",["require","ControlDecorator","knockout","koToJSUtil","DotExpressionResolver","EventsId","underscore"],function(e){"use strict";function t(e,t){var n=e.createRow(t);e.eventsQueue.execute(n,a.ON_ADD_ROW),e.dataSource.push(n)}function n(e,t){var n=e.dataSource()[t];n.indexBeforeRemove=t,e.eventsQueue.execute(n,a.ON_REMOVE_ROW),e.dataSource.remove(n),e.selectedRows([])}function r(e){var t=[];f.each(e.properties.optionsFeed().optionsResolver()._options(),function(n){var r={};f.each(e._getAllBindableControls(),function(e){r[e.properties.binding()]=u.getPCSCompatibleValue(n,e.properties.connectorMapping())}),t.push(r)}),e.setValue(t),e.executeEvent(a.ON_CHANGE.value)}var i=e("ControlDecorator"),s=e("knockout"),o=e("koToJSUtil"),u=e("DotExpressionResolver"),a=e("EventsId"),f=e("underscore");return i.subClass({},{init:function(e){this._super("VALUE",e)},_decorate:function(e){e.dataSource=s.observableArray([]),e.dataSourcePage=s.pureComputed(function(){return e.dataSource()}),e.getRows=function(){return e.dataSource()},e.value=e.context.payloadContext.getObservableArrayForBinding(e),e.addRow=function(){e.value.push({})},e.removeRow=function(t){var n=e.dataSource().indexOf(t);e.value.remove(e.value()[n])},e.removeSelectedRow=function(){var t=e.value();f.each(e.selectedRows(),function(n){var r=e.dataSource().indexOf(n);t=f.without(t,e.value()[r])}),e.value(t)},e.getControlValue=function(){return o.toJS(e.value())},e.getSelectedRows=function(){var t=e.selectedRows();return e.properties.multipleSelection()?f.sortBy(t,function(t){return e.dataSource.indexOf(t)}):t.length>0?t[0]:[]},e.setValue=function(t){var n=[];f.each(f.first(t,e.properties.maxRows()),function(e){n.push(e||{})},this),e.value(n)},e.initValue=function(t){e.properties.fromConnector()||e.setValue(t)},e.value.subscribe(function(r){f.each(f.sortBy(r,function(e){return-e.index}),function(t){"deleted"===t.status&&n(e,t.index)}),f.each(r,function(n){"added"===n.status&&t(e,n.value)})},e,"arrayChange"),f.each(e.value(),function(n){t(e,n)}),e.getContextForChildren=function(e){var t=this.getRows().indexOf(e);return t>-1?this.getBindingContext()+this.properties.binding()+"["+t+"].":this.getBindingContext()+this.properties.binding()+"."},e.properties.fromConnector()&&!e._restSubscription&&(e._restSubscription=e.properties.optionsFeed().optionsResolver()._options.subscribe(r.bind(this,e)))},isApplied:function(e){return e.hasOwnProperty("value")}})}),define("BuildFormReferenceDecorator",["require","ControlDecorator","underscore"],function(e){"use strict";var t=e("ControlDecorator"),n=e("underscore");return t.subClass({},{init:function(e){this._super(e)},_decorate:function(e){e._buildForm=function(t,r){return n.extend(r,{eventActions:t.eventActions,calls:t.calls,payload:e.getControlValue()})}}})}),define("ReferenceLazyRenderingDecorator",["require","ControlDecorator","SilentLoader","knockout","underscore"],function(e){"use strict";var t=e("ControlDecorator"),n=e("SilentLoader"),r=e("knockout"),i=e("underscore");return t.subClass({},{init:function(e){this._super("REFERENCE_LAZY_DECORATOR",e)},_decorate:function(e){var t=e.getBindings;e.getBindings=function(){return e.rendered()?t.call(e):(e._silentModel=n.load({form:i.clone(e.selectedPresentation()),config:i.clone(e.getConfig())}),e._silentModel.getBindings())};var s=e.rendered;e.rendered=r.pureComputed({read:function(){return s()&&e.controlsLoaded()},write:function(e){s(e)}})},isApplied:function(e){return e.hasOwnProperty("getBindings")}})}),define("DecoratorsMap",["require","ControlTypeId"],function(e){"use strict";var t=e("ControlTypeId"),n={};return n[t.INPUT_TEXT]=["label","defaultValue","placeHolder","hint","help"],n[t.TEXT_AREA]=["label","defaultValue","placeHolder","hint","help"],n[t.BUTTON]=["label"],n[t.SELECT]=["label","placeHolder","hint","help"],n[t.CHECKLIST]=["label","help"],n[t.CHECKBOX]=["label","help"],n[t.RADIO_BUTTON]=["label","help"],n[t.NUMBER]=["label","hint","help"],n[t.DATE]=["label","placeHolder","help"],n[t.TIME]=["label","placeHolder","help"],n[t.DATE_TIME]=["label","placeHolder","help"],n[t.EMAIL]=["label","defaultValue","placeHolder","hint","help"],n[t.URL]=["label","defaultValue","placeHolder","hint","help"],n[t.MESSAGE]=["defaultValue"],n[t.LINK]=["defaultLabel"],n[t.MONEY]=["label","hint","help"],n[t.PHONE]=["label","defaultValue","placeHolder","hint","help"],n[t.IMAGE]=["label","alt"],n[t.VIDEO]=["label"],n[t.IDENTITY_BROWSER]=["label","placeholder","hint","help"],n[t.PANEL]=["label"],n[t.SECTION]=["label"],n[t.TABLE]=["label"],n}),define("TranslationsDecorator",["require","ControlDecorator","underscore","knockout","DecoratorsMap"],function(e){"use strict";var t=e("ControlDecorator"),n=e("underscore"),r=e("knockout"),i=e("DecoratorsMap");return t.subClass({},{init:function(e){this._super("TRANSLATIONS_DECORATOR",e)},_decorate:function(e,t){var s=function(e){var r=t.config().translationsHandler,s=r._bundles.defaultBundle,o=r._bundles.initLocaleBundle,u=i[e.type];return n.each(u,function(t){var n,r=e.id;o&&o[r]?n=o[r][t]:s&&s[r]&&(n=s[r][t]),n&&""!==n&&e.properties[t](n)}),!0};e.translated=r.observable(s(e))},isApplied:function(e){return e.hasOwnProperty("translated")}})}),define("ComputedValueDecorator",["require","ControlDecorator"],function(e){"use strict";return e("ControlDecorator").subClass({},{init:function(e){this._super("COMPUTED_VALUE_DECORATOR",e),this.computedSuffix="_computed"},_decorate:function(e,t){var n=this;!function(e){if(e.properties.computed&&e.properties.computed()&&e.properties.computedValue){var r=e.id+n.computedSuffix;e.properties.computedValue.decorate(t.viewModel,r)}}(e)},isApplied:function(e){return e.hasOwnProperty("value")}})}),define("GetOJComponentDecorator",["require","ControlDecorator","ojs/ojcore","jquery","underscore","knockout"],function(e){"use strict";var t=e("ControlDecorator"),n=e("ojs/ojcore"),r=e("jquery"),i=e("underscore"),s=e("knockout");return t.subClass({},{init:function(){this._super("GET_OJ_COMPONENT")},_decorate:function(e){e._deferredOjComponentCalls=[];var t=function(){return e._deferredOjComponentCalls.push(arguments),e._deferredOjComponentCalls};e.getOjComponent=function(){var e=n.Components.getWidgetConstructor(r("#"+this.domIdPrefix+s.utils.unwrapObservable(this.id))[0]);return e&&e()?e:t};var o=function(e){t=function(){},t.isNotLoaded=!0;var n=e.getOjComponent();return i.each(e._deferredOjComponentCalls,function(e){n.apply(n,e)}),e._deferredOjComponentCalls=[],e.afterOjComponentInit&&e.afterOjComponentInit(),!0};e.registerRenderListener(o)},isApplied:function(e){return e.hasOwnProperty("getOjComponent")}})}),define("RendererDecoratorsCatalog",["require","DecoratorsCatalog","JetValidationDecorator","RepeatableValidationDecorator","FormReferenceValidationDecorator","LazyRenderingDecorator","TabRenderingDecorator","TabContainerRenderingDecorator","SectionRenderingDecorator","SectionAsyncRenderCallbackDecorator","ControlTypeId","TimeValidationDecorator","RawDataDecorator","VideoValueDecorator","IdentityValueDecorator","CheckboxValueDecorator","RepeatableRowValueDecorator","FormReferenceValueDecorator","ValueDecorator","SelectValueDecorator","LinkValueDecorator","DateValueDecorator","TimeValueDecorator","NumberValueDecorator","RepeatableValueDecorator","BuildFormReferenceDecorator","ReferenceLazyRenderingDecorator","TranslationsDecorator","ComputedValueDecorator","GetOJComponentDecorator"],function(e){"use strict";var t=e("DecoratorsCatalog"),n=e("JetValidationDecorator"),r=e("RepeatableValidationDecorator"),i=e("FormReferenceValidationDecorator"),s=e("LazyRenderingDecorator"),o=e("TabRenderingDecorator"),u=e("TabContainerRenderingDecorator"),a=e("SectionRenderingDecorator"),f=e("SectionAsyncRenderCallbackDecorator"),l=e("ControlTypeId"),c=e("TimeValidationDecorator"),h=e("RawDataDecorator"),p=e("VideoValueDecorator"),d=e("IdentityValueDecorator"),v=e("CheckboxValueDecorator"),m=e("RepeatableRowValueDecorator"),g=e("FormReferenceValueDecorator"),y=e("ValueDecorator"),b=e("SelectValueDecorator"),w=e("LinkValueDecorator"),E=e("DateValueDecorator"),S=e("TimeValueDecorator"),x=e("NumberValueDecorator"),T=e("RepeatableValueDecorator"),N=e("BuildFormReferenceDecorator"),C=e("ReferenceLazyRenderingDecorator"),k=e("TranslationsDecorator"),L=e("ComputedValueDecorator"),A=e("GetOJComponentDecorator");return t.subClass({},{init:function(){this._super(),this.valueDecorator=new y,this.numberValueDecorator=new x,this.dateValueDecorator=new E,this.repeatableValueDecorator=new T,this.lazyRenderingDecorator=new s,this.getOJComponentDecorator=new A,this.jetValidationDecorator=new n([this.valueDecorator,this.lazyRenderingDecorator,this.getOJComponentDecorator]),this.repeatableValidationDecorator=new r([this.lazyRenderingDecorator,this.getOJComponentDecorator]),this.formReferenceValidationDecorator=new i([this.lazyRenderingDecorator,this.getOJComponentDecorator]),this.tabRenderingDecorator=new o([this.lazyRenderingDecorator]),this.sectionRenderingDecorator=new a,this.sectionAsyncRenderCallbackDecorator=new f,this.tabContainerRenderingDecorator=new u([this.lazyRenderingDecorator]),this.rawDataDecorator=new h([this.lazyRenderingDecorator]),this.referenceLazyRenderingDecorator=new C([this.lazyRenderingDecorator]),this.registerDecorator(this.lazyRenderingDecorator),this.registerDecorator(this.getOJComponentDecorator),this.registerDecorator(this.referenceLazyRenderingDecorator,l.FORM_REFERENCE),this.registerDecorator(this.valueDecorator,l.INPUT_TEXT),this.registerDecorator(this.valueDecorator,l.TEXT_AREA),this.registerDecorator(this.valueDecorator,l.CHECKLIST),this.registerDecorator(this.valueDecorator,l.RADIO_BUTTON),this.registerDecorator(this.valueDecorator,l.EMAIL),this.registerDecorator(this.valueDecorator,l.URL),this.registerDecorator(this.valueDecorator,l.MESSAGE),this.registerDecorator(this.valueDecorator,l.PHONE),this.registerDecorator(this.valueDecorator,l.IMAGE),this.registerDecorator(this.valueDecorator,l.VIDEO),this.registerDecorator(this.numberValueDecorator,l.NUMBER),this.registerDecorator(this.numberValueDecorator,l.MONEY),this.registerDecorator(this.dateValueDecorator,l.DATE),this.registerDecorator(this.dateValueDecorator,l.DATE_TIME),this.registerDecorator(new S([]),l.TIME),this.registerDecorator(new g([]),l.FORM_REFERENCE),this.registerDecorator(new v([]),l.CHECKBOX),this.registerDecorator(new d([]),l.IDENTITY_BROWSER),this.registerDecorator(new b([]),l.SELECT),this.registerDecorator(new w([]),l.LINK),this.registerDecorator(new m([]),l.TABLE_ROW),this.registerDecorator(new m([]),l.REPEATABLE_SECTION_ROW),this.registerDecorator(this.repeatableValueDecorator,l.REPEATABLE_SECTION),this.registerDecorator(this.repeatableValueDecorator,l.TABLE),this.registerDecorator(new p([this.valueDecorator]),l.VIDEO),this.registerDecorator(new N([this.valueDecorator]),l.FORM_REFERENCE),this.registerDecorator(this.rawDataDecorator,l.INPUT_TEXT),this.registerDecorator(this.rawDataDecorator,l.TEXT_AREA),this.registerDecorator(this.rawDataDecorator,l.SELECT),this.registerDecorator(this.rawDataDecorator,l.CHECKLIST),this.registerDecorator(this.rawDataDecorator,l.CHECKBOX),this.registerDecorator(this.rawDataDecorator,l.RADIO_BUTTON),this.registerDecorator(this.rawDataDecorator,l.NUMBER),this.registerDecorator(this.rawDataDecorator,l.DATE),this.registerDecorator(this.rawDataDecorator,l.TIME),this.registerDecorator(this.rawDataDecorator,l.DATE_TIME),this.registerDecorator(this.rawDataDecorator,l.EMAIL),this.registerDecorator(this.rawDataDecorator,l.URL),this.registerDecorator(this.rawDataDecorator,l.MESSAGE),this.registerDecorator(this.rawDataDecorator,l.LINK),this.registerDecorator(this.rawDataDecorator,l.MONEY),this.registerDecorator(this.rawDataDecorator,l.PHONE),this.registerDecorator(this.rawDataDecorator,l.IMAGE),this.registerDecorator(this.rawDataDecorator,l.VIDEO),this.registerDecorator(this.rawDataDecorator,l.REPEATABLE_SECTION),this.registerDecorator(this.rawDataDecorator,l.TABLE),this.translationsDecorator=new k([this.lazyRenderingDecorator]),this.registerDecorator(this.translationsDecorator,l.INPUT_TEXT),this.registerDecorator(this.translationsDecorator,l.TEXT_AREA),this.registerDecorator(this.translationsDecorator,l.BUTTON),this.registerDecorator(this.translationsDecorator,l.SELECT),this.registerDecorator(this.translationsDecorator,l.CHECKLIST),this.registerDecorator(this.translationsDecorator,l.CHECKBOX),this.registerDecorator(this.translationsDecorator,l.RADIO_BUTTON),this.registerDecorator(this.translationsDecorator,l.NUMBER),this.registerDecorator(this.translationsDecorator,l.DATE),this.registerDecorator(this.translationsDecorator,l.TIME),this.registerDecorator(this.translationsDecorator,l.DATE_TIME),this.registerDecorator(this.translationsDecorator,l.EMAIL),this.registerDecorator(this.translationsDecorator,l.URL),this.registerDecorator(this.translationsDecorator,l.MESSAGE),this.registerDecorator(this.translationsDecorator,l.LINK),this.registerDecorator(this.translationsDecorator,l.MONEY),this.registerDecorator(this.translationsDecorator,l.PHONE),this.registerDecorator(this.translationsDecorator,l.IMAGE),this.registerDecorator(this.translationsDecorator,l.VIDEO),this.registerDecorator(this.translationsDecorator,l.IDENTITY_BROWSER),this.registerDecorator(this.translationsDecorator,l.PANEL),this.registerDecorator(this.translationsDecorator,l.SECTION),this.registerDecorator(this.translationsDecorator,l.TABLE),this.computedValueDecorator=new L([this.lazyRenderingDecorator]),this.registerDecorator(this.computedValueDecorator,l.INPUT_TEXT),this.registerDecorator(this.computedValueDecorator,l.TEXT_AREA),this.registerDecorator(this.computedValueDecorator,l.SELECT),this.registerDecorator(this.computedValueDecorator,l.CHECKLIST),this.registerDecorator(this.computedValueDecorator,l.CHECKBOX),this.registerDecorator(this.computedValueDecorator,l.RADIO_BUTTON),this.registerDecorator(this.computedValueDecorator,l.NUMBER),this.registerDecorator(this.computedValueDecorator,l.DATE),this.registerDecorator(this.computedValueDecorator,l.TIME),this.registerDecorator(this.computedValueDecorator,l.DATE_TIME),this.registerDecorator(this.computedValueDecorator,l.EMAIL),this.registerDecorator(this.computedValueDecorator,l.URL),this.registerDecorator(this.computedValueDecorator,l.MESSAGE),this.registerDecorator(this.computedValueDecorator,l.LINK),this.registerDecorator(this.computedValueDecorator,l.MONEY),this.registerDecorator(this.computedValueDecorator,l.PHONE),this.registerDecorator(this.computedValueDecorator,l.IMAGE),this.registerDecorator(this.computedValueDecorator,l.VIDEO),this.registerDecorator(this.jetValidationDecorator,l.IDENTITY_BROWSER),this.registerDecorator(this.jetValidationDecorator,l.INPUT_TEXT),this.registerDecorator(this.jetValidationDecorator,l.TEXT_AREA),this.registerDecorator(this.jetValidationDecorator,l.SELECT),this.registerDecorator(this.jetValidationDecorator,l.CHECKLIST),this.registerDecorator(this.jetValidationDecorator,l.CHECKBOX),this.registerDecorator(this.jetValidationDecorator,l.RADIO_BUTTON),this.registerDecorator(this.jetValidationDecorator,l.NUMBER),this.registerDecorator(this.jetValidationDecorator,l.DATE);var e=new c([this.lazyRenderingDecorator,this.getOJComponentDecorator]);this.registerDecorator(e,l.TIME),this.registerDecorator(e,l.DATE_TIME),this.registerDecorator(this.jetValidationDecorator,l.EMAIL),this.registerDecorator(this.jetValidationDecorator,l.URL),this.registerDecorator(this.jetValidationDecorator,l.MONEY),this.registerDecorator(this.jetValidationDecorator,l.PHONE),this.registerDecorator(this.repeatableValidationDecorator,l.REPEATABLE_SECTION),this.registerDecorator(this.repeatableValidationDecorator,l.TABLE),this.registerDecorator(this.formReferenceValidationDecorator,l.FORM_REFERENCE),this.registerDecorator(this.tabContainerRenderingDecorator,l.TAB_CONTAINER),this.registerDecorator(this.tabRenderingDecorator,l.TAB),this.registerDecorator(this.sectionRenderingDecorator,l.SECTION),this.registerDecorator(this.sectionAsyncRenderCallbackDecorator,l.SECTION)}})}),define("text!rendererImg/trash-blue.svg",[],function(){return'<?xml version="1.0" encoding="utf-8"?>\r\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\r\n<svg version="1.1" id="Layer_1" xmlns:ev="http://www.w3.org/2001/xml-events"\r\n	 xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="32px" height="32px"\r\n	 viewBox="-6.5 -3.5 32 32" enable-background="new -6.5 -3.5 32 32" xml:space="preserve">\r\n<path fill="#0572CE" d="M0.983,7.974V5.987c0-1.104,0.864-2,1.969-2H4.99V2.046c0-1.105,0.719-2,1.606-2h6.788\r\n	c0.888,0,1.606,0.895,1.606,2v1.941h2.011c1.104,0,1.97,0.896,1.97,2v2.005L0.983,7.974z M11.062,1.925H8.982\r\n	C8.173,1.909,8.038,2.206,7.99,2.875C7.952,3.399,7.992,4.058,7.992,4.058h3.992c0,0,0.029-0.658,0.029-1.183\r\n	S12.016,1.876,11.062,1.925z M17.018,23.018c0,0.553-0.479,1-1.031,1H4.056c-0.551,0-1.03-0.447-1.03-1V9.041h13.992V23.018z"/>\r\n</svg>\r\n'}),define("text!rendererImg/plus-blue.svg",[],function(){return'<?xml version="1.0" encoding="utf-8"?>\r\n<!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 1.1//EN" "http://www.w3.org/Graphics/SVG/1.1/DTD/svg11.dtd">\r\n<svg version="1.1" id="Layer_1" xmlns:ev="http://www.w3.org/2001/xml-events"\r\n	 xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px" width="32px" height="32px"\r\n	 viewBox="-3.5 -3.5 32 32" enable-background="new -3.5 -3.5 32 32" xml:space="preserve">\r\n<path fill="#0572CE" d="M23.896,14.902h-8.994v8.988c0,0.553-0.447,1-1,1h-1.96c-0.552,0-1-0.447-1-1v-8.988H1.953\r\n	c-0.553,0-1-0.447-1-1v-1.96c0-0.552,0.447-1,1-1h8.989V1.948c0-0.552,0.448-1,1-1h1.96c0.553,0,1,0.448,1,1v8.994h8.994\r\n	c0.552,0,1,0.448,1,1v1.96C24.896,14.455,24.448,14.902,23.896,14.902z"/>\r\n</svg>\r\n'}),define("RendererContext",["require","FormContext","RendererControlType","RendererId","ojL10n!rendererMsg/nls/renderer","knockout","jquery","underscore","Icon","EventsId","Configuration","OptionsResolverFactory","LoVMappingAutoComplete","EventsQueue","ObservablePayloadContext","FormReferenceFactory","RendererDecoratorsCatalog","!text!rendererImg/trash-blue.svg","!text!rendererImg/plus-blue.svg"],function(e){"use strict";var t=e("FormContext"),n=e("RendererControlType"),r=e("RendererId"),i=e("ojL10n!rendererMsg/nls/renderer"),s=e("knockout"),o=e("jquery"),u=e("underscore"),a=e("Icon"),f=e("EventsId"),l=e("Configuration"),c=e("OptionsResolverFactory"),h=e("LoVMappingAutoComplete"),p=e("EventsQueue"),d=e("ObservablePayloadContext"),v=e("FormReferenceFactory"),m=e("RendererDecoratorsCatalog"),g=e("!text!rendererImg/trash-blue.svg"),y=e("!text!rendererImg/plus-blue.svg");return t.subClass({},{controlBindings:{},init:function(e,t,n,r){this._super(new l(e.config),e.dependencies,t),this.tracker=s.observable(),this.optionsResolverFactory=new c,this.LoVMappingAutoComplete=h,this.eventsQueue=new p,this.decoratorsCatalog=new m,this.payloadContext=new d(n,r),this.runningAsyncTemplates=s.observable(-1)},getScope:function(){return r.FORM_RENDERER},getControlDefinitionByType:function(e){return n[e]},getFormReferenceControlDefinition:function(e,t){return n.FORM_REFERENCE(v.create(e),t)},addControlDecorators:function(e){this.decoratorsCatalog.addToControl(e,this)},focusControl:function(e){e.length>0&&(e.first().focus(),s.contextFor(e[0]).control.executeEvent(f.ON_FOCUS.value))},registerAsyncTemplate:function(e,t){var n,r=s.unwrap(t);return r.length>0&&(-1===this.runningAsyncTemplates()?this.runningAsyncTemplates(1):this.runningAsyncTemplates(this.runningAsyncTemplates()+1),n=function(){this.runningAsyncTemplates(this.runningAsyncTemplates()-1)}.bind(this)),n},properties:function(){var e=this.config().readOnly;return u.extend({},this._super(),{config:this.config(),msg:i,removeColumnIcon:function(){return new a(g,g,g)},addColumnIcon:function(){return new a(y,y,y)},tracker:o.proxy(function(){return this.tracker},this),readOnly:function(){return e}})}})}),define("AbstractCallDefinition",["require","Class","knockout","ResponseMapping"],function(e){"use strict";var t=e("Class"),n=e("knockout"),r=e("ResponseMapping");return t.subClass({},{init:function(e){this.id=e.id,this.response=n.observable(new r(e.response))},toJS:function(){return{id:this.id,response:this.response().toJS()}}})}),define("RendererCallDefinition",["require","AbstractCallDefinition","underscore"],function(e){"use strict";var t=e("AbstractCallDefinition"),n=e("underscore");return t.subClass({},{init:function(e){this._super(e),this.formValues=e.formValues},toJS:function(){return n.extend(this._super(),{formValues:this.formValues})}})}),define("Form",["require","knockout","jquery","underscore","FormsLogger","RendererCallDefinition","Class"],function(e){"use strict";var t=e("knockout"),n=e("jquery"),r=e("underscore"),i=e("FormsLogger"),s=e("RendererCallDefinition");return e("Class").subClass({resolveOnLoaded:function(e){return new Promise(function(t,n){if(e.loaded())i.getLogger().timeEnd("[LOAD]"),t();else var r=e.loaded.subscribe(function(){i.getLogger().timeEnd("[LOAD]"),r.dispose(),t()})})}},{init:function(e){this.id=e.id,this.properties={name:t.observable(e.name),description:t.observable(e.description)},this.calls=t.observableArray(this._buildCalls(e.calls||[]))},getAllControls:function(){throw new Error("This function must be overridden")},findControl:function(e){throw new Error("This function must be overridden")},_createCallDefinition:function(e){return new s(e)},_buildCalls:function(e){var t=[],r=this;return n.each(e,function(e,n){t.push(r._createCallDefinition(n))}),t},_callsToJS:function(){var e=[];return r.each(this.calls(),function(t){e.push(t.toJS())}),e}})}),define("RendererLoadPreProcessor",["require","Class","UUID","underscore","knockout","DefaultFormHandler","DefaultCssHandler","DefaultTranslationsHandler","DefaultTypeHandler"],function(e){"use strict";var t=e("Class"),n=e("UUID"),r=e("underscore"),i=e("knockout"),s=e("DefaultFormHandler"),o=e("DefaultCssHandler"),u=e("DefaultTranslationsHandler"),a=e("DefaultTypeHandler");return t.subClass({preProcess:function(e){e=i.utils.unwrapObservable(e)||{},e.form=e.form||{},e.config=e.config||{};var t=n.createUuid();return r.defaults(e.form,{id:t,name:t,description:"",controls:[],calls:[]}),r.defaults(e.config,{formHandler:s.create(),cssHandler:o.create(),typeHandler:a.create(),translationsHandler:u.create(),readOnly:!1,domIdPrefix:""}),r.defaults(e,{dependencies:[]}),e}},{})}),define("EventReference",["require","Class"],function(e){"use strict";return e("Class").subClass({},{init:function(e,t){this.id=e,this.viewModel=t,this._event=null},event:function(){return this._event||(this._event=this.viewModel.form().extensions.findEvent(this.id)),this._event},execute:function(e){return this.event().execute(e)},toJS:function(){return{id:this.id}}})}),define("MediaQueryType",["require","jquery"],function(e){"use strict";var t=e("jquery"),n="-only",r="oj-sm",i="oj-md",s="oj-lg",o="oj-xl",u="print",a=function(e){return e.indexOf(n)>0?e===this.mediaValue+n:t.inArray(e,this.supportedMedias)>=0};return{PRINT:{mediaValue:u,supportedMedias:[u],query:"print",accept:function(e){return a.call(this,e)}},SMALL:{mediaValue:r,supportedMedias:[r],query:"(max-width: 767px)",accept:function(e){return a.call(this,e)}},MEDIUM:{mediaValue:i,query:"(min-width: 768px)",supportedMedias:[r,i],accept:function(e){return a.call(this,e)}},LARGE:{mediaValue:s,supportedMedias:[r,i,s],query:"(min-width: 1024px)",accept:function(e){return a.call(this,e)}},EXTRA_LARGE:{mediaValue:o,query:"(min-width: 1280px)",supportedMedias:[r,i,s,o],accept:function(e){return a.call(this,e)}}}}),define("ColumnSpanType",["require","MediaQueryType","jquery"],function(e){"use strict";var t=e("MediaQueryType"),n=e("jquery"),r=function(e,t,r){var i=r?e.supportedMedias:[e.mediaValue],s="";return n.each(i,function(){s+=this+"-"+t+" "}),s};return{SMALL:{propertyName:"smColSpan",getStyleClass:function(e,n){return r(t.SMALL,e,n)}},MEDIUM:{propertyName:"mdColSpan",getStyleClass:function(e,n){return r(t.MEDIUM,e,n)}},LARGE:{propertyName:"lgColSpan",getStyleClass:function(e,n){return r(t.LARGE,e,n)}},EXTRA_LARGE:{propertyName:"xlColSpan",getStyleClass:function(e,n){return r(t.EXTRA_LARGE,e,n)}}}}),define("ControlEventsMap",["require","EventsId","ControlTypeId"],function(e){"use strict";var t=e("EventsId"),n=e("ControlTypeId"),r=[t.ON_LOAD,t.ON_CHANGE,t.ON_FOCUS,t.ON_BLUR,t.ON_SUBMIT],i={};return i[n.INPUT_TEXT]=r,i[n.TEXT_AREA]=r,i[n.BUTTON]=[t.ON_LOAD,t.ON_CLICK,t.ON_SUBMIT],i[n.SELECT]=[t.ON_LOAD,t.ON_CHANGE,t.ON_SUBMIT],i[n.CHECKLIST]=[t.ON_LOAD,t.ON_CHANGE,t.ON_SUBMIT],i[n.CHECKBOX]=[t.ON_LOAD,t.ON_CHANGE,t.ON_SUBMIT],i[n.RADIO_BUTTON]=[t.ON_LOAD,t.ON_CHANGE,t.ON_SUBMIT],i[n.NUMBER]=r,i[n.DATE]=r,i[n.TIME]=r,i[n.DATE_TIME]=r,i[n.EMAIL]=r,i[n.URL]=r,i[n.MESSAGE]=[t.ON_LOAD],i[n.LINK]=[t.ON_LOAD,t.ON_CLICK],i[n.MONEY]=r,i[n.PHONE]=r,i[n.IMAGE]=[t.ON_LOAD],i[n.VIDEO]=[t.ON_LOAD],i[n.PANEL]=[t.ON_LOAD],i[n.BUSINESS_TYPE]=[t.ON_LOAD],i[n.SECTION]=[t.ON_LOAD,t.ON_EXPAND,t.ON_COLLAPSE,t.ON_EXPAND_TOGGLE],i[n.FORM_REFERENCE]=[t.ON_LOAD,t.ON_SUBMIT],i[n.TAB_CONTAINER]=[t.ON_LOAD],i[n.TAB]=[t.ON_LOAD,t.ON_SELECTED,t.ON_UNSELECTED],i.PRESENTATION=[t.ON_LOAD,t.ON_SUBMIT],i.TABLE=[t.ON_LOAD,t.ON_SELECTION_CHANGE,t.ON_ADD_ROW,t.ON_REMOVE_ROW],i.REPEATABLE_SECTION=[t.ON_LOAD,t.ON_SELECTION_CHANGE,t.ON_ADD_ROW,t.ON_REMOVE_ROW],i[n.IDENTITY_BROWSER]=[t.ON_LOAD,t.ON_CHANGE,t.ON_SUBMIT],i}),define("ControlProperty",["require","Class"],function(e){"use strict";return e("Class").subClass({},{value:"",label:"",accessor:"",params:0,init:function(e,t,n){this.value=e,this.label=t,this.accessor=n},template:function(){return!1},getValue:function(e){return e.properties[this.accessor]()}})}),define("ControlValueProperty",["require","ControlProperty","ojL10n!rendererMsg/nls/renderer"],function(e){"use strict";var t=e("ControlProperty"),n=e("ojL10n!rendererMsg/nls/renderer");return t.subClass({},{value:"VALUE",label:n.LABEL_VALUE,init:function(){},getValue:function(e){return e.getControlValue()}})}),define("ControlIdentityValueProperty",["require","ControlProperty","ojL10n!rendererMsg/nls/renderer"],function(e){"use strict";var t=e("ControlProperty"),n=e("ojL10n!rendererMsg/nls/renderer");return t.subClass({},{value:"IDENTITY_VALUE",label:n.IDENTITY_VALUE,init:function(){},getValue:function(e){return e.getIdentityValue()}})}),define("HasClassProperty",["require","ControlProperty","ojL10n!rendererMsg/nls/renderer","StyleTypeId","underscore"],function(e){"use strict";var t=e("ControlProperty"),n=e("ojL10n!rendererMsg/nls/renderer"),r=e("StyleTypeId"),i=e("underscore");return t.subClass({},{value:"HAS_CLASS",label:n.HAS_CLASS,init:function(){},template:function(){return"classValueAccessorTemplate"},params:1,getValue:function(e,t){var n=i.find(e.styles(),function(e){return e.type.name===r.CLASS_NAME.name},this),s=n.value().split(" ");return i.contains(s,t)}})}),define("IsValidProperty",["require","ControlProperty","ojL10n!rendererMsg/nls/renderer"],function(e){"use strict";var t=e("ControlProperty"),n=e("ojL10n!rendererMsg/nls/renderer");return t.subClass({},{value:"IS_VALID",label:n.IS_VALID,init:function(){},getValue:function(e){return e.viewModel.formValidator.validateControl(e,e.viewModel.rendererContext)}})}),define("SelectedTabProperty",["require","ControlProperty","ojL10n!rendererMsg/nls/renderer"],function(e){"use strict";var t=e("ControlProperty"),n=e("ojL10n!rendererMsg/nls/renderer");return t.subClass({},{value:"SELECTED",label:n.SELECTED,init:function(){},getValue:function(e){var t=e.viewModel.form().findControlAndParent(e.id).parent,n=t.controls().indexOf(e);return t.properties.selectedPosition()===n}})}),define("ControlVideoSrcProperty",["require","ControlValueProperty","ojL10n!rendererMsg/nls/renderer"],function(e){"use strict";var t=e("ControlValueProperty"),n=e("ojL10n!rendererMsg/nls/renderer");return t.subClass({},{value:"VIDEO_SRC",label:n.LABEL_SOURCE_URL,init:function(){}})}),define("ControlImageUrlProperty",["require","ControlValueProperty","ojL10n!rendererMsg/nls/renderer"],function(e){"use strict";var t=e("ControlValueProperty"),n=e("ojL10n!rendererMsg/nls/renderer");return t.subClass({},{value:"IMAGE_URL",label:n.IMAGE_URL,init:function(){}})}),define("OptionsProperty",["require","ControlProperty","ojL10n!rendererMsg/nls/renderer"],function(e){"use strict";var t=e("ControlProperty"),n=e("ojL10n!rendererMsg/nls/renderer");return t.subClass({},{value:"OPTIONS",label:n.OPTIONS,init:function(){},getValue:function(e){return e.properties.computedOptions()}})}),define("IndexProperty",["require","ControlProperty","underscore","ojL10n!rendererMsg/nls/renderer"],function(e){"use strict";var t=e("ControlProperty"),n=e("underscore"),r=e("ojL10n!rendererMsg/nls/renderer");return t.subClass({},{value:"INDEX",label:r.INDEX,init:function(){},getValue:function(e){return n.isUndefined(e.indexBeforeRemove)?e.getParent().dataSource().indexOf(e):e.indexBeforeRemove}})}),define("SelectedLabelProperty",["require","ControlProperty","underscore","ojL10n!rendererMsg/nls/renderer"],function(e){"use strict";var t=e("ControlProperty"),n=e("underscore"),r=e("ojL10n!rendererMsg/nls/renderer");return t.subClass({},{value:"SELECTED_LABEL",label:r.SELECTED_LABEL,init:function(){},_findLabel:function(e,t){var r=n.find(e.properties.computedOptions(),function(e){return e.value===t});return r?r.label:""},getValue:function(e){var t=e.getControlValue();return n.isArray(t)?n.map(t,function(t){return this._findLabel(e,t)},this):this._findLabel(e,t)}})}),define("ControlMessageProperty",["require","ControlValueProperty","ojL10n!rendererMsg/nls/renderer"],function(e){"use strict";var t=e("ControlValueProperty"),n=e("ojL10n!rendererMsg/nls/renderer");return t.subClass({},{value:"MESSAGE",label:n.MESSAGE,init:function(){}})}),define("PropertiesMap",["require","ojL10n!rendererMsg/nls/renderer","ControlProperty","ControlValueProperty","ControlIdentityValueProperty","HasClassProperty","IsValidProperty","SelectedTabProperty","ControlVideoSrcProperty","ControlImageUrlProperty","OptionsProperty","IndexProperty","SelectedLabelProperty","ControlMessageProperty"],function(e){"use strict";var t=e("ojL10n!rendererMsg/nls/renderer"),n=e("ControlProperty"),r=e("ControlValueProperty"),i=e("ControlIdentityValueProperty"),s=e("HasClassProperty"),o=e("IsValidProperty"),u=e("SelectedTabProperty"),a=e("ControlVideoSrcProperty"),f=e("ControlImageUrlProperty"),l=e("OptionsProperty"),c=e("IndexProperty"),h=e("SelectedLabelProperty"),p=e("ControlMessageProperty");return{VALUE:new r,HAS_CLASS:new s,LABEL:new n("LABEL",t.LABEL_LABEL,"label"),MESSAGE:new p,VIDEO_SRC:new a,IMAGE_URL:new f,PLACEHOLDER:new n("PLACEHOLDER",t.LABEL_PLACEHOLDER,"placeHolder"),HIDDEN:new n("HIDDEN",t.HIDDEN,"hide"),EXPANDED:new n("EXPANDED",t.LABEL_EXPANDED,"expanded"),DISABLED:new n("DISABLED",t.LABEL_DISABLED,"disabled"),REQUIRED:new n("REQUIRED",t.LABEL_REQUIRED,"required"),MIN_VALUE:new n("MIN_VALUE",t.LABEL_MIN_VALUE,"minValue"),MAX_VALUE:new n("MAX_VALUE",t.LABEL_MAX_VALUE,"maxValue"),IS_VALID:new o,OPTIONS:new l,SELECTED:new u,IDENTITY_VALUE:new i,CAN_ADD_REMOVE_ROWS:new n("CAN_ADD_REMOVE_ROWS",t.ENABLED_ADD_REMOVE_ROWS,"canAddDelete"),INDEX:new c,SELECTED_LABEL:new h}}),define("FunctionsMap",["require","ojL10n!rendererMsg/nls/renderer","UUID","StringUtils","underscore"],function(e){"use strict";function t(){return(new Date(Date.now()-a)).toISOString()}function n(e,t){u.each(e,function(e){u.isArray(e)?n(e,t):t(e)})}function r(e){return parseFloat(e.toFixed(10))}var i=e("ojL10n!rendererMsg/nls/renderer"),s=e("UUID"),o=e("StringUtils"),u=e("underscore"),a=6e4*(new Date).getTimezoneOffset(),f={CREATE_UUID:{value:"CREATE_UUID",label:i.CREATE_UUID,resolve:function(){return s.createUuid()},params:[],category:"FUNCTIONS_OTHER"},CURRENT_DATE:{value:"CURRENT_DATE",label:i.CURRENT_DATE,resolve:function(){return t().slice(0,10)},params:[],category:"FUNCTIONS_DATE"},CURRENT_TIME:{value:"CURRENT_TIME",label:i.CURRENT_TIME,resolve:function(){return t().slice(10,19)},params:[],category:"FUNCTIONS_DATE"},CURRENT_DATE_TIME:{value:"CURRENT_DATE_TIME",label:i.CURRENT_DATE_TIME,resolve:function(){return t().slice(0,19)},params:[],category:"FUNCTIONS_DATE"},SIMPLE_SUM:{value:"SIMPLE_SUM",label:i.SUM,resolve:function(e,t){return r(parseFloat(e)+parseFloat(t))},params:[{type:"NUMBER"},{type:"NUMBER"}],category:"FUNCTIONS_MATH"},SUM:{value:"SUM",label:i.SUMMATION,resolve:function(){var e=0;return n(arguments,function(t){e=r(e+parseFloat(t))}),e},multipleParams:!0,params:[{type:"NUMBER"}],category:"FUNCTIONS_MATH"},SUB:{value:"SUB",label:i.SUB,resolve:function(e,t){return r(parseFloat(e)-parseFloat(t))},params:[{type:"NUMBER"},{type:"NUMBER"}],category:"FUNCTIONS_MATH"},MULTIPLY:{value:"MULTIPLY",label:i.MULTIPLY,resolve:function(){var e=1;return n(arguments,function(t){var n=parseFloat(t);e=r(e*n)}),e},multipleParams:!0,params:[{type:"NUMBER"}],category:"FUNCTIONS_MATH"},DIVISION:{value:"DIVISION",label:i.DIVISION,resolve:function(e,t){return r(parseFloat(e)/parseFloat(t))},params:[{type:"NUMBER"},{type:"NUMBER"}],category:"FUNCTIONS_MATH"},INTEGER_DIVISION:{value:"INTEGER_DIVISION",label:i.INTEGER_DIVISION,resolve:function(e,t){var n=f.DIVISION.resolve(e,t);return n<0?Math.ceil(n):Math.floor(n)},params:[{type:"NUMBER"},{type:"NUMBER"}],category:"FUNCTIONS_MATH"},MOD:{value:"MOD",label:i.MODULO,resolve:function(e,t){return r(parseFloat(e)%parseFloat(t))},params:[{type:"NUMBER"},{type:"NUMBER"}],category:"FUNCTIONS_MATH"},MIN:{value:"MIN",label:i.MIN,resolve:function(){var e=Number.MAX_VALUE;return n(arguments,function(t){e=Math.min(e,t)}),e},multipleParams:!0,params:[{type:"NUMBER"}],category:"FUNCTIONS_ARRAY"},MAX:{value:"MAX",label:i.MAX,resolve:function(){var e=Number.MIN_VALUE;return n(arguments,function(t){e=Math.max(e,t)}),e},multipleParams:!0,params:[{type:"NUMBER"}],category:"FUNCTIONS_ARRAY"},COUNT:{value:"COUNT",label:i.COUNT,resolve:function(){var e=0;return n(arguments,function(){e++}),e},multipleParams:!0,allowComplex:!0,params:[{type:"ANY"}],category:"FUNCTIONS_ARRAY"},AVERAGE:{value:"AVERAGE",label:i.AVERAGE,resolve:function(){var e=0,t=0;return n(arguments,function(n){var i=parseFloat(n);e=r(e+i),t++}),t>0?r(e/t):0},multipleParams:!0,params:[{type:"NUMBER"}],category:"FUNCTIONS_ARRAY"},CONCAT:{value:"CONCAT",label:i.CONCAT,resolve:function(){var e="";return n(arguments,function(t){e+=t}),e},multipleParams:!0,params:[{type:"STRING"}],category:"FUNCTIONS_TEXT"},SPLIT:{value:"SPLIT",label:i.SPLIT,resolve:function(e,t){return o._makeString(e).split(o._makeString(t))},params:[{type:"STRING"},{type:"STRING"}],category:"FUNCTIONS_TEXT"},JOIN:{value:"JOIN",label:i.JOIN,resolve:function(e,t){return u.isArray(e)||(e=[e]),e.join(o._makeString(t))},params:[{type:"STRING"},{type:"STRING"}],category:"FUNCTIONS_TEXT"},TO_LOWERCASE:{value:"TO_LOWERCASE",label:i.TO_LOWERCASE,resolve:function(e){return o._makeString(e).toLowerCase()},params:[{type:"STRING"}],category:"FUNCTIONS_TEXT"},TO_UPPERCASE:{value:"TO_UPPERCASE",label:i.TO_UPPERCASE,resolve:function(e){return o._makeString(e).toUpperCase()},params:[{type:"STRING"}],category:"FUNCTIONS_TEXT"},LENGTH:{value:"LENGTH",label:i.LENGTH,resolve:function(e){return u.size(o._makeString(e))},params:[{type:"STRING"}],category:"FUNCTIONS_TEXT"},TRIM:{value:"TRIM",label:i.TRIM,resolve:function(e){return o.trim(e)},params:[{type:"STRING"}],category:"FUNCTIONS_TEXT"},REPLACE:{value:"REPLACE",label:i.REPLACE,resolve:function(e,t,n){return e=(e||"").toString(),t=new RegExp((t||"").toString(),"g"),n=(n||"").toString(),e.replace(t,n)},params:[{type:"STRING"},{type:"STRING"},{type:"STRING"}],category:"FUNCTIONS_TEXT"}};return f}),define("ValueTypes",["require","ojL10n!rendererMsg/nls/renderer"],function(e){"use strict";var t=e("ojL10n!rendererMsg/nls/renderer");return{CONSTANT:{value:"CONSTANT",label:t.CONSTANT,resolveFunction:"_resolveConstant",decorateFunction:"_decorateConstant",template:null},DATA:{value:"DATA",label:t.DATA_DEFINITION,resolveFunction:"_resolveData",template:"dataValueTypeTemplate"},CONTROL:{value:"CONTROL",label:t.CONTROL,resolveFunction:"_resolveControl",template:"controlValueTypeTemplate"},FUNCTION:{value:"FUNCTION",label:t.FUNCTION,resolveFunction:"_resolveFunction",decorateFunction:"_decorateFunction",template:"functionValueTypeTemplate"},SCOPE:{value:"SCOPE",label:t.CONNECTOR_DATA,resolveFunction:"_resolveScope",template:"dataValueTypeTemplate"}}}),define("ControlReferenceMap",["require","ojL10n!rendererMsg/nls/renderer"],function(e){"use strict";function t(e){return!!e&&e.isRepeatable()}function n(e,t){if(t.getParent)return t.getParent()===e?t:n(e,t.getParent())}var r=e("ojL10n!rendererMsg/nls/renderer"),i={SELF:{value:"SELF",label:r.SELF,resolve:function(e){return e}},FIRST:{value:"FIRST",label:r.FIRST,resolve:function(e,n){if(t(e))return e.getRows()[0]}},LAST:{value:"LAST",label:r.LAST,resolve:function(e,n){if(t(e))return e.getRows()[e.getRows().length-1]}},SELECTED:{value:"SELECTED",labelFunction:function(e){return e.controlResolver.getControl(e.context).properties.multipleSelection()?e.isActionControl?r.FOR_EACH_SELECTED:r.ALL_SELECTED:r.SELECTED_ROW},resolve:function(e){if(t(e))return e.getSelectedRows()}},INDEX:{value:"INDEX",label:r.INDEX,template:"controlIndexTemplate",resolve:function(e,n,r){if(t(e)){if(!n)return i.FIRST.resolve(e);var s=r.value().resolve(r.viewModel);return e.getRows()[s]}}},CURRENT:{value:"CURRENT",label:r.CURRENT,resolve:function(e,r){if(t(e))return r?n(e,r):i.FIRST.resolve(e)}},CURRENT_ITERATION:{value:"CURRENT_ITERATION",label:r.CURRENT_ITERATION_ROW,resolve:function(e,r,s){if(t(e))return r?n(e,s.scope.currentRowControl):i.FIRST.resolve(e)}}};return i}),define("ControlResolver",["require","Class","knockout","ControlReferenceMap","underscore","Value"],function(e){"use strict";var t=e("Class"),n=e("knockout"),r=e("ControlReferenceMap"),i=e("underscore"),s=t.subClass({},{id:null,reference:null,childControl:null,init:function(e,t,o){var u=i.extend({id:"",reference:r.SELF.value,childControl:{}},e);this.id=n.observable(u.id),this.reference=n.observable(u.reference);var a=e.childControl?new s(u.childControl,t,o):null;this.childControl=n.observable(a),this.scope=o,this.viewModel=t,this.value=n.observable(null),e.value&&this.createValueObject(e.value);var l=this;this.reference.subscribe(function(e){e===r.INDEX.value?l.createValueObject():l.value(null)})},createValueObject:function(t){var n=e("Value");this.value(new n(t||{},this.viewModel,this.scope))},toJS:function(){var e={id:this.id(),reference:this.reference(),childControl:this.childControl()?this.childControl().toJS():null};return this.value()&&(e.value=this.value().toJS()),e},getControl:function(e){var t=n.unwrap(e);if(t.findControl)return t.findControl(this.id())},resolveChildContext:function(e,t){var n;if("__SELF__"===this.id())n=e;else{if(i.isArray(e))return i.map(e,function(e){return n=this.getControl(e),r[this.reference()].resolve(n,this.childControl(),t,this)},this);n=this.getControl(e)}return r[this.reference()].resolve(n,t,this)},resolve:function(e,t){var n=this.resolveChildContext(e,t);return this.childControl()?n?this.childControl().resolve(n,t):null:n},getControlsWithRef:function(e){var t=[];return this.reference()===e&&(t=[this.id()]),this.childControl()&&(t=i.union(t,this.childControl().getControlsWithRef(e))),t}});return s}),define("Value",["require","Class","knockout","underscore","PropertiesMap","FunctionsMap","ValueTypes","ControlResolver"],function(e){"use strict";var t=e("Class"),n=e("knockout"),r=e("underscore"),i=e("PropertiesMap"),s=e("FunctionsMap"),o=e("ValueTypes"),u=t.subClass({},{type:null,expression:null,controlResolver:null,propertyParam:[],controlId:null,mapped:null,init:function(t,i,s){var f=r.extend({expression:"",propertyParam:[],type:o.CONSTANT.value,controlResolver:{},mapped:"",controlId:null},t);i.context&&i.context.config&&i.context.config()&&(this.translationsHandler=i.context.config().translationsHandler),this.viewModel=i,this._translationIndex=0,this.expression=n.observable(f.expression),this.mapped=n.observable(f.mapped);var l=[];r.each(f.propertyParam,function(e){l.push(new u(e,i,s))}),this.propertyParam=n.observableArray(l);var p=e("ControlResolver");if(this.type=n.observable(o[f.type]),this.controlResolver=new p(f.controlResolver,i,s),this.scope=s,this.control=n.observable(),this.controlId=f.controlId,null!==this.controlId){i.form()&&this.control(i.form().findControl(this.controlId));var v=i.form.subscribe(function(e){this.control(e.findControl(this.controlId)),v.dispose()}.bind(this))}},getTemplate:function(){var e=this.type().template;return e||(this.control()?this.control().getDataTemplate():"constantValueTypeTemplate")},toJS:function(){var e=[];return r.each(this.propertyParam(),function(t){e.push(t.toJS())}),{expression:this.expression(),propertyParam:e,controlResolver:this.controlResolver.toJS(),type:this.type().value,mapped:this.mapped(),controlId:this.controlId}},_resolveMap:function(e,t){return r.isArray(t)&&this.mapped().length>0?r.map(t,this.mapped()):t},resolve:function(e){return this._resolveMap(e,this[this.type().resolveFunction](e))},_checkBundle:function(e,t){if(this.translationsHandler){var n,r=this.translationsHandler._bundles.defaultBundle,i=this.translationsHandler._bundles.initLocaleBundle;if(i&&i[e]?n=i[e]:r&&r[e]&&(n=r[e]),n&&n.length>t._translationIndex){var s=n[t._translationIndex];return t._translationIndex=t._translationIndex+1,s}}},_resolveConstant:function(e){return this.expression()},_resolveData:function(e){return n.unwrap(e.context.payloadContext.getObservableValue(this.expression()))},_resolveControl:function(e){var t=e.form(),n=this.controlResolver.resolve(t.presentation(),this.scope.eventControl),s=i[this.expression()]||i.VALUE;if(n){var o=[];return r.each(this.propertyParam(),function(t){o.push(t.resolve(e))}),r.isArray(n)?r.map(n,function(e){return s.getValue.apply(s,[e].concat(o))}):s.getValue.apply(s,[n].concat(o))}console.error("User Events Error: Value couldn't be resolved.")},_resolveFunction:function(e){var t=s[this.expression()],n=[];return r.each(this.propertyParam(),function(t){n.push(t.resolve(e))}),t.resolve.apply(t,n)},_resolveScope:function(e){return this.scope.getValue(this.expression())},_getBundle:function(){var e=[];return this.type().value===o.CONSTANT.value?e.push(this.expression()):this.type().value===o.FUNCTION.value&&r.each(this.propertyParam(),function(t){e=r.union(e,t._getBundle())}),e},decorate:function(e,t,n){n=n||this;var r=this.type().decorateFunction;r&&this[r](e,t,n)},_decorateConstant:function(e,t,n){this.expression(this._checkBundle(t,n)||this.expression())},_decorateFunction:function(e,t,n){r.each(this.propertyParam(),function(r){r.decorate(e,t,n)})},getParameterCount:function(){return this.type()===o.CONTROL?i[this.expression()].params:this.type()===o.FUNCTION?s[this.expression()].params.length:0}});return u}),define("Control",["require","Class","UUID","underscore","EventReference","ColumnSpanType","ControlEventsMap","Value","ValidationHelper","koToJSUtil","knockout","ojs/ojmenu"],function(e){"use strict";var t=e("Class"),n=e("UUID"),r=e("underscore"),i=e("EventReference"),s=e("ColumnSpanType"),o=e("ControlEventsMap"),u=e("Value"),a=e("ValidationHelper"),f=e("koToJSUtil"),l=e("knockout");return e("ojs/ojmenu"),t.subClass({},{_parent:null,isValid:null,_registerProperties:function(e,t,n){for(var r in t)if(t.hasOwnProperty(r)){var i=t[r];e[r]=i instanceof Function?i(e,n):i}},init:function(e,t,o,f,p,v){this.id=e||n.createUuid(),this.name=l.observable(t),this.type=o.id,this.validationHelper=a,this.context=p,this._parent=v,this.isValid=l.observable(!0),this._registerProperties(this,o.properties(),f),this._registerProperties(this,p.properties(),f),this.styles=this.styleHandler.getAllStyles(this,f);var m={position:0,isRoot:!1,label:t,autoFocus:!1,disabled:!1,required:!1,hide:!1,parsedStyle:"",formattedStyle:{},isBindable:o.isBindable(),binding:"",autoColSpan:!0,connectorMapping:"",events:[],computed:!1,originalId:null,computedValue:null};m[s.SMALL.propertyName]=1,m[s.MEDIUM.propertyName]=1,m[s.LARGE.propertyName]=1,m[s.EXTRA_LARGE.propertyName]=1,r.defaults(f,m),this.properties={position:l.observable(f.position),isRoot:l.observable(f.isRoot),label:l.observable(f.label),autoFocus:l.observable(f.autoFocus),disabled:l.observable(f.disabled),required:l.observable(f.required),hide:l.observable(f.hide),parsedStyle:l.observable(f.parsedStyle),formattedStyle:l.observable(f.formattedStyle),isBindable:l.observable(f.isBindable),binding:l.observable(f.binding),autoColSpan:l.observable(f.autoColSpan),connectorMapping:l.observable(f.connectorMapping),computed:l.observable(f.computed),originalId:f.originalId},this.properties[s.SMALL.propertyName]=l.observable(f[s.SMALL.propertyName]),this.properties[s.MEDIUM.propertyName]=l.observable(f[s.MEDIUM.propertyName]),this.properties[s.LARGE.propertyName]=l.observable(f[s.LARGE.propertyName]),this.properties[s.EXTRA_LARGE.propertyName]=l.observable(f[s.EXTRA_LARGE.propertyName]),this.properties.formattedStyle=this.styleHandler.getFormattedStyle(this),this.properties.parsedStyle=this.styleHandler.getParsedStyle(this);var g=[];r.each(l.unwrap(f.events),function(e){g.push(new i(e.id,p.viewModel))},this),this.events=l.observableArray(g);var y=new p.scopeFactory.Scope(p.viewModel.getCurrentGlobalScope());y.controlId=this.id,this.properties.computedValue=new u(f.computedValue,p.viewModel,y)},executeEvent:function(e){var t=[];return r.each(this.events(),function(n){var r=n.event().trigger;e===r()&&t.push(n.execute(this))},this),this.context.viewModel.computedExtension.reEvaluateOnControl(e,this),Promise.all(t)},findClosest:function(e){return this.getParent().findClosest(e)},hasValueProperty:function(){return!0},executeEventOnAll:function(e){return this.executeEvent(e)},getValidEvents:function(){return o[this.type]},makeCopy:function(){var e=this.toJS();if(e.properties.originalId=this.properties.originalId?this.properties.originalId:e.id,e.id=n.createUuid(),this.controls){var t=[];r.each(this.controls(),function(e){t.push(e.makeCopy())}),e.controls=t}return e},isRepeatable:function(){return!1},getParent:function(){return this._parent},getFullBinding:function(){return this.getBindingContext()+this.properties.binding()},getBindingContext:function(){return this.getParent()?this.getParent().getContextForChildren(this):""},getDataTemplate:function(){return"constantValueTypeTemplate"},getContextForChildren:function(e){return this.getBindingContext()},hasStyle:function(){return this.styles().length>0},setError:function(e,t){this.getOjComponent()("option","messagesCustom",[{summary:e,detail:t}]),this.validate()},_propertiesToJS:function(){return f.toJS(this.properties)},toJS:function(){var e=[];return r.each(this.events(),function(t){e.push(t.toJS())}),{id:this.id,name:this.name(),type:this.type,properties:r.extend({},this._propertiesToJS(),{events:e,computedValue:this.properties.computedValue.toJS()})}}})}),define("ButtonControl",["require","Control","ControlTypeId"],function(e){"use strict";var t=e("Control"),n=e("ControlTypeId");return t.subClass({},{init:function(e,t,r,i,s){this._super(e,t,i.getControlDefinitionByType(n.BUTTON),r,i,s)},hasValueProperty:function(){return!1}})}),define("InputTextControl",["require","Control","underscore","knockout","ControlTypeId"],function(e){"use strict";var t=e("Control"),n=e("underscore"),r=e("knockout"),i=e("ControlTypeId");return t.subClass({},{init:function(e,t,s,o,u,a){this._super(e,t,a||o.getControlDefinitionByType(i.INPUT_TEXT),s,o,u),n.defaults(s,{autoComplete:!1,help:"",hint:"",pattern:"",patternMessage:"",placeHolder:"",readonly:!1,defaultValue:"",maxLength:null,minLength:null}),this.properties.autoComplete=r.observable(s.autoComplete),this.properties.help=r.observable(s.help),this.properties.hint=r.observable(s.hint),this.properties.maxLength=r.observable(s.maxLength),this.properties.minLength=r.observable(s.minLength),this.properties.pattern=r.observable(s.pattern),this.properties.patternMessage=r.observable(s.patternMessage),this.properties.placeHolder=r.observable(s.placeHolder),this.properties.readonly=r.observable(s.readonly),this.properties.defaultValue=r.observable(s.defaultValue)}})}),define("TextAreaControl",["require","InputTextControl","underscore","ControlTypeId","knockout"],function(e){"use strict";var t=e("InputTextControl"),n=e("underscore"),r=e("ControlTypeId"),i=e("knockout");return t.subClass({},{init:function(e,t,s,o,u){this._super(e,t,s,o,u,o.getControlDefinitionByType(r.TEXT_AREA)),n.defaults(s,{rows:null}),this.properties.rows=i.observable(s.rows)}})}),define("OptionsType",["require","OjSelectItem","ojL10n!rendererMsg/nls/renderer"],function(e){"use strict";var t=e("OjSelectItem"),n=e("ojL10n!rendererMsg/nls/renderer");return{STATIC:t.create("STATIC",n.STATIC_LABEL),REST:t.create("REST",n.REST_LABEL),DYNAMIC:t.create("DYNAMIC",n.DYNAMIC_LABEL),CONNECTOR:t.create("CONNECTOR",n.CONNECTOR_LABEL),EVENT_CONNECTOR:t.create("EVENT_CONNECTOR",""),LIST_CONNECTOR:t.create("LIST_CONNECTOR","")}}),define("OptionsFeed",["require","Class","knockout","OptionsType"],function(e){"use strict";var t=e("Class"),n=e("knockout"),r=e("OptionsType");return t.subClass({},{init:function(e,t,i,s){e=e||r.STATIC.value,this.type=n.observable(r[e]),this.optionsResolver=n.observable(t.optionsResolverFactory.createResolver(e,t,i,s)),this.availableTypes=[r.STATIC,r.DYNAMIC,r.CONNECTOR],this.template=n.pureComputed(function(){return this.type().value.toLowerCase()+"OptionsTemplate"},this),this.properties=this.optionsResolver().properties},observables:function(){return{type:this.type,properties:this.properties}},toJS:function(){return{type:this.type().value,properties:this.optionsResolver().properties().toJS()}}})}),define("LOVControl",["require","Control","underscore","OptionsFeed","OptionsType","EventsId","knockout"],function(e){"use strict";var t=e("Control"),n=e("underscore"),r=e("OptionsFeed"),i=e("OptionsType"),s=e("EventsId"),o=e("knockout");return t.subClass({},{init:function(e,t,i,u,a,l){this._super(e,t,i,u,a,l),n.defaults(u,{multiple:!1,optionsFeed:{}}),this.properties.multiple=o.observable(u.multiple),this.properties.optionsFeed=o.observable(new r(u.optionsFeed.type,a,u.optionsFeed.properties,this.id)),this.properties.defaultValue=o.pureComputed(function(){return this.properties.optionsFeed().optionsResolver().getDefaultValue()},this),this.properties.computedOptions=o.pureComputed(function(){return this.properties.optionsFeed().optionsResolver().getOptions()},this),this.properties.autoFocus=o.pureComputed({read:function(){return this.properties.optionsFeed().optionsResolver().autoFocus()},write:function(e){this.properties.optionsFeed().optionsResolver().autoFocus(e)},owner:this});var h=this;this.properties.defaultValue.subscribe(function(){if(h.value){var e=h.getControlValue();h._isNullEmptyOrUndefined(e)&&(e=h.properties.defaultValue()),h.setValue(e),h.executeEvent(s.ON_CHANGE.value)}})},refreshConnector:function(){this.properties.optionsFeed().type()===i.CONNECTOR&&this.properties.optionsFeed().optionsResolver().loadAndSetConnector(this.viewModel.form())},getDataTemplate:function(){return"selectValueTypeTemplate"},toJS:function(){var e=this._super();return delete e.properties.defaultValue,delete e.properties.multiple,delete e.properties.computedOptions,delete e.properties.autoFocus,e.properties.optionsFeed=this.properties.optionsFeed().toJS(),e}})}),define("SelectControl",["require","LOVControl","jquery","underscore","TypeCatalog","ControlTypeId","knockout"],function(e){"use strict";var t=e("LOVControl"),n=e("jquery"),r=e("underscore"),i=e("TypeCatalog"),s=e("ControlTypeId"),o=e("knockout");return t.subClass({},{init:function(e,t,n,i,u){this._super(e,t,i.getControlDefinitionByType(s.SELECT),n,i,u),r.defaults(n,{placeHolder:"",help:"",hint:""}),this.properties.help=o.observable(n.help),this.properties.hint=o.observable(n.hint),this.properties.placeHolder=o.observable(n.placeHolder),this.properties.parsedStyle.subscribe(function(t){this._setStyle(e,i,t)},this),this.properties.autoFocus.subscribe(function(t){this._setAutoFocus(e,i,t)},this),this.properties.multiple.subscribe(this._checkType.bind(this,i));var a=this;this.afterRenderSelect=function(){setTimeout(function(){a._setStyle(e,i),a._setAutoFocus(e,i)},0)},this._checkType(i,this.properties.multiple())},_checkType:function(e,t){this.dataType=t?i.getArrayTypeDefinition(i.getSimpleTypesDefinitions().STRING):i.getSimpleTypesDefinitions().STRING;var n=this;setTimeout(function(){n._setStyle(n.id,e)},0)},_setStyle:function(e,t,r){var i=n(t.getScope()+" #"+t.config().domIdPrefix+e).ojSelect("widget"),s=this.properties.formattedStyle();i.attr("style",r||this.properties.parsedStyle()),i.find(".oj-select-choice, .oj-select-choices").css("background-color",s.backgroundColor||""),i.find(".oj-select-choice, .oj-select-selected-choice-label").css("color",s.color||"");var o=this;n("#"+e).ojSelect({beforeExpand:function(r){var i=o.properties.formattedStyle();n(t.getScope()+" #oj-listbox-results-"+e+", .oj-listbox-drop").css("background-color",i.backgroundColor||""),n(t.getScope()+" #oj-listbox-results-"+e+", .oj-listbox-drop").css("color",i.color||"")}})},_setAutoFocus:function(e,t,r){var i=r||this.properties.optionsFeed().properties().autoFocus(),s=n(t.getScope()+" #"+t.config().domIdPrefix+e).ojSelect("widget");i?s.attr("autofocus","autofocus"):s.removeAttr("autofocus"),n(t.getScope()+" [autofocus]").first().is(".oj-select")&&t.focusControl(s.find(".oj-select-choice"))},toJS:function(){var e=this._super();return e.properties.multiple=this.properties.multiple(),e}})}),define("ChecklistControl",["require","LOVControl","underscore","ControlTypeId","knockout"],function(e){"use strict";var t=e("LOVControl"),n=e("underscore"),r=e("ControlTypeId"),i=e("knockout");return t.subClass({},{init:function(e,t,s,o,u){n.defaults(s,{help:"",inline:!1,multiple:!0}),this._super(e,t,o.getControlDefinitionByType(r.CHECKLIST),s,o,u),this.properties.help=i.observable(s.help),this.properties.inline=i.observable(s.inline)}})}),define("CheckboxControl",["require","Control","underscore","ControlTypeId","koToJSUtil","knockout"],function(e){"use strict";var t=e("Control"),n=e("underscore"),r=e("ControlTypeId"),i=e("koToJSUtil"),s=e("knockout");return t.subClass({},{init:function(e,t,i,o,u){n.defaults(i,{help:"",hint:"",defaultValue:!1});var a=this;a._super(e,t,o.getControlDefinitionByType(r.CHECKBOX),i,o,u),a.properties.help=s.observable(i.help),a.properties.hint=s.observable(i.hint),a.properties.defaultValue=s.observableArray(a.getInitialValue(i.defaultValue)),a.properties.defaultValue.subscribe(function(e){a.defaultValue("true"===e[0])}),a.defaultValue=s.observable(i.defaultValue),a.checkboxValue=s.observableArray(a.getInitialValue(i.defaultValue)),a.checkboxValue.subscribe(function(e){a.setValue(e)})},getInitialValue:function(e){return e?["true"]:["false"]},getDataTemplate:function(){return"booleanValueTypeTemplate"},_propertiesToJS:function(){var e=i.toJS(this.properties);return e.defaultValue=this.defaultValue(),e}})}),define("RadioButtonControl",["require","LOVControl","ControlTypeId","underscore","knockout"],function(e){"use strict";var t=e("LOVControl"),n=e("ControlTypeId"),r=e("underscore"),i=e("knockout");return t.subClass({},{init:function(e,t,s,o,u){this._super(e,t,o.getControlDefinitionByType(n.RADIO_BUTTON),s,o,u),r.defaults(s,{help:"",inline:!1}),this.properties.help=i.observable(s.help),this.properties.inline=i.observable(s.inline);var a=this.properties.defaultValue;this.properties.defaultValue=i.pureComputed({read:function(){return a()[0]},owner:this})}})}),define("NumberControl",["require","InputTextControl","ControlTypeId","jquery","underscore","knockout"],function(e){"use strict";var t=e("InputTextControl"),n=e("ControlTypeId"),r=e("jquery"),i=e("underscore"),s=e("knockout");return t.subClass({},{init:function(e,t,r,o,u){var a=this;a._super(e,t,r,o,u,o.getControlDefinitionByType(n.NUMBER)),i.defaults(r,{step:1,maxValue:null,minValue:null}),a.properties.step=s.observable(r.step),a.properties.maxValue=s.observable(r.maxValue),a.properties.minValue=s.observable(r.minValue),a.properties.parsedStyle.subscribe(function(e){a._applyStyle(e)},a),a.afterRenderNumber=function(){a._applyStyle()},a.domId=o.getScope()+" #"+o.config().domIdPrefix+e},_applyStyle:function(e){var t=r(this.domId).ojInputNumber("widget"),n=e||this.properties.parsedStyle();t.attr("style",n)}})}),define("DateControl",["require","Control","underscore","ControlTypeId","jquery","knockout","ojs/ojcore"],function(e){"use strict";var t=e("Control"),n=e("underscore"),r=e("ControlTypeId"),i=e("jquery"),s=e("knockout"),o=e("ojs/ojcore");return t.subClass({},{init:function(e,t,i,u,a){var l=this;l._super(e,t,u.getControlDefinitionByType(r.DATE),i,u,a),n.defaults(i,{help:"",hint:"",readonly:!1,placeHolder:"",defaultValue:"",minValue:null,maxValue:null,format:["yy-MM-dd"]}),l.properties.help=s.observable(i.help),l.properties.hint=s.observable(i.hint),l.properties.placeHolder=s.observable(i.placeHolder),l.properties.minValue=s.observable(i.minValue),l.properties.maxValue=s.observable(i.maxValue),l.properties.readonly=s.observable(i.readonly),l.properties.defaultValue=s.observable(i.defaultValue),l.properties.format=s.observableArray(i.format),l.properties.dateConverter=s.observable(o.Validation.converterFactory(o.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({pattern:l.properties.format()[0]})),l.properties.format.subscribe(function(e){l.properties.dateConverter(o.Validation.converterFactory(o.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({pattern:e[0]}))},l),l.properties.parsedStyle.subscribe(function(t){l._applyStyle(e,t)},l),l.afterRenderDate=function(){l._applyStyle(e)},l.domId=u.getScope()+" #"+u.config().domIdPrefix+e},_applyStyle:function(e,t){var n=i("#"+e).ojInputDate("widget"),r=this.properties.formattedStyle(),s=t||this.properties.parsedStyle(),o=n.find(".oj-inputdatetime-input-trigger");n.attr("style",s),r.borderWidth&&o.css("border-width",r.borderWidth),r.borderStyle&&o.css("border-style",r.borderStyle),r.borderColor&&o.css("border-color",r.borderColor),r.borderRadius&&(o.css("border-top-right-radius",r.borderRadius),o.css("border-bottom-right-radius",r.borderRadius))},_propertiesToJS:function(){var e=this._super();return delete e.dateConverter,e}})}),define("TimeControl",["require","Control","jquery","underscore","ControlTypeId","knockout","ojs/ojcore"],function(e){"use strict";var t=e("Control"),n=e("jquery"),r=e("underscore"),i=e("ControlTypeId"),s=e("knockout"),o=e("ojs/ojcore");return t.subClass({},{init:function(e,t,n,u,a){var l=this;l._super(e,t,u.getControlDefinitionByType(i.TIME),n,u,a),r.defaults(n,{help:"",hint:"",readonly:!1,placeHolder:"",defaultValue:"",minValue:null,maxValue:null,step:["00:30:00:00"]}),l.properties.help=s.observable(n.help),l.properties.hint=s.observable(n.hint),l.properties.placeHolder=s.observable(n.placeHolder),l.properties.minValue=s.observable(n.minValue),l.properties.maxValue=s.observable(n.maxValue),l.properties.readonly=s.observable(n.readonly),l.properties.defaultValue=s.observable(n.defaultValue),l.properties.step=s.observable(n.step),l.properties.dateConverter=s.observable(o.Validation.converterFactory(o.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter()),l.properties.parsedStyle.subscribe(function(t){l._applyStyle(e,t)},l),l.afterRenderTime=function(){l._applyStyle(e)},this.domId=u.getScope()+" #"+u.config().domIdPrefix+e},_applyStyle:function(e,t){var r=n(this.domId).ojInputTime("widget"),i=this.properties.formattedStyle(),s=t||this.properties.parsedStyle(),o=r.find(".oj-inputdatetime-input-trigger");r.attr("style",s),i.borderWidth&&o.css("border-width",i.borderWidth),i.borderStyle&&o.css("border-style",i.borderStyle),i.borderColor&&o.css("border-color",i.borderColor),i.borderRadius&&(o.css("border-top-right-radius",i.borderRadius),o.css("border-bottom-right-radius",i.borderRadius))},_propertiesToJS:function(){var e=this._super();return delete e.dateConverter,e}})}),define("TargetType",["require","ojL10n!rendererMsg/nls/renderer"],function(e){"use strict";var t=e("ojL10n!rendererMsg/nls/renderer"),n={PARENT:{value:"_parent",label:t.TARGET_TYPE_PARENT},NEWTAB:{value:"_blank",label:t.TARGET_TYPE_NEWTAB},values:function(){return[n.NEWTAB,n.PARENT]}};return n}),define("LinkControl",["require","Control","underscore","knockout","EventsId","ControlTypeId","TargetType"],function(e){"use strict";var t=e("Control"),n=e("underscore"),r=e("knockout"),i=e("EventsId"),s=e("ControlTypeId"),o=e("TargetType");return t.subClass({},{init:function(e,t,i,u,a){this._super(e,t,u.getControlDefinitionByType(s.LINK),i,u,a),n.defaults(i,{target:[o.NEWTAB.value],isLabelBindable:"false",defaultLabel:t,labelVal:"",labelBinding:"",defaultValue:"",anchor:!1,defaultOption:[]}),this.properties.target=r.observable(i.target),this.properties.defaultValue=r.observable(i.defaultValue),this.properties.labelVal=r.observable(i.labelVal),this.properties.defaultLabel=r.observable(i.defaultLabel),this.properties.isLabelBindable=r.observable(i.isLabelBindable),this.properties.labelBinding=r.observable(i.labelBinding),this.properties.anchor=r.observable(i.anchor),this.properties.defaultOption=r.observableArray(i.defaultOption),this.computedOptions=r.pureComputed(function(){var e=this,t=this.properties.anchor(),r=[];if(t){var i=this.context.viewModel.form();if(i){var o=i.getAllControls(!0);n.each(o,function(t){var i=[s.TABLE,s.REPEATABLE_SECTION,s.SECTION,s.TAB_CONTAINER,s.TAB,s.PANEL],o=[s.TABLE,s.REPEATABLE_SECTION,s.TAB_CONTAINER];n.contains(i,t.type)||n.contains(o,t._parent.type)||t.id===e.id||r.push({label:t.name(),value:t.id})})}}return r}.bind(this))},setLabelVal:function(e){this.properties.labelVal(e)},resolvePreviewId:function(e){var t=this.context.viewModel.form().findControlAndParent(e),n="";if(t)switch(t.node.type){case s.SELECT:n="#oj-select-choice-"+t.node.domIdPrefix+t.node.id;break;default:n="#"+t.node.domIdPrefix+t.node.id}return n},executeEvent:function(e){return e===i.ON_CLICK.value&&this.readOnly()?Promise.all([]):this._super(e)},targetTypes:o.values()})}),define("DateTimeControl",["require","Control","underscore","ControlTypeId","jquery","knockout","ojs/ojcore"],function(e){"use strict";var t=e("Control"),n=e("underscore"),r=e("ControlTypeId"),i=e("jquery"),s=e("knockout"),o=e("ojs/ojcore");return t.subClass({},{init:function(e,t,i,u,a){var l=this;l._super(e,t,u.getControlDefinitionByType(r.DATE_TIME),i,u,a),n.defaults(i,{help:"",hint:"",readonly:!1,placeHolder:"",defaultValue:"",minValue:null,maxValue:null,format:["yy-MM-dd hh:mm:ss a"],step:["00:30:00:00"]}),l.properties.help=s.observable(i.help),l.properties.hint=s.observable(i.hint),l.properties.placeHolder=s.observable(i.placeHolder),l.properties.minValue=s.observable(i.minValue),l.properties.maxValue=s.observable(i.maxValue),l.properties.readonly=s.observable(i.readonly),l.properties.defaultValue=s.observable(i.defaultValue),l.properties.format=s.observableArray(i.format),l.properties.step=s.observable(i.step),l.properties.dateConverter=s.observable(o.Validation.converterFactory(o.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({pattern:l.properties.format()[0]})),l.properties.format.subscribe(function(e){l.properties.dateConverter(o.Validation.converterFactory(o.ConverterFactory.CONVERTER_TYPE_DATETIME).createConverter({pattern:e[0]}))},l),l.properties.parsedStyle.subscribe(function(t){l._applyStyle(e,t)},l),l.afterRenderTime=function(){l._applyStyle(e)},this.domId=u.getScope()+" #"+u.config().domIdPrefix+e},_applyStyle:function(e,t){var n=i(this.domId).ojInputDateTime("widget"),r=this.properties.formattedStyle(),s=t||this.properties.parsedStyle(),o=n.find(".oj-inputdatetime-input-trigger");n.attr("style",s),r.borderWidth&&o.css("border-width",r.borderWidth),r.borderStyle&&o.css("border-style",r.borderStyle),r.borderColor&&o.css("border-color",r.borderColor),r.borderRadius&&(o.css("border-top-right-radius",r.borderRadius),o.css("border-bottom-right-radius",r.borderRadius))},_propertiesToJS:function(){var e=this._super();return delete e.dateConverter,e}})}),define("EmailControl",["require","InputTextControl","ojL10n!rendererMsg/nls/renderer","ControlTypeId"],function(e){"use strict";var t=e("InputTextControl"),n=e("ojL10n!rendererMsg/nls/renderer"),r=e("ControlTypeId");return t.subClass({},{init:function(e,t,i,s,o){this._super(e,t,i,s,o,s.getControlDefinitionByType(r.EMAIL)),this.properties.pattern("^[_A-Za-z0-9-\\+]+(\\.[_A-Za-z0-9-]+)*@[A-Za-z0-9-]+(\\.[A-Za-z0-9]+)*(\\.[A-Za-z]{2,})$"),this.properties.patternMessage(n.MESSAGE_INVALID_EMAIL)}})}),define("UrlControl",["require","InputTextControl","ojL10n!rendererMsg/nls/renderer","ValidationHelper","ControlTypeId"],function(e){"use strict";var t=e("InputTextControl"),n=e("ojL10n!rendererMsg/nls/renderer"),r=e("ValidationHelper"),i=e("ControlTypeId");return t.subClass({},{init:function(e,t,s,o,u){this._super(e,t,s,o,u,o.getControlDefinitionByType(i.URL)),this.properties.pattern(r.urlPattern),this.properties.patternMessage(n.MESSAGE_INVALID_URL)}})}),define("HeadingType",["require","ojL10n!rendererMsg/nls/renderer"],function(e){"use strict";var t=e("ojL10n!rendererMsg/nls/renderer"),n={PARAGRAPH:{value:"MessageTypeParagraph",label:t.MESSAGE_TYPE_PARAGRAPH},H1:{value:"MessageTypeHeading1",label:t.MESSAGE_TYPE_HEADING1},H2:{value:"MessageTypeHeading2",label:t.MESSAGE_TYPE_HEADING2},H3:{value:"MessageTypeHeading3",label:t.MESSAGE_TYPE_HEADING3},H4:{value:"MessageTypeHeading4",label:t.MESSAGE_TYPE_HEADING4},H5:{value:"MessageTypeHeading5",label:t.MESSAGE_TYPE_HEADING5},H6:{value:"MessageTypeHeading6",label:t.MESSAGE_TYPE_HEADING6},values:function(){return[n.PARAGRAPH,n.H1,n.H2,n.H3,n.H4,n.H5,n.H6]}};return n}),define("MessageControl",["require","Control","ControlTypeId","HeadingType","knockout","underscore"],function(e){"use strict";var t=e("Control"),n=e("ControlTypeId"),r=e("HeadingType"),i=e("knockout"),s=e("underscore");return t.subClass({},{init:function(e,t,o,u,a){this._super(e,t,u.getControlDefinitionByType(n.MESSAGE),o,u,a),s.defaults(o,{type:[r.PARAGRAPH.value],defaultValue:t}),this.properties.type=i.observable(o.type),this.properties.defaultValue=i.observable(o.defaultValue)},headingTypes:r.values()})}),define("MoneyControl",["require","InputTextControl","underscore","jquery","knockout","ojL10n!rendererMsg/nls/renderer","ControlTypeId","ojL10n!ojtranslations/nls/localeElements"],function(e){"use strict";var t=e("InputTextControl"),n=e("underscore"),r=e("jquery"),i=e("knockout"),s=e("ojL10n!rendererMsg/nls/renderer"),o=e("ControlTypeId"),u=e("ojL10n!ojtranslations/nls/localeElements"),a=u.main[oj.Config.getLocale()].numbers.currencies;return n.each(a,function(e,t){e.key=t}),a=n.toArray(a),t.subClass({},{currencyOptions:a,init:function(e,t,r,u,a){var l=this;l._super(e,t,r,u,a,u.getControlDefinitionByType(o.MONEY)),n.defaults(r,{currency:[s.DEFAULT_CURRENCY],step:1,defaultValue:null,maxValue:null,minValue:null}),l.properties.currency=i.observable(r.currency),l.properties.step=i.observable(r.step),l.properties.defaultValue=i.observable(r.defaultValue),l.properties.maxValue=i.observable(r.maxValue),l.properties.minValue=i.observable(r.minValue),l.properties.parsedStyle.subscribe(function(t){l._applyStyle(e,t)},l),l.afterRenderMoney=function(){l._applyStyle(e)},l.domId=u.getScope()+" #"+u.config().domIdPrefix+e,l.properties.converterOptions=i.pureComputed(function(){return{type:"number",options:{style:"currency",currency:l.properties.currency()[0],currencyDisplay:"symbol",pattern:s.CURRENCY_PATTERN}}})},_applyStyle:function(e,t){var n=r("#"+e).ojInputNumber("widget"),i=t||this.properties.parsedStyle();n.attr("style",i)},_propertiesToJS:function(){var e=this._super();return delete e.converterOptions,e}})}),define("PhoneControl",["require","InputTextControl","underscore","knockout","ojL10n!rendererMsg/nls/renderer","ControlTypeId"],function(e){"use strict";var t=e("InputTextControl"),n=e("underscore"),r=e("knockout"),i=e("ojL10n!rendererMsg/nls/renderer"),s=e("ControlTypeId");return t.subClass({},{init:function(e,t,o,u,a){this._super(e,t,o,u,a,u.getControlDefinitionByType(s.PHONE)),n.defaults(o,{format:[i.DEFAULT_PHONE_FORMAT],defaultValue:""}),this.properties.format=r.observable(o.format),this.properties.defaultValue=r.observable(o.defaultValue),this._updateProperties(this.properties.format),this.properties.format.subscribe(function(e){this._updateProperties(e)},this)},_updateProperties:function(e){var t="^((((([0-9]{3})-)|((([0-9]{3}))s))([0-9]{3})-([0-9]{4}))|(([0-9]{3})-([0-9]{4})))$";switch(r.utils.unwrapObservable(e)[0]){case i.PHONE_FORMAT_INTERNATIONAL:this.properties.pattern("^((\\+)?[1-9]{1,2})?([-\\s.])?((\\(\\d{1,4}\\))|\\d{1,4})(([-\\s.])?[0-9]{1,12}){1,2}$"),this.properties.patternMessage(i.FORMAT_ERROR_MESSAGE_INTERNATIONAL),this.properties.placeHolder("");break;case i.PHONE_FORMAT_US:default:this.properties.pattern(t),this.properties.patternMessage(i.FORMAT_ERROR_MESSAGE_US),this.properties.placeHolder("xxx-xxx-xxxx")}}})}),define("ImageControl",["require","Control","underscore","knockout","ojL10n!rendererMsg/nls/renderer","ControlTypeId"],function(e){"use strict";var t=e("Control"),n=e("underscore"),r=e("knockout"),i=e("ojL10n!rendererMsg/nls/renderer"),s=e("ControlTypeId");return t.subClass({},{init:function(e,t,o,u,a){this._super(e,t,u.getControlDefinitionByType(s.IMAGE),o,u,a),n.defaults(o,{defaultValue:"",alt:i.TEXT_NO_IMAGE}),this.properties.defaultValue=r.observable(o.defaultValue),this.properties.alt=r.observable(o.alt)}})}),define("VideoControl",["require","Control","underscore","knockout","ControlTypeId"],function(e){"use strict";var t=e("Control"),n=e("underscore"),r=e("knockout"),i=e("ControlTypeId");return t.subClass({},{init:function(e,t,s,o,u){this._super(e,t,o.getControlDefinitionByType(i.VIDEO),s,o,u),n.defaults(s,{showControls:!0,loop:!1,autoPlay:!1,defaultValue:"",allowFullScreen:!0}),this.properties.showControls=r.observable(s.showControls),this.properties.loop=r.observable(s.loop),this.properties.autoPlay=r.observable(s.autoPlay),this.properties.defaultValue=r.observable(s.defaultValue),this.properties.allowFullScreen=r.observable(s.allowFullScreen)}})}),define("ScopeType",["require","ojL10n!rendererMsg/nls/renderer"],function(e){"use strict";var t=e("ojL10n!rendererMsg/nls/renderer"),n={ALL:{label:t.SCOPE_ALL,value:"all"},USER:{label:t.SCOPE_USER,value:"user"},GROUP:{label:t.SCOPE_GROUP,value:"group"},ROLE:{label:t.SCOPE_ROLE,value:"role"},values:function(){return[n.ALL,n.USER,n.GROUP,n.ROLE]}};return n}),define("IdentityControl",["require","LOVControl","jquery","underscore","ControlTypeId","TypeDescription","ScopeType","OptionsType","knockout"],function(e){"use strict";var t=e("LOVControl"),n=e("jquery"),r=e("underscore"),i=e("ControlTypeId"),s=e("TypeDescription"),o=e("ScopeType"),u=e("OptionsType"),a=e("knockout");return t.subClass({},{init:function(e,t,l,p,v){r.defaults(l,{optionsFeed:{type:u.REST.value},help:"",hint:"",allowSelectAll:!0,defaultScope:[o.USER.value],showScopeFilter:!1}),this._super(e,t,p.getControlDefinitionByType(i.IDENTITY_BROWSER),l,p,v);var m=this,y=this.properties.optionsFeed().optionsResolver();n.extend(!0,this.properties,{help:a.observable(l.help),hint:a.observable(l.hint),placeholder:a.observable(l.placeholder),multiple:a.observable(l.multiple),allowSelectAll:a.observable(l.allowSelectAll),defaultScope:a.observableArray(l.defaultScope),options:y.callRest.bind(y,{name:"identities",optionsListBinding:"items"}),showScopeFilter:a.observable(l.showScopeFilter)}),this.properties.parsedStyle.subscribe(function(t){this._setStyle(e,p,t)},this),this.properties.autoFocus.subscribe(function(t){this._setAutoFocus(e,p,t)},this),this.properties.multiple.subscribe(this._componentType.bind(this,p)),this.properties.showScopeFilter.subscribe(function(e){m.setOptions({showScopeFilter:e})}),this.properties.defaultScope.subscribe(function(e){m.setOptions({defaultScope:e})}),this.afterRenderIdentity=function(){setTimeout(function(){m._setStyle(e,p),m._setAutoFocus(e,p)},0)},this._identityId=p.getScope()+" #"+p.config().domIdPrefix+e,this._componentType(p,this.properties.multiple());var b=["id","title","firstName","lastName","type","email","mobile"];this.dataType.isCompatible=function(e){var t=e.isArray()&&e.hasOwnProperty("attributes");if(t)for(var n=e.attributes().length,r=0;r<n;r++)if(e.attributes()[r]&&e.attributes()[r].hasOwnProperty("name")&&-1===b.indexOf(e.attributes()[r].name())){t=!1;break}return t&&!s.equals(e.getTypeDescription(),s.UNKNOWN)},this.ojIdentityObj={component:"ojIdentity",disabled:this.readOnly()?this.readOnly:this.properties.disabled,title:this.properties.hint,help:{definition:this.properties.help()},placeholder:this.properties.placeholder,required:this.properties.required,value:null,options:this.properties.options,multiple:this.properties.multiple,selectAll:this.properties.allowSelectAll,defaultScope:this.properties.defaultScope()[0],showScopeFilter:this.properties.showScopeFilter,scopesOptions:o.values(),selectLabel:this.msg.IDENTITY_SELECT_ALL,noMatchesFound:this.msg.IDENTITY_NO_MATCHES_FOUND,invalidComponentTracker:this.tracker,validators:this.validators}},getDataTemplate:function(){return"identityValueTypeTemplate"},scopeValues:o.values(),setOptions:function(e){n(this._identityId).ojIdentity("option",e),this._refresh()},_refresh:function(){setTimeout(function(){n(this._identityId).ojIdentity("refresh")}.bind(this),0)},_componentType:function(e,t){this.setOptions({multiple:t});var n=this;setTimeout(function(){n._setStyle(n.id,e)},0)},getIdentityValue:function(){for(var e=this.getControlValue(),t=[],n=0;n<e.length;n++)t.push(e[n].id);return t.join()},_setStyle:function(e,t,r){var i=n(this._identityId).ojIdentity("widget"),s=this.properties.formattedStyle();i.attr("style",r||this.properties.parsedStyle()),i.find(".oj-select-choice, .oj-select-choices").css("background-color",s.backgroundColor||""),i.find(".oj-select-choice, .oj-select-selected-choice-label").css("color",s.color||"")},_setAutoFocus:function(e,t,r){var i=r||this.properties.optionsFeed().properties().autoFocus(),s=n(this._identityId).ojIdentity("widget");i?s.attr("autofocus","autofocus"):s.removeAttr("autofocus"),n(t.getScope()+" [autofocus]").first().is(".oj-identity")&&s.find(".oj-select-choice").focus()},toJS:function(){var e=this._super();return e.properties.multiple=this.properties.multiple(),e}})}),define("ColumnSpan",["require","Class","jquery","RendererId","ColumnSpanType"],function(e){"use strict";var t=e("Class"),n=e("jquery"),r=e("RendererId"),i=e("ColumnSpanType");return t.subClass({},{init:function(e,t){this.controls=e,this.context=t},getStyle:function(e,t){var n="";return e.properties.hide()&&this.context.getScope()===r.FORM_RENDERER?n:(n="ALL"===t?this._getAllStyles(e,!1):this._getStyle(e,t,!0),n.trim())},_getAllStyles:function(e,t){var n="";for(var r in i)i.hasOwnProperty(r)&&(n+=this._getStyle(e,r,t));return n},_getStyle:function(e,t,n){var r=0,s=i[t];return r=e.properties.autoColSpan()?this._calculateColSpan(this.controls(),s):e.properties[s.propertyName](),s.getStyleClass(r,n)},_calculateColSpan:function(e,t){var s=0;if(t!==i.SMALL){var o=e;this.context.getScope()===r.FORM_RENDERER&&(o=this._getVisibleControls(e));var u=0,a=0;n.each(o,function(){this.properties.autoColSpan()?a++:u+=this.properties[t.propertyName]()}),s=Math.floor((12-u)/a),s<=0&&(s=1)}else s=12;return s},_getVisibleControls:function(e){var t=[];return n.each(e,function(){this.properties.hide()||t.push(this)}),t}})}),define("ControlContainer",["require","Class","knockout","underscore","ColumnSpan","TreeUtil","jquery"],function(e){"use strict";var t=e("Class"),n=e("knockout"),r=e("underscore"),i=e("ColumnSpan"),s=e("TreeUtil"),o=e("jquery");return t.subClass({},{init:function(e,t,o,u){var a=this;this.viewModel=t.viewModel,r.defaults(e,{controls:[]}),a.controls=n.observableArray(a._generateControls(u,e.controls,t,o)),a.columnSpan=new i(a.controls,t),a.getAllControls=function(e){return s.treeToList([this],e?"getControls":"controls")},a.getControls=function(){return n.unwrap(a.controls)},u.isValid=n.pureComputed({read:function(){var e=u.dataSource?u.dataSource():u.getControls();return r.every(e,function(e){return e.isValid()})},write:function(e){}})},hasValueProperty:function(){return!1},getParent:function(){return this._parent},getBindingContext:function(){return this.getParent()?this.getParent().getContextForChildren(this):""},getContextForChildren:function(e){return this.getBindingContext()},_generateControls:function(e,t,n,r){var i=[];return o.each(t,function(t,s){var o=r.createControl(s.id,s.name,s.type,s,n,e);i.push(o)}),i},findControl:function(e){var t=s.find(this,"controls","id",e);return t=null==t?s.find(this,"controls","properties.originalId",e):t,null!==t?t.node:null}})}),define("Row",["require","knockout","ControlTypeId","jquery","ControlContainer","underscore","UUID"],function(e){"use strict";var t=e("knockout"),n=e("ControlTypeId"),r=e("jquery"),i=e("ControlContainer"),s=e("underscore"),o=e("UUID");return i.subClass({},{init:function(e,i,s,u,a){var f=this;f.id=e||o.createUuid(),f._parent=a,f._super(i,s,u,this),f.context=s,f.type=n.ROW,f.hide=t.pureComputed(function(){var e=!0;return r.each(f.controls(),function(){return e=this.properties.hide()}),e})},makeCopy:function(){var e=this.toJS();e.id=o.createUuid();var t=[];return s.each(this.controls(),function(e){t.push(e.makeCopy())}),e.controls=t,e},toJS:function(){var e=[];return r.each(this.controls(),function(t,n){e.push(n.toJS())}),{id:this.id,type:this.type,controls:e}},isRepeatable:function(){return!1},findClosest:function(e){return this.getParent().findClosest(e)},onDrop:function(e,t){e.moveRow(this,t)}})}),define("LayoutType",["require","ojL10n!rendererMsg/nls/renderer"],function(e){"use strict";var t=e("ojL10n!rendererMsg/nls/renderer");return{VERTICAL:{value:"VERTICAL",label:t.LAYOUT_VERTICAL},HORIZONTAL:{value:"HORIZONTAL",label:t.LAYOUT_HORIZONTAL}}}),define("PanelControl",["require","ControlTypeId","knockout","jquery","underscore","koToJSUtil","LayoutType","ControlContainer","Control"],function(e){"use strict";var t=e("ControlTypeId"),n=e("knockout"),r=e("jquery"),i=e("underscore"),s=e("koToJSUtil"),o=e("LayoutType"),u=e("ControlContainer");return e("Control").subClass({},{init:function(e,r,s,a,f,l){var p=this;i.defaults(s.properties,{layout:[o.VERTICAL.value],label:""}),p._super(e,r,a.getControlDefinitionByType(t.PANEL),s.properties,a,l),p.container=new u(s,a,f,this),p.controls=p.container.controls,p.getAllControls=p.container.getAllControls.bind(p.container),p.getControls=p.container.getControls.bind(p.container),p.findControl=p.container.findControl.bind(p.container),p.properties.layout=n.observableArray(s.properties.layout),p.isVertical=n.pureComputed(function(){return p.properties.layout()[0]===o.VERTICAL.value})},hasValueProperty:function(){return!1},toJS:function(){var e=[];r.each(this.events(),function(t,n){e.push(n.toJS())});var t=[];return r.each(this.controls(),function(e,n){t.push(n.toJS())}),{id:this.id,name:this.name(),type:this.type,properties:i.extend({},s.toJS(this.properties),{events:e}),controls:t}},layoutOptions:function(){return[o.VERTICAL,o.HORIZONTAL]},colStyle:function(e,t){return this.properties.layout()[0]===o.VERTICAL.value?"oj-row":"oj-col "+this.container.columnSpan.getStyle(e,t)}})}),define("SectionControl",["require","ControlTypeId","knockout","jquery","HeadingType","koToJSUtil","underscore","ControlContainer","Control","ojs/ojcollapsible"],function(e){"use strict";var t=e("ControlTypeId"),n=e("knockout"),r=e("jquery"),i=e("HeadingType"),s=e("koToJSUtil"),o=e("underscore"),u=e("ControlContainer"),a=e("Control");return e("ojs/ojcollapsible"),a.subClass({},{init:function(e,r,s,a,f,l){s.properties=s.properties||{};var p=this;o.defaults(s.properties,{label:r,expanded:!0,headerType:[i.PARAGRAPH.value],lazyLoading:!1}),p._super(e,r,a.getControlDefinitionByType(t.SECTION),s.properties,a,l),p.container=new u(s,a,f,this),p.controls=p.container.controls,p.getAllControls=p.container.getAllControls.bind(p.container),p.getControls=p.container.getControls.bind(p.container),p.findControl=p.container.findControl.bind(p.container),this.properties.expanded=n.observable(s.properties.expanded),this.properties.headerType=n.observableArray(s.properties.headerType),this.properties.lazyLoading=n.observable(s.properties.lazyLoading),this.domId=a.getScope()+" #"+a.config().domIdPrefix+e,p.properties.label.subscribe(function(){setTimeout(function(){p._refresh()},0)}),p.properties.headerType.subscribe(function(){setTimeout(function(){p._refresh()},0)})},hasValueProperty:function(){return!1},_refresh:function(){r("#section-"+this.id).ojCollapsible("refresh")},toJS:function(){var e=[];r.each(this.events(),function(t,n){e.push(n.toJS())});var t=[];return r.each(this.controls(),function(e,n){t.push(n.toJS())}),{id:this.id,name:this.name(),type:this.type,properties:o.extend({},s.toJS(this.properties),{events:e}),controls:t}},headingTypes:i.values()})}),define("TabControl",["require","ControlTypeId","underscore","jquery","ControlContainer","knockout","Control"],function(e){"use strict";var t=e("ControlTypeId"),n=e("underscore"),r=e("jquery"),i=e("ControlContainer"),s=e("knockout");return e("Control").subClass({},{init:function(e,r,o,u,a,l){var h=this;h._super(e,r,u.getControlDefinitionByType(t.TAB),o.properties,u,l),h.container=new i(o,u,a,this),h.controls=h.container.controls,h.getAllControls=h.container.getAllControls.bind(h.container),h.getControls=h.container.getControls.bind(h.container),h.findControl=h.container.findControl.bind(h.container),n.defaults(o.properties,{lazyLoading:!1}),h.properties.lazyLoading=s.observable(o.properties.lazyLoading)},hasValueProperty:function(){return!1},toJS:function(){var e=[];return r.each(this.controls(),function(t,n){e.push(n.toJS())}),n.extend(this._super(),{controls:e})}})}),define("TabContainerControl",["require","ControlTypeId","knockout","jquery","underscore","ControlContainer","Control","ojs/ojtabs","ojs/ojcollapsible","ojs/ojaccordion"],function(e){"use strict";var t=e("ControlTypeId"),n=e("knockout"),r=e("jquery"),i=e("underscore"),s=e("ControlContainer"),o=e("Control");return e("ojs/ojtabs"),e("ojs/ojcollapsible"),e("ojs/ojaccordion"),o.subClass({},{init:function(e,o,u,a,l,h){var p=this;p._super(e,o,a.getControlDefinitionByType(t.TAB_CONTAINER),u.properties,a,h),p.container=new s(u,a,l,this),p.controls=p.container.controls,p.getAllControls=p.container.getAllControls.bind(p.container),p.getControls=p.container.getControls.bind(p.container),p.findControl=p.container.findControl.bind(p.container),i.defaults(u.properties,{selectedPosition:0}),p.properties.selectedPosition=n.observable(u.properties.selectedPosition),p.properties.selectedPositionStringComputed=n.pureComputed({read:function(){return[String(p.properties.selectedPosition())]},write:function(e){p.properties.selectedPosition(Number(e[0]))}}),p.properties.selectedPositionAsArrayComputed=n.pureComputed({read:function(){return[p.properties.selectedPosition()]},write:function(e){p.properties.selectedPosition(e[0])}}),p.disabledTabs=n.pureComputed(function(){var e=[];return r.each(p.controls(),function(t,n){n.properties.disabled()&&!n.properties.hide()&&e.push(t)}),e})},hasValueProperty:function(){return!1},hasStyle:function(){return!0},toJS:function(){var e=[];return r.each(this.controls(),function(t,n){e.push(n.toJS())}),i.extend(this._super(),{controls:e})}})}),define("RepeatableRowControl",["require","Class","underscore","ControlContainer","ControlTypeId"],function(e){"use strict";var t=e("Class"),n=e("underscore"),r=e("ControlContainer"),i=e("ControlTypeId");return t.subClass({},{type:null,properties:{},init:function(e,t,s,o,u,a,f){var l=this;this.viewModel=s.viewModel,this.context=s,l._bindingValue=a||{},l.id=e,l.rowBindingId=f,l._parent=u,this.getParent().type===i.TABLE?this.type=i.TABLE_ROW:this.type=i.REPEATABLE_SECTION_ROW;var h={controls:[]};a&&n.each(t(),function(e){h.controls.push(e.makeCopy())}),l.container=new r(h,s,o,this),a||(l.container.controls=t),l.controls=l.container.controls,l.getAllControls=l.container.getAllControls.bind(l.container),l.getControls=l.container.getControls.bind(l.container),l.findControl=l.container.findControl.bind(l.container),l.executeEventOnAll=l.executeEvent.bind(l)},executeEvent:function(e){var t=[];return n.each(this.getParent().events(),function(n){var r=n.event().trigger;e===r()&&t.push(n.execute(this))},this),this.context.viewModel.computedExtension.reEvaluateOnControl(e,this),Promise.all(t)},getParent:function(){return this._parent},getBindingContext:function(){return this.getParent()?this.getParent().getContextForChildren(this):""},getContextForChildren:function(e){return this.getBindingContext()},findClosest:function(e){var t=this.findControl(e);return t||this.getParent().findClosest(e)},findControlInsideRepeatable:function(e){var t=this.findControl(e);return t||n.any(this.getAllControls(!0),function(n){if(n.isRepeatable())return!!(t=n.findControlInsideRepeatable(e))}),t},isRepeatable:function(){return!1}})}),define("InheritableProperty",["require","knockout","underscore"],function(e){"use strict";var t=e("knockout"),n=e("underscore");return{createInheritableProperty:function(e,r,i){return t.computed({read:function(){return r()},write:function(t){r(t),n.each(e.getAllControls(!0),function(e){e.properties[i]&&e.properties[i](t)}),n.each(e.getRows(),function(e){n.each(e.getAllControls(!0),function(e){e.properties[i]&&e.properties[i](t)})})}})}}}),define("RepeatableControl",["require","underscore","knockout","jquery","ControlContainer","RepeatableRowControl","EventsId","UUID","OptionsFeed","OptionsType","InheritableProperty","Control"],function(e){"use strict";var t=e("underscore"),n=e("knockout"),r=e("jquery"),i=e("ControlContainer"),s=e("RepeatableRowControl"),o=e("EventsId"),u=e("UUID"),a=e("OptionsFeed"),f=e("OptionsType"),l=e("InheritableProperty");return e("Control").subClass({},{init:function(e,p,v,m,y,w,E){var S=this;S.data=v,S.context=m,S.controlFactory=y,S._super(e,p,m.getControlDefinitionByType(w),v.properties,m,E),S.container=new i(v,m,y,this),S.controls=S.container.controls,S.getAllControls=S.container.getAllControls.bind(S.container),S.findControl=S.container.findControl.bind(S.container),S.getAllBindableControls=n.computed(function(){return S._getAllBindableControls()}),S.getControls=function(){return[]},t.defaults(v.properties,{canAddDelete:!1,multipleSelection:!1,fromConnector:!1,maxRows:200,optionsFeed:{type:f.STATIC.value,properties:{}}}),this.properties.canAddDelete=n.observable(v.properties.canAddDelete),this.properties.multipleSelection=n.observable(v.properties.multipleSelection),this.properties.maxRows=n.observable(v.properties.maxRows),this.properties.fromConnector=n.observable(),this.properties.optionsFeed=n.observable(),this.properties.fromConnector.subscribe(function(e){e?S.properties.optionsFeed(new a(f.LIST_CONNECTOR.value,m,v.properties.optionsFeed.properties,S.id)):S.properties.optionsFeed(new a(f.STATIC.value,m,{}))}),this.properties.fromConnector(v.properties.fromConnector),m.LoVMappingAutoComplete.createAutoCompletes(this,m),S.createRow=function(e,t){var n=new s(u.createUuid(),S.controls,S.context,S.controlFactory,S,e,t);return S.context.addControlDecorators(n),S._initRow(n,e||{}),e&&m.viewModel.form()&&m.viewModel.form().loadEventsExecuted()&&setTimeout(function(){r.each(n.getAllControls(!0),function(e,t){t.executeEvent(o.ON_LOAD.value)})}),n},S.canAddRows=n.pureComputed(function(){return S.dataSource().length<S.properties.maxRows()}),S.selectedRows=n.observableArray([]),S.properties._disabled=n.observable(S.properties.disabled()),S.properties.disabled=l.createInheritableProperty(S,S.properties._disabled,"disabled"),S.properties._readonly=n.observable(v.properties.readonly),S.properties.readonly=l.createInheritableProperty(S,S.properties._readonly,"readonly"),S.selectedRows.subscribe(function(){S.eventsQueue.execute(S,o.ON_SELECTION_CHANGE)})},hasValueProperty:function(){return!1},refreshConnector:function(){this.properties.fromConnector()&&this.properties.optionsFeed().optionsResolver().loadAndSetConnector(this.viewModel.form())},findControlInsideRepeatable:function(e){var n=null;return t.any(this.getRows(),function(t){return!!(n=t.findControlInsideRepeatable(e))}),n},isRepeatable:function(){return!0},_getAllBindableControls:function(){return t.filter(this.getAllControls(!0),function(e){return!!e.properties.binding()})},executeEventOnAll:function(e){var n=[this.executeEvent(e)];return t.each(this.getRows(),function(r){t.each(r.getAllControls(!0),function(t){n=n.concat(t.executeEventOnAll(e))})}),Promise.all(n)},_initRow:function(){},toJS:function(){var e=[];t.each(this.controls(),function(t){e.push(t.toJS())});var n=t.extend(this._super(),{controls:e,readonly:this.properties.readonly()});return n.properties.optionsFeed=this.properties.optionsFeed().toJS(),n}})}),define("RepeatableSectionControl",["require","ControlTypeId","knockout","underscore","RepeatableControl"],function(e){"use strict";var t=e("ControlTypeId"),n=e("knockout"),r=e("underscore");return e("RepeatableControl").subClass({},{init:function(e,i,s,o,u,a){this._triggerBindableReeval=n.observable(!1),this._super(e,i,s,o,u,t.REPEATABLE_SECTION,a),r.defaults(s.properties,{labelBinding:"",labelMapping:""}),this.properties.labelBinding=n.observable(s.properties.labelBinding),this.properties.labelMapping=n.observable(s.properties.labelMapping),this._triggerBindableReeval(!this._triggerBindableReeval()),o.LoVMappingAutoComplete.initialize(this,o)},_getAllBindableControls:function(){this._triggerBindableReeval();var e=this._super();return[{id:this.id,name:this.msg.LABEL_LABEL,properties:{connectorMapping:this.properties.labelMapping,binding:this.properties.labelBinding}}].concat(e)},colStyle:function(){return"oj-row"},_initRow:function(e,t){this._super(e,t),e.properties.label=n.observable(n.unwrap(t[this.properties.labelBinding()]))}})}),define("TableControl",["require","ControlTypeId","RepeatableControl","knockout","ojL10n!rendererMsg/nls/renderer","underscore"],function(e){"use strict";var t=e("ControlTypeId"),n=e("RepeatableControl"),r=e("knockout"),i=e("ojL10n!rendererMsg/nls/renderer"),s=e("underscore");return n.subClass({},{init:function(e,n,o,u,a,l){var c=this;c._super(e,n,o,u,a,t.TABLE,l),s.defaults(o.properties,{hideLabels:!0}),this.properties.hideLabels=r.observable(o.properties.hideLabels),u.LoVMappingAutoComplete.initialize(this,u),s.each(c.styles(),function(e){e.type.label===i.LABEL_TABLE_WIDTH&&(e.controlValue=r.computed(function(){var t=[];s.each(c.controls(),function(e){t.push(e.properties.formattedStyle().tableColumnWidth)});var n=s.without(t,void 0);return 0===n.length?(e.rawValue(n.toString()),n.toString()):(e.rawValue(t.toString()),t.toString())},this),e.newRawValue=r.computed(function(){var t=e.rawValue();if(""===t)s.each(c.controls(),function(e){s.each(e.styles(),function(e){e.type.label===i.LABEL_WIDTH&&e.rawValue("")})});else for(var n=c.controls(),r=t.split(","),o=n.length,u=0;u<o;u++)n[u].styles()[0].rawValue(r[u]);return t},this))})}})}),define("TableColumnControl",["require","ControlTypeId","underscore","ControlContainer","Control"],function(e){"use strict";var t=e("ControlTypeId"),n=e("underscore"),r=e("ControlContainer");return e("Control").subClass({},{init:function(e,n,i,s,o,u){var a=this;a._super(e,n,s.getControlDefinitionByType(t.TABLE_COLUMN),i.properties,s,u),a.container=new r(i,s,o,this),a.controls=a.container.controls,a.getAllControls=a.container.getAllControls.bind(a.container),a.getControls=a.container.getControls.bind(a.container),a.findControl=a.container.findControl.bind(a.container)},hasValueProperty:function(){return!1},toJS:function(){var e=[];return n.each(this.controls(),function(t){e.push(t.toJS())}),n.extend(this._super(),{controls:e})}})}),define("FormReferenceControl",["require","Control","underscore","knockout","jquery","OjSelectItem","TypeCatalog"],function(e){"use strict";var t=e("Control"),n=e("underscore"),r=e("knockout"),i=e("jquery"),s=e("OjSelectItem"),o=e("TypeCatalog");return t.subClass({},{init:function(e,t,u,a,l){var h=a.getFormReferenceControlDefinition(u.properties.reference,a.config().formHandler);this._super(e,t,h,u.properties,a,l);var p=this;p.form=a.config().formHandler.getResolvedControl(u.properties.reference.formId),p.dataType=o.parseRootType("definition",p.form.definition),n.extend(p.properties,{reference:r.observable(h.reference),presentation:r.observableArray([]),defaultValue:{}}),p.presentations=r.observableArray([]),p.computedPresentations=r.computed(function(){var e=[];return n.each(p.presentations(),function(t){e.push(s.create(t.id,t.name))}),e}),p.isValidReference=function(){return!i.isEmptyObject(p.form)},p.getConfig=function(){var e={};return n.extend(e,a.config(),{domIdPrefix:a.config().domIdPrefix+p.id+"-"}),e.convertJSON=!1,e},u.properties.reference.presentationId&&p._initPresentations(u.properties.reference.presentationId),p.selectedPresentation=function(){n.isEmpty(p.properties.presentation())&&p.isValidReference()&&p._initPresentations();var e=p.findPresentation(p.properties.presentation()[0]);return this._buildForm(this.form,e)},p.properties.presentation.subscribe(function(e){var t=e[0];p.properties.reference().presentationId(t),p.loadPresentation(t)}),p.onValidStateChange=function(e){p.isValid(e)},p.controlsLoaded=r.observable(!1),p.loadedCallback=function(){p.controlsLoaded(!0)},p.translationsHandler=a.config().translationsHandler},hasValueProperty:function(){return!1},loadPresentation:function(e){var t=i.extend(!0,{},this.findPresentation(e)),r=i("#"+this.id);n.extend(this.translationsHandler._bundles.defaultBundle,this.form.defaultBundle);var s=this._buildForm(this.form,t);1===n.size(r)&&r.trigger("load",{form:s,config:this.getConfig()})},findPresentation:function(e){return n.find(this.presentations(),function(t){return t.id===e},this)},_initPresentations:function(e){this.presentations(this.form.presentations),this.properties.presentation.push(e||this.form.defaultPresentation)},_propertiesToJS:function(){var e=this._super();return delete e.presentation,e.reference=this.properties.reference().get(),e},getBindings:function(){return i("#"+this.domIdPrefix+this.id).triggerHandler("getBindings")}})}),define("ControlFactory",["require","Class","ButtonControl","InputTextControl","TextAreaControl","SelectControl","ChecklistControl","CheckboxControl","RadioButtonControl","NumberControl","DateControl","TimeControl","LinkControl","DateTimeControl","EmailControl","UrlControl","MessageControl","MoneyControl","PhoneControl","ImageControl","VideoControl","ControlTypeId","IdentityControl","Row","PanelControl","SectionControl","TabControl","TabContainerControl","RepeatableSectionControl","TableControl","FormsLogger","TableColumnControl","FormReferenceControl"],function(e){"use strict";var t=e("Class"),n=e("ButtonControl"),r=e("InputTextControl"),i=e("TextAreaControl"),s=e("SelectControl"),o=e("ChecklistControl"),u=e("CheckboxControl"),a=e("RadioButtonControl"),f=e("NumberControl"),l=e("DateControl"),c=e("TimeControl"),h=e("LinkControl"),p=e("DateTimeControl"),d=e("EmailControl"),v=e("UrlControl"),m=e("MessageControl"),g=e("MoneyControl"),y=e("PhoneControl"),b=e("ImageControl"),w=e("VideoControl"),E=e("ControlTypeId"),S=e("IdentityControl"),x=e("Row"),T=e("PanelControl"),N=e("SectionControl"),C=e("TabControl"),k=e("TabContainerControl"),L=e("RepeatableSectionControl"),A=e("TableControl"),O=e("FormsLogger"),M=e("TableColumnControl"),_=e("FormReferenceControl"),D="CREATE_",P=t.subClass({createControl:function(e,t,n,r,i,s){var o=P[D+n];if(o){var u=o(e,t,r,i,s);return i.addControlDecorators(u),P._log(n,u),u}throw new Error("Unsupported operation exception")},CREATE_INPUT_TEXT:function(e,t,n,i,s){return new r(e,t,n.properties||{},i,s)},CREATE_TEXT_AREA:function(e,t,n,r,s){return new i(e,t,n.properties||{},r,s)},CREATE_BUTTON:function(e,t,r,i,s){return new n(e,t,r.properties||{},i,s)},CREATE_SELECT:function(e,t,n,r,i){return new s(e,t,n.properties||{},r,i)},CREATE_CHECKLIST:function(e,t,n,r,i){return new o(e,t,n.properties||{},r,i)},CREATE_CHECKBOX:function(e,t,n,r,i){return new u(e,t,n.properties||{},r,i)},CREATE_RADIO_BUTTON:function(e,t,n,r,i){return new a(e,t,n.properties||{},r,i)},CREATE_NUMBER:function(e,t,n,r,i){return new f(e,t,n.properties||{},r,i)},CREATE_DATE:function(e,t,n,r,i){return new l(e,t,n.properties||{},r,i)},CREATE_TIME:function(e,t,n,r,i){return new c(e,t,n.properties||{},r,i)},CREATE_DATE_TIME:function(e,t,n,r,i){return new p(e,t,n.properties||{},r,i)},CREATE_EMAIL:function(e,t,n,r,i){return new d(e,t,n.properties||{},r,i)},CREATE_URL:function(e,t,n,r,i){return new v(e,t,n.properties||{},r,i)},CREATE_MESSAGE:function(e,t,n,r,i){return new m(e,t,n.properties||{},r,i)},CREATE_LINK:function(e,t,n,r,i){return new h(e,t,n.properties||{},r,i)},CREATE_MONEY:function(e,t,n,r,i){return new g(e,t,n.properties||{},r,i)},CREATE_PHONE:function(e,t,n,r,i){return new y(e,t,n.properties||{},r,i)},CREATE_IMAGE:function(e,t,n,r,i){return new b(e,t,n.properties||{},r,i)},CREATE_VIDEO:function(e,t,n,r,i){return new w(e,t,n.properties||{},r,i)},CREATE_IDENTITY_BROWSER:function(e,t,n,r,i){return new S(e,t,n.properties||{},r,i)},CREATE_ROW:function(e,t,n,r,i){return new x(e,n,r,P,i)},CREATE_PANEL:function(e,t,n,r,i){return new T(e,t,n,r,P,i)},CREATE_SECTION:function(e,t,n,r,i){return new N(e,t,n,r,P,i)},CREATE_FORM_REFERENCE:function(e,t,n,r,i){return new _(e,t,n,r,i)},CREATE_TAB:function(e,t,n,r,i){return new C(e,t,n,r,P,i)},CREATE_TAB_CONTAINER:function(e,t,n,r,i){return new k(e,t,n,r,P,i)},CREATE_REPEATABLE_SECTION:function(e,t,n,r,i){return new L(e,t,n,r,P,i)},CREATE_TABLE:function(e,t,n,r,i){return new A(e,t,n,r,P,i)},CREATE_TABLE_COLUMN:function(e,t,n,r,i){return new M(e,t,n,r,P,i)},CREATE_BUSINESS_TYPE:function(e,t,n,r,i){return new N(e,t,n,r,P,i)},_log:function(e,t){var n=O.getLogger();n.debug&&e!==E.ROW&&(n.count("[COUNT] [CONTROL]"+e),t.registerRenderListener(function(){return n.count("[COUNT] [RENDERED]"+e),!0}))}},{});return P}),define("Assert",[],function(){"use strict";return function(e,t){if(!e)throw new Error(t||"Assertion failed")}}),define("EventBlock",["require","Class","Assert"],function(e){"use strict";var t=e("Class"),n=e("Assert");return t.subClass({},{init:function(e,t,r){n(!!this._class.TYPE),n(!!r),this.id=e.id,this.viewModel=t,this.scope=r},getType:function(){return this._class.TYPE},getComponentName:function(){return this._class.TEMPLATE_NAME},execute:function(){throw"Must be overriden"},toJS:function(){return{id:this.id,type:this.getType()}}})}),define("BlockTypes",["require"],function(e){"use strict";return{ACTION_BLOCK:"ACTION_BLOCK",IF_BLOCK:"IF_BLOCK",CONNECTOR_BLOCK:"CONNECTOR_BLOCK",ERROR_BLOCK:"ERROR_BLOCK"}}),define("EventAction",["require","Class"],function(e){"use strict";return e("Class").subClass({ACTION_NAME:"DO_NOTHING"},{init:function(e,t,n,r){this.viewModel=t,this.scope=n},getType:function(){return this._class.ACTION_NAME},template:function(){return!1},component:function(){return!1},execute:function(e){},toJS:function(){return{type:this.getType()}}})}),define("SetPropertyAction",["require","EventAction","Assert","Value","underscore"],function(e){"use strict";var t=e("EventAction"),n=e("Assert"),r=e("Value"),i=e("underscore");return t.subClass({ACTION_NAME:"",ACCESSOR:"",createPropertyAction:function(e,t){return this.subClass({ACTION_NAME:e,ACCESSOR:t},{init:function(e,t,n,r){this._super(e,t,n,r)}})}},{init:function(e,t,i,s){this._super(e,t,i,s),n(this._class.ACCESSOR.length>0,"SetPropertyAction class is abstract");var o=s?s.properties[this._class.ACCESSOR]():null;this.value=new r(e.value||{expression:o,controlResolver:{}},t,this.scope)},template:function(){return"valueAccessorEventTemplate"},execute:function(e){e.properties[this._class.ACCESSOR](this.value.resolve(this.viewModel))},toJS:function(){return i.extend({},this._super(),{value:this.value.toJS()})}})}),define("SetStateAction",["require","EventAction","Assert"],function(e){"use strict";var t=e("EventAction"),n=e("Assert");return t.subClass({ACTION_NAME:"",ACCESSOR:"",VALUE:!1,createStateAction:function(e,t,n){return this.subClass({ACTION_NAME:e,ACCESSOR:t,VALUE:n},{init:function(e,t,n,r){this._super(e,t,n,r)}})}},{init:function(e,t,r,i){this._super(e,t,r,i),n(this._class.ACCESSOR.length>0,"SetPropertyAction class is abstract")},execute:function(e){e.properties[this._class.ACCESSOR](this._class.VALUE)}})}),define("SetValueAction",["require","EventAction","Value","knockout","underscore"],function(e){"use strict";var t=e("EventAction"),n=e("Value"),r=e("knockout"),i=e("underscore");return t.subClass({ACTION_NAME:"VALUE"},{init:function(e,t,i,s){this._super(e,t,i,s);var o=s?r.utils.unwrapObservable(s.properties.defaultValue):null,u=s?s.id:null;this.value=new n(e.value||{expression:o,controlResolver:{},controlId:u},t,this.scope)},template:function(){return"valueAccessorEventTemplate"},execute:function(e,t){e.setValue(this.value.resolve(this.viewModel))},toJS:function(){return i.extend({},this._super(),{value:this.value.toJS()})}})}),define("SetLabelBindingAction",["require","Value","SetValueAction","knockout"],function(e){"use strict";var t=e("Value"),n=e("SetValueAction"),r=e("knockout");return n.subClass({ACTION_NAME:"LABEL_BINDING"},{init:function(e,n,i,s){this._super(e,n,i,s);var o=s?r.utils.unwrapObservable(s.properties.defaultLabel):null,u=s?s.id:null;this.value=new t(e.value||{expression:o,controlResolver:{},controlId:u},n,this.scope)},execute:function(e){e.setLabelVal(this.value.resolve(this.viewModel))}})}),define("SetImageValueAction",["require","SetValueAction"],function(e){"use strict";return e("SetValueAction").subClass({ACTION_NAME:"IMAGE_URL"},{init:function(e,t,n,r){this._super(e,t,n,r)}})}),define("SetVideoValueAction",["require","SetValueAction"],function(e){"use strict";return e("SetValueAction").subClass({ACTION_NAME:"VIDEO_SRC"},{init:function(e,t,n,r){this._super(e,t,n,r)}})}),define("SelectTabAction",["require","EventAction"],function(e){"use strict";return e("EventAction").subClass({ACTION_NAME:"SELECT"},{init:function(e,t,n,r){this._super(e,t,n,r)},execute:function(e){var t=this.viewModel.form().findControlAndParent(e.id).parent,n=t.controls().indexOf(e);t.properties.selectedPosition(n)}})}),define("RefreshGlobalConnectorAction",["require","EventAction","knockout","underscore"],function(e){"use strict";var t=e("EventAction"),n=e("knockout"),r=e("underscore");return t.subClass({ACTION_NAME:"REFRESH_GLOBAL_CONNECTOR"},{init:function(e,t,r,i){this._super(e,t,r,i),this.value=n.observable(e.value||"")},template:function(){return"globalConnectorSelectTemplate"},execute:function(e){var t=this,n=this.value()[0];return r.find(e.globalConnectors(),function(e){return e.id===n}).execute().then(function(){t.viewModel.computedExtension.reEvaluateOnScope(n)})},toJS:function(){return r.extend({},this._super(),{value:this.value()})}})}),define("SetMessageValueAction",["require","SetValueAction"],function(e){"use strict";return e("SetValueAction").subClass({ACTION_NAME:"MESSAGE"},{init:function(e,t,n,r){this._super(e,t,n,r)}})}),define("RefreshConnectorAction",["require","EventAction"],function(e){"use strict";return e("EventAction").subClass({ACTION_NAME:"REFRESH_CONNECTOR"},{init:function(e,t,n,r){this._super(e,t,n,r)},execute:function(e){e.refreshConnector()}})}),define("AddRowAction",["require","EventAction"],function(e){"use strict";return e("EventAction").subClass({ACTION_NAME:"ADD_ROW"},{init:function(e,t,n,r){this._super(e,t,n,r)},execute:function(e){e.addRow()}})}),define("SetRepeatableValueAction",["require","EventAction","Value","knockout","underscore"],function(e){"use strict";var t=e("EventAction"),n=e("Value"),r=e("knockout"),i=e("underscore");return t.subClass({ACTION_NAME:"REPEATABLE_VALUE"},{init:function(e,t,i,s){this._super(e,t,i,s);var o=s?s.id:null;this.value=new n(e.value||{expression:"",controlResolver:{},controlId:o},t,this.scope),this.mapping=r.observable(e.mapping||{})},component:function(){return"repeatable-value-mapping"},execute:function(e){var t=this.value.resolve(this.viewModel),n={};i.each(this.mapping(),function(t,r){if(r===e.id)n[e.properties.labelBinding()]=t;else{var i=e.findControl(r);i&&(n[i.properties.binding()]=t)}});var r=[];i.each(t,function(e){var t={};i.each(e,function(e,r){i.each(n,function(n,i){n===r&&(t[i]=e)})}),r.push(t)}),e.setValue(r)},toJS:function(){return i.extend({},this._super(),{value:this.value.toJS(),mapping:this.mapping()})}})}),define("SetInvalidAction",["require","EventAction","underscore","knockout"],function(e){"use strict";var t=e("EventAction"),n=e("underscore"),r=e("knockout");return t.subClass({ACTION_NAME:"SET_INVALID"},{init:function(e,t,n,i){this._super(e,t,n,i),this.summary=r.observable(e.summary||""),this.detail=r.observable(e.detail||"")},template:function(){return"errorValueEventTemplate"},execute:function(e){e.setError(this.summary(),this.detail())},toJS:function(){return n.extend({},this._super(),{summary:this.summary(),detail:this.detail()})}})}),define("ClearValueAction",["require","EventAction"],function(e){"use strict";return e("EventAction").subClass({ACTION_NAME:"CLEAR_VALUE"},{init:function(e,t,n,r){this._super(e,t,n,r)},execute:function(e){e.setValue("")}})}),define("SetOptionsAction",["require","EventAction","Value","knockout","OptionsType","underscore"],function(e){"use strict";var t=e("EventAction"),n=e("Value"),r=e("knockout"),i=e("OptionsType"),s=e("underscore");return t.subClass({ACTION_NAME:"OPTIONS"},{init:function(e,t,i,s){this._super(e,t,i,s);var o=s?s.id:null;this.value=new n(e.value||{expression:"",controlResolver:{},controlId:o},t,this.scope),this.mappingLabel=r.observable(e.mappingLabel||""),this.mappingValue=r.observable(e.mappingValue||"")},component:function(){return"repeatable-value-mapping"},execute:function(e){var t=this.value.resolve(this.viewModel),n={optionsNames:"",optionsValues:"",defaultValue:e.properties.optionsFeed().properties.defaultValue};s.each(t,function(e,t){var r=e,i=e;s.isObject(e)&&(r=e[this.mappingLabel()]||e.label,i=e[this.mappingValue()]||e.value),0===t?(n.optionsNames=r,n.optionsValues=i):(n.optionsNames+="\n"+r,n.optionsValues+="\n"+i)},this);var r=this.viewModel.context,o=r.optionsResolverFactory.createResolver(i.STATIC.value,r,n);e.properties.optionsFeed().optionsResolver(o),e.properties.optionsFeed().properties=o.properties,e.properties.optionsFeed().type(i.STATIC)},toJS:function(){return s.extend({},this._super(),{value:this.value.toJS(),mappingLabel:this.mappingLabel(),mappingValue:this.mappingValue()})}})}),define("SetDataAction",["require","EventAction","Value","ValueTypes","underscore"],function(e){"use strict";var t=e("EventAction"),n=e("Value"),r=e("ValueTypes"),i=e("underscore");return t.subClass({ACTION_NAME:"SET_DATA"},{init:function(e,t,i,s){this._super(e,t,i,s),this.dataAccessor=new n({expression:e.dataAccessor||"",type:r.DATA.value,controlResolver:{},controlId:null},t,this.scope),this.value=new n(e.value||{expression:"",controlResolver:{},controlId:null},t,this.scope)},template:function(){return"setDataEventTemplate"},execute:function(e){var t=this.dataAccessor.expression(),n=this.value.resolve(this.viewModel);this.viewModel.context.payload().setBindingValue(t,n),this.viewModel.context.payloadContext.setValue(t,n)},toJS:function(){return i.extend({},this._super(),{dataAccessor:this.dataAccessor.expression(),value:this.value.toJS()})}})}),define("RemoveRowAction",["require","EventAction"],function(e){"use strict";return e("EventAction").subClass({ACTION_NAME:"REMOVE_ROW"},{init:function(e,t,n,r){this._super(e,t,n,r)},execute:function(e){e.getParent().removeRow(e)}})}),define("ActionsMap",["require","ojL10n!rendererMsg/nls/renderer","EventAction","SetPropertyAction","SetStateAction","SetValueAction","SetLabelBindingAction","SetImageValueAction","SetVideoValueAction","SelectTabAction","RefreshGlobalConnectorAction","SetMessageValueAction","RefreshConnectorAction","AddRowAction","SetRepeatableValueAction","SetInvalidAction","ClearValueAction","SetOptionsAction","SetDataAction","RemoveRowAction"],function(e){"use strict";var t=e("ojL10n!rendererMsg/nls/renderer"),n=e("EventAction"),r=e("SetPropertyAction"),i=e("SetStateAction"),s=e("SetValueAction"),o=e("SetLabelBindingAction"),u=e("SetImageValueAction"),a=e("SetVideoValueAction"),f=e("SelectTabAction"),l=e("RefreshGlobalConnectorAction"),c=e("SetMessageValueAction"),h=e("RefreshConnectorAction"),p=e("AddRowAction"),d=e("SetRepeatableValueAction"),v=e("SetInvalidAction"),m=e("ClearValueAction"),g=e("SetOptionsAction"),y=e("SetDataAction"),b=e("RemoveRowAction");return{DO_NOTHING:{value:"DO_NOTHING",label:t.DO_NOTHING,disabled:!0,Action:n},VALUE:{value:"VALUE",label:t.LABEL_VALUE,Action:s},SHOW:{value:"SHOW",label:t.SHOW,Action:i.createStateAction("SHOW","hide",!1)},HIDE:{value:"HIDE",label:t.LABEL_HIDE,Action:i.createStateAction("HIDE","hide",!0)},ENABLE:{value:"ENABLE",label:t.ENABLE,Action:i.createStateAction("ENABLE","disabled",!1)},DISABLE:{value:"DISABLE",label:t.DISABLE,Action:i.createStateAction("DISABLE","disabled",!0)},REQUIRED:{value:"REQUIRED",label:t.LABEL_REQUIRED,Action:i.createStateAction("REQUIRED","required",!0)},OPTIONAL:{value:"OPTIONAL",label:t.OPTIONAL,Action:i.createStateAction("OPTIONAL","required",!1)},EXPAND:{value:"EXPAND",label:t.EXPAND,Action:i.createStateAction("EXPAND","expanded",!0)},COLLAPSE:{value:"COLLAPSE",label:t.COLLAPSE,Action:i.createStateAction("COLLAPSE","expanded",!1)},READONLY:{value:"READONLY",label:t.LABEL_READONLY,Action:i.createStateAction("READONLY","readonly",!0)},EDITABLE:{value:"EDITABLE",label:t.EDITABLE,Action:i.createStateAction("EDITABLE","readonly",!1)},LABEL:{value:"LABEL",label:t.LABEL_LABEL,Action:r.createPropertyAction("LABEL","label")},MESSAGE:{value:"MESSAGE",label:t.MESSAGE,Action:c},IMAGE_URL:{value:"IMAGE_URL",label:t.IMAGE_URL,Action:u},VIDEO_SRC:{value:"VIDEO_SRC",label:t.LABEL_SOURCE_URL,Action:a},ALTERNATIVE_TEXT:{value:"ALTERNATIVE_TEXT",label:t.LABEL_ALT_TEXT,Action:r.createPropertyAction("ALTERNATIVE_TEXT","alt")},HINT:{value:"HINT",label:t.LABEL_HINT,Action:r.createPropertyAction("HINT","hint")},HELP:{value:"HELP",label:t.LABEL_HELP,Action:r.createPropertyAction("HELP","help")},MIN_VALUE:{value:"MIN_VALUE",label:t.LABEL_MIN_VALUE,Action:r.createPropertyAction("MIN_VALUE","minValue")},MAX_VALUE:{value:"MAX_VALUE",label:t.LABEL_MAX_VALUE,Action:r.createPropertyAction("MAX_VALUE","maxValue")},MIN_LENGTH:{value:"MIN_LENGTH",label:t.LABEL_MIN_LENGTH,Action:r.createPropertyAction("MIN_LENGTH","minLength")},MAX_LENGTH:{value:"MAX_LENGTH",label:t.LABEL_MAX_LENGTH,Action:r.createPropertyAction("MAX_LENGTH","maxLength")},PATTERN:{value:"PATTERN",label:t.LABEL_PATTERN_VALUE,Action:r.createPropertyAction("PATTERN","pattern")},PLACEHOLDER:{value:"PLACEHOLDER",label:t.LABEL_PLACEHOLDER,Action:r.createPropertyAction("PLACEHOLDER","placeHolder")},SELECT:{value:"SELECT",label:t.SELECT,Action:f},ADD_ROW:{value:"ADD_ROW",label:t.ADD_ROW,Action:p},REFRESH_CONNECTOR:{value:"REFRESH_CONNECTOR",label:t.REFRESH_CONNECTOR,Action:h},SET_INVALID:{value:"SET_INVALID",label:t.THROW_ERROR,Action:v},REPEATABLE_VALUE:{value:"REPEATABLE_VALUE",label:t.LABEL_VALUE,Action:d},OPTIONS:{value:"OPTIONS",label:t.SET_OPTIONS,Action:g},LABEL_BINDING:{value:"LABEL_BINDING",label:t.LABEL_LABEL,Action:o},CLEAR_VALUE:{value:"CLEAR_VALUE",label:t.CLEAR_VALUE,Action:m},REMOVE_ROW:{value:"REMOVE_ROW",label:t.REMOVE_ROW,Action:b},CAN_ADD_REMOVE_ROWS:{value:"CAN_ADD_REMOVE_ROWS",label:t.ENABLE_ADD_REMOVE_ROWS,Action:i.createStateAction("CAN_ADD_REMOVE_ROWS","canAddDelete",!0)},CANT_ADD_REMOVE_ROWS:{value:"CANT_ADD_REMOVE_ROWS",label:t.DISABLE_ADD_REMOVE_ROWS,Action:i.createStateAction("CANT_ADD_REMOVE_ROWS","canAddDelete",!1)},REFRESH_GLOBAL_CONNECTOR:{value:"REFRESH_GLOBAL_CONNECTOR",label:t.REFRESH_GLOBAL_CONNECTOR,Action:l},SET_DATA:{value:"SET_DATA",label:t.SET_DATA,Action:y}}}),define("SetStyleAction",["require","EventAction","Assert","knockout","underscore"],function(e){"use strict";var t=e("EventAction"),n=e("Assert"),r=e("knockout"),i=e("underscore");return t.subClass({ACTION_NAME:"",STYLE:null,createStyleAction:function(e,t){return this.subClass({ACTION_NAME:e,STYLE:t},{init:function(e,t,n,r){this._super(e,t,n,r)}})}},{init:function(e,t,i,s){this._super(e,t,i,s),n(!!this.style(),"SetStyleAction class is abstract");var o=s?r.unwrap(s.properties.formattedStyle()[this.style().name]):null;o=o||this.style().default,this.value=r.observable(e.value||o)},template:function(){return"styleValueEventTemplate"},style:function(){return this._class.STYLE},execute:function(e){i.find(e.styles(),function(e){return e.type.name===this.style().name},this).value(this.value())},toJS:function(){return i.extend({},this._super(),{value:this.value()})}})}),define("ToggleClassAction",["require","EventAction","knockout","StyleTypeId","underscore"],function(e){"use strict";var t=e("EventAction"),n=e("knockout"),r=e("StyleTypeId"),i=e("underscore");return t.subClass({ACTION_NAME:"TOGGLE_CLASS",STYLE:r.CLASS_NAME},{init:function(e,t,r,i){this._super(e,t,r,i),this.value=n.observable(e.value||"")},template:function(){return"styleValueEventTemplate"},style:function(){return this._class.STYLE},execute:function(e){var t=i.find(e.styles(),function(e){return e.type.name===this.style().name},this),n=t.value().split(" ");i.contains(n,this.value())?t.value(i.without(n,this.value()).join(" ")):t.value(n.concat([this.value()]).join(" "))},toJS:function(){return i.extend({},this._super(),{value:this.value()})}})}),define("AddClassAction",["require","ToggleClassAction","underscore"],function(e){"use strict";var t=e("ToggleClassAction"),n=e("underscore");return t.subClass({ACTION_NAME:"ADD_CLASS"},{init:function(e,t,n,r){this._super(e,t,n,r)},execute:function(e){var t=n.find(e.styles(),function(e){return e.type.name===this.style().name},this),r=t.value().split(" ");t.value(r.concat([this.value()]).join(" "))}})}),define("RemoveClassAction",["require","ToggleClassAction","underscore"],function(e){"use strict";var t=e("ToggleClassAction"),n=e("underscore");return t.subClass({ACTION_NAME:"REMOVE_CLASS"},{init:function(e,t,n,r){this._super(e,t,n,r)},execute:function(e){var t=n.find(e.styles(),function(e){return e.type.name===this.style().name},this),r=t.value().split(" ");t.value(n.without(r,this.value()).join(" "))}})}),define("StyleActionsMap",["require","ojL10n!rendererMsg/nls/renderer","SetStyleAction","StyleTypeId","ToggleClassAction","AddClassAction","RemoveClassAction"],function(e){"use strict";var t=e("ojL10n!rendererMsg/nls/renderer"),n=e("SetStyleAction"),r=e("StyleTypeId"),i=e("ToggleClassAction"),s=e("AddClassAction"),o=e("RemoveClassAction");return{BACKGROUND_COLOR:{value:"BACKGROUND_COLOR",label:r.BACKGROUND_COLOR.label,Action:n.createStyleAction("BACKGROUND_COLOR",r.BACKGROUND_COLOR)},COLOR:{value:"COLOR",label:r.COLOR.label,Action:n.createStyleAction("COLOR",r.COLOR)},SIZE:{value:"SIZE",label:r.SIZE.label,Action:n.createStyleAction("SIZE",r.SIZE)},TEXT_ALIGN:{value:"TEXT_ALIGN",label:r.TEXT_ALIGN.label,Action:n.createStyleAction("TEXT_ALIGN",r.TEXT_ALIGN)},WIDTH:{value:"WIDTH",label:r.WIDTH.label,Action:n.createStyleAction("WIDTH",r.WIDTH)},HEIGHT:{value:"HEIGHT",label:r.HEIGHT.label,Action:n.createStyleAction("HEIGHT",r.HEIGHT)},BORDER_COLOR:{value:"BORDER_COLOR",label:r.BORDER_COLOR.label,Action:n.createStyleAction("BORDER_COLOR",r.BORDER_COLOR)},BORDER_STYLE:{value:"BORDER_STYLE",label:r.BORDER_STYLE.label,Action:n.createStyleAction("BORDER_STYLE",r.BORDER_STYLE)},BORDER_WIDTH:{value:"BORDER_WIDTH",label:r.BORDER_WIDTH.label,Action:n.createStyleAction("BORDER_WIDTH",r.BORDER_WIDTH)},BORDER_RADIUS:{value:"BORDER_RADIUS",label:r.BORDER_RADIUS.label,Action:n.createStyleAction("BORDER_RADIUS",r.BORDER_RADIUS)},CONTROL_ALIGN:{value:"CONTROL_ALIGN",label:r.CONTROL_ALIGN.label,Action:n.createStyleAction("CONTROL_ALIGN",r.CONTROL_ALIGN)},LABEL_COLOR:{value:"LABEL_COLOR",label:r.LABEL_COLOR.label,Action:n.createStyleAction("LABEL_COLOR",r.LABEL_COLOR)},LABEL_SIZE:{value:"LABEL_SIZE",label:r.LABEL_SIZE.label,Action:n.createStyleAction("LABEL_SIZE",r.LABEL_SIZE)},TOGGLE_CLASS:{value:"TOGGLE_CLASS",label:t.TOGGLE_CLASS,Action:i},ADD_CLASS:{value:"ADD_CLASS",label:t.ADD_CLASS,Action:s},REMOVE_CLASS:{value:"REMOVE_CLASS",label:t.REMOVE_CLASS,Action:o}}}),define("ActionFactory",["require","ActionsMap","underscore","StyleActionsMap"],function(e){"use strict";var t=e("ActionsMap"),n=e("underscore"),r=e("StyleActionsMap");return{createAction:function(e,i,s,o,u){var a=t[u]||r[u]||t.DO_NOTHING;return o=n.isArray(o)?o[0]:o,new a.Action(s,e,i,o)}}}),define("EventActionBlock",["require","EventBlock","knockout","underscore","BlockTypes","ControlResolver","Value","ActionFactory"],function(e){"use strict";var t=e("EventBlock"),n=e("knockout"),r=e("underscore"),i=e("BlockTypes"),s=e("ControlResolver"),o=e("Value"),u=e("ActionFactory");return t.subClass({TYPE:i.ACTION_BLOCK,TEMPLATE_NAME:"event-block"},{init:function(e,t,r){this._super(e,t,r),this.controlResolver=new s(e.controlResolver,t,r),this.action=n.observable(u.createAction(t,this.scope,e.action,this.control(),e.action.type))},control:function(){var e=this.viewModel.form();if(e)return this.controlResolver.resolve(e.presentation(),this.scope.eventControl)},execute:function(){var e=this,t=this.control();r.isArray(t)||(t=[t]);var i=Promise.resolve();return r.each(r.flatten(t),function(t){var r=e.scope.eventControl;i=i.then(function(){try{return e.scope.currentRowControl=t,e.scope.eventControl=r,n.unwrap(e.action).execute(t)||Promise.resolve()}catch(e){console.error('User Events Error: Error executing action."')}})},this),i},getBundle:function(){var e={},t=this.id,r=this.action();if(r&&r.value&&n.utils.unwrapObservable(r.value)instanceof o){var i=r.value._getBundle();i.length>0&&(e[t]=i)}return e},decorate:function(){var e=this.id,t=this.action();return t&&t.value&&n.utils.unwrapObservable(t.value)instanceof o&&t.value.decorate(this.viewModel,e),!0},toJS:function(){return r.extend(this._super(),{action:this.action().toJS(),controlResolver:this.controlResolver.toJS()})}})}),define("ComparatorMap",["require","ojL10n!rendererMsg/nls/renderer"],function(e){"use strict";var t=e("ojL10n!rendererMsg/nls/renderer"),n={IS_TRUE:{value:"IS_TRUE",label:t.IS_TRUE,isTrue:function(e){return!!e}},IS_FALSE:{value:"IS_FALSE",label:t.IS_FALSE,isTrue:function(e){return!n.IS_TRUE.isTrue(e)}},EQUALS:{value:"EQUALS",label:t.EQUALS,isTrue:function(e,t){return e==t}},NOT_EQUALS:{value:"NOT_EQUALS",label:t.NOT_EQUALS,isTrue:function(e,t){return!n.EQUALS.isTrue(e,t)}},IS_GREATER:{value:"IS_GREATER",label:t.IS_GREATER,isTrue:function(e,t){return e>t}},IS_NOT_GREATER:{value:"IS_NOT_GREATER",label:t.IS_NOT_GREATER,isTrue:function(e,t){return!n.IS_GREATER.isTrue(e,t)}},IS_LESS:{value:"IS_LESS",label:t.IS_LESS,isTrue:function(e,t){return e<t}},IS_NOT_LESS:{value:"IS_NOT_LESS",label:t.IS_NOT_LESS,isTrue:function(e,t){return!n.IS_LESS.isTrue(e,t)}}};return n}),define("EventCondition",["require","Class","Value","knockout","ValueTypes","underscore","ComparatorMap"],function(e){"use strict";var t=e("Class"),n=e("Value"),r=e("knockout"),i=e("ValueTypes"),s=e("underscore"),o=e("ComparatorMap");return t.subClass({},{init:function(e,t,u,a){this.viewModel=t,this.scope=u;var l=s.extend({type:i.CONTROL.value},e.value);this.value=new n(l,t,u),this.comparator=r.observable(e.comparator||o.EQUALS.value),this.value2=new n(e.value2,t,u),this.union=r.observable(e.union||"AND"),this.ifBlockId=a},isTrue:function(){return o[this.comparator()].isTrue(this.value.resolve(this.viewModel),this.value2.resolve(this.viewModel))},getBundle:function(){var e={},t=s.union(this.value._getBundle(),this.value2._getBundle());return t.length&&(e[this.ifBlockId]=t),e},decorate:function(){return this.value.decorate(this.viewModel,this.ifBlockId,this.value),this.value2.decorate(this.viewModel,this.ifBlockId,this.value),!0},toJS:function(){return{value:this.value.toJS(),comparator:this.comparator(),value2:this.value2.toJS(),union:this.union()}}})}),define("EventIfBlock",["require","EventBlock","knockout","underscore","BlockTypes","EventCondition","BlockFactory"],function(require){"use strict";var EventBlock=require("EventBlock"),ko=require("knockout"),_=require("underscore"),BlockTypes=require("BlockTypes"),EventCondition=require("EventCondition");return EventBlock.subClass({TYPE:BlockTypes.IF_BLOCK,TEMPLATE_NAME:"event-if-block",ELSE_ACTIONS:"elseActions",THEN_ACTIONS:"thenActions"},{init:function(e,t,n){var r=require("BlockFactory");this._super(e,t,n);var i=[],s=this;_.each(e.conditions,function(e){i.push(new EventCondition(e,t,n,s.id))}),0===i.length&&i.push(new EventCondition({},t,n,this.id)),this.conditions=ko.observableArray(i);var o=[];_.each(e.thenActions,function(e){o.push(r.createBlock(t,e,n))}),this.thenActions=ko.observableArray(o);var u=[];_.each(e.elseActions,function(e){u.push(r.createBlock(t,e,n))}),this.elseActions=ko.observableArray(u)},isTrue:function(){var unionStrings={AND:" && ",OR:" || "},booleanString="true";return _.each(this.conditions(),function(e){var t=unionStrings[e.union()];booleanString=booleanString+t+(!!e.isTrue()).toString()}),eval(booleanString)},execute:function(){var e=this.isTrue()?this.thenActions():this.elseActions(),t=this.scope.eventControl,n=this,r=Promise.resolve();return _.each(ko.unwrap(e),function(e){r=r.then(function(){return n.scope.eventControl=t,e.execute()||Promise.resolve()})}),r},getElseActionsJS:function(){var e=[];return _.each(this.elseActions(),function(t){e.push(t.toJS())}),e},getBundle:function(){var e={};return _.each(this.conditions(),function(t){_.extend(e,t.getBundle())}),_.each(this.thenActions(),function(t){_.extend(e,t.getBundle())}),_.each(this.elseActions(),function(t){_.extend(e,t.getBundle())}),e},decorate:function(){return _.each(this.conditions(),function(e){e.decorate()}),_.each(this.thenActions(),function(e){e.decorate()}),_.each(this.elseActions(),function(e){e.decorate()}),!0},toJS:function(){var e=[];_.each(this.conditions(),function(t){e.push(t.toJS())});var t=[];return _.each(this.thenActions(),function(e){t.push(e.toJS())}),_.extend(this._super(),{conditions:e,thenActions:t,elseActions:this.getElseActionsJS()})}})}),define("EventConnectorBlock",["require","EventBlock","knockout","BlockTypes","underscore","OptionsFeed","NameGenerator","OptionsType","BlockFactory"],function(e){"use strict";var t=e("EventBlock"),n=e("knockout"),r=e("BlockTypes"),i=e("underscore"),s=e("OptionsFeed"),o=e("NameGenerator"),u=e("OptionsType");return t.subClass({TYPE:r.CONNECTOR_BLOCK,TEMPLATE_NAME:"event-connector-block"},{init:function(t,r,l){var p=e("BlockFactory");this._super(t,r,l),this.connectorFeed=new s(u.EVENT_CONNECTOR.value,r.context,t.connectorFeedProperties,l.controlId),this.responseName=n.observable(t.responseName||o.generateName("response",l.getAttributes()));var d=[];i.each(t.errorBlocks,function(e){d.push(p.createBlock(r,e,l))}),this.errorBlocks=n.observableArray(d),this.form=r.form(),r.form.subscribe(function(e){this.form=e},this)},execute:function(){var e=this;return new Promise(function(t,n){e.connectorFeed.optionsResolver().controlId=e.scope.eventControl.id,e.connectorFeed.optionsResolver().loadConnector(e.form).then(function(n){e.scope.setValue(e.responseName(),n.response),t()}).catch(function(t){var r=JSON.parse(t);i.each(e.errorBlocks(),function(e){e.execute(r)}),n()})})},getBundle:function(){var e={};return i.each(this.errorBlocks(),function(t){i.extend(e,t.getBundle())}),e},decorate:function(){return i.each(this.errorBlocks(),function(e){e.decorate()}),!0},toJS:function(){var e=[];return i.each(this.errorBlocks(),function(t){e.push(t.toJS())}),i.extend(this._super(),{connectorFeedProperties:this.connectorFeed.toJS().properties,errorBlocks:e,responseName:this.responseName()})}})}),define("EventErrorBlock",["require","EventActionBlock","knockout","BlockTypes","underscore"],function(e){"use strict";var t=e("EventActionBlock"),n=e("knockout"),r=e("BlockTypes"),i=e("underscore");return t.subClass({TYPE:r.ERROR_BLOCK,TEMPLATE_NAME:"event-error-block"},{init:function(e,t,r){this._super(e,t,new t.context.scopeFactory.ErrorScope(t.getCurrentGlobalScope())),this.errorCode=n.observable(e.errorCode||0)},execute:function(e){this.errorCode()&&this.errorCode()!=e.errorCode||(this.scope.setValue("error",e),this._super())},toJS:function(){return i.extend(this._super(),{errorCode:this.errorCode()})}})}),define("BlockFactory",["require","UUID","underscore","EventActionBlock","EventIfBlock","EventConnectorBlock","EventErrorBlock","ActionsMap"],function(e){"use strict";var t=e("UUID"),n=e("underscore"),r=e("EventActionBlock"),i=e("EventIfBlock"),s=e("EventConnectorBlock"),o=e("EventErrorBlock"),u=e("ActionsMap");return{createBlock:function(e,i,s){return i=n.extend({id:t.createUuid(),type:r.TYPE},i),this[i.type](e,i,s)},ACTION_BLOCK:function(e,t,i){return t=n.extend({action:{type:u.DO_NOTHING.value},controlResolver:{}},t),new r(t,e,i)},IF_BLOCK:function(e,t,n){return new i(t,e,n)},CONNECTOR_BLOCK:function(e,t,r){return t=n.extend({connectorFeedProperties:{}},t),new s(t,e,r)},ERROR_BLOCK:function(e,t,r){return t=n.extend({action:{type:u.DO_NOTHING.value},controlResolver:{}},t),new o(t,e,r)}}}),define("Presentation",["require","knockout","Form","ControlTypeId","underscore","ControlFactory","BlockFactory","EventReference","TreeUtil","jquery","ControlEventsMap","UUID"],function(e){"use strict";var t=e("knockout"),n=e("Form"),r=e("ControlTypeId"),i=e("underscore"),s=e("ControlFactory"),o=e("BlockFactory"),u=e("EventReference"),a=e("TreeUtil"),f=e("jquery"),l=e("ControlEventsMap"),c=e("UUID");return n.subClass({},{type:r.FORM_PRESENTATION,init:function(e,n){this._super(e),this.viewModel=n.viewModel,n.calls=this.calls,i.defaults(e,{borderColor:"#d6dfe6",borderStyle:null,borderWidth:null,backgroundColor:"#ffffff",properties:{}}),i.extend(this.properties,{borderColor:t.observable(e.borderColor),borderStyle:t.observable(e.borderStyle),borderWidth:t.observable(e.borderWidth),backgroundColor:t.observable(e.backgroundColor)}),this.name=this.properties.name,this.globalConnectors=t.observableArray(),this.globalScope=new n.scopeFactory.Scope(null,this.globalConnectors),this.globalScope.eventControl=this,this.viewModel.globalScope=this.globalScope;var r=[];i.each(t.unwrap(e.properties.globalConnectors),function(e){r.push(o.createBlock(n.viewModel,e,this.viewModel.globalScope))},this),this.globalConnectors(r);var a=[];i.each(e.controls,function(e){var t=s.createControl(e.id,e.name,e.type,e,n,this);a.push(t)},this),this.controls=t.observableArray(a),this.isValid=t.pureComputed(function(){return i.every(this.controls(),function(e){return e.isValid()})}.bind(this));var f=[];i.each(t.unwrap(e.properties.events),function(e){f.push(new u(e.id,n.viewModel))},this),this.events=t.observableArray(f)},executeGlobalConnectors:function(){var e=[];return i.each(this.globalConnectors(),function(t){t.connectorFeed.properties().skipDuringLoad()||e.push(t.execute())}),Promise.all(e)},presentation:function(){return this},executeEvent:function(e){var t=[];return i.each(this.events(),function(n){var r=n.event().trigger;e===r()&&t.push(n.execute())},this),Promise.all(t)},executeEventOnAll:function(e){var t=[this.executeEvent(e)],n=this;return f.each(n.getAllControls(!0),function(n,r){t=t.concat(r.executeEventOnAll(e))}),Promise.all(t)},getValidEvents:function(){return l.PRESENTATION},getAllControls:function(e){return a.treeToList(this.controls(),e?"getControls":"controls")},findControl:function(e){if(e===this.id)return this;var t=this.findControlAndParent(e);return null!==t?t.node:null},findClosest:function(e){return this.findControl(e)},findControlInsideRepeatable:function(e){var t=this.findControl(e);return t||i.any(this.getAllControls(!0),function(n){if(n.isRepeatable())return!!(t=n.findControlInsideRepeatable(e))}),t},getAllPresentationControls:function(){return i.union([this],this.getAllControls())},findControlAndParent:function(e){return a.find(this,"controls","id",e)},getContextForChildren:function(e){return""},makeCopy:function(){var e=this.toJS();e.id=c.createUuid();var t=[];return i.each(this.controls(),function(e){t.push(e.makeCopy())}),e.controls=t,e},isRepeatable:function(){return!1},toJS:function(){var e=[];i.each(this.controls(),function(t){e.push(t.toJS())});var t=[];i.each(this.events(),function(e){t.push(e.toJS())});var n=[];return i.each(this.globalConnectors(),function(e){n.push(e.toJS())}),{id:this.id,name:this.properties.name(),description:this.properties.description(),borderColor:this.properties.borderColor(),borderWidth:this.properties.borderWidth(),borderStyle:this.properties.borderStyle(),backgroundColor:this.properties.backgroundColor(),controls:e,properties:{events:t,globalConnectors:n}}}})}),define("EventsTranslator",["require","underscore"],function(e){"use strict";var t=e("underscore");return{translate:function(e){t.each(e,function(e){var n=e.blocks();t.each(n,function(e){e.decorate()});var r=e.connectors();t.each(r,function(e){e.decorate()})})}}}),define("EventTrigger",["require","Class","knockout","BlockFactory","jquery","underscore"],function(e){"use strict";var t=e("Class"),n=e("knockout"),r=e("BlockFactory"),i=e("jquery"),s=e("underscore");return t.subClass({},{init:function(e,t,i,o,u,a,l){this.id=e,this.name=t,this.controlId=o,this.trigger=n.observable(i),this.viewModel=l,this.connectors=n.observableArray(),this.scope=new l.context.scopeFactory.Scope(l.getCurrentGlobalScope(),this.connectors),this.scope.controlId=o;var h=[];s.each(a,function(e){h.push(r.createBlock(l,e,this.scope))},this),this.connectors(h);var p=[];s.each(u,function(e){p.push(r.createBlock(l,e,this.scope))},this),this.blocks=n.observableArray(p)},execute:function(e){this.scope.clearValues(),i(".spinnerContainer").stop().fadeIn();var t=this,r=[];return s.each(t.connectors(),function(n){t.scope.eventControl=e,r.push(n.execute())}),new Promise(function(o){Promise.all(r).then(function(){var r=Promise.resolve();s.each(n.unwrap(t.blocks()),function(n){r=r.then(function(){return t.scope.eventControl=e,n.execute()||Promise.resolve()})}),r.then(function(){i(".spinnerContainer").stop().fadeOut(),o()})}.bind(t)).catch(function(){i(".spinnerContainer").stop().fadeOut(),o()}.bind(t))})},toJS:function(){var e=[];s.each(this.blocks(),function(t){e.push(t.toJS())});var t=[];return s.each(this.connectors(),function(e){t.push(e.toJS())}),{id:this.id,name:this.name,trigger:this.trigger(),controlId:this.controlId,blocks:e,connectors:t}}})}),define("StylePreprocessor",["require","Class"],function(e){"use strict";return e("Class").subClass({sanitize:function(e,t){t=t?t+" ":"";for(var n="",r=this.rulesForCssText(e),i=0;i<r.length;i++){for(var s=r[i].selectorText.split(","),o=r[i].cssText,u=0;u<s.length;u++)o=o.replace(s[u],t+s[u]);n+=o+" "}return n},rulesForCssText:function(e){var t=document.implementation.createHTMLDocument(""),n=document.createElement("style");return n.textContent=e,t.body.appendChild(n),n.sheet.cssRules}},{})}),define("FormExtensions",["require","knockout","jquery","underscore","EventTrigger","StylePreprocessor","Class"],function(e){"use strict";var t=e("knockout"),n=e("jquery"),r=e("underscore"),i=e("EventTrigger"),s=e("StylePreprocessor");return e("Class").subClass({},{init:function(e,n){r.defaults(e,{eventActions:[],stylesheet:{}}),this.stylesheet=t.observable(e.stylesheet);var s=[];r.each(e.eventActions,function(e){s.push(new i(e.id,e.name,e.trigger,e.controlId,e.blocks,e.connectors,n.viewModel))},this),this.eventActions=t.observableArray(s),this.applyStylesheet(this.stylesheet(),n)},findEvent:function(e){return r.find(this.eventActions(),function(t){return t.id===e})},applyStylesheet:function(e,t){var i=t.getScope()+"-applied-stylesheet";if(r.isEmpty(t.config().domIdPrefix)&&n("."+i).remove(),!r.isEmpty(e)&&e.id){var s=this;t.config().cssHandler.getResolvedControl(e.id).then(function(e){n.isEmptyObject(e)||s._addStyleSheetTag(i,e.content)})}else this._addStyleSheetTag(i,e)},_addStyleSheetTag:function(e,t){if(!r.isEmpty(t)){var n=document.createElement("style");n.className=e+" applied-stylesheet";var i=s.sanitize(t,".canvas");n.appendChild(document.createTextNode(i)),document.head.appendChild(n)}},toJS:function(){var e=[];return r.each(this.eventActions(),function(t){e.push(t.toJS())}),{eventActions:e,stylesheet:n.isEmptyObject(this.stylesheet())?this.stylesheet():{id:this.stylesheet().id}}}})}),define("RendererForm",["require","underscore","jquery","Presentation","EventsId","EventsTranslator","knockout","Payload","FormExtensions","PayloadUtil"],function(e){"use strict";var t=e("underscore"),n=e("jquery"),r=e("Presentation"),i=e("EventsId"),s=e("EventsTranslator"),o=e("knockout"),u=e("Payload"),a=e("FormExtensions"),f=e("PayloadUtil");return r.subClass({},{init:function(e,t){this._super(e,t),this.extensions=new a(e,t),this.payload=new u(e,t),t.payload(this.payload),this.controlsLoaded=o.observable(0===this.controls().length),this.loadEventsExecuted=o.observable(!!this.viewModel.staticForm);var n=this;this.loaded=o.pureComputed({read:function(){return n.controlsLoaded()&&n.loadEventsExecuted()}})},initPayloadAndRunEvents:function(){var e=this;e.populateValues(),s.translate(e.extensions.eventActions()),setTimeout(function(){e.executeOnLoadEvents()})},populateValues:function(){var e=this.payload.getBindings();t.size(e)>0&&(t.each(this.getAllControls(!0),function(t){f.initValueFromPayload(t,e)},this),t.each(e,function(e,t){this.payload.payloadContext.isObservableDefined(t)||this.payload.payloadContext.setValue(t,e)},this))},updateBindings:function(){this.payload.updateBindings(this.controls)},getBindings:function(){return this.updateBindings(),this.payload.getBindings()},executeOnLoadEvents:function(){var e=this;return n(".spinnerContainer").stop().fadeIn(),this.executeGlobalConnectors().then(function(){return e.executeEventOnAll(i.ON_LOAD.value).then(function(){e.loadEventsExecuted(!0),n(".spinnerContainer").stop().fadeOut()})})},afterRenderingRowControls:function(e){var t=this,r=t.viewModel.context.runningAsyncTemplates.subscribe(function(i){0===i&&(r.dispose(),t.viewModel.context.focusControl(n(e).parents("form-renderer").find("[autofocus]")),t.controlsLoaded(!0))})},toJS:function(){return t.extend(this._super(),this.extensions.toJS(),{payload:this.payload.toJS(),calls:this._callsToJS()})}})}),define("ComputedExtension",["require","EventsId","underscore","FormsLogger","ControlReferenceMap","Class"],function(e){"use strict";function t(e,t){return e=e||[],r.contains(e,t)||e.push(t),e}var n=e("EventsId"),r=e("underscore"),i=e("FormsLogger"),s=e("ControlReferenceMap"),o=e("Class"),u=[n.ON_CHANGE.value,n.ON_CHILDREN_CHANGE.value,n.ON_ADD_ROW.value,n.ON_REMOVE_ROW.value],a=[s.FIRST.value,s.LAST.value,s.INDEX.value,s.SELECTED.value];return o.subClass({},{structuralControlDependencies:{},controlDependencies:{},scopeDependencies:{},dataDependencies:{},subscriptions:[],viewModel:void 0,init:function(e){this.viewModel=e},_register_CONSTANT:function(){},_register_DATA:function(e,n){var r=n.expression(),i=this.viewModel.context.payloadContext.getObservableValue(r,!0);this.subscriptions.push(i.subscribe(this.reEvaluateOnData.bind(this,e))),this.dataDependencies[r]=t(this.dataDependencies[r],e)},_register_CONTROL:function(e,t){this._registerControlDependency(t.controlResolver,e)},_register_FUNCTION:function(e,t){r.each(t.propertyParam(),function(t){this[this._getRegisterFunction(t)](e,t)},this)},_register_SCOPE:function(e,n){var i=n.expression().split(".")[0],s=r.find(this.viewModel.form().globalConnectors(),function(e){return e.responseName()===i});this.scopeDependencies[s.id]=t(this.scopeDependencies[s.id],e)},_registerControlDependency:function(e,n){var i=e.resolve(n.viewModel.form(),n),s=["__undefined__"];r.isEmpty(i)||(s=r.isArray(i)?r.map(i,function(e){return e.id}):[i.id]),r.each(s,function(e){this.controlDependencies[e]=t(this.controlDependencies[e],n)},this),this._registerStructuralControlDependency(e,n.viewModel.form(),n,s)},_registerStructuralControlDependency:function(e,n,i,s){if(!r.isEmpty(n)&&r.contains(a,e.reference())){var o=e.getControl(n);r.isEmpty(o)||(r.each(s,function(e){this.structuralControlDependencies[o.id]=t(this.structuralControlDependencies[o.id],e)},this),this._registerStructuralControlDependency(e.childControl(),e.resolveChildContext(n,i),i,s))}},_getRegisterFunction:function(e){return"_register_"+e.type().value},_evaluateComputed:function(e){i.getLogger().count("[COUNT] [COMPUTED]"),e.properties.computedValue.scope.eventControl=e,e.setValue(e.properties.computedValue.resolve(this.viewModel))},_evaluateOnLoad:function(e){e.properties.computed&&e.properties.computed()&&(this[this._getRegisterFunction(e.properties.computedValue)](e,e.properties.computedValue),this._evaluateComputed(e))},reEvaluateOnControl:function(e,t){e===n.ON_LOAD.value?this._evaluateOnLoad(t):t&&r.contains(u,e)?this._reEvaluateOnControl(e,t):t&&e===n.ON_SELECTION_CHANGE.value&&this._reCalculateDependencies(t)},_reCalculateDependencies:function(e){var t=this.structuralControlDependencies[e.id];this.structuralControlDependencies[e.id]=[],r.each(t,function(e){var t=this.controlDependencies[e];this.controlDependencies[e]=[],r.each(t,function(e){this._evaluateOnLoad(e)},this)},this)},_reEvaluateOnControl:function(e,t){var i=[];i=r.union(i,this.controlDependencies[t.id]),r.each(i,function(e){this._evaluateComputed(e)},this),t.getParent&&this.reEvaluateOnControl(n.ON_CHILDREN_CHANGE.value,t.getParent()),this._reCalculateDependencies(t)},reEvaluateOnScope:function(e){r.each(this.scopeDependencies[e],function(e){this._evaluateComputed(e)},this)},reEvaluateOnData:function(e){this._evaluateComputed(e)}})}),define("DomPolyfill",["require","underscore"],function(e){"use strict";var t=e("underscore"),n={Element:{element:Element.prototype,functions:{remove:function(){var e=this.parentNode;e&&e.removeChild(this)}}}};return t.each(n,function(e){t.each(e.functions,function(t,n){e.element[n]||(e.element[n]=t)})}),n}),define("RendererViewModel",["require","RendererContext","knockout","jquery","Form","EventsId","RendererLoadPreProcessor","RendererForm","ComputedExtension","FormsLogger","FormValidator","RendererId","DomPolyfill"],function(e){"use strict";var t=e("RendererContext"),n=e("knockout"),r=e("jquery"),i=e("Form"),s=e("EventsId"),o=e("RendererLoadPreProcessor"),u=e("RendererForm"),a=e("ComputedExtension"),f=e("FormsLogger"),l=e("FormValidator"),c=e("RendererId");return e("DomPolyfill"),function(e){function p(e,t,n){w.form().updateBindings(),!n||w.validateData()?e({payload:w.form().payload.toJS()}):t()}function v(e,t,n){w.form().updateBindings(),n?w.form().executeEventOnAll(s.ON_SUBMIT.value).then(function(){return w.rendererContext.eventsQueue.resolveWhenEmpty()}).then(function(){p(e,t,n)}):p(e,t,n)}function m(e){return new Promise(function(t,n){i.resolveOnLoaded(w.form()).then(function(){return w.rendererContext.eventsQueue.resolveWhenEmpty()}).then(function(){v(t,n,e)})})}function y(e){return r(r(e).find("div")[0]).closest(c.FORM_RENDERER)}var w=this;this.staticForm=n.unwrap(e.staticForm),this.formId=n.unwrap(e.formId)||n.unwrap(e.value).form.id,this.presentationId=n.unwrap(e.presentationId)||null,this.onValidStateChange=e.onValidStateChange||function(){},w.form=n.observable(),w.computedExtension=new a(w),w.load=function(r,i){f.getLogger().time("[LOAD]");var s=o.preProcess(r);w.rendererContext=new t(s,w,n.unwrap(e.value).controlBindings,n.unwrap(e.value).bindingContext),w.context=w.rendererContext,w.form(new u(s.form,w.rendererContext)),w.staticForm||w.form().initPayloadAndRunEvents();var a=w.form().loaded.subscribe(function(){a.dispose(),i&&i()});return w.form().isValid.subscribe(function(e){w.onValidStateChange(e)}),w.onValidStateChange(w.form().isValid()),u.resolveOnLoaded(w.form())},w.getValues=function(){return w.form().updateBindings(),w.form().executeEventOnAll(s.ON_SUBMIT.value),{payload:w.form().payload.toJS()}},w.submit=function(){return m(!0)},w.save=function(){return m(!1)},w.getCurrentGlobalScope=function(){return w.globalScope},w.getBindings=function(){return w.form().getBindings()},w.formValidator=new l,w.validateData=function(){return w.formValidator.validate(w.form().getAllControls(!0),w.rendererContext)},w.registerCustomEvents=function(e){var t=y(e);r(t).on("getValues",w.getValues),r(t).on("submit",w.submit),r(t).on("save",w.save),r(t).on("getBindings",w.getBindings),r(t).on("validateData",w.validateData),r(t).on("load",function(e,t){return w.load(t)})},w.detachCustomListeners=function(e){var t=y(e),n=r(t);n.off("getValues"),n.off("submit"),n.off("save"),n.off("getBindings"),n.off("validateData"),n.off("load"),n.find("*").each(function(){r(this).unbind()})},w.load(e.value,e.loadedCallback)}}),define("IconComponent",["require","knockout"],function(e){"use strict";var t=e("knockout");return function(e){var n=this;n.styleClass=e.styleClass,n.icon=t.utils.unwrapObservable(e.icon),n.alt=e.alt||""}}),define("MediaQueryInspector",["require","MediaQueryType","knockout"],function(e){"use strict";var t=e("MediaQueryType"),n=e("knockout");return function(){var e=this;e.findMediaQuery=function(){var n=t.EXTRA_LARGE;for(var r in t)if(t.hasOwnProperty(r)&&e._mediaMatches(t[r].query)){n=t[r];break}return n},e.mediaQueryChanged=function(){e.mediaQuery(e.findMediaQuery())},e._mediaMatches=function(e){return window.matchMedia(e).matches},e.mediaQuery=n.observable(e.findMediaQuery())}}),define("mediaBindingHandler",["require","knockout","jquery","MediaQueryInspector"],function(e){"use strict";var t=e("knockout"),n=e("jquery"),r=e("MediaQueryInspector");t.bindingHandlers.ifMedia={init:function(e){var r=t.bindingHandlers.ifMedia.mediaQueryInspector;n(window).on("resize orientationchange load",r.mediaQueryChanged),t.utils.domNodeDisposal.addDisposeCallback(e,function(){n(window).off("resize orientationchange load",r.mediaQueryChanged)})},preprocess:function(e,t,n){return n("if","ko.bindingHandlers.ifMedia.mediaQueryInspector.mediaQuery().accept("+e+")"),e}},t.bindingHandlers.ifMedia.mediaQueryInspector=new r}),define("RenderingQueue",["require","knockout","jquery"],function(e){"use strict";var t=e("knockout"),n=e("jquery");return function(e,r,i){for(var s=i.getTemplateData(),o=t.unwrap(s.foreach),u=s.afterLazyRenderAll||function(){},a=t.unwrap(s.pageSize)||1,f=[],l=n(i.getPlaceholder()),h=0;h<o.length;h++){var p=r.createChildContext(o[h]),d=n(i.getPlaceholder());l.append(d),f.push(i.renderTemplate.bind(i,p,d))}l.children().appendTo(e);var v=function(t,n,r,i){for(var s=0;s<r;s++)t[n+s](),n+s===t.length-1&&i(e)};this.execute=function(){setTimeout(function(){for(var e=0;e<f.length;)f.length-e>=a?(setTimeout(v.bind(null,f,e,a,u),10),e+=a):(setTimeout(v.bind(null,f,e,1,u),10),e++)},10)}}}),define("AsyncRenderer",["require","knockout","jquery"],function(e){"use strict";var t=e("knockout"),n=e("jquery");return function(e){this._templateData=e,this.renderTemplate=function(e,n){this._templateData.as&&(e[this._templateData.as]=e.$data),t.renderTemplate(t.unwrap(this._templateData.name),e,this._templateData,n,"replaceNode")},this.subscribeToChanges=function(e,r){var i=this,s=this._templateData.foreach.subscribe(function(s){var o=[],u=[];t.utils.arrayForEach(s,function(e){switch(e.status){case"added":u.push(e);break;case"deleted":o.push(e)}}),o=o.reverse();for(var f=0;f<o.length;f++)n(n(e).children().get(o[f].index)).remove();for(var l=0;l<u.length;l++){var h=u[l],p=r.createChildContext(h.value),v=n(i.getPlaceholder());if(h.index){var m=n(n(e).children().get(h.index-1));v.insertAfter(m)}else n(e).prepend(v);setTimeout(i.renderTemplate.bind(i,p,v),10)}},i,"arrayChange");t.utils.domNodeDisposal.addDisposeCallback(e,function(){s.dispose()})},this.getPlaceholder=function(){return'<div class="'+(t.unwrap(this._templateData.hideLoading)?"":"loading__placeholder")+'"></div>'},this.getTemplateData=function(){return this._templateData}}}),define("AsyncTemplateBinding",["require","RenderingQueue","AsyncRenderer"],function(e){"use strict";var t=e("RenderingQueue"),n=e("AsyncRenderer");return{init:function(e,r,i,s,o){var u=r(),a=new n(u);return u.foreach.subscribe&&a.subscribeToChanges(e,o),(new t(e,o,a)).execute(),{controlsDescendantBindings:!0}}}}),define("knockoutExtensions",["require","knockout","underscore","jquery","AsyncTemplateBinding"],function(e){"use strict";var t=e("knockout"),n=e("underscore"),r=e("jquery"),i=e("AsyncTemplateBinding");t.subscribable.fn.subscribeChanged=function(e){var t,r=this.subscribe(function(e){t=n.clone(e)},this,"beforeChange"),i=this.subscribe(function(n){e(n,t)});return{dispose:function(){r.dispose(),i.dispose()}}},t.bindingHandlers.refresh={init:function(e,n,i){var s=n().subscribe(function(){var t=i().ojComponent.component;r(e)[t]("refresh")});t.utils.domNodeDisposal.addDisposeCallback(e,function(){s.dispose()})}},t.bindingHandlers.clean={init:function(e,n){t.utils.domNodeDisposal.addDisposeCallback(e,function(){r("."+n()+"-applied-stylesheet").remove()})}},t.bindingHandlers.asyncTemplate=i,t.bindingHandlers.subscribe={init:function(e,n){var r=n();r.afterRender(e),t.utils.domNodeDisposal.addDisposeCallback(e,function(){r.beforeRemove(e)})}},t.unApplyBindings=function(e,n){e.find("*").each(function(){r(this).off(),r(this).unbind()}),e.off(),t.cleanNode(e[0]),e.find("*").each(function(){r(this).remove()}),n&&t.removeNode(e[0])}}),define("HandleEventsBinding",["require","knockout","jquery","underscore","EventsId"],function(e){"use strict";var t=e("knockout"),n=e("jquery"),r=e("underscore"),i=e("EventsId"),s=[i.ON_EXPAND.value,i.ON_COLLAPSE.value,i.ON_LOAD.value,i.ON_SUBMIT.value,i.ON_UNSELECTED.value,i.ON_ADD_ROW.value,i.ON_REMOVE_ROW.value];t.bindingHandlers.handleEvents={init:function(e,o){var u=t.unwrap(o()),a=n(e),l=u.getValidEvents(),h=[];r.each(l,function(e){var t=u.eventsQueue.execute.bind(this,u,e);if(!r.contains(s,e.value))switch(e.value){case i.ON_CHANGE.value:h.push(u.value.subscribe(t));break;case i.ON_EXPAND_TOGGLE.value:h.push(u.properties.expanded.subscribe(function(e){t(),e?u.eventsQueue.execute(u,i.ON_EXPAND):u.eventsQueue.execute(u,i.ON_COLLAPSE)}));break;case i.ON_SELECTED.value:var n=u.getParent(),o=n.controls().indexOf(u);h.push(n.properties.selectedPosition.subscribeChanged(function(e,t){t===o&&u.eventsQueue.execute(u,i.ON_UNSELECTED),e===o&&u.eventsQueue.execute(u,i.ON_SELECTED)}));break;default:a.on(e.event,t)}}),t.utils.domNodeDisposal.addDisposeCallback(e,function(){r.each(h,function(e){e.dispose()})})}}}),define("RendererComponent",["require","RendererViewModel","IconComponent","knockout","promise","RendererTemplateLoader","mediaBindingHandler","knockoutExtensions","HandleEventsBinding","!text!iconTemplate","!text!rendererTemplate"],function(e){"use strict";var t=e("RendererViewModel"),n=e("IconComponent"),r=e("knockout");e("promise"),e("RendererTemplateLoader"),e("mediaBindingHandler"),e("knockoutExtensions"),e("HandleEventsBinding"),r.components.register("actionable-icon",{viewModel:n,template:e("!text!iconTemplate")}),r.components.register("form-renderer",{viewModel:t,template:e("!text!rendererTemplate")})}),require(["knockout","RendererTemplateLoader","RendererComponent","HandleEventsBinding"],function(){"use strict";}),define("forms.renderer",[],function(){}),define("pcs/composer/pcsform/forms.renderer.lib.min",function(){}),define("pcs/pcsform/pcsFormUtil",["ojs/ojcore","knockout","pcs/util/pcsUtil","pcs/pcsform/PCSFormService","pcs/composer/pcsform/forms.renderer.lib.min"],function(e,t,n,r){"use strict";function i(){var e=this,n=r.getInstance();e.getConnector=function(e){var t={};return t.connectorHandler={execute:function(t){return new Promise(function(r,i){var s=t.formValues,o={};s&&(o.formValues=s);var u=JSON.stringify(o);n.executePCSFormRest({"{formDefId}":e,"{restExecutionId}":t.id},u).done(function(e){var n={response:{}};e instanceof Array?n.response[t.listBinding]=e:n.response=e,r(n)}).fail(function(e){i(e.responseText)})})},setContext:function(e){this.context=e}},t.restHandler={execute:function(e,t){return new Promise(function(r,i){n.executeRest(e.name,t).done(function(t){r(t[e.optionsListBinding])}).fail(function(e){i(e.responseText)})})},setContext:function(e){this.context=e}},t},e.isValidWebForm=function(e){var t=!0;return e.length===1&&(t=e.triggerHandler("validateData")),t},e.loadPCSForm=function(r){var i=$.Deferred(),s=r.formMetadataUrl,o=r.payload,u=r.webFormContainer,a=r.formRendererId;return s&&u&&a&&n.getFormMetaData(s).then(function(n){u[0].innerHTML="<div class='oj-row' style='margin-top:20px'><form-renderer id='"+a+"' params='value: data'></form-renderer></div>";var r={},f={},l={};for(var c in n)n.hasOwnProperty(c)&&(l[c]=n[c]);var h=s.lastIndexOf("/"),p=s.substr(h+1);f.form=l.form,o===undefined&&(o={}),l.payload=o,f.form.payload=l.payload,f.config=e.getConnector(p),f.config.domIdPrefix=a+"-",l.dependencies&&(f.dependencies=l.dependencies),r.data=f,t.cleanNode(u[0]),require(["RendererComponent"],function(e){t.applyBindings(r,u[0]),i.resolve()})},function(e){i.reject(e)}),i},e.saveOrSubmitPCSForm=function(e,t){var n=$.Deferred();return e.triggerHandler(t).then(function(e){try{var t=JSON.stringify(e.payload);n.resolve(t)}catch(r){n.reject(error)}}).catch(function(){n.reject()}),n}}return new i}),define("text!pcs/attachments/templates/pcs-attachments.html",[],function(){return"<div data-bind='component: {\n    name: \"attachmentComponent\",\n	params : {data : data}\n}'></div>\n"}),define("pcs/attachments/services/attachmentsDataService",["jquery","pcs/util/pcsUtil"],function(e,t){"use strict";function n(){var n=this;n.paths={taskAttachmentList:"tasks/{taskId}/attachments",ProcessesAttachmentList:"processes/{processId}/attachments",taskDcsFolderList:"tasks/{taskId}/folders",taskDcsFolderInfo:"tasks/{taskId}/folders/{folderId}"};var r=function(e,n,r){var i=new XMLHttpRequest;return i.onreadystatechange=function(){i.readyState===4&&i.status===200&&r(n,i.response)},i.open("GET",e,!0),i.withCredentials=!0,i.responseType="arraybuffer",i.setRequestHeader("Authorization",t.getAuthInfo()),t.isTestMode()&&i.setRequestHeader("pcs_mode","dev"),i.send(),i},i=function(n){return t.adfProxyCall(),e.ajax({type:"GET",cache:!1,url:n,beforeSend:function(e){e.setRequestHeader("Authorization",t.getAuthInfo()),t.isTestMode()&&e.setRequestHeader("pcs_mode","dev")},xhrFields:{withCredentials:!0},contentType:"application/json",dataType:"json"})},s=function(n,r,i){t.adfProxyCall();var s=new Uint8Array(r.length);for(var o=0;o<r.length;o++)s[o]=r.charCodeAt(o);return e.ajax({type:"POST",url:n,cache:!1,processData:!1,data:s,contentType:i,beforeSend:function(e){e.setRequestHeader("Authorization",t.getAuthInfo()),t.isTestMode()&&e.setRequestHeader("pcs_mode","dev")},xhrFields:{withCredentials:!0}})},o=function(n,r){return t.adfProxyCall(),e.ajax({type:"DELETE",url:encodeURI(n),beforeSend:function(e){e.setRequestHeader("Authorization",t.getAuthInfo()),t.isTestMode()&&e.setRequestHeader("pcs_mode","dev")},xhrFields:{withCredentials:!0},contentType:"application/json",dataType:r})};n.getAttachmentList=function(e,r){var s;return e==="task"?s=t.getRestURL()+n.paths.taskAttachmentList.replace("{taskId}",r):e==="processes"&&(s=t.getRestURL()+n.paths.ProcessesAttachmentList.replace("{processId}",r)),i(s)},n.uploadAttachment=function(e,r,i,o){var u;return e==="task"?u=t.getRestURL()+n.paths.taskAttachmentList.replace("{taskId}",r):e==="processes"&&(u=t.getRestURL()+n.paths.ProcessesAttachmentList.replace("{processesId}",r)),s(u,i,o)},n.deleteAttachment=function(e,r,i){var s;return e==="task"?s=t.getRestURL()+n.paths.taskAttachmentList.replace("{taskId}",r)+"/"+i:e==="processes"&&(s=t.getRestURL()+n.paths.ProcessesAttachmentList.replace("{processesId}",r)+"/"+i),o(s)},n.getAttachmentStream=function(e,t,n){return r(e,t,n)},n.getDcsFolders=function(e,r){var s;return e==="task"&&(s=t.getRestURL()+n.paths.taskDcsFolderList.replace("{taskId}",r)),i(s)},n.getDcsFolderInfo=function(e,r,s){var o;return e==="task"&&(o=t.getRestURL()+n.paths.taskDcsFolderInfo.replace("{taskId}",r).replace("{folderId}",s)),i(o)}}return new n}),define("text!pcs/attachments/view/attachmentsContainer.html",[],function(){return'<div class="oj-margin pcs-attachments-detailBox">\n\n	<div data-bind="if:showAttachments() && showDcsFolders()">\n		<div class="oj-flex oj-sm-flex-items-initial">\n			<div class="oj-flex-item pcs-attachments-caret-icon"  role="img" data-bind="attr:{title:bundle.pcs.attachments.foldersText}"></div>\n			<div class="oj-flex-item pcs-attachments-folders-text"><a href="#" data-bind="click : closeFolder,text:bundle.pcs.attachments.foldersText"></a></div>\n		</div>\n	</div>\n\n	<div data-bind="if:showAttachments()">\n		<div class="oj-flex oj-flex-bar">\n			<div data-bind="ifnot:showDcsFolders" class="pcs-attachments-title oj-flex-bar-start">\n				<label class="pcs-attachments-title" data-bind="text:bundle.pcs.attachments.title"></label>\n			</div>\n			<div data-bind="if:showDcsFolders" class="pcs-attachments-title oj-flex-bar-start">\n				<label class="pcs-attachments-title" data-bind="text:dscSelectedFolderName"></label>\n			</div>\n			<div class="pcs-attachments-uploadLink oj-flex-bar-end" style="padding-right:10px;" data-bind="ifnot:$data.displayDcs()">\n				<a href="#" data-bind="click : openUploadDialog, text:bundle.pcs.attachments.uploadLink"></a>\n			</div>\n		</div>\n	</div>\n	<div id="pcs-attachments-success-msg-container" style="display: none;margin-bottom:20px">\n		<span title="Success" role="img" class="oj-fwk-icon-status-confirmation oj-fwk-icon"></span>\n		<span id="pcs-attachments-success-msg" class="pcs-attachments-success-msg"></span>\n	</div>\n\n	<div id="pcs-attachments-error-msg-container" class="pcs-attachments-error-msg-container"  style="display: none">\n		<span class="oj-component-icon oj-message-status-icon oj-message-error-icon" role="img" id="pcs-attachments-error-msg-icon" style="float: left ;margin-right:10px" ></span>\n		<pre id="pcs-attachments-error-msg" class="pcs-attachments-error-msg"></pre>\n	</div>\n</div>\n\n<div class="pcs-attachments-actionBox oj-panel oj-panel-shadow-md oj-margin">\n\n\n	<div data-bind="ifnot:showAttachments()">\n		<div class="oj-flex oj-sm-flex-items-initial">\n\n			<ul class="pcs-attachments-attachmentsList" data-bind="foreach:dcsFolderList ">\n				<li>\n					<div class="oj-flex oj-flex-bar">\n						<div class="oj-flex-bar-start">\n							<!-- ko if:isFolder -->\n							<div class="oj-flex-item pcs-attachments-folder-icon"  role="img" data-bind="attr:{title:$parent.bundle.pcs.attachments.folderText}"></div>\n							<!-- /ko -->\n							<!-- ko ifnot:isFolder -->\n							<div class="oj-flex-item pcs-attachments-file-icon"  role="img" data-bind="attr:{title:$parent.bundle.pcs.attachments.fileText}"></div>\n							<!-- /ko -->\n							<div class="oj-flex-item"><a href="#" data-bind="click : $parent.openFolder,text:folderName"></a></div>\n\n						</div>\n					</div>\n				</li>\n			</ul>\n		</div>\n	</div>\n\n	<div data-bind="if:showAttachments()">\n\n		<!-- ko ifnot: $data.displayDcs() -->\n		<div data-bind="if:attachmentList().length == 0">\n			<span data-bind="text:bundle.pcs.attachments.noItemsText"></span>\n		</div>\n\n		<ul class="pcs-attachments-attachmentsList" data-bind="foreach:attachmentList ">\n			<li>\n				<div class="oj-flex oj-flex-bar">\n					<div class="oj-flex-bar-start">\n						<div data-bind="attr:{class:$parent.iconClass(filename, contentType)}">\n							<span>&nbsp;&nbsp;</span>\n						</div>\n						<div class="pcs-attachments-text">\n							<a data-bind="attr :{href:href , download : filename }, click:$parent.viewAttachment" target="_blank">\n								<p class="">\n									<span data-bind="text: filename"></span>\n								</p>\n							</a>\n							<span class="date pcs-attachments-sub-text">\n								<span data-bind="text: fileInfoText"></span>\n							</span>\n						</div>\n					</div>\n					<div class="pcs-attachments-removeFile oj-flex-bar-end">\n						<a href="#" data-bind="click:$parent.removeFileFromList">\n							<span class="oj-icon pcs-attachments-remove-icon" role="img" data-bind="attr:{title:$parent.bundle.pcs.attachments.removeFile}"></span>\n						</a>\n					</div>\n\n					<div style="display:none"  class="pcs-attachments-delete-dialog"\n						 data-bind="attr : { title : $parent.bundle.pcs.attachments.dialog_confirm}, ojComponent:{component: \'ojDialog\', initialVisibility: \'hide\'}">\n						<div class="oj-dialog-body">\n							<div data-bind="text : $parent.bundle.pcs.attachments.dialog_discard_msg"/>\n						</div>\n						<div class="oj-dialog-footer">\n							<button\n									data-bind="click : $parent.yesDeleteDialog ,\n                    ojComponent: {component: \'ojButton\', label: $parent.bundle.pcs.attachments.dialog_yes}"></button>\n							<button\n									data-bind="click : $parent.noDeleteDialog ,\n                    ojComponent: {component: \'ojButton\', label: $parent.bundle.pcs.attachments.dialog_no}"></button>\n						</div>\n					</div>\n				</div>\n				<hr/>\n			</li>\n		</ul>\n		<!-- /ko -->\n	</div>\n	<div id="pcs-attachments-overlay"/>\n\n</div>\n\n<div style="display:none" class="pcs-attachments-modalDialog"\n	 data-bind="attr: {title: bundle.pcs.attachments.uploadDialogTitle}, ojComponent:{component: \'ojDialog\', initialVisibility: \'hide\', rootAttributes: { style: \'width: 500px; min-width: 200px; max-width 500px;\'}}">\n	<div class="oj-dialog-body oj-form">\n		<div class="oj-flex">\n			<div class="oj-flex-item">\n				<div data-bind="ifnot:showDcsFolders">\n			<h6 data-bind="text:bundle.pcs.attachments.uploadSizeLimitText"></h6>\n		</div>\n			<div data-bind="if:showDcsFolders">\n				<h6 data-bind="text:bundle.pcs.attachments.docsUploadSizeLimitText"></h6>\n			</div>\n		</div>\n		</div>\n		<div class="oj-flex pcs-attachments-dialog-error-msg">\n			<span class="oj-fwk-icon-status-error"></span>&nbsp;&nbsp;<span class="oj-flex-item" data-bind="text: bundle.pcs.attachments.fileExists"></span>\n		</div>\n		<div class="oj-flex oj-sm-odd-cols-12 oj-md-odd-cols-4 oj-md-labels-inline\n			 oj-form-cols-labels-inline oj-form-cols-max2">\n			<div class="oj-flex-item">\n				<label for="pcs-attachments-fileControl" data-bind="text:bundle.pcs.attachments.browseToUploadLabel"></label>\n			</div>\n			<div class="oj-flex-item">\n				<input id="pcs-attachments-fileControl" type="file" class="pcs-attach-file-name"  title="Upload file" style="float:left; margin-left: 20px" />\n				<div class="pcs-empty-file-name-text" style="display: none;color:red;clear: both;" class="text-error" data-bind="text:bundle.pcs.attachments.emptyAddFileText"></div>\n			</div>\n		</div>\n	</div>\n	<div class="oj-dialog-footer">\n		<button class="pcs-attachments-upload-btn" data-bind="click: uploadAttachment, ojComponent: {component: \'ojButton\', label: \'Upload\', disabled : \'true\'}"> </button>\n	</div>\n</div>\n\n<div style="display:none" class="pcs-attachments-dcsModalDialog"\n	   data-bind="attr: {title: bundle.pcs.attachments.documents_dialog_title}, ojComponent:{component: \'ojDialog\', initialVisibility: \'hide\', close :dcsDialogClose, rootAttributes: { style: \'width: 800px; min-width: 300px; max-width 800px;\'}}">\n	<div class="oj-dialog-body" style="height:600px">\n		<iframe id="pcs-attachment-iframe" target="_top" data-bind="attr: {src: $data.dscSelectedAppLink}" frameborder="0" seamless="seamless" scrolling="auto"\n				style="overflow-x:hidden; width:100%;" height=550px" >\n			<p>Your browser does not support iframes.</p>\n		</iframe>\n\n	</div>\n\n</div>'}),define("pcs/attachments/viewModel/attachmentsContainer",["ojs/ojcore","knockout","pcs/util/pcsUtil","pcs/attachments/services/attachmentsDataService","ojs/ojknockout","ojs/ojdialog","ojs/ojbutton","text!pcs/attachments/view/attachmentsContainer.html","ojL10n!pcsMsg/nls/pcsSnippetsResource"],function(e,t,n,r){"use strict";function i(i){function o(e){if(e){s.displayDcs(!0);for(var t=0;t<e.length;t++){var n={folderId:e[t].folderId,folderName:e[t].folderName};e[t].type&&e[t].type==="d"?n.isFolder=!1:n.isFolder=!0,s.dcsFolderList.unshift(n)}}$("#pcs-attachments-overlay").removeClass("pcs-common-load-overlay"),s.rootElement.trigger("attachments:loaded")}function u(e,t){var n=t;e&&e.status===0&&(n=s.bundle.pcs.common.server_not_reachable),e&&e.status===500?n=e.responseText:e&&e.status===401&&(n=s.bundle.pcs.common.access_error_msg),$("#pcs-attachments-error-msg",s.rootElement).text(n),$("#pcs-attachments-error-msg-container",s.rootElement).show().delay(5e3),$("#pcs-attachments-overlay").removeClass("pcs-common-load-overlay")}function a(n){if(n)for(var r=0;r<n.length;r++){var i="";n[r].updatedDate&&n[r].updatedBy&&(i=s.bundle.pcs.attachments.dateByUserText,i=e.Translations.applyParameters(i,{0:n[r].updatedDate,1:n[r].updatedBy}));var o={filename:n[r].title,fileInfoText:i,serverUri:n[r].uri.href,href:t.observable("#"),contentType:n[r].mimeType};s.attachmentList.unshift(o)}$("#pcs-attachments-overlay").removeClass("pcs-common-load-overlay"),s.rootElement.trigger("attachments:loaded")}function f(e,t){e==="task"?($("#pcs-attachments-overlay").addClass("pcs-common-load-overlay"),s.data.isDocsEnabled?r.getDcsFolders(e,t).done(function(e){o(e.dcsfolder)}).fail(function(e,t,n){var r=s.bundle.pcs.attachments.fetch_attachments_error;u(e,r),s.rootElement.trigger("attachments:loaded")}):(s.displayDcs(!1),r.getAttachmentList(e,t).done(function(e){a(e.attachment)}).fail(function(e,t,n){var r=s.bundle.pcs.attachments.fetch_attachments_error;u(e,r),s.rootElement.trigger("attachments:loaded")}))):e==="processes"&&($("#pcs-attachments-overlay").addClass("pcs-common-load-overlay"),r.getAttachmentList(e,t).done(function(e){a(e.attachment)}).fail(function(e,t,n){var r=s.bundle.pcs.attachments.fetch_attachments_error;u(e,r),s.rootElement.trigger("attachments:loaded")}))}function c(e){$("#pcs-attachments-overlay").removeClass("pcs-common-load-overlay"),$(".pcs-attachments-dcsModalDialog").ojDialog("open"),s.msg={message:"setAppLinkTokens",appLinkRefreshToken:JSON.parse(e).refreshToken,appLinkAccessToken:JSON.parse(e).accessToken,appLinkRoleName:JSON.parse(e).role,embedPreview:!0},s.addDCSEventListener();var t=JSON.parse(e).appLinkUrl+"/cfg=hbr,evw,hdc,ndw";s.dscSelectedAppLink(t)}function g(e){var t=new Uint8Array(e),n=32768,r=[];for(var i=0;i<t.length;i+=n)r.push(String.fromCharCode.apply(null,t.subarray(i,i+n)));return r.join("")}var s=this;this.data=i.data,s.bundle=require("ojL10n!pcsMsg/nls/pcsSnippetsResource"),s.attachmentList=t.observableArray([]),s.dcsFolderList=t.observableArray([]),s.showDcsFolders=t.observable(!1),s.showAttachments=t.observable(!0),s.dscSelectedFolderName=t.observable(""),s.dscSelectedAppLink=t.observable(""),s.displayDcs=t.observable(!1),this.data.isDocsEnabled?(s.showDcsFolders(!0),s.showAttachments(!1)):(s.showDcsFolders(!1),s.showAttachments(!0));if(this.data.startFolderName!==""&&this.data.mode!=="task"&&this.data.mode!=="processes"){s.displayDcs(!1);var l={folderId:"",folderName:this.data.startFolderName,isFolder:!0};s.dcsFolderList.unshift(l)}this.data.container=s,this.rootElement=s.data.rootElement,s.data.hideDelete&&$(".pcs-attachments-removeFile",s.rootElement).hide(),s.data.hideUploadLink&&$(".pcs-attachments-uploadLink",s.rootElement).hide(),s.data.hideTitle&&$(".pcs-attachments-title",s.rootElement).hide(),s.data.mode==="task"||s.data.mode==="processes"?f(s.data.mode,s.data.id):s.rootElement.trigger("attachments:loaded"),s.openUploadDialog=function(){$(".pcs-attachments-dialog-error-msg").css("display","none"),$("#pcs-attachments-fileControl",this.element).val(""),$(".pcs-attachments-modalDialog").ojDialog("open"),$(".pcs-attachments-upload-btn").ojButton("option","disabled",!0)},s.openFolder=function(e){s.dscSelectedFolderName(e.folderName),s.data.mode==="task"&&e.folderId!==""?($("#pcs-attachments-overlay").addClass("pcs-common-load-overlay"),r.getDcsFolderInfo(s.data.mode,s.data.id,e.folderId).done(function(e){c(e.mafLink)}).fail(function(e,t,n){var r=s.bundle.pcs.attachments.fetch_attachments_error;u(e,r)})):s.showAttachments(!0)},s.dcsDialogClose=function(){console.log("closing"),s.cleanDCSEventListener()},s.OnDCSMessageEvent=function(e){if(e.data.message==="appLinkReady"){console.log("recieved");var t=$("#pcs-attachment-iframe")[0],n=t.contentWindow?t.contentWindow:t.contentDocument.defaultView;n.postMessage(s.msg,"*")}},s.cleanDCSEventListener=function(){console.log("removing"),n.eventHandler.removeHandler(window,"message",s.OnDCSMessageEvent)},s.addDCSEventListener=function(){console.log("adding"),n.eventHandler.addHandler(window,"message",s.OnDCSMessageEvent)},s.closeFolder=function(){s.showAttachments(!1)},s.iconClass=function(e,t){if(e)return t==="application/pdf"?"pcs-attachments-filepdf-icon":t==="application/zip"?"pcs-attachments-filezip-icon":t&&t.startsWith("image")?"pcs-attachments-fileimage-icon":t==="text/plain"?"pcs-attachments-filetxt-icon":e.endsWith("xls")||e.endsWith("xlsx")?"pcs-attachments-filexls-icon":e.endsWith("doc")||e.endsWith("docx")?"pcs-attachments-filedoc-icon":e.endsWith("ppt")||e.endsWith("pptx")?"pcs-attachments-fileppt-icon":"pcs-attachments-fileother-icon"},s.removeFileFromList=function(e,t){var n=$(t.currentTarget).parent();n.siblings().find(".pcs-attachments-delete-dialog").ojDialog("open")},s.yesDeleteDialog=function(t){if(s.data.mode==="task"||s.data.mode==="processes"){var n=t.filename,i=t;$("#pcs-attachments-overlay").addClass("pcs-common-load-overlay"),r.deleteAttachment(s.data.mode,s.data.id,n).done(function(t){s.attachmentList.remove(i),s.rootElement.trigger("attachments:attachmentRemoved",[i]),$(".pcs-attachments-delete-dialog").ojDialog("close");var r=s.bundle.pcs.attachments.upload_attachment_delete;r=e.Translations.applyParameters(r,{0:n}),$("#pcs-attachments-success-msg",s.rootElement).text(r),$("#pcs-attachments-success-msg-container",s.rootElement).show().delay(5e3).fadeOut(2e3),$("#pcs-attachments-overlay").removeClass("pcs-common-load-overlay")}).fail(function(e,t,n){var r=s.bundle.pcs.attachments.delete_attachment_error;u(e,r)})}else s.attachmentList.remove(t),s.rootElement.trigger("attachments:attachmentRemoved",[t]),$(".pcs-attachments-delete-dialog").ojDialog("close")},s.noDeleteDialog=function(){$(".pcs-attachments-delete-dialog").ojDialog("close")};var h={};s.uploadAttachment=function(){if(h.name!==""){for(var t=0;t<s.attachmentList().length;t++)if(s.attachmentList()[t].filename===h.name){$(".pcs-attachments-dialog-error-msg").css("display","block");return}var n=s.bundle.pcs.attachments.dateByUserTextTmp,i={filename:h.name,fileInfoText:n,href:h.src,contentType:h.contentType,content:h.content};if(s.data.mode==="task"||s.data.mode==="processes"){$("#pcs-attachments-overlay").addClass("pcs-common-load-overlay");var o="Boundary_123456789_123456789",a="--"+o+"\r\n",f="\r\n--"+o+"--\r\n",l=a;l+="Content-Disposition: inline\r\n",l+="Content-Type: application/json\r\n\r\n";var c={attachmentName:i.filename,mimeType:i.contentType,attachmentSize:h.size,attachmentScope:"BPM"};l+=JSON.stringify(c)+"\r\n",l+=a,l+="Content-Transfer-Encoding: binary\r\n\r\n",l+=i.content,l+=f;var p="multipart/mixed; boundary="+o;r.uploadAttachment(s.data.mode,s.data.id,l,p).done(function(t){s.attachmentList.unshift(i),s.rootElement.trigger("attachments:attachmentUploaded",[i]);var n=s.bundle.pcs.attachments.upload_attachment_success;n=e.Translations.applyParameters(n,{0:i.filename}),$("#pcs-attachments-success-msg",s.rootElement).text(n),$("#pcs-attachments-success-msg-container",s.rootElement).show().delay(5e3).fadeOut(2e3),$("#pcs-attachments-overlay").removeClass("pcs-common-load-overlay")}).fail(function(e,t,n){var r=s.bundle.pcs.attachments.upload_attachment_error;u(e,r)})}else s.attachmentList.unshift(i),s.rootElement.trigger("attachments:attachmentUploaded",[i])}$(".pcs-attachments-modalDialog").ojDialog("close")};if(s.data.attachments)for(var p=0;p<s.data.attachments.length;p++){var d=null,v=function(e,t){var n=new Uint8Array(e.length);for(var r=0;r<e.length;r++)n[r]=e.charCodeAt(r);var i=new Blob([n],{type:t});return d!==null&&window.URL.revokeObjectURL(d),d=window.URL.createObjectURL(i),d},m=s.data.attachments[p];m.href===""&&(m.href=v(m.content,m.contentType)),s.attachmentList.unshift(m)}$("#pcs-attachments-fileControl").change(function(e){var t=e.target.files[0];if(t){var n=new FileReader;n.onload=function(e){h.name=t.name,h.content=g(e.target.result),t.type===""?h.contentType="application/octet-stream":h.contentType=t.type,h.size=t.size,h.src=window.URL.createObjectURL(t)},n.readAsArrayBuffer(t)}else console.log("Failed to load file");$(".pcs-attachments-upload-btn").ojButton("option","disabled",!1)}),s.dispose=function(){console.log("dispose in attachment Containor")},s.viewAttachment=function(e,n){var i,s,o;if(t.isObservable(e.href)){var u=$(n.currentTarget),a=function(e,t){var n=new Blob([t],{type:e.contentType}),r=window.URL.createObjectURL(n);e.href(r),e.content=g(t),$("#pcs-attachments-overlay").removeClass("pcs-common-load-overlay"),window.navigator.msSaveOrOpenBlob?window.navigator.msSaveOrOpenBlob(n,e.filename):u[0].click()};if(e.href()==="#")return $("#pcs-attachments-overlay").addClass("pcs-common-load-overlay"),r.getAttachmentStream(e.serverUri,e,a,u),!1;if(window.navigator.msSaveOrOpenBlob){i=new Uint8Array(e.content.length);for(o=0;o<e.content.length;o++)i[o]=e.content.charCodeAt(o);return s=new Blob([i],{type:e.contentType}),window.navigator.msSaveOrOpenBlob(s,e.filename),!1}return!0}if(window.navigator.msSaveOrOpenBlob){i=new Uint8Array(e.content.length);for(o=0;o<e.content.length;o++)i[o]=e.content.charCodeAt(o);return s=new Blob([i],{type:e.contentType}),window.navigator.msSaveOrOpenBlob(s,e.filename),!1}return!0}}return i}),define("pcs/pcs.attachments",["ojs/ojcore","knockout","jquery","text!pcs/attachments/templates/pcs-attachments.html","ojL10n!pcsMsg/nls/pcsSnippetsResource","jqueryui-amd/widget","pcs/attachments/viewModel/attachmentsContainer","text!pcs/attachments/view/attachmentsContainer.html"],function(e,t,n,r,i){"use strict";n.widget("pcs.attachments",{options:{hideDelete:!1,hideUploadLink:!1,hideTitle:!1,attachments:[],startFolderName:"",mode:"start",id:-1,readOnly:!1,isDocsEnabled:!1},_create:function(){function o(){var n=this;t.components.isRegistered("attachmentComponent")||t.components.register("attachmentComponent",{template:{require:"text!pcs/attachments/view/attachmentsContainer.html"},viewModel:{require:"pcs/attachments/viewModel/attachmentsContainer"}}),n.data=s,e.options.readOnly&&(n.data.hideUploadLink=!0,n.data.hideDelete=!0)}var e=this;if(n.pcsConnection===undefined){this.element.html("<div style='color:red'>"+i.pcs.common.pcs_connection+" </div>");return}var s={rootElement:e.element,hideDelete:e.options.hideDelete,hideUploadLink:e.options.hideUploadLink,hideTitle:e.options.hideTitle,attachments:e.options.attachments,startFolderName:e.options.startFolderName,mode:e.options.mode,id:e.options.id,isDocsEnabled:e.options.isDocsEnabled},u=new o;e.model=u,this.element.html(r),t.applyBindings(u,this.element[0])},destroy:function(){n.Widget.prototype.destroy.call(this)},_destroy:function(){console.log("Destroying attachments"),this.model&&this.model.data&&this.model.data.container&&this.model.data.container.dispose()},_setOption:function(e,t){this.options[e]=t,n.Widget.prototype._setOption.apply(this,arguments)},getAttachments:function(){var e=this.model.data.container.attachmentList();return e}})}),define("text!pcs/comments/templates/pcs-comments.html",[],function(){return'<div class="oj-row oj-panel" data-bind=\'component: {\n    name: "commentComponent",\n	params : {data : data}\n}\'></div>\n'}),define("pcs/comments/services/commentsDataService",["jquery","pcs/util/pcsUtil"],function(e,t){"use strict";function n(){var n=this;n.paths={taskCommentList:"tasks/{taskId}/comments",ProcessesCommentList:"processes/{processId}/comments"};var r=function(n){return t.adfProxyCall(),e.ajax({type:"GET",url:n,beforeSend:function(e){e.setRequestHeader("Authorization",t.getAuthInfo()),t.isTestMode()&&e.setRequestHeader("pcs_mode","dev")},xhrFields:{withCredentials:!0},contentType:"application/json",dataType:"json"})},i=function(n,r,i){return t.adfProxyCall(),console.log(r),e.ajax({type:"POST",url:n,data:r,contentType:i,dataType:"json",beforeSend:function(e){e.setRequestHeader("Authorization",t.getAuthInfo()),t.isTestMode()&&e.setRequestHeader("pcs_mode","dev")},xhrFields:{withCredentials:!0}})};n.getCommentList=function(e,i){var s;return e==="task"?s=t.getRestURL()+n.paths.taskCommentList.replace("{taskId}",i):e==="processes"&&(s=t.getRestURL()+n.paths.ProcessesCommentList.replace("{processId}",i)),r(s)},n.postComment=function(e,r,s,o){var u;return e==="task"?u=t.getRestURL()+n.paths.taskCommentList.replace("{taskId}",r):e==="processes"&&(u=t.getRestURL()+n.paths.ProcessesCommentList.replace("{processId}",r)),i(u,s,o)}}return new n}),define("text!pcs/comments/view/commentsContainer.html",[],function(){return'<div class="pcs-comments-detailBox">\n\n\n	<div class="pcs-comments-titleBox">\n		<h3><label class="pcs-comments-title" data-bind="text:bundle.pcs.comments.title"/></h3>\n	</div>\n\n	<div class="row pcs-comments-commontBox no-gutter" style="margin-top:20px;margin-right: 20px">\n\n		<div id="form-container" class="oj-form-layout pcs-comments-inputCommentContainer">\n			<div class="oj-form oj-sm-odd-cols-12 oj-md-odd-cols-12 oj-md-labels-inline">\n\n				<!--div class="oj-flex"-->\n					<!--div role="group" aria-labelledby="filter" class="oj-form" -->\n						<div class="oj-flex">\n							<div class="oj-flex-item" >\n								<textarea id="pcs-comments-inputComment" style="resize: both;"\n										  data-bind="ojComponent: {component: \'ojTextArea\',  rootAttributes: {style:\'max-width:100%\'},\n                                     value: commentStr, placeholder:bundle.pcs.comments.placeholder}" ></textarea>\n							</div>\n						<!--/div-->\n\n					<!--/div-->\n				</div>\n\n				<div class="oj-row oj-sm-text-align-end" style="display: inline-block;margin-top:5px">\n					<button id="pcs-comments-postComment" style="display: inline-block;text-align: center;"\n							data-bind="click: postComment,\n                               ojComponent: { component: \'ojButton\', label: bundle.pcs.comments.addCommentButton }">\n					</button>\n				</div>\n			</div>\n		</div>\n	</div>\n\n	<!--span id="pcs-comments-error-text" style="color:red;display:none" >Adding comment failed</span-->\n\n	<div id="pcs-comments-success-msg-container" style="display: none;margin-bottom:20px">\n		<span title="Success" role="img" class="oj-fwk-icon-status-confirmation oj-fwk-icon"></span>\n		<span id="pcs-comments-success-msg" class="pcs-comments-success-msg"></span>\n	</div>\n\n	<div id="pcs-comments-error-msg-container" class="pcs-comments-error-msg-container"  style="display: none">\n		<span class="oj-component-icon oj-message-status-icon oj-message-error-icon" role="img" id="pcs-comments-error-msg-icon" style="float: left ;margin-right:10px" ></span>\n		<pre id="pcs-comments-error-msg" class="pcs-comments-error-msg"></pre>\n	</div>\n\n	<div class="pcs-comments-actionBox">\n		<ul class="pcs-comments-commentList" data-bind="foreach:comments ">\n			<li>\n				<table width="100%" cellpadding="5">\n					<tr>\n						<td style="white-space:nowrap">\n							<div style="font-weight:bold" data-bind="text: updatedBy"/>\n						</td>\n						<td  width="99%">\n							<div style="font-weight:bold" data-bind="text: updatedDate"/>\n						</td>\n					</tr>\n					<tr>\n						<td colspan="2">\n							<div class="pcs-comments-commentStr">\n								<p data-bind="text: commentStr"/>\n							</div>\n						</td>\n					</tr>\n				</table>\n				<hr/>\n			</li>\n		</ul>\n		<div id="pcs-comments-overlay"/>\n	</div>\n</div>\n'}),define("pcs/comments/viewModel/commentsContainer",["ojs/ojcore","knockout","pcs/util/pcsUtil","pcs/comments/services/commentsDataService","ojs/ojknockout","ojs/ojdialog","ojs/ojbutton","ojs/ojinputtext","text!pcs/comments/view/commentsContainer.html","ojL10n!pcsMsg/nls/pcsSnippetsResource"],function(e,t,n,r){"use strict";function i(e){function i(e,t){t&&t!==""&&(e==="task"||e==="process")&&($("#pcs-comments-overlay").addClass("pcs-common-load-overlay"),r.getCommentList(e,t).done(function(e){if(e.comment)for(var t=e.comment.length-1;t>=0;t--)n._addCommentItem(e.comment[t]);$("#pcs-comments-overlay").removeClass("pcs-common-load-overlay"),n.rootElement.trigger("comments:loaded")}).fail(function(e,t,r){$("#pcs-comments-overlay").removeClass("pcs-common-load-overlay"),n.rootElement.trigger("comments:loaded")}))}var n=this;this.data=e.data,n.bundle=require("ojL10n!pcsMsg/nls/pcsSnippetsResource"),this.data.container=n,this.rootElement=n.data.rootElement,n.data.readOnly&&$(".pcs-comments-inputCommentContainer",n.rootElement).hide(),n.data.hideTitle&&$(".pcs-comments-titleBox",n.rootElement).hide(),n.comments=t.observableArray([]),n.commentStr=t.observable(""),(n.data.mode==="task"||n.data.mode==="process")&&i(n.data.mode,n.data.id);var s=function(e,t,n,r){this.commentStr=e,this.updatedBy=t,this.userId=n,this.updatedDate=r},o=function(e,t){this.commentStr=e,this.commentScope=t};n._addCommentItem=function(e){var t=new s(e.commentStr,e.updatedBy,e.userId,e.updateddDate);n.comments.unshift(t)},n.dispose=function(){console.log("dispose in comments Containor")},n.postComment=function(){var e=new o(n.commentStr(),"BPM"),t="application/json";$("#pcs-comments-overlay").addClass("pcs-common-load-overlay"),r.postComment(n.data.mode,n.data.id,JSON.stringify(e),t).done(function(t){if(t.comment){n.comments.removeAll();for(var r=t.comment.length-1;r>=0;r--)n._addCommentItem(t.comment[r])}n.rootElement.trigger("comments:commentAdded",[e]);var i=n.bundle.pcs.comments.add_comment_success;$("#pcs-comments-success-msg",n.rootElement).text(i),$("#pcs-comments-success-msg-container",n.rootElement).show().delay(5e3).fadeOut(2e3),n.commentStr(""),$("#pcs-comments-overlay").removeClass("pcs-common-load-overlay")}).fail(function(e,t,r){var i=n.bundle.pcs.comments.post_error;e&&e.status===0&&(i=n.bundle.pcs.common.server_not_reachable),e&&e.status===500?i=e.responseText:e&&e.status===401&&(i=n.bundle.pcs.common.access_error_msg),$("#pcs-comments-error-msg",n.rootElement).text(i),$("#pcs-comments-error-msg-container",n.rootElement).show().delay(5e3).fadeOut(2e3),$("#pcs-comments-overlay",n.rootElement).removeClass("pcs-common-load-overlay")})}}return i}),define("pcs/pcs.comments",["ojs/ojcore","knockout","jquery","text!pcs/comments/templates/pcs-comments.html","ojL10n!pcsMsg/nls/pcsSnippetsResource","jqueryui-amd/widget","pcs/comments/viewModel/commentsContainer","text!pcs/comments/view/commentsContainer.html"],function(e,t,n,r,i){"use strict";n.widget("pcs.comments",{options:{readOnly:!1,hideTitle:!1,mode:"task",id:-1},_create:function(){function o(){var e=this;t.components.isRegistered("commentComponent")||t.components.register("commentComponent",{template:{require:"text!pcs/comments/view/commentsContainer.html"},viewModel:{require:"pcs/comments/viewModel/commentsContainer"}}),e.data=s}var e=this;if(n.pcsConnection===undefined){this.element.html("<div style='color:red'>"+i.pcs.common.pcs_connection+" </div>");return}var s={rootElement:e.element,readOnly:e.options.readOnly,hideTitle:e.options.hideTitle,mode:e.options.mode,id:e.options.id},u=new o;e.model=u,this.element.html(r),t.applyBindings(u,this.element[0])},destroy:function(){n.Widget.prototype.destroy.call(this)},_destroy:function(){console.log("Destroying comments"),this.model&&this.model.data&&this.model.data.container&&this.model.data.container.dispose()},_setOption:function(e,t){this.options[e]=t,n.Widget.prototype._setOption.apply(this,arguments)},getComments:function(){var e=this.model.data.container.commentList();return e}})}),define("text!pcs/taskdetail/templates/pcs-task-history.html",[],function(){return'<div id="pcs-td-history-cont">\n    <div class="oj-message oj-message-error" id="pcs-td-history-error" style="display: none;margin:10px" >\n        <span class="oj-component-icon oj-message-status-icon oj-message-error-icon"\n              role="img">\n        </span>\n        <span class="oj-message-content">\n            <div class="oj-message-summary" data-bind="text:$parent.bundle.pcs.taskdetail.history_error">\n            </div>\n        </span>\n    </div>\n\n    <!-- ko if: typeof taskHistory != \'undefined\' -->\n        <!-- ko foreach: taskHistory -->\n        <table cellpadding="3" class="pcs-td-history-tbl" width="100%">\n            <tbody>\n            <tr>\n                <td rowspan="2" width="75px">\n                    <div class="pcs-common-center-align pcs-td-history-user"/>\n                </td>\n                <td>\n                    <div class="pcs-td-history-firstLine" data-bind="text:displayName"></div>\n                </td>\n            </tr>\n            <tr>\n                <td>\n                    <div class="pcs-td-history-secondLine" data-bind="text:secondLine"></div>\n                </td>\n            </tr>\n            </tbody>\n        </table>\n        <!-- /ko -->\n    <!-- /ko -->\n</div>\n'}),define("pcs/taskdetail/viewModel/taskHistoryContainer",["ojs/ojcore","knockout","pcs/taskdetail/services/taskdetailDataService","ojs/ojknockout"],function(e,t,n){"use strict";function r(e){var r=this;r.taskNumber=e.taskNumber,r.rootElement=e.rootElement,r.taskHistory=t.observableArray([]),r.initTaskHistory=function(){n.getTaskHistory(r.taskNumber).done(function(e,t,n){$("#pcs-td-history-error",r.rootElement).hide(),r.populateTaskHistory(e)}).fail(function(e){$("#pcs-td-history-error",r.rootElement).show()})},r.populateTaskHistory=function(e){r.taskHistory.removeAll();var t=e.taskHistory;if(t){for(var n=0;n<t.length;n++){var i={displayName:t[n].displayName,actionName:t[n].actionName,updatedDate:t[n].updatedDate,secondLine:t[n].actionName+", "+t[n].updatedDate};r.taskHistory.push(i)}r.taskHistory.reverse()}},r.rootElement.on("taskdetail:commentAdded",function(e,t){r.initTaskHistory()}),r.initTaskHistory()}return r}),define("text!pcs/conversation/templates/pcs-conversation.html",[],function(){return'<div id="pcs-conv-mainContainer" class="oj-row oj-panel">\n\n    <div id="pcs-conv-error-msg-container" style="display: none">\n        <span class="oj-component-icon oj-message-status-icon oj-message-error-icon" role="img"\n              id="pcs-conv-error-msg-icon" style="float: left ;margin-right:10px" ></span>\n        <pre id="pcs-conv-error-msg" class="pcs-conv-error-msg"></pre>\n    </div>\n\n    <div id="pcs-conv-loading-msg" style="display: none"></div>\n\n    <div class="pcs-conv-applink-container" style="margin:20px">\n\n        <div class="oj-row pcs-common-center-align" id="pcs-conv-loading">\n            <div class="pcs-common-center-align pcs-common-loading"/>\n        </div>\n\n        <iframe src="about:blank" frameborder="0"\n                scrolling="no" id="pcs-conv-applink" name="if1"\n                style="width:100%;  height:50px;" seamless="seamless">\n            &lt;/div&gt;&lt;/div&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;&lt;/span&gt;\n        </iframe>\n    </div>\n</div>'}),define("pcs/conversation/services/conversationDataService",["jquery","pcs/util/pcsUtil"],function(e,t){"use strict";function n(){var n=this;n.paths={tasksConversations:"tasks/{taskId}/conversations",processConversations:"processes/{processId}/conversations",loggedInUser:"identities/loggedInUser"};var r=function(n){return t.adfProxyCall(),e.ajax({type:"GET",url:n,beforeSend:function(e){e.setRequestHeader("Authorization",t.getAuthInfo()),t.isTestMode()&&e.setRequestHeader("pcs_mode","dev")},xhrFields:{withCredentials:!0},contentType:"application/json",dataType:"json"})};n.getConversations=function(e,i){var s;return e==="task"?s=t.getRestURL()+n.paths.tasksConversations.replace("{taskId}",i):e==="processes"&&(s=t.getRestURL()+n.paths.processConversations.replace("{processId}",i)),r(s)},n.getAppLink=function(e){return r(e)},n.getLoggedInUser=function(){var e=t.getRestURL()+n.paths.loggedInUser;return r(e)}}return new n}),define("pcs/conversation/viewModel/conversationContainer",["knockout","pcs/conversation/services/conversationDataService","pcs/util/pcsUtil","ojL10n!pcsMsg/nls/pcsSnippetsResource"],function(e,t,n){"use strict";function r(e){function r(e,t){var r=JSON.parse(e),i=r.appLinkURL,s=i.substring(i.indexOf("/conversations"),i.length),o=r.accessToken,u=i.substring(0,i.indexOf("/conversations"))+"?hide=navMenu+sidebar+fullView+search+uploadAndCopy+documents+help";$("#pcs-conv-applink",n.rootElement)[0].src="about:blank",$("#pcs-conv-applink",n.rootElement).hide();var a=$.Deferred();a.done(function(){$(window).one("message",function(e){var t=e;t.originalEvent.data.message==="navigate-ack"?(console.log("Event message received::"+t.originalEvent.data.message),$("#pcs-conv-loading",n.rootElement).hide(),$("#pcs-conv-loading-msg",n.rootElement).hide(),$("#pcs-conv-applink",n.rootElement).css("height","500px").show()):console.log("OOPS - stray postMessage caused listener to stop; retry last action")});var e={message:"navigate",path:s,accessToken:o,highlight:t};console.log("Posting message: "+e),$("#pcs-conv-applink",n.rootElement)[0].contentWindow.postMessage(e,"*")});if(!$("#pcs-conv-applink",n.rootElement)[0].src||$("#pcs-conv-applink",n.rootElement)[0].src==="about:blank"){$(window).one("message",function(e){var t=e;t.originalEvent.data.status==="listening"?(console.log("Event Message:"+t.originalEvent.data.status),a.resolve()):console.log("OOPS - stray postMessage caused listener to stop; reload")}),$("#pcs-conv-applink",n.rootElement)[0].src=u;var f=n.bundle.pcs.conversation.docs_wait;$("#pcs-conv-loading-msg",n.rootElement).text(f).show()}else a.resolve()}var n=this;n.bundle=require("ojL10n!pcsMsg/nls/pcsSnippetsResource"),n.data=e.data,n.rootElement=n.data.rootElement,n.ajaxErrorHandler=function(e,t){var r;e&&e.status===0&&(r=n.bundle.pcs.common.server_not_reachable),e&&(e.status===500||e.status===401||e.status===404)&&(r=e.responseText);if(r===undefined||r==="")r=t;$("#pcs-conv-error-msg",n.rootElement).text(r),$("#pcs-conv-error-msg-container",n.rootElement).show(),$("#pcs-conv-loading",n.rootElement).hide()},n.initConversation=function(){if(n.data.mode==="task")t.getConversations(n.data.mode,n.data.id).done(function(e){if(e&&e.conversationInstanceList&&e.conversationInstanceList.length>0){var i=e.conversationInstanceList[0].links[0].href;t.getAppLink(i).done(function(e){if(e&&e.appLink){var i=e.appLink;t.getLoggedInUser().done(function(e){if(e&&e.id)r(i,e.id);else{var t=n.bundle.pcs.conversation.user_fetch_error;n.ajaxErrorHandler(undefined,t)}n.rootElement.trigger("conversations:loaded")}).fail(function(e,t,r){var i=n.bundle.pcs.conversation.user_fetch_error;n.ajaxErrorHandler(e,i),n.rootElement.trigger("conversations:loaded")})}else{var s=n.bundle.pcs.conversation.conv_connection_error;n.ajaxErrorHandler(undefined,s),n.rootElement.trigger("conversations:loaded")}}).fail(function(e,t,r){var i=n.bundle.pcs.conversation.conv_connection_error;n.ajaxErrorHandler(e,i),n.rootElement.trigger("conversations:loaded")})}else{var s=n.bundle.pcs.conversation.no_conversation;n.ajaxErrorHandler(undefined,s),n.rootElement.trigger("conversations:loaded")}}).fail(function(e,t,r){var i=n.bundle.pcs.conversation.conv_load_error;n.ajaxErrorHandler(e,i),n.rootElement.trigger("conversations:loaded")});else if(n.data.mode!=="process"){var e=n.bundle.pcs.conversation.conv_mode_error;n.ajaxErrorHandler(undefined,e)}},n.clearOSNFrame=function(e){$("#pcs-conv-applink",n.rootElement)[0].src="about:blank",console.log("Conversation iframe src set to aboutb:blank")},n.dispose=function(){console.log("dispose in conversation Containor"),n.clearOSNFrame()},n.initConversation()}return r}),define("text!pcs/conversation/templates/pcs-conversation-error.html",[],function(){return'<div class="oj-message oj-message-error">\n    <span class="oj-component-icon oj-message-status-icon oj-message-error-icon"\n          role="img">\n    </span>\n    <span class="oj-message-content">\n        <div class="oj-message-summary">\n            Required parameters are missing\n        </div>\n        <div class="oj-message-detail">\n            <span>This component requires these values -</span>\n            <pre>\n    *id : \'\'\n    </pre>\n        </div>\n    </span>\n</div>\n'}),define("pcs/pcs.conversation",["ojs/ojcore","knockout","jquery","text!pcs/conversation/templates/pcs-conversation.html","pcs/conversation/viewModel/conversationContainer","text!pcs/conversation/templates/pcs-conversation-error.html","ojL10n!pcsMsg/nls/pcsSnippetsResource","jqueryui-amd/widget"],function(e,t,n,r,i,s,o){"use strict";n.widget("pcs.conversation",{options:{mode:"task",id:""},_isValid:function(){return this.options.id===undefined||this.options.id===""||this.options.mode===undefined||this.options.mode===""?!1:this.options.mode.toLowerCase()==="task"||this.options.mode.toLowerCase()==="process"?!0:!1},_create:function(){var e=this;if(n.pcsConnection===undefined){this.element.html("<div style='color:red'>"+o.pcs.common.pcs_connection+" </div>");return}if(!this._isValid()){this.element.html(s);return}var u=this.options;u.rootElement=e.element;var a={data:u};this.element.html(r);var f=new i(a);this.model=f,t.applyBindings(f,this.element[0])},destroy:function(){n.Widget.prototype.destroy.call(this)},_destroy:function(){console.log("Destroying conversation"),this.model&&this.model.dispose()},_setOption:function(e,t){this.options[e]=t,n.Widget.prototype._setOption.apply(this,arguments)}})}),define("pcs/taskdetail/viewModel/taskdetailContainer",["ojs/ojcore","knockout","pcs/taskdetail/services/taskdetailDataService","pcs/util/pcsUtil","pcs/pcsform/pcsFormUtil","ojs/ojknockout","ojs/ojdialog","ojs/ojinputtext","ojs/ojbutton","ojs/ojcollapsible","pcs/pcs.attachments","pcs/pcs.comments","text!pcs/taskdetail/templates/pcs-task-history.html","pcs/taskdetail/viewModel/taskHistoryContainer","ojs/ojselectcombobox","ojL10n!pcsMsg/nls/pcsSnippetsResource","pcs/pcs.conversation"],function(e,t,n,r,i){"use strict";function s(s){function f(){var e=o.bundle.pcs.taskdetail.form_validation_error;o.formErrorHandler(null,e),$("#pcs-td-overlay").removeClass("pcs-common-load-overlay")}var o=this;o.bundle=require("ojL10n!pcsMsg/nls/pcsSnippetsResource"),o.data=s.data,o.rootElement=o.data.rootElement,o.taskNumber=o.data.taskNumber,o.formType="frevvo",o.formURL=t.observable(),o.selectedTaskObject="",o.taskObject={customActions:t.observableArray([]),systemActions:t.observableArray([]),assignedDate:t.observable(),createdDate:t.observable(),updatedDate:t.observable(),dueDate:t.observable(),creator:t.observable(),fromUser:t.observable(),number:t.observable(),owner:t.observable(),priority:t.observableArray([]),processName:t.observable(),title:t.observable(),shortSummary:t.observable(),outcome:t.observable()},o.priorityOptions=t.observableArray([{value:"HIGH",label:o.bundle.pcs.taskdetail.priority_high},{value:"NORMAL",label:o.bundle.pcs.taskdetail.priority_normal},{value:"LOW",label:o.bundle.pcs.taskdetail.priority_low}]),o.priorityMap={1:"HIGH",2:"HIGH",3:"NORMAL",4:"LOW",5:"LOW"},o.priorityStringMap={HIGH:1,NORMAL:3,LOW:5},o.showResize=t.observable(!o.data.hideResize||!1),o.viewExpanded=t.observableArray(o.data.viewExpanded?["true"]:[]),o.waitForMessage=!1,o.readOnly=t.observable(!1),o.viewExpandedSubscription=o.viewExpanded.subscribe(function(e){var t=e[0]==="true";$("#pcs-td-expand",o.rootElement).trigger("taskdetail:expandDetailView",t)}),o.componentRenderCount=0;var u=function(){o.componentRenderCount++},a=function(){console.log(o.componentRenderCount),o.componentRenderCount--,o.componentRenderCount===0&&setTimeout(function(){o.rootElement.trigger("taskdetail:loaded")},500)};o.initTaskdetail=function(){$("#pcs-td-overlay").addClass("pcs-common-load-overlay"),n.getTaskObject(o.taskNumber).done(function(e,t,n){$("#pcs-td-overlay").removeClass("pcs-common-load-overlay"),$("#pcs-td-error",o.rootElement).hide(),$("#pcs-td-detailContainer",o.rootElement).show(),o._populateTaskObject(e),e.formMetadata&&e.formMetadata.indexOf("/webforms/")?o.formType="webform":o.formType="frevvo",o.initForm(e),o.initAttachment(),o.initComments(),o.initConversation(),o.renderFlag=!1}).fail(function(e){$("#pcs-td-overlay").removeClass("pcs-common-load-overlay"),$("#pcs-td-detailContainer",o.rootElement).hide();var t="";o.tdContainerErrorHandler(e,t)})},o.cleanUpFormContainer=function(){if(o.formType==="webform"){var e=$("#pcs-td-form-container",o.rootElement);e&&e.length>0&&(t.cleanNode(e[0]),r.unApplyBindings(e,!1))}},o.tdContainerErrorHandler=function(e,t){var n=o.ajaxErrorHandler(e,t);$("#pcs-td-error-msg",o.rootElement).text(n),$("#pcs-td-error",o.rootElement).show()},o.actionErrorHandler=function(e,t){var n=o.ajaxErrorHandler(e,t);$("#pcs-td-action-error-msg",o.rootElement).text(n),$("#pcs-td-action-error-msg-container",o.rootElement).show().delay(5e3).fadeOut(2e3)},o.formErrorHandler=function(e,t){var n=o.ajaxErrorHandler(e,t);$("#pcs-td-form-error-msg",o.rootElement).text(n),$("#pcs-td-form-error-container",o.rootElement).show().delay(5e3).fadeOut(2e3)},o.ajaxErrorHandler=function(e,t){var n=t;return e&&e.status===0&&(n=o.bundle.pcs.common.server_not_reachable),e&&e.status===500?n=e.responseText:e&&e.status===401?n=e.responseText:e&&e.status===404&&(n=o.bundle.pcs.common.not_found_error),n},o.initForm=function(e){o.formType==="webform"?o.initWebform(e):o.initFrevvoForm()},o.initWebform=function(e){$("#pcs-td-form-loading",o.rootElement).show();if(e.payload&&e.payload.payload&&e.payload.payload.href){var t=e.payload.payload.href,r=e.formMetadata;r&&t&&(u(),n.getTaskPayloadByURL(t).done(function(e){var t=$("#pcs-td-form-container",o.rootElement),n="task-"+o.taskNumber,s={formMetadataUrl:r,payload:e,webFormContainer:t,formRendererId:n};i.loadPCSForm(s).then(function(){$("#pcs-td-form-loading",o.rootElement).hide(),a()},function(e){$("#pcs-td-form-loading",o.rootElement).hide();var t=o.bundle.pcs.taskdetail.form_retrieve_error;o.formErrorHandler(e,t),a()})}).fail(function(e){$("#pcs-td-form-loading",o.rootElement).hide();var t=o.bundle.pcs.taskdetail.taskform_error;o.formErrorHandler(e,t),a()}))}else{$("#pcs-td-form-loading",o.rootElement).hide();var s=o.bundle.pcs.taskdetail.form_retrieve_error;o.formErrorHandler(null,s)}},o.initFrevvoForm=function(){$("#pcs-td-form-loading",o.rootElement).show(),u(),n.getFrevvoFormUrl(o.taskNumber).done(function(e,t,n){if(e&&e!=="")o.formURL(e);else{var r=o.bundle.pcs.taskdetail.no_form;o.formErrorHandler(n,r)}a()}).fail(function(e){$("#pcs-td-form-loading",o.rootElement).hide();var t="";e&&e.status===404?t=o.bundle.pcs.taskdetail.no_form:t=o.bundle.pcs.taskdetail.load_error,o.formErrorHandler(e,t),a()})},o.initAttachment=function(){o.data.hideAttachment||o._attachAttachmentPlugin()},o._attachAttachmentPlugin=function(){var e=$("#pcs-td-attachment-container",o.rootElement);e&&e.data()&&!$.isEmptyObject(e.data())&&e.attachments("destroy"),t.cleanNode(e[0]),u(),o.attachmentPlugin=e.attachments({hideTitle:!0,mode:"task",id:o.taskNumber,readOnly:o.readOnly(),isDocsEnabled:o.selectedTaskObject.isDocsEnabledFlag}),e.on("attachments:attachmentUploaded",function(e,t){o.rootElement.trigger("taskdetail:attachmentUploaded",[t])}),e.on("attachments:attachmentRemoved",function(e,t){o.rootElement.trigger("taskdetail:attachmentRemoved",[t])}),e.on("attachments:loaded",function(e){a()})},o.initConversation=function(){!o.data.hideConversation&&o.selectedTaskObject.isConversationEnabledFlag&&($("#pcs-td-conversation",o.rootElement).show(),$("#pcs-td-link-conversation",o.rootElement).show(),o._attachConversationPlugin())},o._attachConversationPlugin=function(){var e=$("#pcs-td-conversation-container",o.rootElement);e&&e.data()&&!$.isEmptyObject(e.data())&&e.conversation("destroy"),t.cleanNode(e[0]),u(),o.conversationPlugin=e.conversation({id:o.taskNumber,mode:"task"}),e.on("conversations:loaded",function(e){a()})},o.initComments=function(){o.data.hideComments||o._attachCommentPlugin()},o._attachCommentPlugin=function(){var e=$("#pcs-td-comments-container",o.rootElement);e&&e.data()&&!$.isEmptyObject(e.data())&&e.comments("destroy"),t.cleanNode(e[0]),u(),o.commentsPlugin=e.comments({id:o.taskNumber,readOnly:o.readOnly(),hideTitle:!0}),e.on("comments:commentAdded",function(e,t){o.rootElement.trigger("taskdetail:commentAdded",[t])}),e.on("comments:loaded",function(e){a()})},o.closeTaskDetail=function(e,t){$("#pcs-td-close-dialog",o.rootElement).ojDialog("open")},o.saveTaskDetail=function(e,t){o.payload={action:{id:"SAVE"}},o.formType==="frevvo"?o._saveOrSubmitTaskWithFrevvo("save"):o._saveTaskWithWebform("save")},o.submitTaskDetail=function(e,t){var n="";e.title==="Submit"?n="SUBMIT":n=e.title,o.payload={action:{id:n,type:e.actionType}};if(o.formType==="frevvo"){var i=o.formURL();if(i&&i!==""){var s=$("#pcs-td-form-iframe",o.rootElement)[0].contentWindow;s.postMessage("formValidation",r.getServerURL()),o.waitForMessage=!0,$("#pcs-td-overlay",o.rootElement).addClass("pcs-common-load-overlay"),setTimeout(function(){o.waitForMessage&&(o.waitForMessage=!1,o._saveOrSubmitTaskWithFrevvo("submit"))},5e3)}else o._saveOrSubmitTaskWithFrevvo("submit")}else o._submitTaskWithWebform("submit")},o._saveOrSubmitTaskWithFrevvo=function(e){$("#pcs-td-overlay",o.rootElement).addClass("pcs-common-load-overlay");var t=o.formURL();t&&t!==""?n.saveFrevvoForm(o.taskNumber,o.formURL()).done(function(t,n,r){o._performTaskAction(e)}).fail(function(e){var t=o.bundle.pcs.taskdetail.form_save_error;o.actionErrorHandler(e,t),$("#pcs-td-overlay",o.rootElement).removeClass("pcs-common-load-overlay")}):o._performTaskAction(e)},o._saveTaskWithWebform=function(e){o._saveOrSubmitTaskWithWebform(e)},o._saveOrSubmitTaskWithWebform=function(e){var t=$("form-renderer[id*='task-"+o.taskNumber+"']",o.rootElement);$("#pcs-td-overlay",o.rootElement).addClass("pcs-common-load-overlay"),i.saveOrSubmitPCSForm(t,e).then(function(t){try{n.postTaskPayload(o.taskNumber,t).done(function(t,n,r){o._performTaskAction(e)}).fail(function(e){o.actionErrorHandler(e,o.bundle.pcs.taskdetail.payload_update_error),$("#pcs-td-overlay").removeClass("pcs-common-load-overlay")})}catch(r){e=="save"?o.actionErrorHandler(null,o.bundle.pcs.taskdetail.form_save_error):o.actionErrorHandler(null,o.bundle.pcs.taskdetail.form_submit_error),$("#pcs-td-overlay").removeClass("pcs-common-load-overlay")}},function(){f()})},o._submitTaskWithWebform=function(e){o._saveOrSubmitTaskWithWebform(e)},o._performTaskAction=function(t){var r=o.payload,i=o.priorityStringMap[o.taskObject.priority()],s=o.selectedTaskObject.priority;i!==s&&(r.priority=i),n.performTaskAction(o.taskNumber,JSON.stringify(r)).done(function(n){$("#pcs-td-overlay",o.rootElement).removeClass("pcs-common-load-overlay");var i;t==="submit"?(o.rootElement.trigger("taskdetail:submit",[n,r.action.id]),i=o.bundle.pcs.taskdetail.action_performed,i=e.Translations.applyParameters(i,{0:r.action.id})):(o.rootElement.trigger("taskdetail:save",[n]),i=o.bundle.pcs.taskdetail.task_saved),o.cleanUpFormContainer(),o.initTaskdetail(),$("#pcs-td-action-success-msg",o.rootElement).text(i),$("#pcs-td-action-success-msg-container",o.rootElement).show().delay(5e3).fadeOut(2e3)}).fail(function(e){var t=o.bundle.pcs.taskdetail.action_error+"\r\n\r\n"+e.responseText;o.actionErrorHandler(e,t),$("#pcs-td-overlay",o.rootElement).removeClass("pcs-common-load-overlay")})},o.yesDiscardDialog=function(){$(".pcs-td-close-dialog").ojDialog("close"),o.rootElement.trigger("taskdetail:close",[t.toJS(o.taskObject)]),o.cleanUpFormContainer()},o.noDiscardDialog=function(){$(".pcs-td-close-dialog").ojDialog("close")},o.closeErrorDialog=function(){$(".pcs-td-error-dialog").ojDialog("close")},o.receivePostMessage=function(e){if(e.origin!==r.getServerURL())return;var t=e.message?"message":"data",n=e[t];n==="formValidation:success"&&o.waitForMessage&&(o.waitForMessage=!1,o._saveOrSubmitTaskWithFrevvo("submit"));if(n.startsWith("formValidation:error")&&o.waitForMessage){o.waitForMessage=!1;var i=o.bundle.pcs.taskdetail.form_validation_error,s=n.substring("formValidation:error".length+1);i=i+"\r\n\r\n"+s,o.actionErrorHandler(null,i),$("#pcs-td-overlay",o.rootElement).removeClass("pcs-common-load-overlay")}if(n.startsWith("formHeight")){var u=n.substring("formHeight".length+1),a;try{a=parseInt(u)+20}catch(f){a=400}if(o.data.formHeight&&o.data.formHeight!=="")try{var l=parseInt(o.data.formHeight,10);l>a&&(a=l)}catch(f){a=a}$("#pcs-td-form-iframe",o.rootElement).css("height",a)}},o.attachEvents=function(){$("#pcs-td-form-iframe",o.rootElement).load(function(){$("#pcs-td-form-loading",o.rootElement).hide(),o.data.formHeight&&o.data.formHeight!==""&&$("#pcs-td-form-iframe",o.rootElement).css("height",o.data.formHeight)})}(),o.cleanEvents=function(){r.eventHandler.removeHandler(window,"message",o.receivePostMessage),$("#pcs-td-attachment-container",o.rootElement).off(),$("#pcs-td-conversation-container",o.rootElement).off(),$("#pcs-td-comments-container",o.rootElement).off(),$(o.rootElement).off()},o.addEvents=function(){r.eventHandler.addHandler(window,"message",o.receivePostMessage)}(),o.readOptions=function(){o.data.hideActions&&$("#pcs-td-custom-actions",o.rootElement).hide(),o.data.hideSave&&$("#pcs-td-save",o.rootElement).hide(),o.data.hideClose&&$("#pcs-td-close",o.rootElement).hide(),o.data.hideAttachment&&($("#pcs-td-attachments",o.rootElement).hide(),$("#pcs-td-link-attachments",o.rootElement).hide()),o.data.hideComments&&($("#pcs-td-comments",o.rootElement).hide(),$("#pcs-td-link-comments",o.rootElement).hide()),o.data.hideHistory&&($("#pcs-td-history",o.rootElement).hide(),$("#pcs-td-link-history",o.rootElement).hide()),o.data.hideMoreInfo&&($("#pcs-td-moreInfo",o.rootElement).hide(),$("#pcs-td-link-moreInfo",o.rootElement).hide()),o.data.hideConversation&&($("#pcs-td-conversation",o.rootElement).hide(),$("#pcs-td-link-conversation",o.rootElement).hide()),o.data.hideLinks&&$("#pcs-td-links",o.rootElement).hide(),o.data.formHeight&&o.data.formHeight!==""&&$("#pcs-td-form-frame",o.rootElement).css("height",o.data.formHeight)},o.initComponents=function(){o.readOptions(),o.initTaskdetail(),o.initTaskHistory()},o.initTaskHistory=function(){t.components.isRegistered("taskHistory")||t.components.register("taskHistory",{template:{require:"text!pcs/taskdetail/templates/pcs-task-history.html"},viewModel:{require:"pcs/taskdetail/viewModel/taskHistoryContainer"}})},o._populateTaskObject=function(e){o.selectedTaskObject=e,o.taskObject.title(e.title),o.taskObject.shortSummary(e.shortSummary),o.taskObject.creator(e.creator),o.taskObject.createdDate(e.createdDate),o.taskObject.assignedDate(e.assignedDate),o.taskObject.dueDate(e.dueDate),o.taskObject.fromUser(e.fromUserDisplayName),o.taskObject.number(e.number),o.taskObject.outcome(e.outcome),o.taskObject.processName(e.processName),o.taskObject.updatedDate(e.updatedDate),o.taskObject.priority.removeAll(),o.taskObject.priority.push(o.priorityMap[e.priority]),e.ownerRole?o.taskObject.owner(e.ownerRole+" ("+o.bundle.pcs.taskdetail.role+")"):e.ownerGroup?o.taskObject.owner(e.ownerGroup+" ("+o.bundle.pcs.taskdetail.group+")"):e.ownerUser&&o.taskObject.owner(e.ownerUser+" ("+o.bundle.pcs.taskdetail.user+")"),o.taskObject.customActions.removeAll(),o.taskObject.systemActions.removeAll();for(var t=0;t<e.actionList.length;t++){var n=e.actionList[t];n.actionType==="System"?o.taskObject.systemActions.push(n):o.taskObject.customActions.push(n)}var r=e.outcome;r&&o.readOnly(!0)},o.openComments=function(e,t){$("#pcs-td-comments",o.rootElement).ojCollapsible({expanded:!0}),$("#pcs-td-comments-container",o.rootElement)[0].scrollIntoView(!0)},o.openAttachments=function(){$("#pcs-td-attachments",o.rootElement).ojCollapsible({expanded:!0}),$("#pcs-td-attachment-container",o.rootElement)[0].scrollIntoView(!0)},o.openHistory=function(){$("#pcs-td-history",o.rootElement).ojCollapsible({expanded:!0}),$("#pcs-td-history-container",o.rootElement)[0].scrollIntoView(!0)},o.openMoreInfo=function(){$("#pcs-td-moreInfo",o.rootElement).ojCollapsible({expanded:!0}),$("#pcs-td-moreInfo-container",o.rootElement)[0].scrollIntoView(!1)},o.openConversation=function(){$("#pcs-td-conversation",o.rootElement).ojCollapsible({expanded:!0}),$("#pcs-td-conversation-container",o.rootElement)[0].scrollIntoView(!1)},o.initComponents(),o.dispose=function(){console.log("dispose in taskdetail Containor"),o.viewExpandedSubscription.dispose(),o.cleanEvents(),o.cleanUpFormContainer()}}return s}),define("text!pcs/taskdetail/templates/pcs-taskdetail-error.html",[],function(){return'<div class="oj-message oj-message-error">\n    <span class="oj-component-icon oj-message-status-icon oj-message-error-icon"\n          role="img">\n    </span>\n    <span class="oj-message-content">\n        <div class="oj-message-summary">\n            Required parameters are missing\n        </div>\n        <div class="oj-message-detail">\n            <span>This component requires these values -</span>\n            <pre>\n    *taskNumber : \'\'\n    </pre>\n        </div>\n    </span>\n</div>\n'}),define("text!pcs/taskdetail/templates/pcs-task-moreinfo.html",[],function(){return'<script type="text/html" id="pcs-td-moreInfo-template">\n    <div id="pcs-td-moreInfo-cont" class="oj-form-layout">\n        <div class="oj-form oj-sm-odd-cols-12 oj-md-odd-cols-4 oj-md-labels-inline oj-form-cols-labels-inline oj-form-cols-max2">\n            <div class="oj-flex" id="pcs-td-moreInfo-pr-c">\n                <div class="oj-flex-item">\n                    <label for="pcs-td-moreInfo-pr" data-bind="text:bundle.pcs.taskdetail.priority"></label>\n                </div>\n                <div class="oj-flex-item">\n                    <select id="pcs-td-moreInfo-pr"\n                            data-bind="ojComponent: {component: \'ojSelect\',options: priorityOptions, disabled :readOnly,\n                                            value:taskObject.priority }">\n                    </select>\n                </div>\n            </div>\n            <div class="oj-flex" id="pcs-td-moreInfo-cb-c">\n                <div class="oj-flex-item">\n                    <label for="pcs-td-moreInfo-cb"  data-bind="text:bundle.pcs.taskdetail.createdBy"></label>\n                </div>\n                <div class="oj-flex-item">\n                    <input id="pcs-td-moreInfo-cb"\n                           data-bind="ojComponent: {component: \'ojInputText\',\n                                            value:taskObject.creator, readOnly: true, rootAttributes: {style:\'max-width:100%\'} }">\n                </div>\n            </div>\n            <div class="oj-flex" id="pcs-td-moreInfo-co-c">\n                <div class="oj-flex-item">\n                    <label for="pcs-td-moreInfo-co" data-bind="text:bundle.pcs.taskdetail.createdOn"></label>\n                </div>\n                <div class="oj-flex-item">\n                    <input id="pcs-td-moreInfo-co"\n                           data-bind="ojComponent: {component: \'ojInputText\',\n                                            value:taskObject.createdDate, readOnly: true, rootAttributes: {style:\'max-width:100%\'} }">\n                </div>\n            </div>\n            <div class="oj-flex" id="pcs-td-moreInfo-do-c">\n                <div class="oj-flex-item">\n                    <label for="pcs-td-moreInfo-do" data-bind="text:bundle.pcs.taskdetail.dueOn"></label>\n                </div>\n                <div class="oj-flex-item">\n                    <input id="pcs-td-moreInfo-do"\n                           data-bind="ojComponent: {component: \'ojInputText\',\n                                            value:taskObject.dueDate, readOnly: true, rootAttributes: {style:\'max-width:100%\'} }">\n                </div>\n            </div>\n            <div class="oj-flex" id="pcs-td-moreInfo-uo-c">\n                <div class="oj-flex-item">\n                    <label for="pcs-td-moreInfo-uo" data-bind="text:bundle.pcs.taskdetail.updatedOn"></label>\n                </div>\n                <div class="oj-flex-item">\n                    <input id="pcs-td-moreInfo-uo"\n                           data-bind="ojComponent: {component: \'ojInputText\',\n                                            value:taskObject.updatedDate, readOnly: true, rootAttributes: {style:\'max-width:100%\'} }">\n                </div>\n            </div>\n            <!--<div class="oj-flex" id="pcs-td-moreInfo-ao-c">-->\n            <!--<div class="oj-flex-item">-->\n            <!--<label for="pcs-td-moreInfo-ao">Assigned On</label>-->\n            <!--</div>-->\n            <!--<div class="oj-flex-item">-->\n            <!--<input id="pcs-td-moreInfo-ao"-->\n            <!--data-bind="ojComponent: {component: \'ojInputText\',-->\n            <!--value:taskObject.assignedDate, readOnly: true, rootAttributes: {style:\'max-width:100%\'} }">-->\n            <!--</div>-->\n            <!--</div>-->\n            <div class="oj-flex" id="pcs-td-moreInfo-fu-c">\n                <div class="oj-flex-item">\n                    <label for="pcs-td-moreInfo-fu" data-bind="text:bundle.pcs.taskdetail.fromUser"> </label>\n                </div>\n                <div class="oj-flex-item">\n                    <input id="pcs-td-moreInfo-fu"\n                           data-bind="ojComponent: {component: \'ojInputText\',\n                                            value:taskObject.fromUser, readOnly: true, rootAttributes: {style:\'max-width:100%\'} }">\n                </div>\n            </div>\n            <div class="oj-flex" id="pcs-td-moreInfo-on-c">\n                <div class="oj-flex-item">\n                    <label for="pcs-td-moreInfo-on"  data-bind="text:bundle.pcs.taskdetail.owner"></label>\n                </div>\n                <div class="oj-flex-item">\n                    <input  id="pcs-td-moreInfo-on"\n                            data-bind="ojComponent: {component: \'ojInputText\',\n                                            value:taskObject.owner, readOnly: true, rootAttributes: {style:\'max-width:100%\'} }">\n                </div>\n            </div>\n            <div class="oj-flex" id="pcs-td-moreInfo-pn-c">\n                <div class="oj-flex-item">\n                    <label for="pcs-td-moreInfo-pn"  data-bind="text:bundle.pcs.taskdetail.processName"></label>\n                </div>\n                <div class="oj-flex-item">\n                    <input id="pcs-td-moreInfo-pn"\n                           data-bind="ojComponent: {component: \'ojInputText\',\n                                            value:taskObject.processName, readOnly: true, rootAttributes: {style:\'max-width:100%\'} }">\n                </div>\n            </div>\n            <div class="oj-flex" id="pcs-td-moreInfo-oc-c">\n                <div class="oj-flex-item">\n                    <label for="pcs-td-moreInfo-oc"  data-bind="text:bundle.pcs.taskdetail.outcome"></label>\n                </div>\n                <div class="oj-flex-item">\n                    <input id="pcs-td-moreInfo-oc"\n                           data-bind="ojComponent: {component: \'ojInputText\',\n                                            value:taskObject.outcome, readOnly: true, rootAttributes: {style:\'max-width:100%\'} }">\n                </div>\n            </div>\n            <div class="oj-flex" id="pcs-td-moreInfo-nb-c">\n                <div class="oj-flex-item">\n                    <label for="pcs-td-moreInfo-nb" data-bind="text:bundle.pcs.taskdetail.number"></label>\n                </div>\n                <div class="oj-flex-item">\n                    <input id="pcs-td-moreInfo-nb"\n                           data-bind="ojComponent: {component: \'ojInputText\',\n                                            value:taskObject.number, readOnly: true, rootAttributes: {style:\'max-width:100%\'} }">\n                </div>\n            </div>\n        </div>\n    </div>\n</script>'}),define("pcs/pcs.taskdetail",["ojs/ojcore","knockout","jquery","ojL10n!pcsMsg/nls/pcsSnippetsResource","text!pcs/taskdetail/templates/pcs-taskdetail.html","pcs/taskdetail/viewModel/taskdetailContainer","text!pcs/taskdetail/templates/pcs-taskdetail-error.html","text!pcs/taskdetail/templates/pcs-task-moreinfo.html","jqueryui-amd/widget"],function(e,t,n,r,i,s,o,u){"use strict";n.widget("pcs.taskdetail",{options:{taskNumber:"",hideActions:!1,hideSave:!1,hideClose:!1,hideAttachment:!1,hideComments:!1,hideHistory:!1,hideMoreInfo:!1,hideLinks:!1,hideConversation:!0,hideResize:!0,formHeight:""},_isValid:function(){return this.options.taskNumber===undefined||this.options.taskNumber===""?!1:!0},_create:function(){var e=this;if(n.pcsConnection===undefined){this.element.html("<div style='color:red'>"+r.pcs.common.pcs_connection+" </div>");return}if(!this._isValid()){this.element.html(o);return}var a=this.options;a.rootElement=e.element;var f={data:a};this.element.html(i),this.element.append(u);var l=new s(f);this.model=l,t.applyBindings(l,this.element[0])},getTaskObject:function(){var e=this.model.selectedTaskObject;return e},destroy:function(){n.Widget.prototype.destroy.call(this)},_destroy:function(){console.log("Destroying taskdetail"),this.model&&this.model.dispose()},_setOption:function(e,t){this.options[e]=t,n.Widget.prototype._setOption.apply(this,arguments)}})}),define("pcs/tasklist/viewModel/tasklistVM",["ojs/ojcore","knockout","jquery","pcs/util/pcsUtil","pcs/tasklist/viewModel/TaskList","ojs/ojknockout","ojs/ojlistview","ojs/ojselectcombobox","ojs/ojarraytabledatasource","ojs/ojbutton","ojs/ojoffcanvas","promise","ojs/ojpopup","ojs/ojmenu","ojL10n!pcsMsg/nls/pcsSnippetsResource","pcs/pcs.taskdetail"],function(e,t,n,r,i){"use strict";function s(s){function d(t,r){o.loadingOverlay.addClass("pcs-common-load-overlay");var i=n.Deferred();return u.fetchTasks(!0,t).then(function(t){o.loadingOverlay.removeClass("pcs-common-load-overlay"),h=t.count,a=p(t),o.tasklistData(new e.ArrayTableDataSource(a,{idAttribute:"getNumber"})),r&&x(),i.resolve(),setTimeout(function(){o.rootElement.trigger("tasklist:loaded")},2e3)}),i}function v(){h>l.limit?o.hasMoreRecs(!0):o.hasMoreRecs(!1);var e=l.limit>h?h:l.limit;if(e===0){o.pagingInfoText("");return}var t=o.bundle.pcs.tasklist.pagingTxt.replace("{0}",e.toString()).replace("{1}",h.toString());o.pagingInfoText(t)}function g(e,t){var r,i;t?(r="0.05%",i="99.95%"):(r="40%",i="60%");var s=n("#taskDetail",o.rootElement),u=o.taskDetailOptions;n("#pcs-tl-list",o.rootElement).animate({width:r},{duration:100,complete:function(){s.taskdetail(u).width(i),s.show()}})}function y(e,t){t&&x(),b(t)}function b(e){a.map(function(t){if(t.isSelected()&&e||!t.isSelected()&&!e)return;t.isSelected(e),n("#taskCheck"+t.getNumber(),o.rootElement).toggleClass("checked")}),o.rootElement.trigger("tasklist:taskCheck",[a])}function w(){x()}function E(){l.orderBy=c,d(l,!1)}function S(){l.orderBy=c,a=[],d(l,!0).then(function(){v()})}function x(){o.selectedTask([]),n("#pcs-tl-list",o.rootElement).animate({width:"100%"},{duration:100,start:function(){var e=n("#taskDetail",o.rootElement);T(e),e.hide()}})}function T(e){e&&e.data()&&!n.isEmptyObject(e.data())&&e.taskdetail("destroy"),t.cleanNode(e[0]),r.unApplyBindings(e,!0)}function N(e){o.tasklistFilter=e,l={limit:f,showAction:!0,noPagingFlag:!1},e&&(e.hasOwnProperty("keyword")&&(l.keyword=e.keyword),e.hasOwnProperty("assignees")&&(l.assignment=e.assignees?e.assignees:null),e.hasOwnProperty("status")&&(l.status=e.status.toString()),e.hasOwnProperty("fromUser")&&(l.fromuser=e.fromUser),e.hasOwnProperty("applications")&&(l.process=e.applications.toString()),e.hasOwnProperty("toDueDate")&&e.toDueDate!==null&&(l.dueDateTo=e.toDueDate),e.hasOwnProperty("fromDueDate")&&e.fromDueDate!==null&&(l.dueDateFrom=e.fromDueDate))}function C(e,t){N(t),l.orderBy=c,d(l,!0).then(function(){v()}),o.rootElement.trigger("tasklist:taskCheck",[])}function k(e,t){L(t)}function L(t){o.loadingOverlay.addClass("pcs-common-load-overlay");var r=n.Deferred();return u.queryTasksBySearchableFields(!0,t).then(function(t){o.loadingOverlay.removeClass("pcs-common-load-overlay"),a=p(t),o.tasklistData(new e.ArrayTableDataSource(a,{idAttribute:"getNumber"})),x(),r.resolve()}),r}function A(e,t,n){l.orderBy=t&&n?t+":"+n:c,o.lastSelectedSort(t),c=l.orderBy,l.limit=f,d(l,!0).then(function(){v()})}function M(){return e.OffcanvasUtils.toggle(O).then(function(){o.tlMainWidth()==="oj-lg-12"?o.tlMainWidth("oj-lg-9"):o.tlMainWidth("oj-lg-12")})}var o=this,u;o.bundle=require("ojL10n!pcsMsg/nls/pcsSnippetsResource");var a=[];o.params=s.data,o.rootElement=o.params.rootElement,o.tasklistData=t.observable(),o.selectedTask=t.observableArray();var f=o.params.pageSize,l={limit:f,showAction:!0,noPagingFlag:!1};o.lastSelectedSort=t.observable("");var c,h=0;o.hasMoreRecs=t.observable(!1),o.pagingInfoText=t.observable(""),o.actionName=t.observable(""),o.actionComments=t.observable(""),o.selectedTaskNumber=t.observable(""),o.displayActionName=t.computed(function(){return o.bundle.pcs.taskActions[o.actionName()]}),o.toolbarParams={hideCustomActions:o.params.hideCustomActions,hideSystemActions:o.params.hideSystemActions,hideSearch:o.params.hideSearch,hideSort:o.params.hideSort,hideRefresh:o.params.hideRefresh,hideSelectAll:o.params.hideSelectAll,selectedSortType:o.params.selectedSortType,selectedSortOrder:o.params.selectedSortOrder,hideFilter:o.params.hideFilter,systemActions:o.params.systemActions,tasklistFilter:typeof o.params.tasklistFilter=="string"?JSON.parse(o.params.tasklistFilter):o.params.tasklistFilter},o.hideToolbar=o.params.hideToolbar,o.hideSystemActions=o.params.hideSystemActions,o.hideCustomActions=o.params.hideCustomActions,o.hideFromUserName=o.params.hideFromUserName,o.hideAssignedDate=o.params.hideAssignedDate,o.hideDueDate=o.params.hideDueDate,o.hideCreatedDate=o.params.hideCreatedDate,o.hideSummary=o.params.hideSummary,o.hideFilter=o.params.hideFilter,o.hideTaskDetails=o.params.hideTaskDetails,o.taskDetailOptions=typeof o.params.taskDetailOptions=="string"?JSON.parse(o.params.taskDetailOptions):o.params.taskDetailOptions,o.tasklistFilter=typeof o.params.tasklistFilter=="string"?JSON.parse(o.params.tasklistFilter):o.params.tasklistFilter,o.loadingOverlay=n("#pcs-tl-overlay",o.rootElement),o.confirmationDialog=n("#pcs-tasklist-actions-confirmation-dialog",o.rootElement);var p=function(e){return e.map(function(e){return e.processInitials=r.taskInitials(e.getProcessName()),e.boxHolderColor=r.taskIconColor(e.getProcessName()),e.isSelected=t.observable(!1),e})};o.loadMoreTasks=function(){var e=l.limit+f;e>h&&(e=h),l.orderBy=c,l.limit=e,d(l,!0).then(function(){v()})};var m=function(){u=new i,t.components.isRegistered("tasklistActions")||t.components.register("tasklistActions",{template:{require:"text!pcs/tasklistActions/templates/pcs-tasklist-toolbar.html"},viewModel:{createViewModel:function(e,t){var n=require("pcs/tasklistActions/viewModel/tasklistToolbarVM");return new n(e,t)}}}),o.tasklistFilter&&N(o.tasklistFilter)};m(),o.selectedTaskSubscription=o.selectedTask.subscribe(function(e){if(e.length===0)return;b(!1);var t=e[0]();if(!o.hideTaskDetails){var r=n("#taskDetail",o.rootElement);T(r);var i=o.taskDetailOptions;i.taskNumber=t,i.hideResize=!1,i.viewExpanded=!0,n("#pcs-tl-list",o.rootElement).animate({width:"0.05%"},{duration:100,complete:function(){r.taskdetail(i).width("99.95%"),r.show()}})}o.rootElement.trigger("tasklist:taskSelect",[t])}),n(o.rootElement).on("taskdetail:expandDetailView",g),n(o.rootElement).on("tasklistAction:selectAll",y),n(o.rootElement).on("taskdetail:close",w),n(o.rootElement).on("taskdetail:save",E),n(o.rootElement).on("taskdetail:submit",S),n(o.rootElement).on("tasklistAction:refresh",function(e){return C(e,this.tasklistFilter)}.bind(o)),n(o.rootElement).on("taskAction:submit",function(e){return C(e,this.tasklistFilter)}.bind(o)),n(o.rootElement).on("taskSearch:searchByStandardFilters",C),n(o.rootElement).on("taskSearch:searchBySearchableFields",k),n(o.rootElement).on("tasklistAction:sortSelect",A),o.onTaskCheck=function(e,t){t.stopImmediatePropagation(),x();if(t.type==="keypress"&&t.keyCode!==13)return;var r=n(t.target).parent(),i=e.isSelected()?!1:!0;e.isSelected(i),e.getNumber(r[0].children[0].innerHTML),r.toggleClass("checked");var s=a.filter(function(e){return e.isSelected()}).map(function(e){return e.getNumber()});o.rootElement.trigger("tasklist:taskCheck",[a,s])},o.onActionSelect=function(e,t){e.stopImmediatePropagation(),o.actionName(t.item.children().text()),o.selectedTaskNumber(t.item.children().val()),o.confirmationDialog.ojDialog("open")},o.handleSubmit=function(){o.submitCustomAction(),o.confirmationDialog.ojDialog("close")},o.handleClose=function(){o.confirmationDialog.ojDialog("close")},o.submitCustomAction=function(){o.loadingOverlay.removeClass("pcs-common-load-overlay"),u.doCustomActionOnTask({getNumber:function(){return o.selectedTaskNumber()}},o.actionName(),o.actionComments()).then(function(){o.loadingOverlay.removeClass("pcs-common-load-overlay"),o.rootElement.trigger("taskAction:submit",[o.actionName(),o.selectedTaskNumber()])})},o.cleanEvents=function(){n(o.rootElement).off()};var O={displayMode:"push",selector:"#pcs-tl-leftMenu",autoDismiss:"none"};o.tlMainWidth=t.observable("oj-lg-12"),n(o.rootElement).on("tasklistAction:leftMenuSelect",M),o.dispose=function(){console.log("dispose in tasklist VM"),o.selectedTaskSubscription.dispose(),o.displayActionName.dispose(),o.cleanEvents()}}return s}),define("text!pcs/tasklistActions/templates/pcs-tasklist-toolbar.html",[],function(){return'<div id="pcs-tasktoolbar-container" class="oj-flex-item">\n	<div class="oj-flex pcs-tl-toolbar-padding">\n		<div class="oj-flex-item">\n			<div class="oj-flex">\n				<!-- Offcanvas launch button -->\n				<!--<button data-bind="click:onLeftMenuBtnClick, ojComponent: {component:\'ojButton\', label: bundle.pcs.tasklist.toggleLeftMenu,-->\n							 <!--chroming: \'half\', display: \'icons\', icons: {start: \'oj-fwk-icon-hamburger oj-fwk-icon\'}}"-->\n						<!--class="oj-flex-item oj-lg-flex-initial"></button>-->\n				<div class="pcs-tl-margin5" data-bind="visible: !hideSelectAll,ojComponent: {component: \'ojButtonset\',\n														checked: isSelected}">\n					<label class="pcs-tl-action-menu-item" data-bind="text:bundle.pcs.tasklist.selectAll" for="pcs-tl-selectall"></label>\n					<input type="checkbox" id="pcs-tl-selectall" value="selected"/>\n				</div>\n				<div class="oj-flex-item">\n					<task-actions params="taskactionParams: taskactionParams"></task-actions>\n				</div>\n			</div>\n		</div>\n		<div class="oj-flex-item oj-flex oj-lg-justify-content-flex-end">\n\n			<div class="oj-flex-item pcs-tl-search-container" data-bind="visible: !hideSearch">\n				<!--<input id="pcs-tl-search"-->\n					   <!--type="text"-->\n					   <!--data-bind="ojComponent: {component: \'ojInputText\',-->\n                                  <!--value: keywordSearchString,-->\n                                  <!--rawValue: keywordSearchString,-->\n                                  <!--rootAttributes: {style: \'min-width:350px\'},-->\n                                  <!--placeholder: bundle.pcs.tasklist.search}"/>-->\n				<task-search params="mode:\'Filter\', showFilter: !hideFilter, tasklistFilter: tasklistFilter",></task-search>\n			</div>\n			<!-- Hide pcs-tl-sort-container if a task is selected-->\n			<div id="pcs-tl-sort-container" class="oj-flex-item oj-lg-flex-initial"\n				 data-bind="visible: !isTaskSelected() && !hideSort">\n				<div class="oj-flex oj-lg-justify-content-flex-end">\n					<label for="pcs-tl-sortBy" class="oj-label-inline pcs-tl-gray pcs-tl-action-font oj-flex-item"\n						   data-bind="text:bundle.pcs.tasklist.sortBy, attr: {title: bundle.pcs.tasklist.sortBy}"></label>\n					<select id="pcs-tl-sortBy"\n							class="oj-flex-item"\n							data-bind=" ojComponent: {component: \'ojSelect\', optionChange: onSortOptionChange,\n                                                                        value: currentSort, rootAttributes: {style:\'max-width:11em\'}}">\n						<!-- ko foreach: sortTasksBy -->\n						<option data-bind="value:id, text:label, attr: {title:label}"></option>\n						<!-- /ko -->\n					</select>\n					<button id="pcs-tl-direction-btn"\n							class="oj-flex-item oj-lg-flex-initial"\n							data-bind=" click:onDirectionBtnClick , ojComponent: {\n                                                                component:\'ojButton\', display: \'icons\', chroming: \'half\', label: sortTitleTxt,\n                                                                icons: {start:\'oj-fwk-icon pcs-tl-sorta-icon\'}\n                                                            }">\n					</button>\n				</div>\n			</div>\n			<div class="oj-flex-item oj-lg-flex-initial">\n				<div class="oj-flex oj-lg-justify-content-flex-end">\n					<!--<label for="pcs-tl-refresh-date" class="oj-label-inline pcs-tl-gray pcs-tl-action-font"-->\n					<!--data-bind="text: bundle.pcs.tasklist.updated"></label>-->\n					<!--<span id="pcs-tl-refresh-date" class="oj-label-inline pcs-tl-gray pcs-tl-action-font"-->\n					<!--data-bind="text: refreshDate"></span>-->\n					<button id="pcs-tl-refresh-btn" data-bind="visible: !hideRefresh, click: onRefreshBtnClick, ojComponent: {\n                                                    component:\'ojButton\', chroming: \'half\', label: bundle.pcs.tasklist.refresh, display: \'icons\',\n                                                    icons: {start:\'oj-fwk-icon pcs-tl-refresh-icon\'}\n                                                }">\n					</button>\n				</div>\n			</div>\n\n		</div>\n	</div>\n	<div id="pcs-tl-action-success-msg-container" class="pcs-tl-hidden">\n		<span title="Success" role="img" class="oj-fwk-icon-status-confirmation oj-fwk-icon"></span>\n		<b><span id="pcs-tl-action-success-msg" class="pcs-tl-action-success-msg"></span></b>\n	</div>\n</div>\n'}),define("text!pcs/tasklistActions/templates/pcs-task-actions.html",[],function(){return'<div id="pcs-taskactions-container">\n	<!-- ko foreach: taskActionList -->\n	<!-- ko if: actionType == \'Custom\' -->\n	<button class="pcs-act-custom" data-bind="visible: !$parent.hideCustomActions, attr:{id:title}, click:$parent.onCustomActionClick,\n									ojComponent: {\n									component:\'ojButton\',\n									label: label,\n									rootAttributes: {style: \'font-size: 12px;\'}\n									}"></button>\n	<!-- /ko -->\n	<!-- /ko -->\n	<button data-bind="visible: !hideSystemActions && isTaskSelected ,ojComponent: {\n									component:\'ojButton\',\n									label: bundle.pcs.tasklist.systemActions,\n									menu: \'#systemMenu\',\n									rootAttributes: {style: \'font-size: 12px;\'}\n								}">\n	</button>\n	<ul class="pcs-tl-hidden" id="systemMenu"\n		data-bind="ojComponent: {component: \'ojMenu\', select: onSystemActionSelect}">\n		<!-- ko foreach: taskActionList -->\n		<!-- ko if: actionType == \'System\' -->\n		<li class="oj-menu-item">\n			<a href="#" class="pcs-tl-action-menu-item" data-bind="text:label, value:title"></a>\n		</li>\n		<!-- /ko -->\n		<!-- /ko -->\n	</ul>\n	<div class="oj-flex"\n		 data-bind=\'component: {name: "requestInfo", params: { isVisible: displayInfoRequest, showInline: false, tasks: selectedTasklist }}\'>\n	</div>\n	<div class="oj-flex"\n		 data-bind=\'component: {name: "reassign", params: { isVisible: displayReassign, showInline: false, tasks: selectedTasklist }}\'>\n	</div>\n	<div id="pcs-taskActions-confirmation-dialog"\n		 data-bind="ojComponent:{component: \'ojDialog\', title: bundle.pcs.taskActions.confirmation + displayActionName(), close: handleClose,\n		 	rootAttributes: { style: \'width: 500px; min-width: 100px; max-width 500px;\'}}">\n		<div class="oj-dialog-body" id="pcs-taskActions-confirmation-dialog-content">\n			<div data-bind="text: getSelectedItems()">\n			</div>\n			<br/>\n			<div class="oj-flex-item">\n				<label for="comments" data-bind="text:bundle.pcs.taskActions.comments"></label>\n							<textarea id="comments" style="resize: both" data-bind="ojComponent:\n                   {component: \'ojTextArea\', rootAttributes: {style:\'min-width:100%\'}, value:actionComments, required: false}">\n							</textarea>\n			</div>\n		</div>\n		<div class="oj-dialog-footer" id="pcs-taskActions-confirmation-dialog-footer">\n			<button id="okButton"\n					data-bind="ojComponent: {component: \'ojButton\', label: bundle.pcs.taskActions.ok}, click: handleSubmit"></button>\n			<button id="cancelButton"\n					data-bind="ojComponent: {component: \'ojButton\', label: bundle.pcs.taskActions.cancel}, click: handleClose"></button>\n		</div>\n	</div>\n</div>\n'}),define("pcs/tasklistActions/viewModel/Task",[],function(){"use strict";return function(e,t){if(t&&t.hasOwnProperty("update"))for(var n in e){if(!e.hasOwnProperty(n))continue;t.update.hasOwnProperty(n)&&(e[n]=typeof t.update[n]=="function"?t.update[n](e[n]):e[n])}return{getTitle:function(){return e.title},getNumber:function(){return e.number},getFromUser:function(){return e.fromUserDisplayName},getState:function(){return e.state},getAssignees:function(){return e.assignees.items},getCreator:function(){return e.creatorName},getAssignedDate:function(){return e.assignedDate},getCreatedDate:function(){return e.createdDate},getPriority:function(){return e.priority},getFromUserName:function(){return e.fromUserName},getFromUserDisplayName:function(){return e.fromUserDisplayName},getShortSummary:function(){return e.shortSummary},getDueDate:function(){return e.dueDate},getProcessName:function(){return e.processName},getUpdatedDate:function(){return e.updatedDate},getActionList:function(){return e.actionList}}}}),define("pcs/tasklistActions/viewModel/TaskAction",["jquery","pcs/data-services/DataServices","pcs/tasklistActions/viewModel/Task"],function(e,t,n){"use strict";var r={tasks:"/tasks",identities:"/identities"},i=t.getInstance();return function(t){var s={};s.options=t;var o={tasks:{url:"/tasks"}},u=function(t,o,u,a){var f={payload:{action:{id:o.toUpperCase(),type:u}}};t==null&&(t=s.selectedTask?s.selectedTask:null),a&&a.trim()!==""&&(f.payload.comment={commentStr:a,commentScope:"BPM"});var l=e.Deferred();if(t!=null){var c=r.tasks+"/"+t.getNumber();i.put(c,f).then(function(e){l.resolve(new n(e))}).fail(function(e){l.reject(e)})}else l.reject("Task is null or undefined");return l},a=function(t,s,o,u){var a={payload:{action:{id:s.toUpperCase(),type:o},tasks:[]}},f=e.Deferred();if(t&&Array.isArray(t)){t.forEach(function(e){a.payload.tasks.push(e.getNumber())}),u&&u.trim()!==""&&(a.payload.comment={commentStr:u,commentScope:"BPM"});var l=r.tasks;i.put(l,a).then(function(e){f.resolve(e.items.map(function(e){return new n(e)}))}).fail(function(e){f.reject(e)})}else f.reject("Tasks is undefined or empty");return f},f=function(e,t){var n=[];for(var r=0;r<e.length;r++)n.push({id:e[r],type:t[r]});return n},l=function(t,o,u,a){t==null&&(t=s.tasks?s.tasks:null);var l=e.Deferred();if(t!=null){var c={payload:{identities:f(o,u),action:{id:"INFO_REQUEST",type:"SYSTEM"},tasks:t.map(function(e){return String(e.getNumber())}),comment:{commentStr:a,commentScope:"TASK"}}},h=r.tasks;i.put(h,c).then(function(e){l.resolve(e.items.map(function(e){return new n(e)}))}).fail(function(e){l.reject(e)})}else l.reject("Task is undefined or null");return l},c=function(t,o,u,a){t==null&&(t=s.selectedTask?s.selectedTask:null);var l=e.Deferred();if(t!=null){var c={payload:{identities:f(o,u),action:{id:"INFO_REQUEST",type:"SYSTEM"},comment:{commentStr:a,commentScope:"TASK"}}};l=new Promise(function(e,s){var o=r.tasks+"/"+t.getNumber();i.put(o,c).then(function(t){e(new n(t))}).fail(function(e){s(e)})})}else l.reject("Task is undefined or null");return l},h=function(t,o){t==null&&(t=s.tasks?s.tasks:null);var u=e.Deferred();if(t!=null){var a={payload:{identities:f(o.identityId,o.identityType),action:{id:o.reassignType,type:"SYSTEM"},tasks:t.map(function(e){return String(e.getNumber())}),comment:{commentStr:o.userComment,commentScope:"TASK"}}},l=r.tasks;i.put(l,a).then(function(e){u.resolve(e.items.map(function(e){return new n(e)}))}).fail(function(e){u.reject(e)})}else u.reject("Task is undefined or null");return u},p=function(t,o){t==null&&(t=s.selectedTask?s.selectedTask:null);var u=e.Deferred();if(t!=null){var a={payload:{identities:f(o.identityId,o.identityType),action:{id:o.reassignType,type:"SYSTEM"},comment:{commentStr:o.userComment,commentScope:"TASK"}}};u=new Promise(function(e,s){var o=r.tasks+"/"+t.getNumber();i.put(o,a).then(function(t){e(new n(t))}).fail(function(e){s(e)})})}else u.reject("Task is undefined or null");return u},d=function(t){var n=e.Deferred(),s=r.identities,o={contentType:"application/json; charset=utf-8",queryParams:t};return i.get(s,o,null,t).then(function(e){n.resolve(e)}).fail(function(e){n.reject(e)}),n};return{getTaskDetail:function(t,r){var u=e.Deferred();if(!t)return u.reject("Task is not passed");var a=r?{queryParams:r}:null,f=o.tasks.url+"/"+t.getNumber();return i.get(f,a).then(function(e){var t=new n(e);s.selectedTask=t,u.resolve(t)}).fail(function(e){u.reject(e)}),u},doCustomActionOnTask:function(e,t,n){return u(e,t,"CUSTOM",n)},doSystemActionOnTask:function(e,t,n){return u(e,t,"SYSTEM",n)},doCustomActionOnTasks:function(e,t,n){return a(e,t,"CUSTOM",n)},doSystemActionOnTasks:function(e,t,n){return a(e,t,"SYSTEM",n)},reassignTasks:function(e,t){return e.length<=1?p(e[0],t):h(e,t)},requestInfo:function(e,t,n,r){return e.length<=1?c(e[0],t,n,r):l(e,t,n,r)},getIdentities:function(e){return d(e)}}}}),define("pcs/tasklistActions/viewModel/taskActionsVM",["ojs/ojcore","knockout","jquery","pcs/tasklistActions/viewModel/TaskAction","pcs/tasklistActions/viewModel/Task","ojs/ojknockout","ojs/ojselectcombobox","ojs/ojbutton","ojs/ojmenu","ojs/ojdialog"],function(e,t,n,r,i){"use strict";return function(o,u){function c(){t.components.isRegistered("requestInfo")||t.components.register("requestInfo",{template:{require:"text!pcs/tasklistActions/templates/pcs-requestInfo.html"},viewModel:{createViewModel:function(e,t){var n=require("pcs/tasklistActions/viewModel/requestInfoVM");return new n(e,t)}}}),t.components.isRegistered("reassign")||t.components.register("reassign",{template:{require:"text!pcs/tasklistActions/templates/pcs-reassign.html"},viewModel:{createViewModel:function(e,t){var n=require("pcs/tasklistActions/viewModel/reassignVM");return new n(e,t)}}})}function d(e,t){a.taskActionList([]);if(!t)return;var n=[],r=t.filter(function(e){if(a.taskNumbers||e.isSelected())n=p(e.getActionList(),n);return a.taskNumbers||e.isSelected()});a.isTaskSelected(r.length>0),a.taskActionList(h(n)),a.selectedTasklist(r)}function v(){f=new r,c();if(a.taskNumbers){var e=a.taskNumbers.map(function(e){return f.getTaskDetail(e)});Promise.all(e).then(function(e){a.isTaskSelected(!0),d(null,e)}).catch(function(e){n("#pcs-taskactions-container").html("One of more task objects could not be obtained")})}}function m(){a.taskActionList([]),a.selectedTasklist([]),a.isTaskSelected(!1),a.actionName(""),a.actionComments(""),a.showConfirmation("none")}function g(){m()}var a=this,f,l=a.systemActions?a.systemActions:["SUSPEND","ESCALATE","RENEW","REASSIGN","INFO_REQUEST","WITHDRAW","ACQUIRE","PURGE","DELETE","RESUME","RELEASE"];a.rootElement=u?n(u.element):n(document),a.bundle=require("ojL10n!pcsMsg/nls/pcsSnippetsResource"),a.displayInfoRequest=t.observable(),a.displayReassign=t.observable(),a.taskActionList=t.observableArray([]),a.selectedTasklist=t.observableArray([]),a.isTaskSelected=t.observable(!1),a.isActionConfirm=t.observable(!1),a.showConfirmation=t.observable("none"),a.actionName=t.observable(""),a.actionComments=t.observable(""),a.displayActionName=t.computed(function(){return a.bundle.pcs.taskActions[a.actionName()]}),a.hideCustomActions=o.taskactionParams.hideCustomActions,a.hideSystemActions=o.taskactionParams.hideSystemActions,a.systemActions=o.taskactionParams.systemActions.split(",").map(function(e){return e.trim()}),a.taskNumbers=o.taskactionParams.taskNumbers==null?null:o.taskactionParams.taskNumbers.split(",").map(function(e){var t={number:e.trim()},n=new i(t);return n}),a.confirmDialog=n("#pcs-taskActions-confirmation-dialog",a.rootElement),c();var h=function(e){return e?e.filter(function(e){var t=a.bundle.pcs.taskActions[e.title];return e.label=t?t:e.title,e.actionType==="System"&&l.indexOf(e.title)>-1||e.actionType==="Custom"}):[]},p=function(e,t){return t.length===0&&e.length>0?t=e:t=t.filter(function(t){if(t.actionType==="System"&&l.indexOf(t.title)===-1)return!1;var n=e.filter(function(e){return t.title===e.title});return n.length>0}),t};v(),n(document).on("tasklist:taskCheck",d),n(document).on("tasklistAction:refresh",g),n(document).on("taskAction:submit",g),a.getSelectedItems=function(){var t=a.bundle.pcs.taskActions.selectedTasks;return t=e.Translations.applyParameters(t,{0:a.selectedTasklist().length}),t},a.onCustomActionClick=function(e,t){a.actionName(t.currentTarget.id),a.showConfirmation("custom"),a.confirmDialog.ojDialog("open")},a.onSystemActionSelect=function(e,t){a.actionName(t.item.children().val()),a.showConfirmation("system"),a.actionName()==="INFO_REQUEST"||a.actionName()==="REASSIGN"?a.handleSubmit():a.confirmDialog.ojDialog("open")},a.handleSubmit=function(){a.showConfirmation()==="custom"?a.submitCustomAction():a.showConfirmation()==="system"&&a.submitSystemAction(),a.confirmDialog.ojDialog("close")},a.handleClose=function(){a.confirmDialog.ojDialog("close")},a.submitCustomAction=function(){var e=a.actionName(),t=a.actionComments();a.selectedTasklist().length===1?f.doCustomActionOnTask(a.selectedTasklist()[0],e,t).then(function(){a.rootElement.trigger("taskAction:submit",[e]),m()}):f.doCustomActionOnTasks(a.selectedTasklist(),e,t).then(function(){a.rootElement.trigger("taskAction:submit",[e]),m()})};var y=function(e){var t=a.actionComments();a.selectedTasklist().length===1?f.doSystemActionOnTask(a.selectedTasklist()[0],e,t).then(function(){a.rootElement.trigger("taskAction:submit",[e]),m()}):f.doSystemActionOnTasks(a.selectedTasklist(),e,t).then(function(){a.rootElement.trigger("taskAction:submit",[e]),m()})};a.submitSystemAction=function(){a.displayInfoRequest(!1),a.displayReassign(!1);var e=a.actionName();switch(e){case"INFO_REQUEST":a.displayInfoRequest(!0);break;case"REASSIGN":a.displayReassign(!0);break;default:y(e)}},a.dispose=function(){console.log("dispose in taskActionsVM"),a.displayActionName.dispose()}}}),define("text!pcs/tasklistActions/templates/pcs-reassign.html",[],function(){return'<div id="pcs-reassign-container">\n\n	<div id="pcs-reassign-modalDialog"\n		 data-bind="visible: !showInline(), ojComponent:{component: \'ojDialog\', title: bundle.pcs.taskActions.reassignHeader, close: handleClose,\n		 	rootAttributes: { style: \'width: 450px; min-width: 100px; max-width 450px;\'}}">\n		<div class="oj-dialog-body" id="pcs-reassign-dialog-content">\n		</div>\n		<div class="oj-dialog-footer" id="pcs-reassign-dialog-footer">\n		</div>\n	</div>\n\n	<div data-bind="visible: showInline() && isVisible()" class="oj-panel oj-margin">\n		<div id="pcs-reassign-inline-content">\n			<div id="pcs-reassign-overlay"></div>\n			<div id="form-container" class="oj-form-layout">\n				<div class="oj-form">\n					<div class="oj-flex">\n						<div class="oj-flex-item">\n							<div id="reassignOptions" aria-labelledby="mainlabelid"\n								 data-bind="ojComponent: {\n										  component: \'ojRadioset\',\n										  value: action}">\n									<span class="oj-choice-row">\n										<input id="REASSIGN" type="radio" name="rbb" value="REASSIGN">\n										<label for="REASSIGN" data-bind="text:bundle.pcs.taskActions.reassign+bundle.pcs.taskActions.reassignDescription"></label>\n									</span>\n									<span class="oj-choice-row">\n										<input id="DELEGATE" type="radio" name="rbb" value="DELEGATE">\n										<label for="DELEGATE" data-bind="text:bundle.pcs.taskActions.delegate+bundle.pcs.taskActions.delegateDescription"></label>\n									</span>\n							</div>\n						</div>\n					</div>\n					<div class="oj-flex">\n						<div class="oj-flex-item">\n							<div id="username" data-bind=\'component: {\n								name: "pcs-identity-browser" , params: {multiple: true, placeholderTxt: placeholder(), scope: scope(), idbID: idbID}\n							}\'></div>\n						</div>\n					</div>\n					<div class="oj-flex">\n						<div class="oj-flex-item">\n							<label for="comments" data-bind="text:bundle.pcs.taskActions.comments"></label>\n							<textarea id="comments" style="resize: both" data-bind="ojComponent:\n                   {component: \'ojTextArea\',rootAttributes: {style:\'min-width:100%\'}, value:comments, required: false}">\n							</textarea>\n						</div>\n					</div>\n				</div>\n			</div>\n		</div>\n		<br/>\n		<div id="pcs-reassign-inline-footer">\n			<button id="okButton"\n					data-bind="ojComponent: {component: \'ojButton\', label: bundle.pcs.taskActions.submit}, click: handleSubmit"></button>\n			<button id="cancelButton"\n					data-bind="ojComponent: {component: \'ojButton\', label: bundle.pcs.taskActions.cancel}, click: handleClose"></button>\n		</div>\n	</div>\n</div>\n'}),define("text!pcs/identityBrowser/view/idBrowser.html",[],function(){return"<!-- parent VM which consumes this should have USer Defined idbConfig object with configuration details -->\n\n<select  data-bind=\"attr: {id: idbID, placeholder : placeholder}, ojComponent: { component: 'ojIdentity', value: value,\n		options: $.proxy(getIdentities, $data),\n		multiple: multiple, selectAll: true,\n		defaultScope: scope}\">\n</select>\n"}),define("pcs/identityBrowser/viewModel/Identity",[],function(){"use strict";function e(e){this.id=e.id||e.identityName,this.type=e.type||e.identityType,this.title=e.title,this.firstName=e.firstName||e.userFirstName,this.lastName=e.lastName||e.userLastName,this.email=e.email,this.mobile=e.mobile||e.userMobile}return e.prototype={getId:function(){return this.id},getType:function(){return this.type},getTitle:function(){return this.title},getFirstName:function(){return this.title},getLastName:function(){return this.title},getFullName:function(){return this.firstName+" "+this.lastName},getEmail:function(){return this.email},getMobile:function(){return this.email}},e}),define("pcs/identityBrowser/viewModel/Identities",[],function(){"use strict";function e(){this._identities=[],this._selectedIdentities=[]}return e.prototype={setIdentities:function(e){this._identities=e},getIdentities:function(){return this._identities},setSelectedIdentities:function(e){this._selectedIdentities=e},getSelectedIdentities:function(){return this._selectedIdentities}},e}),define("pcs/identityBrowser/viewModel/IdentityService",["pcs/identityBrowser/viewModel/Identity","pcs/identityBrowser/viewModel/Identities","pcs/data-services/DataServices"],function(e,t,n){"use strict";function s(){this._identities=new t}var r={identities:"/identities"},i=n.getInstance();return s.prototype={getIdentity:function(e){return this._identities.getIdentities[e]},setIdentities:function(e){this._identities.setIdentities(this.parseIdentity(e))},getIdentities:function(){return[].concat(this._identities.getIdentities())},setSelectedIdentities:function(e){this._identities.setSelectedIdentities(this.parseIdentity(e))},getSelectedIdentities:function(){return this._identities.getSelectedIdentities()},parseIdentity:function(t){var n=[];if(t&&Array.isArray(t))for(var r=0,i=t.length;r<i;r++)n.push(new e(t[r]));return n},restCall:function(e){var t=this;return new Promise(function(n,s){var o=r.identities,u={contentType:"application/json; charset=utf-8",queryParams:e};i.get(o,u,null,e).then(function(e){t.setIdentities(e.items||[]),n(t.getIdentities())}).fail(function(e){s(t.getIdentities())})})}},s}),define("pcs/composer/idBrowser/ojidentity.min",["require","ojs/ojcore","jquery","ojs/ojeditablevalue"],function(e){var t=e("ojs/ojcore"),n=e("jquery");e("ojs/ojeditablevalue");var r={GENERATED_OPTIONS_SELECTOR:"oj-select-options-generated",KEY:{TAB:9,ENTER:13,ESC:27,SPACE:32,LEFT:37,UP:38,RIGHT:39,DOWN:40,SHIFT:16,CTRL:17,ALT:18,PAGE_UP:33,PAGE_DOWN:34,HOME:36,END:35,BACKSPACE:8,DELETE:46,isControl:function(e){var t=e.which;switch(t){case r.KEY.SHIFT:case r.KEY.CTRL:case r.KEY.ALT:return!0}return!!e.metaKey||!!e.ctrlKey},isFunctionKey:function(e){return e=e.which?e.which:e,e>=112&&e<=123}},DEFAULT_QUERY_DELAY:70,ValueChangeTriggerTypes:{ENTER_PRESSED:"enter_pressed",OPTION_SELECTED:"option_selected",OPTION_REMOVED:"option_removed",BLUR:"blur",SEARCH_ICON_CLICKED:"search_icon_clicked"},lastMousePosition:{x:0,y:0},nextUid:function(){var e=1;return function(){return e++}}(),scrollBarDimensions:null,each2:function(e,t){for(var r=n(n.isFunction(e[0])?e[0]():e[0]),i=-1,s=e.length;++i<s&&(r.context=r[0]=n.isFunction(e[0])?e[i]():e[i])&&t.call(r[0],i,r)!==!1;);return e},measureScrollbar:function(){var e=n("<div class='oj-listbox-measure-scrollbar'></div>");e.appendTo("body");var t={width:e.width()-e[0].clientWidth,height:e.height()-e[0].clientHeight};return e.remove(),t},splitVal:function(e,t){var r,i,s;if(null===e||e.length<1)return[];for(r=e.split(t),i=0,s=r.length;i<s;i+=1)r[i]=n.trim(r[i]);return r},getSideBorderPadding:function(e){return e.outerWidth(!1)-e.width()},installKeyUpChangeEvent:function(e){var t="keyup-change-value";e.on("keydown",function(){void 0===n.data(e,t)&&n.data(e,t,e.val())}),e.on("keyup",function(i){if(i.which===r.KEY.ENTER)return void i.stopPropagation();var s=n.data(e,t);void 0!==s&&e.val()!==s&&(n.removeData(e,t),e.trigger("keyup-change"))})},installFilteredMouseMove:function(e){e.on("mousemove",function(e){var t=r.lastMousePosition;void 0!==t&&t.x===e.pageX&&t.y===e.pageY||(n(e.target).trigger("mousemove-filtered",e),r.lastMousePosition.x=e.pageX,r.lastMousePosition.y=e.pageY)})},thunk:function(e){var t,n=!1;return function(){return n===!1&&(t=e(),n=!0),t}},_focus:function(e){e[0]!==document.activeElement&&window.setTimeout(function(){var t,n=e[0],r=e.val().length;e.focus(),e.is(":visible")&&n===document.activeElement&&(n.setSelectionRange?n.setSelectionRange(r,r):n.createTextRange&&(t=n.createTextRange(),t.collapse(!1),t.select()))},40)},getCursorInfo:function(e){e=n(e)[0];var t=0,r=0;if("selectionStart"in e)t=e.selectionStart,r=e.selectionEnd-t;else if("selection"in document){e.focus();var i=document.selection.createRange();r=document.selection.createRange().text.length,i.moveStart("character",-e.value.length),t=i.text.length-r}return{offset:t,length:r}},killEvent:function(e){e.preventDefault(),e.stopPropagation()},killEventImmediately:function(e){e.preventDefault(),e.stopImmediatePropagation()},defaultEscapeMarkup:function(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};return String(e).replace(/[&<>"'\\]/g,function(e){return t[e]})},local:function(e,t){var i,s,o=e,u=function(e){return""+e.label};n.isArray(o)&&(s=o,o={results:s}),n.isFunction(o)===!1&&(s=o,o=function(){return s});var a=o();return a&&a.text&&(u=a.text,n.isFunction(u)||(i=a.text,u=function(e){return e[i]})),function(e){var i=e.term,s={results:[]};return""!==i||t?(o()&&r.each2(n(o().results),function(n,i){r._processData(e,i,s.results,t,!0,u)}),void e.callback(s)):void e.callback(o())}},cleanupResults:function(e){e.children().remove(),e.removeClass("oj-listbox-result-with-children")},remote:function(e,i){return function(s){var o={},u=this,a=function(e){var t={results:[]};u.inputSearch=o.searchPattern,r.each2(n(e),function(e,n){r._processData(s,n,t.results,i,!1)}),s.callback(t)};if(s.value)a(s.value);else{var f=n.trim(s.term);if(f&&(o.searchPattern="*"!==f?"*"+s.term+"*":f),n.extend(!0,o,{scope:this.defaultScope}),!o.searchPattern)return void a(this.results||[]);this.inputSearch&&this.inputSearch===o.searchPattern?a(this.results):(clearTimeout(this.queryTimer),this.queryTimer=setTimeout(function(){u.loading.hasClass("identity-show-inline")||u.loading.addClass("identity-show-inline"),e(o).then(function(e){u.results=e&&Array.isArray(e)?e:[],a(u.results),u.loading.removeClass("identity-show-inline"),u.ojContext._setOption("messagesCustom",[])})["catch"](function(e){u.loading.removeClass("identity-show-inline"),u.ojContext._setOption("messagesCustom",[new t.Message(e)])})},1e3))}}},_processData:function(e,t,i,s,o,u){var a,f,l={};if(n.extend(!0,l,t[0]),t[0].label&&s&&s.label&&"label"!==s.label&&(l[s.label]=t[0].label,delete l.label),t[0].value&&s&&s.value&&"value"!==s.label&&(l[s.value]=t[0].value,delete l.value),!l.children&&s&&s.children&&(l.children=l[s.children],delete l[s.children]),l.children){a={};for(f in l)l.hasOwnProperty(f)&&(a[f]=l[f]);a.children=[],r.each2(n(l.children),function(t,n){r._processData(e,n,a.children,s&&s.childKeys?s.childKeys:null,o,u)}),(!o||a.children.length||e.matcher(e.term,a[s.label],l))&&i.push(a)}else o&&!e.matcher(e.term,l[s.label],l)||i.push(l)},clazz:function(e,r){var i=function(){};return t.Object.createSubclass(i,e,""),i.prototype=n.extend(i.prototype,r),i},LAST_QUERY_RESULT:"last-query-result",getLastQueryResult:function(e){var t=n.data(e.container,e._classNm+"-"+r.LAST_QUERY_RESULT);return t},saveLastQueryResult:function(e,t){n.data(e.container,e._classNm+"-"+r.LAST_QUERY_RESULT,t)}},i=r.clazz(Object,{_bind:function(e){var t=this;return function(){e.apply(t,arguments)}},_init:function(e){var t,i,s=this._classNm,o=this._elemNm,u=".oj-listbox-results";this.ojContext=e.ojContext,this.opts=e=this._prepareOpts(e),this.id=e.id,this.headerInitialized=!1,void 0!==e.element.data(o)&&null!==e.element.data(o)&&e.element.data(o)._destroy(),this.container=this._createContainer();var a=this.opts.rootAttributes;this.containerId=a&&a.id?a.id:"ojChoiceId_"+(e.element.attr("id")||"autogen"+r.nextUid()),this.containerSelector="#"+this.containerId.replace(/([;&,\.\+\*\~':"\!\^#$%@\[\]\(\)=>\|])/g,"\\$1"),this.container.attr("id",this.containerId),this.body=r.thunk(function(){return n("#__oj_zorder_container").size()?n("#__oj_zorder_container"):e.element.closest("body")}),this.container.attr("style",e.element.attr("style")),this.elementTabIndex=this.opts.element.attr("tabindex"),this.opts.showScopeFilter&&(this.container.addClass("hasFilter"),this.container.find(".oj-identity-filter").addClass("showFilter")),this.opts.element.data(o,this).attr("tabindex","-1").before(this.container),this.container.data(o,this),this.dropdown=this.container.find(".oj-listbox-drop"),this.dropdown.data("ojlistbox",this),this.opts.showScopeFilter&&this.container.on("click",".oj-identity-filter",n.proxy(this._showFilter,this)),this.opts.loading=this.container.find(".oj-identity-loading-container");var f=this.containerId;if(this.dropdown.attr("data-oj-containerid",f),this.results=t=this.container.find(u),this.results.on("click",r.killEvent),e.list&&n("#"+e.list).is("ul")){var l=n("#"+e.list);this.dropdownListParent=l.parent(),l.addClass("oj-listbox-results").attr("role","listbox"),this.results.replaceWith(l),this.results=t=this.container.find(u),this.results.css("display","")}i="oj-select"==s?this.container.find("input.oj-listbox-input"):this.container.find("input."+s+"-input"),this.search=i,this.queryCount=0,this.resultsPage=0,this.context=null,this._initContainer(),this.container.on("click",r.killEvent),r.installFilteredMouseMove(this.results),this.dropdown.on("mousemove-filtered touchstart touchmove touchend",u,this._bind(this._highlightUnderEvent)),n(this.container).on("change","."+s+"-input",function(e){e.stopPropagation()}),n(this.dropdown).on("change","."+s+"-input",function(e){e.stopPropagation()});var c=this;r.installKeyUpChangeEvent(i),i.on("keyup-change input paste",this._bind(this._updateResults)),i.on("focus",function(){i.addClass(s+"-focused"),"oj-select"!==s&&c.container.addClass("oj-focus")}),i.on("blur",function(){i.removeClass(s+"-focused"),"oj-select"!==s&&c.container.removeClass("oj-focus")}),this.dropdown.on("mouseup",u,this._bind(function(e){var t=n(e.target);if(this._selectionEvent=e,t.closest(".oj-listbox-result-selectable").length>0)if(this.opts.multiple&&this.opts.selectAll&&t.hasClass("oj-identity-checkbox")){var i=this.getVal(),s=t.closest(".oj-listbox-result").data(this._elemNm),o=i?i.slice(0):[],u={optionMetadata:{trigger:r.ValueChangeTriggerTypes.OPTION_SELECTED}};t.hasClass("selected")?(o.splice(this.opts.indexOf.call(o,s),1),u.optionMetadata.trigger=r.ValueChangeTriggerTypes.OPTION_REMOVED,t.attr("checked",!1)):o.push(s),this.opts.contains.call(this.opts.results,o)?this.opts.checkAll.addClass("selected"):this.opts.checkAll.removeClass("selected"),t.toggleClass("selected"),this.setVal(o,e,u)}else this._highlightUnderEvent(e),this._selectHighlighted(null,e);else if(this.opts.multiple&&this.opts.selectAll&&t.hasClass("oj-identity-checkbox")){var a=t.parent().nextAll().find(".oj-identity-checkbox"),f=this,i=this.getVal(),o=i?i.slice(0):[],u={optionMetadata:{trigger:r.ValueChangeTriggerTypes.OPTION_SELECTED}};t.toggleClass("selected");var l=t.hasClass("selected");a.each(function(){var e=n(this.parentNode).data(f._elemNm);l?o.push(e):o.splice(f.opts.indexOf.call(o,e),1)}),l?a.addClass("selected"):(u.optionMetadata.trigger=r.ValueChangeTriggerTypes.OPTION_REMOVED,t.attr("checked",!1),a.removeClass("selected")),this.setVal(o,e,u)}})),this.dropdown.on("click mouseup mousedown",function(e){e.stopPropagation()}),n.isFunction(this.opts.initSelection)&&this._initSelection();var h=e.element.prop("disabled");void 0===h&&(h=!1),this._enable(!h);var p=e.element.prop("readonly");void 0===p&&(p=!1),this._readonly(p),r.scrollBarDimensions=r.scrollBarDimensions||r.measureScrollbar(),this.autofocus=e.element.prop("autofocus"),e.element.prop("autofocus",!1),this.autofocus&&this._focus()},_showFilter:function(e){var t=e.target;if(e=n.Event(e),this._enabled){if(!this.filterDropdown){var i=this,s=this.opts.scopesOptions||[],o=r.nextUid();this.filterDropdown=n('<div class="oj-identity-filter-drop"></div>'),this.filterDropdown.appendTo(document.body),this.filterDropdown.ojPopup(),this.filterDropdown.ojPopup("option",{tail:"none",modality:"modeless"});for(var u=0,a=s.length;u<a;u++){var f=n('<div><input type="radio" name="oj-identity-'+o+'" value="'+s[u].value+'" '+(s[u].value==i.opts.defaultScope?"checked ":"")+"/> "+s[u].label+"</div>");this.filterDropdown.append(f)}this.filterDropdown.on("click","input",function(){i.opts.defaultScope=n(this).val()})}this.filterDropdown.ojPopup("open",t)}},_clickAwayHandler:function(e){var t,r=this.dropdown;n(e.target).closest(r).length||n(e.target).closest("#"+r.attr("data-oj-containerid")).length||r.length>0&&(t=r.data("ojlistbox"),t&&t.close(e))},_surrogateRemoveHandler:function(){this.dropdown&&this.dropdown.remove()},_destroy:function(){var e=this._closeDelayTimer;isNaN(e)||(delete this._closeDelayTimer,window.clearTimeout(e));var t=this.opts.element,n=t.data(this._elemNm);this.close(),this.propertyObserver&&(delete this.propertyObserver,this.propertyObserver=null),this.opts.list&&this.results&&(this._cleanupList(this.results),this.dropdownListParent&&this.dropdownListParent.append(this.results)),void 0!==n&&(n.container.remove(),n.dropdown.remove(),t.removeAttr("aria-hidden").removeData(this._elemNm).off("."+this._classNm).prop("autofocus",this.autofocus||!1),this.elementTabIndex?t.attr({tabindex:this.elementTabIndex}):t.removeAttr("tabindex"),t.show())},_cleanupList:function(e){if(e&&e.is("ul")){e.removeClass("oj-listbox-results oj-listbox-result-sub"),e.removeAttr("role");for(var t=e.children().length-1;t>=0;t--)this._cleanupList(n(e.children()[t]))}else if(e.is("li")){(e.hasClass("oj-listbox-placeholder")||e.hasClass("oj-listbox-no-results"))&&e.remove(),e.attr("class")&&e.attr("class",e.attr("class").replace(/\oj-listbox-\S+/g,""));var r=e.children(".oj-listbox-result-label");r&&r.contents().unwrap(),"none"==e.css("display")&&e.css("display",""),this._cleanupList(e.children("ul"))}},_optionToData:function(e){if(e.is("option"))return{value:e.prop("value"),label:e.text(),element:e.get(),css:e.attr("class"),disabled:e.prop("disabled"),locked:"locked"===e.attr("locked")||e.data("locked")===!0};if(e.is("optgroup"))return{label:e.attr("label"),children:[],element:e.get(),css:e.attr("class")};if(e.is("li")){var t,n=null,r=e.children();return r&&r.length>0&&r.is("ul")?(t=e.attr("oj-data-label")?e.attr("oj-data-label"):e.clone().children().remove().end().text().trim(),n=[]):t=e.attr("oj-data-label")?e.attr("oj-data-label"):e.text().trim(),{value:e.attr("oj-data-value"),label:t,element:e.get(),css:e.attr("class"),children:n}}},_prepareOpts:function(e){var t,i,o=this;e.options&&Array.isArray(e.options)&&e.optionsKeys&&(e.options=n.extend(!0,[],e.options)),t=e.element;var u=t.get(0).tagName.toLowerCase();return"input"===u&&t.attr("list")?this.datalist=i=n("#"+t.attr("list")):"select"===u&&t.children().length>0?this.datalist=i=t:e.list&&(this.datalist=i=n("#"+e.list)),e=n.extend({},{populateResults:function(t,i,s,o){var u,a=n.proxy(this.opts.id,this),f=this,l=this.opts.optionRenderer;"function"!=typeof l&&(l=null),(u=function(t,i,o,c,h){var p,d,v,m,g,y,w,E,S=function(e,t){if(t.children&&t.children.length>0){var r=t.element&&n(t.element[0]).is("li")&&n(t.element[0]).children("ul"),i=r?n(t.element[0]).children("ul"):n("<ul></ul>");i.hasClass("oj-listbox-result-sub")||i.addClass("oj-listbox-result-sub"),u(t,t.children,i,c+1,!1),r||e.append(i)}},x=function(e,t,n){function r(e,n){var i=0;if(3===e.nodeType){var s=e.data.toUpperCase().indexOf(n);if(s>=0){var o=document.createElement("span");o.className=t;var u=e.splitText(s),a=(u.splitText(n.length),u.cloneNode(!0));o.appendChild(a),u.parentNode.replaceChild(o,u),i=1}}else if(1===e.nodeType&&e.childNodes&&!/(script|style)/i.test(e.tagName))for(var f=0;f<e.childNodes.length;++f)f+=r(e.childNodes[f],n);return i}e.length&&n&&n.length&&e.each(function(){r(this,n.toUpperCase())})},T=function(n,r){if(l){var i={index:p,depth:c,leaf:!r.children,parent:t,data:r,component:e.ojContext,parentElement:n.get(0)},o=l.call(e.ojContext,i);null!==o&&(null===o.parentNode||o.parentNode instanceof DocumentFragment)&&n.appendChild(o)}else E=e.formatResult(r),void 0!==E&&n.text(E);if(s.initial!==!0){var u=n.find(".oj-listbox-highlighter-section");u.length||(u=n),x(u,"oj-listbox-highlighter",s.term)}},N=function(t){e._placeholderData||(v={},v[e.optionsKeys.label]=t,e.optionsKeys.label!==e.optionsKeys.value&&(v[e.optionsKeys.value]=""),e._placeholderData=v),y=n("<li></li>"),y.addClass("oj-listbox-placeholder oj-listbox-results-depth-0 oj-listbox-result oj-listbox-result-selectable"),y.attr("role","presentation"),w=n(document.createElement("div")),w.addClass("oj-listbox-result-label"),w.attr("id","oj-listbox-result-label-"+r.nextUid()),w.attr("role","option"),w.text(e._placeholderData[e.optionsKeys.label]),y.append(w),y.data(f._elemNm,e._placeholderData),o.prepend(y)},C=f._getPlaceholder(),L=f.getVal();L&&0!==L.length&&(h&&C&&!s.term?N(C):e.multiple||(N(""),e.placeholder=""));var A=e.multiple&&e.selectAll;if(e.results=i,L=f.getVal(),A){var O=n("<li class='oj-listbox-results-depth-0' role='presentation'></li>"),M=r.nextUid(),_=n(document.createElement("input")),D=!1;L&&Array.isArray(L)&&(D=e.contains.call(i,L));var P=n(document.createElement("span"));P.addClass("oj-listbox-result-label"),P.attr("id","oj-listbox-result-label-"+M),P.attr("role","option"),P.text(e.selectLabel),_.attr({id:"oj-checkbox-"+M,"class":"oj-identity-checkbox",type:"checkbox",checked:D});var H=n(document.createElement("label"));H.attr({"for":"oj-checkbox-"+M,"class":"oj-identity-checkbox"+(D?" selected":""),"aria-label":D?"selected":"unselected"}),e.checkAll=H,O.append([H,P]),o.prepend(O)}var B=!!e.resultTemplateKeys&&!!Array.isArray(e.resultTemplateKeys);for(p=0,d=i.length;p<d;p+=1){v=i[p],g=v.disabled===!0,m=!g&&void 0!==a(v);var F=v.element&&n(v.element[0]).is("li");if(y=n(F?v.element[0]:"<li></li>"),y.hasClass("oj-listbox-result"))v.children&&v.children.length>0&&S(y,v),n(v.element[0]).css("display","");else{var I=r.nextUid();if(y.addClass("oj-listbox-results-depth-"+c),y.addClass("oj-listbox-result"),y.addClass(m?"oj-listbox-result-selectable":"oj-listbox-result-unselectable"),g&&y.addClass("oj-disabled"),v.children&&y.addClass("oj-listbox-result-with-children"),y.attr("role","presentation"),A){var D=!1;L&&Array.isArray(L)&&(D=e.indexOf.call(L,v)!==-1);var H=n(document.createElement("label"));H.attr({"for":"oj-checkbox-"+I,"class":"oj-identity-checkbox"+(D?" selected":""),"aria-label":D?"selected":"unselected"}),y.append(H)}var q=v.identityType?v.identityType:"";if(q||(q=v.type||""),q){var R=n(document.createElement("span"));R.attr("class","oj-identity-type "+q),y.append(R)}if(w=n(document.createElement("div")),w.addClass("oj-listbox-result-label"),w.attr("id","oj-listbox-result-label-"+I),w.attr("role","option"),g&&w.attr("aria-disabled","true"),!F){if(T(w,v),B)for(var U=e.resultTemplateKeys,z=0,W=U.length;z<W;z++)v.hasOwnProperty(U[z])&&v[U[z]]&&w.append([n("<span> | </span>"),n("<span class='info'> "+v[U[z]]+"</span>")]);else v.email&&w.append([n("<span> | <span>"),n("<span class='info'> "+v.email+"</span>")]);w[0].title=w.text(),y.append(w)}v.children&&v.children.length>0&&S(y,v),y.data(f._elemNm,v),F?(n(v.element[0]).contents().filter(function(){return"UL"!==this.tagName}).wrapAll(w),n(v.element[0]).css("display","")):o.append(y)}}})(null,i,t,0,o)}},s,e),e.id=function(e){return e[this.opts.optionsKeys.value]},e.formatResult=function(e){return isNaN(e[this.optionsKeys.label])?e[this.optionsKeys.label]:this.ojContext._formatValue(e[this.optionsKeys.label])},e.formatSelection=function(e){return e&&e[this.optionsKeys.label]?isNaN(e[this.optionsKeys.label])?e[this.optionsKeys.label]:this.ojContext._formatValue(e[this.optionsKeys.label]):void 0},"select"!==u&&null!==e.manageNewEntry&&(e.manageNewEntry=function(t){var r={};return r[e.optionsKeys.value]=r[e.optionsKeys.label]=n.trim(t),r}),i?e.query=this._bind(function(e){var t,n,s={results:[],more:!1},u=e.term;n=function(t,i){var s,a=t.children()&&t.children().length>0&&t.children().is("ul");t.is("option")||t.is("li")&&!a?e.matcher(u,t.text(),t)&&i.push(o._optionToData(t)):(t.is("optgroup")||t.is("li")&&a)&&(s=o._optionToData(t),r.each2(t.is("optgroup")?t.children():t.children("ul").children(),function(e,t){n(t,s.children)}),s.children.length>0&&i.push(s))},t=i.children(),void 0!==this._getPlaceholder()&&t.length>0&&""==t.first().attr("value")&&(t=t.slice(1)),r.each2(t,function(e,t){n(t,s.results)}),e.callback(s)}):"options"in e&&(n.isFunction(e.options)?e.query=r.remote(e.options,e.optionsKeys?e.optionsKeys:null):e.query=r.local(e.options,e.optionsKeys?e.optionsKeys:null)),e},_createHeader:function(){var e=this.opts.element.find(".oj-listbox-header");if(e.length){this.header=n("<li>",{"class":"oj-listbox-result-header oj-listbox-result-unselectable",role:"presentation"}),this.header.append(e.children()),this._initializeHeaderItems();var t=n("<ul>",{"class":"oj-listbox-results-with-header",role:"listbox"});t.append(this.header),t.appendTo(this.results.parent());var r=n("<li>",{role:"presentation"});t.append(r),this.results.attr("role","presentation"),this.results.appendTo(r)}this.headerInitialized=!0},_initializeHeaderItems:function(){this.headerItems=this.header.find("li[role='option'], li:not([role])"),this.headerItems.uniqueId(),this.header.find("ul").attr("role","presentation"),this.header.find("li:not([role])").attr("role","option");var e="a, input, select, textarea, button, object, .oj-component-initnode";this.header.find(e).each(function(){n(this).attr("tabIndex",-1)})},_isHeaderItem:function(e){var t=!1;return this.headerItems.each(function(){if(n(this).attr("id")===e)return t=!0,!1}),t},_getNextHeaderItem:function(e){if(!this.headerItems)return null;if(!e)return this.headerItems.first();var t=!1,r=null;return this.headerItems.each(function(){return t?(r=n(this),!1):void (t=n(this).attr("id")===e)}),r},_getPreviousHeaderItem:function(e){if(!this.headerItems)return null;var t=null;return this.headerItems.each(function(){return n(this).attr("id")!==e&&void (t=n(this))}),t},_setFocusOnHeaderItem:function(e){var t=e.find(".oj-component .oj-enabled").first();if(0===t.length){var n="a, input, select, textarea, button, object, .oj-component-initnode";t=e.find(n).first(),0===t.length&&(t=e.children().first())}t&&t.addClass("oj-focus")},_removeHighlightFromHeaderItems:function(){this.headerItems&&this.headerItems.find(".oj-focus").removeClass("oj-focus")},_triggerSelect:function(e){var t=n.Event(this._elemNm+"-selecting",{val:this.id(e),object:e});return this.opts.element.trigger(t),!t.isDefaultPrevented()},_isInterfaceEnabled:function(){return this.enabledInterface===!0},_enableInterface:function(){var e=this._enabled&&!this._readonly,t=!e;return e!==this.enabledInterface&&(this.container.toggleClass("oj-disabled",t),this.close(),this.enabledInterface=e,!0)},_enable:function(e){void 0===e&&(e=!0),this._enabled!==e&&(this._enabled=e,this.opts.element.prop("disabled",!e),this.container.toggleClass("oj-enabled",e),this.container.find(".oj-identity-filter").toggleClass("disabled-filter",!e),this._enableInterface())},_disable:function(){this._enable(!1)},_readonly:function(e){return void 0===e&&(e=!1),this._readonly!==e&&(this._readonly=e,this.opts.element.prop("readonly",e),this._enableInterface(),!0)},_opened:function(){return this.container.hasClass("oj-listbox-dropdown-open")},_usingHandler:function(e,t){if(d(t))return void (this._closeDelayTimer=window.setTimeout(n.proxy(this.close,this),1));var r=this.container,i=t.element.element;i.css(e),"bottom"===t.vertical?(r.addClass("oj-listbox-drop-above"),i.addClass("oj-listbox-drop-above")):(r.removeClass("oj-listbox-drop-above"),i.removeClass("oj-listbox-drop-above"))},_getDropdownPosition:function(){var e={my:"start top",at:"start bottom",of:this.container.children().first(),collision:"flip",using:n.proxy(this._usingHandler,this)},t="rtl"===c();return v(e,t)},_positionDropdown:function(){this.dropdown.css("width",this.container.outerWidth()),this.dropdown.position(this._getDropdownPosition())},_shouldOpen:function(e){if(this._opened())return n.isFunction(this.opts.options);if(this._enabled===!1||this._readonly===!0)return!1;var t={component:this.opts.element};return this.ojContext._trigger("beforeExpand",e,t)},_clearDropdownAlignmentPreference:function(){this.container.removeClass("oj-listbox-drop-above"),this.dropdown.removeClass("oj-listbox-drop-above")},open:function(e,t){return!!this._shouldOpen(e)&&(this._opening(e,t),!0)},_opening:function(){this.headerInitialized||this._createHeader(),this.container.addClass("oj-listbox-dropdown-open")},_showDropDown:function(){if(this._opened()){this.windowEventBind=n.proxy(this._positionDropdown,this),this.documentEventBind=n.proxy(this._clickAwayHandler,this),window.addEventListener("resize",this.windowEventBind,!0),window.addEventListener("scroll",this.windowEventBind,!0),document.documentElement.addEventListener("mousedown",this.documentEventBind,!0);var e=this._getActiveContainer().attr("aria-expanded");if("true"!==e){this._clearDropdownAlignmentPreference(),this.dropdown[0]!==this.body().children().last()[0]&&this.dropdown.detach().appendTo(this.body()),this.dropdown.appendTo(this.body()),this.header&&(this.dropdown.find(".oj-listbox-results-with-header").prepend(this.header),this.header.show()),this.dropdown.position(this._getDropdownPosition()).show(),n("#oj-listbox-drop").removeAttr("id"),this.dropdown.attr("id","oj-listbox-drop");var t=this.containerId;this.dropdown.attr("data-oj-containerid",t),this._positionDropdown(),this._getActiveContainer().attr("aria-expanded",!0)}}},close:function(e){if(this._opened()){if(this._selectionEvent&&this._selectionEvent.target&&n(this._selectionEvent.target).hasClass("oj-identity-checkbox"))return void (this._selectionEvent=null);this.container.removeClass("oj-listbox-dropdown-open");var t=this._getActiveContainer().attr("aria-expanded");if(t&&"false"!==t){window.removeEventListener("resize",this.windowEventBind,!0),window.removeEventListener("scroll",this.windowEventBind,!0),document.documentElement.removeEventListener("mousedown",this.documentEventBind,!0);var r=this.containerId,i="scroll."+r,s="resize."+r,o="orientationchange."+r;this.container.parents().add(window).each(function(){n(this).off(i).off(s).off(o)}),this._clearDropdownAlignmentPreference(),this.header&&(this.header.hide(),this.header.appendTo(this.container)),this.dropdown.removeAttr("data-oj-containerid"),this.dropdown.removeAttr("id"),this.opts.list?this._removeHighlight():(this.dropdown.detach(),this.results.empty()),this._getActiveContainer().attr("aria-expanded",!1),this.ojContext._IsRequired()&&this.ojContext.validate()}}},_clearSearch:function(){},_ensureHighlightVisible:function(){var e,t,r,i,s,o,u,a=this.results;if(t=this._highlight(),!(t<0)){if(0==t)return void a.scrollTop(0);e=this._findHighlightableChoices().find(".oj-listbox-result-label"),r=n(e[t]),i=r.offset().top+r.outerHeight(!0),t===e.length-1&&(u=a.find("li.oj-listbox-more-results"),u.length>0&&(i=u.offset().top+u.outerHeight(!0))),s=a.offset().top+a.outerHeight(!0),i>s&&a.scrollTop(a.scrollTop()+(i-s)),o=r.offset().top-a.offset().top,o<0&&"none"!=r.css("display")&&a.scrollTop(a.scrollTop()+o)}},_findHighlightableChoices:function(){return this.results.find(".oj-listbox-result-selectable:not(.oj-disabled, .oj-selected)").filter(function(){return"none"!=n(this).css("display")})},_moveHighlight:function(e){var t=this._findHighlightableChoices(),r=this._highlight();if(this.header&&(r<=0||r===t.length-1)){var i=this._getActiveContainer().attr("aria-activedescendant"),s=this._isHeaderItem(i);s||(i=null);var o=null;if(e>0&&(r<0||r===t.length-1)?o=this._getNextHeaderItem(i):e<0&&(s&&r<0||0===r)&&(o=this._getPreviousHeaderItem(i)),o)return this._removeHighlight(),this._setFocusOnHeaderItem(o),void this._getActiveContainer().attr("aria-activedescendant",o.attr("id"));s&&e<0&&(r=0)}for(;r>=-1&&r<t.length;){r+=e,r==t.length?r=0:r==-1&&(r=t.length-1);var u=n(t[r]);if(u.hasClass("oj-listbox-result-selectable")&&!u.hasClass("oj-disabled")&&!u.hasClass("oj-selected")){this._highlight(r);break}}},_highlight:function(e){var t,r=this._findHighlightableChoices();if(0===arguments.length){var i=r.filter(".oj-hover");return i.length||(i=r.children(".oj-hover").closest(".oj-listbox-result")),r.get().indexOf(i[0])}e>=r.length&&(e=r.length-1),e<0&&(e=0),this._removeHighlight(),t=n(r[e]),t.hasClass("oj-listbox-result-with-children")?t.children(".oj-listbox-result-label").addClass("oj-hover"):t.addClass("oj-hover"),this._getActiveContainer().attr("aria-activedescendant",t.find(".oj-listbox-result-label").attr("id")),this._ensureHighlightVisible()},_removeHighlight:function(){this.results.find(".oj-hover").removeClass("oj-hover"),this._removeHighlightFromHeaderItems()},_highlightUnderEvent:function(e){var t=n(e.target).closest(".oj-listbox-result-selectable");if(t.length>0&&!t.is(".oj-hover")){var r=this._findHighlightableChoices();this._highlight(r.index(t))}else 0==t.length&&this._removeHighlight()},_updateResults:function(e){var t=this.search,i=this,s=t.val(),o=n.data(this.container,this._classNm+"-last-term");if((e===!0||!o||s!==o)&&(o||s||!e||"input"!==e.type)){n.data(this.container,this._classNm+"-last-term",s);var u=this.opts.minLength||0;s.length>=u?(clearTimeout(this.queryTimer),e&&e!==!0?this.queryTimer=setTimeout(function(){i._queryResults(e)},r.DEFAULT_QUERY_DELAY):this._queryResults(e)):this.close()}},_queryResults:function(e){function t(){if(f._positionDropdown(),f.header&&f.headerItems.length){var e=f._findHighlightableChoices(),t=f.headerItems.length+e.length;if(f.headerItems.attr("aria-setsize",t),e.length){var n=e.children("[role='option']");n.attr("aria-setsize",t),n.first().attr("aria-posinset",f.headerItems.length+1)}}}var i,s,o=this.search,u=this.results,a=this.opts,f=this,l=o.val(),c=a.minLength||0;return c>l.length?void this.close():(this.open(null,!0),s=++this.queryCount,this._removeHighlight(),i=this.search.val(),l=void 0!==i&&null!==i&&(e!==!0||a.inputSearch||a.minLength>0)?i:"",this.resultsPage=1,void a.query({element:a.element,term:l,page:this.resultsPage,context:null,matcher:a.matcher,callback:this._bind(function(i){if(this._opened())if(this.context=i&&void 0!==i.context?i.context:null,i&&0!==i.results.length)r.saveLastQueryResult(this,i.results),this._showDropDown(),this._preprocessResults(u),f.opts.populateResults.call(this,u,i.results,{term:o.val(),page:this.resultsPage,context:null,initial:e},this._showPlaceholder()),this._postprocessResults(i,e),t();else if("oj-select"===this._classNm&&this.opts.multiple!==!0||this.opts.inputSearch&&""!==n.trim(this.opts.inputSearch)||this.header){var s=n("<li>");s.addClass("oj-listbox-no-results"),s.text(a.noMatchesFound),this._showDropDown(),this._preprocessResults(u),u.append(s),t()}})}))},_preprocessResults:function(e){if(this.opts.list){var t=e.children();this._hideResultList(t)}else e.empty()},_hideResultList:function(e){for(var t=0;t<e.length;t++){n(e[t]).is("LI")&&((n(e[t]).hasClass("oj-listbox-no-results")||n(e[t]).hasClass("oj-listbox-placeholder"))&&n(e[t]).remove(),n(e[t]).css("display","none"),n(e[t]).hasClass("oj-selected")&&n(e[t]).removeClass("oj-selected"));var r=n(e[t]).children("ul");r&&r.children()&&this._hideResultList(r.children())}},_cancel:function(e){this.close(e)},_focusSearch:function(){r._focus(this.search)},_selectHighlighted:function(e,t){if(this.header){var i=this._getActiveContainer().attr("aria-activedescendant");if(this._isHeaderItem(i)){var s=n("#"+i),o="a, input, select, textarea, button, object",u=s.find(o).first();return 0===u.length&&(u=s.children()),u.length&&u[0].click(),void this.close(t)}}var a=this._highlight(),f=this.results.find(".oj-hover"),l=f.closest(".oj-listbox-result").data(this._elemNm);l?(this._highlight(a),e=e||{},e.trigger=r.ValueChangeTriggerTypes.OPTION_SELECTED,l!==this.opts._placeholderData?this._onSelect(l,e,t):this._onSelect([],e,t)):e&&e.noFocus&&this.close(t)},_getPlaceholder:function(){return this.opts.element.attr("placeholder")||this.opts.element.attr("data-placeholder")||this.opts.element.data("placeholder")||this.opts.placeholder},_setPlaceholder:function(){var e=this._getPlaceholder();e&&(this.search.attr("placeholder",e),this.container.removeClass(this._classNm+"-allowclear"))},_initContainerWidth:function(){function e(){var e,t,n,r,i,s;if(e=this.opts.element.attr("style"),void 0!==e)for(t=e.split(";"),r=0,i=t.length;r<i;r+=1)if(s=t[r].replace(/\s/g,""),n=s.match(/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i),null!==n&&n.length>=1)return n[1]}var t=e.call(this);null!==t&&this.container.css("width",t)},getVal:function(){return this.ojContext.option("value")},setVal:function(e,t,n){var r={doValueChangeCheck:!1};n&&(r._context=n),"string"!=typeof e&&Array.isArray(e)||(e=[e]),this.opts.element.val(0!==e.length?e:null),this.ojContext._updateValue(e,t,r)},_showPlaceholder:function(){return!1},_getActiveContainer:function(){return this.search},_hasSearchBox:function(){return void 0!==this.opts.minimumResultsForSearch&&void 0!==this.container._hasSearchBox},_findItem:function(e,t){for(var r=0;r<e.length;r++)if(n(e[r]).data(this._elemNm).value===t)return e[r];return null}}),s={closeOnSelect:!0,openOnEnter:!0,id:function(e){return e.id},matcher:function(e,t){return(""+t).toUpperCase().indexOf((""+e).toUpperCase())>=0},separator:","},o=r.clazz(i,{_enableInterface:function(){o.superclass._enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this._isInterfaceEnabled())},_focus:function(){this._opened()&&this.close()},_destroy:function(){n("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id")),o.superclass._destroy.apply(this,arguments)},_clear:function(e){this.selection.data(this._elemNm),this.search.val(""),this.selection.removeData(this._elemNm),this._setPlaceholder()},_initSelection:function(){var e=this.opts.element;this.opts.initSelection.call(null,e,this._bind(this._updateSelectedOption))},_containerKeydownHandler:function(e){if(this._isInterfaceEnabled()){if(e.which===r.KEY.PAGE_UP||e.which===r.KEY.PAGE_DOWN)return void r.killEvent(e);switch(e.which){case r.KEY.UP:case r.KEY.DOWN:return this._opened()?this._moveHighlight(e.which===r.KEY.UP?-1:1):this.open(e),void r.killEvent(e);case r.KEY.ENTER:return this._selectHighlighted(null,e),r.killEvent(e),void (this._opened()||(this._userTyping=!1));case r.KEY.TAB:return this.close(e),void (this._userTyping=!1);case r.KEY.ESC:return this._opened()&&(this._cancel(e),r.killEvent(e)),void (this._userTyping=!1)}this._userTyping=!0}},_containerKeyupHandler:function(e){this._isInterfaceEnabled()&&(this._opened()||this.open(e))},_initContainer:function(){var e,t,i=this.container,s=(this.dropdown,this.opts.rootAttributes),o=s&&s.id?s.id:this.opts.element.attr("id")||r.nextUid();this.selection=e=i.find("."+this._classNm+"-choice"),e.attr("id",this._classNm+"-choice-"+o),t=n("label[for='"+this.opts.element.attr("id")+"']"),t.attr("id")||t.attr("id",this._classNm+"-label-"+o),e.find("."+this._classNm+"-input").attr("id",this._classNm+"-input-"+o),this.results.attr("id")||this.results.attr("id","oj-listbox-results-"+o),this.search.attr("aria-owns",this.results.attr("id")),this.search.attr("aria-labelledby",t.attr("id")),this.opts.element.attr("aria-labelledby",t.attr("id")),this.search.attr("id")&&t.attr("for",this.search.attr("id")),this.opts.element.attr("aria-label")&&this.search.attr("aria-label",this.opts.element.attr("aria-label")),this.opts.element.attr("aria-controls")&&this.search.attr("aria-controls",this.opts.element.attr("aria-controls")),e.on("keydown",this._bind(this._containerKeydownHandler)),e.on("mousedown","abbr",this._bind(function(e){this._isInterfaceEnabled()&&(this._clear(e),r.killEventImmediately(e),this.close(e),this.selection.focus())})),e.on("mousedown",this._bind(function(e){this.opts.element.prop("disabled")&&r.killEvent(e),this._opened()?this.close(e):this._isInterfaceEnabled()&&this.open(e);var t=this.search.parent().attr("aria-hidden");t&&"true"==t?this.selection.focus():this.search.focus(),this.container.addClass("oj-active")})),e.on("mouseup",this._bind(function(e){this.container.removeClass("oj-active")})),e.on("focus",this._bind(function(e){r.killEvent(e)})),this.search.on("blur keyup",this._bind(function(e){if("keyup"!==e.type||10===e.keyCode||13===e.keyCode){if(void 0!==this.search.val()&&this.results.find(".oj-hover").length<=0)if(this.opts.manageNewEntry){var t=this.selection.data(this._elemNm);if(!t&&""!==this.search.val()||t&&(t.label!==this.search.val()||!this.ojContext.isValid())){var n=this.opts.manageNewEntry(this.search.val()),i="blur"===e.type?r.ValueChangeTriggerTypes.BLUR:r.ValueChangeTriggerTypes.ENTER_PRESSED,s={trigger:i};this._onSelect(n,s,e)}}else if(null==this.opts.manageNewEntry){var n=this.selection.data(this._elemNm);if(""==this.search.val())this._clear(e);else if("oj-select"!==this._classNm){var o=this.opts.formatSelection(n);void 0!==o&&this.search.val(o)}}this.search.removeClass(this._classNm+"-focused"),this.container.removeClass("oj-focus")}})),this._initContainerWidth(),this.opts.element.hide().attr("aria-hidden",!0),this._setPlaceholder()},_prepareOpts:function(){var e=o.superclass._prepareOpts.apply(this,arguments),t=this,i=this.getVal(),s=e.element.get(0).tagName.toLowerCase();if("input"===s&&e.element.attr("list")||"select"===s&&e.element.children().length>0||e.list){var u=e.list?"li":"option";e.initSelection=function(e,n){var r,i=t.getVal();Array.isArray(i)&&(i=i[0]),r=void 0!==i&&null!==i?t._optionToData(e.find(u).filter(function(){return"li"==u?this.getAttribute("oj-data-value")===i:"option"==u?this.value===i:void 0})):t._optionToData(e.find(u).filter(function(){return"li"==u?this.getAttribute("oj-data-selected")===!0:"option"==u?this.selected:void 0})),n(r)},e.validate=function(e,n){var r;return void 0!==n&&null!==n&&(r=t._optionToData(e.find(u).filter(function(){return"li"==u?this.getAttribute("oj-data-value")===n:"option"==u?this.value===n:void 0}))),!!r}}else("options"in e||i&&i.length>0)&&(n.isFunction(e.options)?(e.initSelection=function(s,o){var u=function(e,t){for(var n=0,r=e.length;n<r;n++){var i=e[n];if(JSON.stringify(t)===JSON.stringify(i))return i;if(i.children){var s=u(i.children,t);if(s)return s}}return null};i=t.getVal();var a="";i&&i.length&&(a=i[0]);var f=null;if(!a)return void o(f);var l=r.getLastQueryResult(t);if(l&&(f=u(l,a)),!f){var c=t.currentItem;c&&c.length&&a===c[0]&&(f=c[0])}f||t.valueChangeTrigger?o(f):e.query({value:[a],callback:n.isFunction(o)?function(e){e&&e.results&&(f=u(e.results,a)),o(f)}:n.noop})},e.validate||(e.validate=function(e,t){return!0})):(e.initSelection=function(r,o){var u="";i=t.getVal(),i&&i.length&&(u=i[0]);var a="select"==s&&t.ojContext._HasPlaceholderSet()&&!t.ojContext._IsRequired(),f=a?t._getPlaceholder():null,l=null;e.query({matcher:function(e,t,n){var r=JSON.stringify(u)===JSON.stringify(n);return r&&(l=n),null==f&&(f=n),r},callback:n.isFunction(o)?function(){l||"select"!==s||(l=f),o(l)}:n.noop})},e.validate=function(t,r){var i=r,s=null;return e.query({matcher:function(e,t,n){var r=JSON.stringify(i)===JSON.stringify(n);return r&&(s=n),r},callback:n.noop}),!!s}));return e},_postprocessResults:function(e,t,n){var i,s=-1,o=this;i=this._findHighlightableChoices(),r.each2(i,function(e,t){var n=o.getVal();if(n&&n[0]===o.id(t.data(o._elemNm)))return s=e,!1}),n!==!1&&t===!0&&s>=0&&this._highlight(s)},_onSelect:function(e,t,n){if(this._triggerSelect(e)){var r;t&&t.trigger&&(r={optionMetadata:{trigger:t.trigger}}),this.setVal(e?e:[],n,r),this.close(n),this._focusSearch()}},_clearSearch:function(){this.search.val("")}}),u=r.clazz(o,{_elemNm:"ojidentity",_classNm:"oj-select",_userTyping:!1,_createContainer:function(){var e=n(document.createElement("div")).attr({"class":"oj-identity oj-select oj-component"}).html(["<div class='oj-select-choice' tabindex='0' role='combobox' ","     aria-autocomplete='none' aria-expanded='false' aria-ready='true'>","  <span class='oj-select-chosen'></span>","  <abbr class='oj-select-search-choice-close' role='presentation'></abbr>","  <a class='oj-select-arrow oj-component-icon oj-clickable-icon-nocontext oj-select-open-icon' role='presentation'>","</a></div>","<span class='oj-identity-filter'></span>","<div class='oj-listbox-drop oj-identity-container' style='display:none' role='presentation'>","  <div class='oj-listbox-search-wrapper'>","  <div class='oj-listbox-search'>","    <input type='text' autocomplete='off' autocorrect='off' autocapitalize='off'","           spellcheck='false' class='oj-listbox-input' title='Search field' ","           role='combobox' aria-expanded='false' aria-autocomplete='list' />","    <span class='oj-listbox-spyglass-box'>","      <span class='oj-component-icon oj-clickable-icon-nocontext oj-listbox-search-icon' role='presentation'>","       <b role='presentation'></b></span>","    </span>","    <span class='oj-identity-loading-container oj-select-loading'>","      <span class='oj-identity-loading' role='presentation'>","       &nbsp;</span>","    </span>","  </div>","  </div>","   <ul class='oj-listbox-results' role='listbox'>","   </ul>","</div>"].join(""));return e},_enable:function(e){u.superclass._enable.apply(this,arguments),this._enabled?(this.container.find(".oj-select-choice").attr("tabindex","0"),this.container.find(".oj-select-arrow").removeClass("oj-disabled")):(this.container.find(".oj-select-choice").attr("tabindex","-1"),this.container.find(".oj-select-arrow").addClass("oj-disabled"))},close:function(e){this._opened()&&(u.superclass.close.apply(this,arguments),this.container.find(".oj-select-choice").attr("aria-expanded",!1),this._testClear(e)||this._clearSearch(),e instanceof MouseEvent&&e.target!=this.selection&&e.target!=this.search||r._focus(this.selection),this.container.find(".oj-listbox-spyglass-box").off("mouseup click"))},_opening:function(e,t){u.superclass._opening.apply(this,arguments);var n;e&&"keydown"==e.type&&e.which!=r.KEY.UP&&e.which!=r.KEY.DOWN&&e.which!=r.KEY.LEFT&&e.which!=r.KEY.RIGHT&&(n=String.fromCharCode(e.which),r.killEvent(e)),this._opened()&&(n=this.search.val()),this._showSearchBox(n),t||(n?this._updateResults():this._updateResults(!0))},_showDropDown:function(){if(this._opened()){u.superclass._showDropDown.apply(this,arguments),this.container.find(".oj-select-choice").attr("aria-expanded",!0);var e,t,n;this._hasSearchBox()&&(e=this.search.get(0),e.createTextRange?(t=e.createTextRange(),t.collapse(!1),t.select()):e.setSelectionRange&&(n=this.search.val().length,e.setSelectionRange(n,n)))}},_initContainer:function(){var e=this.containerId+"_selected";this.text=this.container.find(".oj-select-chosen").attr("id",e),u.superclass._initContainer.apply(this,arguments),this.container.find(".oj-select-choice").attr({"aria-owns":this.search.attr("aria-owns"),"aria-labelledby":this.search.attr("aria-labelledby"),"aria-describedby":e});var t=this.opts.element.attr("aria-label");t&&this.selection.attr("aria-label",t),this.search.on("keydown",this._bind(this._containerKeydownHandler)),this.search.on("keyup-change input",this._bind(this._containerKeyupHandler));var n=this;this.selection.on("blur",function(e){n._testClear(e)})},_initSelection:function(){this._isPlaceholderOptionSelected()?(this._updateSelection(null),this.close(),this._setPlaceholder()):u.superclass._initSelection.apply(this,arguments)},_updateSelectedOption:function(e){if(void 0!==e&&null!==e){var t=this.getVal();t=Array.isArray(t)?t[0]:t,JSON.stringify(t)!==JSON.stringify(e)&&(void 0===t||null===t?this.ojContext.options.value=Array.isArray(e)?e:[e]:this.setVal(Array.isArray(e)?e:[e])),this._updateSelection(e),this.close()}},_updateSelection:function(e){this.selection.data(this._elemNm,e),null!==e&&this.text.text(e[this.opts.optionsKeys.label]),e&&""!=e.id&&this.text.removeClass(this._classNm+"-default"),this.opts.allowClear&&this.container.addClass(this._classNm+"-allowclear")},_getActiveContainer:function(){var e=this.search.attr("aria-expanded");return e&&this._hasSearchBox()?this.search:this.selection},_isPlaceholderOptionSelected:function(){if(null===this._getPlaceholder())return!1;var e=this.getVal();return e=Array.isArray(e)?e[0]:e,""===e||void 0===e||null===e},_getPlaceholder:function(){return this.opts.placeholder},_showPlaceholder:function(){return!0},_setPlaceholder:function(){var e=this._getPlaceholder();this._isPlaceholderOptionSelected()&&void 0!==e&&(void 0===e&&(e=""),this.text.text(e).addClass(this._classNm+"-default"),this.container.removeClass(this._classNm+"-allowclear"))},setVal:function(e,t,n){u.superclass.setVal.call(this,e,t,n),this.selection.data("selectVal",e)},_containerKeydownHandler:function(e){if(!(r.KEY.isControl(e)&&e.which!=r.KEY.SHIFT||r.KEY.isFunctionKey(e))){switch(e.which){case r.KEY.TAB:return this.close(e),this.selection.focus(),void this._testClear(e);case r.KEY.ENTER:if(e.target===this.selection[0]&&!this._opened())return this.open(e),void r.killEvent(e)}var t=this._hasSearchBox();if(u.superclass._containerKeydownHandler.apply(this,arguments),this._userTyping&&!this._opened()&&this.open(e),!t&&this._userTyping){var n;e.which!=r.KEY.LEFT&&e.which!=r.KEY.RIGHT&&(n=String.fromCharCode(e.which)),this._showSearchBox(n),this._updateResults(),r.killEvent(e)}}},_testClear:function(e){return""==this.text.text()&&(this._clear(e),!0)},_showSearchBox:function(e){var t=!1,i=this.dropdown.find(".oj-listbox-search");if(i&&(this._hasSearchBox()?(this.dropdown.find(".oj-listbox-search-wrapper").removeClass("oj-helper-hidden-accessible"),n(i).removeAttr("aria-hidden"),this.search.val(e),t=!0):(this.dropdown.find(".oj-listbox-search-wrapper").addClass("oj-helper-hidden-accessible"),n(i).attr("aria-hidden","true"))),r._focus(t?this.search:this.selection),t){var s=this;i.find(".oj-listbox-spyglass-box").on("mouseup click",function(e){s.search.focus(),e.stopPropagation()})}},_hasSearchBox:function(){var e,t=this.opts.minimumResultsForSearch;return e=this.opts.list?n("#"+this.opts.list).find("li").length:this.datalist?this.datalist[0].length:this.opts.options?this.opts.options.length:0,e>t||this._userTyping||n.isFunction(this.opts.options)}}),a=r.clazz(i,{_prepareOpts:function(){var e=a.superclass._prepareOpts.apply(this,arguments),t=this,i=e.element.get(0).tagName.toLowerCase();if("input"===i&&e.element.attr("list")||"select"===i&&e.element.children().length>0||e.list){var s=e.list?"li":"option";e.initSelection=function(e,n){var o,u=[],a=t.getVal();if(a)for(var f=a,l=0;l<f.length;l++){var c=f[l];o=e.find(s).filter(function(){return"option"===s?this.value===c:"li"===s?this.getAttribute("oj-data-value")===c:void 0}),o&&o.length?u.push(t._optionToData(o)):u.push({value:c,label:c})}else"select"!==i&&(o=e.find(s).filter(function(){return"option"===s?this.selected:"li"===s?this.getAttribute("oj-data-selected")===!0:void 0}),r.each2(o,function(e,n){u.push(t._optionToData(n))}));n(u)}}else"options"in e&&(n.isFunction(e.options)?e.initSelection=function(i,s){var o=function(t,r){for(var i=[],s=0,u=t.length;s<u;s++){var a=t[s],f=e.indexOf.call(t,a);if(f>=0&&i.push(a),a.children){var l=o(a.children,r);l&&l.length&&n.merge(i,l)}}return i},u=t.getVal(),a=[],f=r.getLastQueryResult(t);f&&(a=o(f,u));var l=function(){for(var e=[],n=0;n<u.length;n++){for(var r=u[n],i=!1,o=0;o<a.length;o++){var f=a[o];if(JSON.stringify(r)===JSON.stringify(f)){e.push(f),a.splice(o,1),i=!0;break}}if(!i){var l=t.currentItem;if(l&&l.length)for(var c=0;c<l.length;c++)if(JSON.stringify(r)===JSON.stringify(l[c])){e.push(l[c]),i=!0;break}i||e.push(r)}}s(e)};t.valueChangeTrigger?l():e.query({value:u,callback:function(e){if(e&&e.results){var t=o(e.results,u);t&&t.length&&n.merge(a,t)}l()}})}:e.initSelection=e.initSelection||function(r,i){var s=t.getVal(),o=[];e.query({matcher:function(e,t,r){var i=n.grep(s,function(e){return JSON.stringify(e)===JSON.stringify(r)}).length;return i&&o.push(r),i},callback:n.isFunction(i)?function(){for(var e=[],t=0;t<s.length;t++){for(var n=s[t],r=!1,u=0;u<o.length;u++){var a=o[u];if(JSON.stringify(n)===JSON.stringify(a)){e.push(a),o.splice(u,1),r=!0;break}}r||e.push(n)}i(e)}:n.noop})});return e},_selectChoice:function(e){var t=this.container.find("."+this._classNm+"-selected-choice.oj-focus");t.length&&e&&e[0]==t[0]||(t.length&&this.opts.element.trigger("choice-deselected",t),t.removeClass("oj-focus"),e&&e.length&&(this.close(),e.addClass("oj-focus"),this.container.find("."+this._classNm+"-description").text(e.attr("valueText")+". Press back space to delete.").attr("aria-live","assertive"),this.opts.element.trigger("choice-selected",e)))},_destroy:function(){n("label[for='"+this.search.attr("id")+"']").attr("for",this.opts.element.attr("id")),a.superclass._destroy.apply(this,arguments)},_initContainer:function(){var e,t,i="."+this._classNm+"-choices",s=r.nextUid();this.searchContainer=this.container.find("."+this._classNm+"-search-field"),this.selection=e=this.container.find(i);var o=this;this.selection.on("click","."+this._classNm+"-selected-choice:not(."+this._classNm+"-locked)",function(e){o.search[0].focus(),o._selectChoice(n(this))}),t=n("label[for='"+this.opts.element.attr("id")+"']"),t.attr("id")||t.attr("id",this._classNm+"-label-"+s),e.find("."+this._classNm+"-input").attr("id",this._classNm+"-input-"+s),this.results.attr("id")||this.results.attr("id","oj-listbox-results-"+s),this.search.attr("aria-owns",this.results.attr("id")),this.search.attr("aria-labelledby",t.attr("id")),this.opts.element.attr("aria-labelledby",t.attr("id")),this.search.attr("id")&&t.attr("for",this.search.attr("id")),this.opts.element.attr("aria-label")&&this.search.attr("aria-label",this.opts.element.attr("aria-label")),this.opts.element.attr("aria-controls")&&this.search.attr("aria-controls",this.opts.element.attr("aria-controls")),this.search.attr("tabindex",this.elementTabIndex),this.keydowns=0,this.search.on("keydown",this._bind(function(t){if(this._isInterfaceEnabled()){++this.keydowns;var n=e.find("."+this._classNm+"-selected-choice.oj-focus"),i=n.prev("."+this._classNm+"-selected-choice:not(."+this._classNm+"-locked)"),s=n.next("."+this._classNm+"-selected-choice:not(."+this._classNm+"-locked)"),o=r.getCursorInfo(this.search);if(!(!n.length||t.which!=r.KEY.LEFT&&t.which!=r.KEY.RIGHT&&t.which!=r.KEY.BACKSPACE&&t.which!=r.KEY.DELETE&&t.which!=r.KEY.ENTER)){var u=n;return t.which==r.KEY.LEFT&&i.length?u=i:t.which==r.KEY.RIGHT?u=s.length?s:null:t.which===r.KEY.BACKSPACE?(this._unselect(n.first(),t),this.search.width(10),u=i.length?i:s):t.which==r.KEY.DELETE?(this._unselect(n.first(),t),this.search.width(10),u=s.length?s:null):t.which==r.KEY.ENTER&&(u=null),this._selectChoice(u),r.killEvent(t),void (u&&u.length||this.open())}if((t.which===r.KEY.BACKSPACE&&1==this.keydowns||t.which==r.KEY.LEFT)&&0==o.offset&&!o.length)return this._selectChoice(e.find("."+this._classNm+"-selected-choice:not(."+this._classNm+"-locked)").last()),void r.killEvent(t);if(this._selectChoice(null),this._opened())switch(t.which){case r.KEY.UP:case r.KEY.DOWN:return this._moveHighlight(t.which===r.KEY.UP?-1:1),void r.killEvent(t);case r.KEY.ENTER:return this._selectHighlighted(null,t),void r.killEvent(t);case r.KEY.TAB:return void this.close(t);case r.KEY.ESC:return this._cancel(t),void r.killEvent(t)}if(!(t.which===r.KEY.TAB||r.KEY.isControl(t)||r.KEY.isFunctionKey(t)||t.which===r.KEY.ESC||t.which===r.KEY.ENTER&&this.search.val()&&"ojcombobox"===this._elemNm))switch(t.which){case r.KEY.UP:case r.KEY.DOWN:return this.open(),void r.killEvent(t);case r.KEY.PAGE_UP:case r.KEY.PAGE_DOWN:return void r.killEvent(t);case r.KEY.ENTER:return void r.killEvent(t)}}})),this.search.on("keyup",this._bind(function(e){this.keydowns=0})),this.search.on("blur keyup",this._bind(function(e){if("keyup"!==e.type||10===e.keyCode||13===e.keyCode){if(this.opts.manageNewEntry&&this.search.val()&&this.results.find(".oj-hover").length<=0){var t=this.opts.manageNewEntry(this.search.val()),n="blur"===e.type?r.ValueChangeTriggerTypes.BLUR:r.ValueChangeTriggerTypes.ENTER_PRESSED,i={trigger:n};this._onSelect(t,i,e)}this.search.removeClass(this._classNm+"-focused"),this.container.removeClass("oj-focus"),this._selectChoice(null),this._opened()||this._clearSearch(),e.stopImmediatePropagation()}})),this.container.on("click touchstart",i,this._bind(function(e){this._isInterfaceEnabled()&&(n(e.target).closest("."+this._classNm+"-selected-choice").length>0||(this._selectChoice(null),this._opened()?this.close(e):(this.open(),this._focusSearch()),e.preventDefault()))})),this.container.on("focus",i,this._bind(function(){!this._isInterfaceEnabled()})),this._initContainerWidth(),this.opts.element.hide().attr("aria-hidden",!0),this._clearSearch()},_enableInterface:function(){a.superclass._enableInterface.apply(this,arguments)&&this.search.prop("disabled",!this._isInterfaceEnabled())},_initSelection:function(){var e=this.getVal();if(null!==e&&0!==e.length||"oj-select"!==this._classNm&&""!==this.opts.element.text()||(this._updateSelection([]),this.close(),this._clearSearch()),null!==e&&e.length){var t=this,n=this.opts.element;this.opts.initSelection.call(null,n,function(e){void 0!==e&&null!==e&&0!==e.length&&(t._updateSelection(e),t.close(),t._clearSearch())})}},_clearSearch:function(){var e=this._getPlaceholder(),t=this._getMaxSearchWidth(),n=this.getVal();void 0===e||n&&0!==n.length?(this.search.attr("placeholder",""),this.search.val("").width(10),this.searchContainer.width("auto")):(this.search.attr("placeholder",e),this.search.val("").width(t>0?t:this.container.css("width")),this.searchContainer.width("100%"))},_opening:function(e,t){this._resizeSearch(),a.superclass._opening.apply(this,arguments),this._focusSearch(),t||this._updateResults(!0),this.search.focus()},close:function(e){this._opened()&&a.superclass.close.apply(this,arguments)},_focus:function(){this.close(),this.search.focus()},_updateSelection:function(e){var t=[],r=[],i=this;n(e).each(function(){i.opts.indexOf.call(t,this)<0&&(t.push(this),r.push(this))}),e=r,this.selection.find("."+this._classNm+"-selected-choice").remove(),n(e).each(function(){i._addSelectedChoice(this)}),this.currentItem=e,this.opts.element.val(0===t.length?[]:t),i._postprocessResults(),setTimeout(function(){i._positionDropdown()},0)},_onSelect:function(e,t,r){if(this._triggerSelect(e)){var i,s=this;t&&t.trigger&&(i={optionMetadata:{trigger:t.trigger}});var o=this.getVal(),u=o?o.slice(0):[];n(e).each(function(){s.opts.indexOf.call(u,this)<0&&u.push(this)}),this.setVal(u,r,i),!this.select&&this.opts.closeOnSelect||this._postprocessResults(e,!1,this.opts.closeOnSelect===!0),this.opts.closeOnSelect&&(this.close(r),this.search.width(10)),t&&t.noFocus||this._focusSearch()}},_cancel:function(e){this.close(e),this._focusSearch()},_addSelectedChoice:function(e){var t,i=!e.locked,s=n("<li class='"+this._classNm+"-selected-choice'>    <div></div>    <a href='#' onclick='return false;' role='button' aria-label='remove' class='"+this._classNm+"-clear-entry       oj-component-icon oj-clickable-icon-nocontext "+this._classNm+"-clear-entry-icon' tabindex='-1'>    </a></li>"),o=n("<li class='"+this._classNm+"-selected-choice "+this._classNm+"-locked'><div></div></li>"),u=i?s:o;this.id(e),t=this.opts.formatSelection(e),void 0!==t&&(u.find("div").addClass(this._classNm+"-selected-choice-label").text(t),u.find("."+this._classNm+"-clear-entry").attr("aria-label",t+" remove"),u.attr("valueText",t)),i&&u.find("."+this._classNm+"-clear-entry").on("mousedown",r.killEvent).on("click dblclick",this._bind(function(e){this._isInterfaceEnabled()&&(n(e.target).closest("."+this._classNm+"-selected-choice").fadeOut("fast",this._bind(function(){this._unselect(n(e.target),e),this.selection.find("."+this._classNm+"-selected-choice.oj-focus").removeClass("oj-focus"),this.close(e),this._focusSearch()})).dequeue(),r.killEvent(e))})),u.data(this._elemNm,e),u.insertBefore(this.searchContainer)},_unselect:function(e,t){var n,r,i=this.getVal(),s=i?i.slice(0):[],o=this;if(e=e.closest("."+this._classNm+"-selected-choice"),0===e.length)throw"Invalid argument: "+e+". Must be ."+this._classNm+"-selected-choice";if(n=e.data(this._elemNm)){for(var u;(r=o.opts.indexOf.call(s,n))>=0;)u=s.splice(r,1),this.setVal(s,t),this.select&&this._postprocessResults();this.ojContext._IsRequired()&&0===s.length||e.remove(),this.ojContext._IsRequired()&&this.ojContext.validate()}},_postprocessResults:function(e,t,n){var i=this.getVal(),s=i&&(this.opts.element.val()||this.ojContext.isValid())?i:[],o=this.results.find(".oj-listbox-result"),u=this;r.each2(o,function(e,t){var n=u.id(t.data(u._elemNm));s&&u.opts.indexOf.call(s,n)>=0&&(t.addClass("oj-selected"),t.find(".oj-listbox-result-selectable").addClass("oj-selected"))}),!o.filter(".oj-listbox-result:not(.oj-selected)").length>0&&this.close()},_getMaxSearchWidth:function(){return this.selection.width()-r.getSideBorderPadding(this.search)},_textWidth:function(e){var t=document.createElement("span"),r=document.createTextNode(e);t.style.display="none",t.appendChild(r),n("body").append(t);var i=n("body").find("span:last").width();return n("body").find("span:last").remove(),i},_resizeSearch:function(){var e,t,n,i,s,o=r.getSideBorderPadding(this.search);e=this._textWidth(this.search.val())+10,t=this.search.offset().left,n=this.selection.width(),i=this.selection.offset().left,s=n-(t-i)-o,s<e&&(s=n-o),s<40&&(s=n-o),s<=0&&(s=e),this.search.width(Math.floor(s))},setVal:function(e,t,n){var i=[],s=this;"string"==typeof e&&(e=r.splitVal(e,this.opts.separator));for(var o=0;o<e.length;o++)s.opts.indexOf.call(i,e[o])<0&&i.push(e[o]);var u={doValueChangeCheck:!1};n&&(u._context=n),this.opts.element.val(0!==e.length?e:null),this.ojContext._updateValue(i,t,u),this.search.attr("aria-activedescendant",this.opts.element.attr("id"))}}),f=r.clazz(a,{_elemNm:"ojidentity",_classNm:"oj-select",_createContainer:function(){var e=n(document.createElement("div")).attr({"class":"oj-identity oj-select oj-select-multi oj-component"}).html(["<div class='oj-identity-select'>","  <ul class='oj-select-choices'>","    <li class='oj-select-search-field'>","      <input type='text' role='combobox' aria-expanded='false' aria-autocomplete='list' autocomplete='off' autocorrect='off' autocapitalize='off' spellcheck='false' class='oj-listbox-input'>","    <span class='oj-identity-loading-container oj-multi-loading'>","      <span class='oj-identity-loading' role='presentation'>","       &nbsp;</span>","    </li>","  </ul>","</div>","<span class='oj-identity-filter multiple'></span>","<div class='oj-select-description oj-helper-hidden-accessible'/>","<div class='oj-listbox-drop oj-identity-container oj-listbox-drop-multi' style='display:none'>","   <ul class='oj-listbox-results' role='listbox'>","   </ul>","</div>"].join(""));return e}}),l=function(e,t,r,i){if(n.widget(e,t,r),i){var s=e.split(".")[1];delete n.fn[s]}if("oj.oj"===e.substring(0,5)||"oj._oj"===e.substring(0,6))var o=e.split(".");var u,a=o[0],f=o[1],l=a+"-"+f,c="_"===f.substring(0,1);u=c?"_"+a+"-"+f.substring(3):a+"-"+f.substring(2),n.expr[":"][u.toLowerCase()]=function(e){return!!n.data(e,l)}},c=function(){var e=document.documentElement.getAttribute("dir");return e&&(e=e.toLowerCase()),"rtl"===e?"rtl":"ltr"},h=function(){var e=20;if(n.isNumeric(e))return e;var t=n("<div />");n(document.body).append(t),t.width(50).height(50).css({overflow:"scroll",visibility:"hidden",position:"absolute"});var r=n("<div />");r.height(1),t.append(r);var i=r.width(),s=t.width();return t.remove(),e=s-i}(),p=function(e,t){function r(e,t){if(e.bottom-t.top<-1)return!1;var n="auto"===t.overflowY||"scroll"===t.overflowY?h:0;return!(t.bottom-n-e.top<1)&&(n="auto"!==t.overflowX&&"scroll"!==t.overflowX||"rtl"!==c()?0:h,!(e.right-(t.left+n)<-1)&&(n="auto"!==t.overflowX&&"scroll"!==t.overflowX||"ltr"!==c()?0:h,!(e.left-(t.right-n)>-1)))}function i(e){return"visible"!==e.css("overflow-x")||"visible"!==e.css("overflow-y")}function s(e){var t=e[0];if(1===t.nodeType){var r=t.getBoundingClientRect();return r.overflowX=e.css("overflow-x"),r.overflowY=e.css("overflow-y"),r}if(n.isWindow(t)){var r={width:t.innerWidth,height:t.innerHeight,top:0,bottom:t.innerHeight,left:0,right:t.innerWidth};return r}return{height:0,width:0}}if(!e)return!1;var o=s(e);if(t&&!r(o,s(n(window))))return!1;for(var u=!0,a=e.parent();u&&a&&a.length>0&&1===a[0].nodeType;){if(i(a)){var f=s(a);f.height>0&&f.width>0&&(u=r(o,f))}a=a.parent()}return u},d=function(e){if(e.target&&e.target.height>0&&e.target.width>0){var t=e.target.element;return!p(t)}return!1},v=function(e,t){for(var r=n.extend({},e),i=0;i<m.length;i++){var s=m[i],o=r[s];o&&(r[s]=o.replace("start",t?"right":"left").replace("end",t?"left":"right").replace("<",t?"+":"-").replace(">",t?"-":"+"))}return r},m=["my","at"],g={defaultElement:"<select>",widgetEventPrefix:"oj",options:{minimumResultsForSearch:10,noMatchesFound:"No matches found",placeholder:null,list:void 0,multiple:!0,options:null,optionsKeys:{label:"id",value:"id"},beforeExpand:null,selectAll:!0,selectLabel:"Select All",defaultScope:"user",showScopeFilter:!1,scopesOptions:[{label:"All",value:"all"},{label:"User",value:"user"},{label:"Group",value:"group"},{label:"Role",value:"role"}],indexOf:function(e){if(!e)return-1;var t=this.length,n=0;for(e=JSON.stringify(e);n<t;n++){var r=JSON.stringify(this[n]);if(r===e)return n}return-1},contains:function(e){if(!e)return!1;for(var t=e.length,n=this.length,r=0,i=0,s=0;r<n;r++){var o=JSON.stringify(this[r]);for(i=0;i<t;i++){var u=JSON.stringify(e[i]);if(o===u){++s;break}}}return s===n}},widget:function(){return this.select?this.select.container:this.element.parent()},_ComponentCreate:function(){this._super(),this._setup()},_nativeSetDisabled:function(e){e?(this.element.attr("disabled",""),this.element.parent().addClass("oj-disabled").removeClass("oj-enabled")):(this.element.removeAttr("disabled"),this.element.parent().removeClass("oj-disabled").addClass("oj-enabled"))},_nativeChangeHandler:function(e){},_jetSetup:function(){var e={},t=this.options.multiple;e.element=this.element,e.ojContext=this,e=n.extend(this.options,e),this.select=t?new f:new u,this.select._init(e),this.select.container.addClass("oj-select-jet oj-form-control"),this.element.val=function(e){return arguments.length&&this.data("selected-value",e),this.data("selected-value")||[]}},_setup:function(){this._jetSetup()},refresh:function(){this._super(),this._cleanup(),this._setup()},_destroy:function(){this._super(),this._cleanup()},_NotifyDetached:function(){this.select.close()},_NotifyHidden:function(){this.select.close()},_SetPlaceholder:function(e){},_updateValue:function(e,t,r){t&&(r._context=r._context||{},n.extend(!0,r._context,{optionMetadata:{trigger:"option_selected",writeback:"shouldWrite"},originalEvent:t.originalEvent||t}),this.valueUpdated=!0,this.option({value:e},r),this.select._initSelection()),this._IsRequired()&&0!==e.length&&(this.select.container.removeClass("oj-invalid"),this.select.container.find(".oj-messaging-inline-container").remove())},_SetPlaceholderOption:function(e){this._super(e)},_HasPlaceholderSet:function(){return"string"==typeof this.options.placeholder},_IsRequired:function(){return this.options.required},_ClearPlaceholder:function(){this._SetPlaceholderOption(null),this._SetPlaceholder(null)},_InitOptions:function(e,n){var i=[{attribute:"disabled",validateOption:!0},{attribute:"placeholder"},{attribute:"required",coerceDomValue:!0,validateOption:!0},{attribute:"title"}];if(this._super(e,n),t.EditableValueUtils.initializeOptionsFromDom(i,n,this),void 0===this.options.value)this.options.value=void 0!==this.element.attr("value")?r.splitVal(this.element.val(),","):null;else{var s=this.options.value;Array.isArray(s)&&(s=s.slice(0)),this.options.value=s}},_SetDisplayValue:function(e){},_updateDisplayValue:function(){this.valueUpdated?this.valueUpdated=!1:this.select._initSelection()},_setOption:function(e,t,n){if("value"===e){var r=this.select.opts.element;t||(t=[]),Array.isArray(t)||(t=[t]);for(var i=[],s=0;s<t.length;s++)(this.options.multiple||this.select.opts.validate(r,t[s]))&&i.push(t[s]);return this._super(e,i,n),void this._updateDisplayValue()}"placeholder"===e?(this.select.opts.placeholder=t?t:null,this.select._setPlaceholder()):"minimumResultsForSearch"===e?this.select.opts.minimumResultsForSearch=t:"multiple"===e&&(this.options.multiple=t,this.refresh()),"disabled"===e?t?this.select._disable():this.select._enable():"options"===e?(this.select.opts.options=t,this.select.opts=this.select._prepareOpts(this.select.opts),this._super("value",this.select.getVal())):this._super(e,t,n)},_getDropdown:function(){if(this.select&&this.select._opened()){var e=this.select.dropdown;if(e&&e.attr("data-oj-containerid")===this.select.containerId)return e}return null},_cleanup:function(){this.select._destroy(),this.select=void 0},getNodeBySubId:function(e){var t,r=null;if(null==e){var i=this.widget();return i?i[0]:null}if(this._isNative())return null;if(r=this._super(e),!r){var s=this._getDropdown();switch(t=e.subId){case"oj-select-drop":s&&(r=s[0]);break;case"oj-select-results":s&&(r=s.find(".oj-listbox-results")[0]);break;case"oj-select-search":s&&(r=s.find(".oj-listbox-search")[0]);break;case"oj-select-input":case"oj-listbox-input":this.options.multiple===!0?r=this.widget().find(".oj-listbox-input")[0]:s&&(r=s.find(".oj-listbox-input")[0]);break;case"oj-select-choice":case"oj-select-chosen":case"oj-select-arrow":r=this.widget().find("."+t)[0];break;case"oj-listitem":if(s){var o=s.find(".oj-listbox-result");r=this.select._findItem(o,e.value)}break;case"oj-select-remove":var u=this.widget().find(".oj-select-selected-choice"),a=this.select._findItem(u,e.value);r=a?n(a).find(".oj-select-clear-entry-icon")[0]:null;break;case"oj-listbox-result-label":if(s){var f=n("#"+this.select.results.attr("id")).children(),l=e.index;f.length&&l<f.length&&(r=f.eq(l).find("."+t)[0])}}}return r||null},getSubIdByNode:function(e){if(this._isNative())return this._super(e);var t=null;if(null!=e){var r=n(e);r.hasClass("oj-listbox-input")?t={subId:"oj-select-input"}:r.hasClass("oj-select-arrow")?t={subId:"oj-select-arrow"}:r.hasClass("oj-listbox-result")?t={subId:"oj-listitem",value:r.data("ojidentity").value}:r.hasClass("oj-select-clear-entry-icon")&&(t={subId:"oj-select-remove",value:r.closest(".oj-select-selected-choice").data("ojidentity").value})}return t},_GetDefaultStyleClass:function(){return"oj-select"},_GetMessagingLauncherElement:function(){return this.select?this.select.selection:this.element}};l("oj.ojIdentity",n.oj.editableValue,g)}),define("pcs/identityBrowser/viewModel/IdentityViewModel",["knockout","pcs/identityBrowser/viewModel/IdentityService","pcs/composer/idBrowser/ojidentity.min"],function(e,t){"use strict";function n(n){var r=this;r.bundle=require("ojL10n!pcsMsg/nls/pcsSnippetsResource"),r.service=new t,r.value=n.hasOwnProperty("value")?n.value:e.observableArray([]),r.valueSubscription=r.value.subscribe(function(e){r.service.setSelectedIdentities(e)}),r.multiple=n.hasOwnProperty("multiple")&&e.utils.unwrapObservable(n.multiple)===!0,r.scope=n.hasOwnProperty("scope")?e.utils.unwrapObservable(n.scope):"user",r.scope||(r.scope="all"),r.placeholder=n.hasOwnProperty("placehoderTxt")?e.utils.unwrapObservable(n.placehoderTxt):r.bundle.pcs.idBrowser.placeholderTxt,r.idbID=n.hasOwnProperty("idbID")?e.utils.unwrapObservable(n.idbID):"identityBrowser",r.dispose=function(){console.log("dispose in IVM"),r.valueSubscription.dispose()}}return n.prototype={setValue:function(e){this.value(e)},getValue:function(){return this.service.getSelectedIdentities()},getUserIDs:function(){var e=this.service.getSelectedIdentities();return e.map(function(e){return e.id})},getUserTypes:function(){var e=this.service.getSelectedIdentities();return e.map(function(e){return e.type})},getIdentities:function(e){return this.service.restCall(e)},getIdentityIndex:function(e,t){if(!Array.isArray(e))throw"argument type in not array";if(!t)return-1;var n=e.length,r=0,i=JSON.stringify(t);for(;r<n;r++){var s=JSON.stringify(e[r]);if(s===i)return r}return-1}},n}),define("pcs/identityBrowser/loader",["ojs/ojcore","knockout","text!./view/idBrowser.html","./viewModel/IdentityViewModel"],function(e,t,n,r){"use strict";t.components.isRegistered("pcs-identity-browser")||(t.components.register("pcs-identity-browser",{template:{require:"text!pcs/identityBrowser/view/idBrowser.html"},viewModel:{createViewModel:function(e,t){return new r(e,t)}}}),console.log("pcs-idBrowser registered"))}),define("pcs/pcs.identitybrowser",["ojs/ojcore","knockout","jquery","ojL10n!pcsMsg/nls/pcsSnippetsResource","ojs/ojknockout","pcs/identityBrowser/loader"],function(e){"use strict";console.log("loaded identity browser file")}),define("pcs/tasklistActions/viewModel/reassignVM",["jquery","ojs/ojcore","knockout","pcs/tasklist/viewModel/Task","pcs/tasklistActions/viewModel/TaskAction","ojs/ojdialog","ojs/ojradioset","ojs/ojinputtext","pcs/pcs.identitybrowser"],function(e,t,n,r,i){"use strict";function s(t,r){var s=this;s.rootElement=e(r.element),s.bundle=require("ojL10n!pcsMsg/nls/pcsSnippetsResource"),s.TaskAction=i(),s.paths={task:"tasks/{taskNumber}"},s.loadingOverlay=e("#pcs-reassign-overlay",s.rootElement),s.showInline=n.observable(t.showInline),s.tasks=t.tasks,s.isVisible=t.isVisible,s.comments=n.observable(""),s.action=n.observable("REASSIGN"),s.placeholder=n.computed(function(){return s.action()==="REASSIGN"?s.bundle.pcs.taskActions.searchAll:s.bundle.pcs.taskActions.searchUsers}),s.scope=n.computed(function(){return s.action()==="REASSIGN"?"all":"user"}),s.idbConfig={multiple:!0},s.idbID="pcs-reassign-idb",s.init=function(){s.showInline()||(e("#pcs-reassign-dialog-content").append(e("#pcs-reassign-inline-content")),e("#pcs-reassign-dialog-footer").append(e("#pcs-reassign-inline-footer")))}(),s.handleClose=function(){s.comments(""),s.isVisible(!1)},s.isVisibleSubscription=s.isVisible.subscribe(function(t){var n=e("#pcs-reassign-modalDialog");!s.showInline()&&t?n.ojDialog("open"):n.ojDialog("close")}),s.handleSubmit=function(){var e=n.contextFor(document.getElementById("pcs-reassign-idb")).$data;try{s.loadingOverlay.addClass("pcs-common-load-overlay");var t={identityId:e.getUserIDs(),identityType:e.getUserTypes(),userComment:s.comments(),reassignType:s.action()};s.TaskAction.reassignTasks(s.tasks(),t).then(function(){s.loadingOverlay.removeClass("pcs-common-load-overlay"),s.handleClose(),e.setValue([]),s.rootElement.trigger("tasklistAction:refresh",[]),s.rootElement.trigger("taskAction:submit",[s.action()])})}catch(r){console.log("Error - to be handled")}},s.dispose=function(){console.log("dispose in ReassignVM"),s.isVisibleSubscription.dispose(),s.placeholder.dispose(),s.scope.dispose()}}return s}),define("text!pcs/tasklistActions/templates/pcs-requestInfo.html",[],function(){return'<div id="pcs-requestinfo-container">\n	<div id="pcs-requestinfo-modalDialog"\n		 data-bind="visible: !showInline(), ojComponent:{component: \'ojDialog\', title: bundle.pcs.taskActions.reqInfoHeader, close: handleClose,\n		 	rootAttributes: { style: \'width: 450px; min-width: 100px; max-width 450px;\'}}">\n		<div class="oj-dialog-body" id="pcs-requestinfo-dialog-content">\n		</div>\n		<div class="oj-dialog-footer" id="pcs-requestinfo-dialog-footer">\n		</div>\n	</div>\n\n	<div data-bind="visible: showInline() && isVisible()" class="oj-panel oj-margin">\n		<div id="pcs-requestinfo-inline-content">\n			<div id="pcs-requestInfo-overlay"></div>\n			<div id="form-container" class="oj-form-layout">\n				<div class="oj-form">\n					<div class="oj-flex">\n						<div class="oj-flex-item">\n							<text for="username" class="oj-label oj-label-nocomp" data-bind="text:bundle.pcs.taskActions.username"></text>\n							<div class="oj-flex-item">\n								<div id="username" data-bind=\'component: {\n								name: "pcs-identity-browser" , params: {multiple: false, placeholderTxt: placeholder(), scope: scope, idbID: idbID}\n							}\'></div>\n							</div>\n						</div>\n					</div>\n					<div class="oj-flex">\n						<div class="oj-flex-item">\n							<label for="comments" data-bind="text:bundle.pcs.taskActions.comments"></label>\n							<textarea id="comments" style="resize: both" data-bind="ojComponent:\n                   {component: \'ojTextArea\',rootAttributes: {style:\'min-width:100%\'}, value:comments, required: false}">\n							</textarea>\n						</div>\n					</div>\n					<!--<br/>-->\n					<!--<div class="oj-flex">-->\n						<!--<div class="oj-flex-item">-->\n							<!--<div id="radiosetBasicDemoId1" aria-labelledby="mainlabelid1"-->\n								 <!--data-bind="ojComponent: {-->\n									  <!--component: \'ojRadioset\',-->\n									  <!--value: action}" >-->\n								<!--<span class="oj-choice-row">-->\n									<!--<input id="back1" type="radio" name="rbb1" value="back">-->\n									<!--<label for="back1">Route directly back to me</label>-->\n								<!--</span>-->\n								<!--<span class="oj-choice-row">-->\n									<!--<input id="forward1" type="radio" name="rbb1" value="forward">-->\n									<!--<label for="forward1">Require subsequent participants to retake action</label>-->\n								<!--</span>-->\n							<!--</div>-->\n						<!--</div>-->\n					<!--</div>-->\n				</div>\n			</div>\n		</div>\n		<br/>\n		<div id="pcs-requestinfo-inline-footer">\n			<button id="okButton" data-bind="ojComponent: {component: \'ojButton\', label: bundle.pcs.taskActions.submit}, click: handleSubmit"> </button>\n			<button id="cancelButton" data-bind="ojComponent: {component: \'ojButton\', label: bundle.pcs.taskActions.cancel}, click: handleClose"> </button>\n		</div>\n	</div>\n</div>\n'}),define("pcs/tasklistActions/viewModel/requestInfoVM",["jquery","ojs/ojcore","knockout","pcs/tasklist/viewModel/Task","pcs/tasklistActions/viewModel/TaskAction","ojs/ojdialog","ojs/ojradioset","ojs/ojinputtext","pcs/pcs.identitybrowser"],function(e,t,n,r,i){"use strict";function s(t,r){var s=this;s.rootElement=e(r.element),s.bundle=require("ojL10n!pcsMsg/nls/pcsSnippetsResource"),s.TaskAction=i(),s.paths={task:"tasks/{taskNumber}"},s.loadingOverlay=e("#pcs-requestInfo-overlay",s.rootElement),s.showInline=n.observable(t.showInline),s.tasks=t.tasks,s.isVisible=t.isVisible,s.idbConfig={multiple:!1},s.username=n.observable("weblogic"),s.comments=n.observable(""),s.action=n.observable("INFO_REQUEST"),s.placeholder=n.observable(s.bundle.pcs.taskActions.searchUsers),s.idbID="pcs-requestInfo-idb",s.scope="user",s.init=function(){s.showInline()||(e("#pcs-requestinfo-dialog-content").append(e("#pcs-requestinfo-inline-content")),e("#pcs-requestinfo-dialog-footer").append(e("#pcs-requestinfo-inline-footer")))}(),s.handleClose=function(){s.comments(""),s.isVisible(!1)},s.isVisibleSubscription=s.isVisible.subscribe(function(t){var n=e("#pcs-requestinfo-modalDialog");!s.showInline()&&t?n.ojDialog("open"):n.ojDialog("close")}),s.handleSubmit=function(){var e=n.contextFor(document.getElementById("pcs-requestInfo-idb")).$data;try{s.loadingOverlay.addClass("pcs-common-load-overlay"),s.TaskAction.requestInfo(s.tasks(),e.getUserIDs(),e.getUserTypes(),s.comments()).then(function(){s.loadingOverlay.removeClass("pcs-common-load-overlay"),s.handleClose(),e.setValue(null),s.rootElement.trigger("tasklistAction:refresh",[]),s.rootElement.trigger("taskAction:submit",[s.action()])})}catch(t){console.log("Error - to be handled")}},s.dispose=function(){console.log("dispose in ReqInfoVM"),s.isVisibleSubscription.dispose()}}return s}),define("text!pcs/tasksearch/templates/tasksearchContainer.html",[],function(){return'<div id="pcs-task-search-container" data-bind="visible : mode() === \'Search\'" class="oj-flex pcs-task-advance-search-container">\n	<div class="oj-flex-item oj-md-justify-content-center">\n    <input id="searchInpputText" type="text" class="pcs-ts-advance-search-input-text"\n		   data-bind="attr:{placeholder: bundle.pcs.tasksearch.search}, ojComponent:{component: \'ojInputText\', rootAttributes: {style:\'min-width:350px\'}},\n		   suggestItems: autoSuggestions, value: keyword,\n           valueUpdate:[\'afterkeypress\',\'propertychange\',\'input\']"/>\n		<div class="pcs-ts-arrowhead-icon" data-bind="click: showAdvanceSearchPopup, attr: {title: bundle.pcs.tasksearch.show_advance_search}">\n		</div>\n	</div>\n</div>\n<div id="pcs-task-simple-search-container" data-bind="visible : mode() === \'Filter\'" class="oj-flex pcs-task-simple-search-container">\n	<div class="oj-flex-item oj-md-justify-content-center">\n		<input id="simpleSearchInpputText" type="text" class="pcs-ts-simple-search-input-text"\n			   data-bind="attr:{placeholder: bundle.pcs.tasksearch.search},ojComponent:{component: \'ojInputText\', rootAttributes: {style:\'min-width:350px\'}}, value: keyword, event:{keyup: onKeyUpSearchTextBox}"/>\n		<div class="pcs-ts-filter-icon" data-bind="visible: showFilter, click: showAdvanceSearchPopup , attr: {title: bundle.pcs.tasksearch.show_filters}">\n		</div>\n	</div>\n</div>\n    <!-- Advanced Search popup -->\n    <div class="pcs-ts-advance-search" id="advanceSearchPopup"\n         data-bind="ojComponent:{component: \'ojDialog\', \'initialFocus\' : \'firstFocusable\',\n                    title : mode() === \'Search\' ? bundle.pcs.tasksearch.advanced_search :  bundle.pcs.tasksearch.filters,\n                    rootAttributes : {style: \'min-width: 600px; height: inherit\', id: \'advSearchDialog\'}}">\n		<!-- ko template: {name: \'advanceSearchTemplate\'} -->\n		<!-- /ko -->\n    </div>\n    <script type="text/html" id="menuItemTemplate">\n        <li>\n            <a data-bind="text: item.displayName"></a>\n            <span style="display: none" data-bind="text: ko.toJSON($data)"></span>\n            <!-- ko if: item.items -->\n           	 	<ul data-bind="template: {name: \'menuItemTemplate\', foreach: item.items, as: \'item\'}">\n            	</ul>\n            <!-- /ko -->\n        </li>\n    </script>\n    <script type="text/html" id="advanceSearchTemplate">\n		<div id="advsrchbody" class="oj-flex oj-md-flex-direction-column oj-dialog-body">\n			<div class="oj-flex-item oj-flex oj-sm-flex-items-initial oj-md-justify-content-center">\n				<div class="oj-flex-item" data-bind="visible: showAdvancedOptions">\n					<div id="matchSet" data-bind="ojComponent: {component: \'ojButtonset\', checked: matchCriteria}"\n						 aria-label="Choose only one match criteria.">\n						<!-- ko foreach: matchCriterias -->\n						<label data-bind="attr: {for: id}">Match </label>\n						<input type="radio" name="match"\n							   data-bind="value: id, attr: {id: id},\n                                  ojComponent: { component: \'ojButton\', label: label }"/>\n						<!-- /ko -->\n					</div>\n				</div>\n			</div>\n			<div id="formlayout" class="oj-flex-item oj-form-layout">\n				<div class="oj-form oj-sm-odd-cols-12 oj-md-odd-cols-3 oj-md-labels-inline" id="form">\n					<div class="oj-flex" id="row1" data-bind="visible : mode() === \'Search\'">\n						<div class="oj-flex-item pcs-ts-contains-text" id="col1">\n							<input id="text-input"\n								   type="text" placeholder="Contains The Text"\n								   data-bind="ojComponent: {component: \'ojInputText\' , rootAttributes: {style:\'min-width:100%\'}, value: containsText}"/>\n						</div>\n					</div>\n					<div class="oj-flex" id="row2">\n						<div class="oj-flex-item pcs-ts-advanced-search-form-label" id="row2Col1">\n							<label id="statusLabel" for="status" class="pcs-ts-advance-search-label"\n								   data-bind="text: bundle.pcs.tasksearch.status"></label>\n						</div>\n						<div class="oj-flex-item" id="row2Col2">\n							<select id="status" data-bind="ojComponent: {component: \'ojSelect\',\n                                                          multiple: mode() === \'Search\',\n                                                          value: selectedStatus, rootAttributes: {style:\'max-width:100%\'},\n                                                          options: availableStatus}">\n							</select>\n						</div>\n					</div>\n					<div class="oj-flex" id="row3">\n						<div class="oj-flex-item pcs-ts-advanced-search-form-label" id="row3Col1">\n							<label id="assigneeLabel" for="assignes" class="pcs-ts-advance-search-label"\n								   data-bind="text: bundle.pcs.tasksearch.assignee"></label>\n						</div>\n						<div class="oj-flex-item" id="row3Col2">\n							<select id="assignes" aria-label="Assigne" data-bind="ojComponent: {component: \'ojSelect\',\n                                                          multiple: false,\n                                                          value: selectedAssignees,\n                                                          options: availableAssignees}">\n							</select>\n						</div>\n					</div>\n					<div class="oj-flex" id="row4">\n						<div class="oj-flex-item pcs-ts-advanced-search-form-label" id="row4Col1">\n							<label id="fromUserLabel" for="identityBrowser" class="pcs-ts-advance-search-label"\n								   data-bind="text: bundle.pcs.tasksearch.fromuser"></label>\n						</div>\n						<div class="oj-flex-item" id="row4Col2">\n							<pcs-identity-browser id="fromUser" class="pcs-ts-idb"></pcs-identity-browser>\n						</div>\n					</div>\n					<div class="oj-flex">\n						<div class="oj-flex-item pcs-ts-advanced-search-form-label">\n							<label id="inputgrouplabel" class="pcs-ts-advance-search-label"\n								   data-bind="text: dueDateFilter().displayName"></label>\n						</div>\n						<div class="oj-flex-item">\n							<div class="oj-form-control-group" aria-labelledby="inputgrouplabel" role="group">\n								<select id="dueDateFilter" data-bind="ojComponent: {component: \'ojSelect\',\n                                                          multiple: false,\n                                                          value: dueDateFilter().filterOperator,\n                                                          optionChange: dueDateFilter().handleFilterOperatorChange,\n                                                          rootAttributes: {style:\'max-width:25%\'},\n                                                          options: dueDateFilter().filterOperators}">\n\n								</select>\n								<div id="content" class="pcs-ts-filter-values"  data-bind="foreach : dueDateFilter().values"  >\n									<!-- ko if: type() === $parent.filterValueType.valueTypes.DATE -->\n									<input data-bind="ojComponent: {component: \'ojInputDate\' ,value: value, rootAttributes: {style:\'width:5vw\'}}" />\n									<!-- /ko -->\n									<!-- ko if: type()=== $parent.filterValueType.valueTypes.STRING -->\n									<input  data-bind="ojComponent: {component: \'ojInputText\', rootAttributes: {style:\'width:30%\'}, value: value}" />\n									<!-- /ko -->\n									<!-- ko if: type() === $parent.filterValueType.valueTypes.INTEGER  -->\n									<input  placeholder="Enter Numbers"  data-bind="ojComponent: {component: \'ojInputText\',\n									rootAttributes: {style:\'width:30%\'} , displayOptions: {messages: [\'notewindow\']},\n									 validators : [{type: \'regExp\', options : {pattern: \'\'^\\\\d+$\',\n								 	messageSummary: \'Value \\\'{value}\\\' Invalid\',messageDetail: \'You must enter a Number.\'}}],\n								  	value: value}" />\n									<!-- /ko -->\n									<!-- ko if: type() === $parent.filterValueType.valueTypes.LIST  -->\n									<select    data-bind="ojComponent: {component: \'ojSelect\',\n                                                      multiple: false,\n                                                      rootAttributes: {style:\'width:30%\'},\n                                                      value: value,\n                                                      options: listOfValues()}">\n									</select>\n									<!-- /ko -->\n								</div>\n							</div>\n						</div>\n					</div>\n					<div class="oj-flex" id="row6">\n						<div class="oj-flex-item pcs-ts-advanced-search-form-label" id="row6Col1">\n							<label for="application" id="applicationLabel" class="pcs-ts-advance-search-label"\n								   data-bind="text: bundle.pcs.tasksearch.application"></label>\n						</div>\n						<div class="oj-flex-item" id="row6Col2">\n							<select id="application" data-bind="ojComponent: {component: \'ojSelect\',\n                                                      multiple: true,\n                                                      value: selectedApplications,\n                                                      rootAttributes: {style:\'max-width:100%\'},options: availableApplications}">\n							</select>\n						</div>\n					</div>\n					<hr style="margin: 20px 0" data-bind="visible: selectedSearchableFields().length > 0"/>\n\n					<!-- ko foreach: selectedSearchableFields -->\n\n					<div class="oj-flex">\n						<div class="oj-flex-item pcs-ts-advanced-search-form-label">\n							<label id="inpgroup" data-bind="text: displayName" class="pcs-ts-advance-search-label"> </label>\n						</div>\n						<div class="oj-flex-item"  style="max-width: 55%;">\n							<div class="oj-form-control-group" aria-labelledby="inputgrouplabel" role="group">\n								<!-- ko if: filterOperators().length > 0 -->\n								<select data-bind="attr{id: name},ojComponent: {component: \'ojSelect\',\n                                                      multiple: false,\n                                                      value: filterOperator,\n                                                      optionChange: handleFilterOperatorChange,\n                                                      rootAttributes: {style:\'max-width:25%\'},\n                                                      options: filterOperators}">\n								</select>\n								<!-- /ko -->\n								<!-- ko if: type() === $parent.filterType.filterTypes.USER -->\n								<!-- <idb  databind="attr: {id: $parent.generateUniqueIdForSearchableFieldOfTypeUser($index()) }" class="pcs-ts-idb"></idb>-->\n								<div data-bind=\'attr: {id: $parent.generateUniqueIdForSearchableFieldOfTypeUser($index())}, component: {name: "pcs-identity-browser"}\' class="pcs-ts-idb"></div>\n								<!-- /ko -->\n								<div class="pcs-ts-filter-values" data-bind="foreach : { data: values(), as: \'filterValue\'}">\n									<!-- ko if: filterValue.type() === \'Date\' -->\n									<input data-bind="ojComponent: {component: \'ojInputDate\', rootAttributes: {style:\'width:5vw\'}, value: value}"/>\n									<!-- /ko -->\n									<!-- ko if: filterValue.type() ===  \'String\' -->\n									<input data-bind="ojComponent: {component: \'ojInputText\',rootAttributes: {style:\'max-width:30%\'}, value: value}"/>\n									<!-- /ko -->\n									<!-- ko if: filterValue.type() === \'Integer\'  -->\n									<input placeholder="Enter Numbers" data-bind="ojComponent: {component: \'ojInputText\',\n                                	rootAttributes: {style:\'max-width:30%\'}, value: value,\n                                	displayOptions: {messages: [\'notewindow\']},\n									validators : [{type: \'regExp\', options : {pattern: \'^\\\\d+$\',\n									messageSummary: \'Value \\\'{value}\\\' Invalid\',\n									messageDetail:  \'You must enter a Integer.\'}}]}"/>\n									<!-- /ko -->\n									<!-- ko if: filterValue.type() === \'Long\'  -->\n									<input placeholder="Enter Numbers" data-bind="ojComponent: {component: \'ojInputText\',\n									rootAttributes: {style:\'max-width:30%\'}, value: value,\n									displayOptions: {messages: [\'notewindow\']},\n									validators : [{type: \'regExp\', options : {pattern: \'^\\\\d+$\',\n									messageSummary: \'Value \\\'{value}\\\' Invalid\',\n									messageDetail: \'You must enter a Long.\'}}]}"/>\n									<!-- /ko -->\n									<!-- ko if: filterValue.type() === \'Double\'  -->\n									<input placeholder="Enter Numbers" data-bind="ojComponent: {component: \'ojInputText\',\n									rootAttributes: {style:\'max-width:30%\'}, value: value,\n									displayOptions: {messages: [\'notewindow\']}\n									validators : [{type: \'regExp\', options : {pattern: \'[0-9.]{1,}\',\n									messageSummary: \'Value \\\'{value}\\\' Invalid\',\n									messageDetail: \'You must enter a Number.\'}}]}"/>\n									<!-- /ko -->\n									<!-- ko if: filterValue.type() === \'Float\'  -->\n									<input placeholder="Enter Numbers" data-bind="ojComponent: {component: \'ojInputText\',\n									rootAttributes: {style:\'max-width:30%\'}, value: value,\n									displayOptions: {messages: [\'notewindow\']}\n									validators : [{type: \'regExp\', options : {pattern: \'[0-9.]{1,}\',\n									messageSummary: \'Value \\\'{value}\\\' Invalid\',\n									messageDetail: \'You must enter a Number.\'}}]}"/>\n									<!-- /ko -->\n									<!-- ko if: filterValue.type() === \'List\' -->\n									<select data-bind="ojComponent: {component: \'ojSelect\',\n                                                      multiple: false,\n                                                      value: value,\n                                                      rootAttributes: {style:\'max-width:30%\'},\n                                                      options: listOfValues}">\n									</select>\n									<!-- /ko -->\n								</div>\n							</div>\n						</div>\n						<div class="oj-flex-item" style="max-width: 10%;">\n							<!--<div data-bind=" visible: $parent.showAdvancedOptions, ojComponent: {component: \'ojButtonset\', checked: $data.isMust(), display:\'icons\', icons: {start:\'oj-fwk-icon oj-fwk-icon-clock\'}}">\n                                <input type="checkbox" id="must" value="Must"/>\n                            </div>-->\n							<button  data-bind="visible: canDelete,click: $parent.removeSelectedSearchableField.bind($data, $index()), ojComponent: {\n                                                    component:\'ojButton\', chroming: \'half\', label: \'Remove\', display: \'icons\',\n                                                    icons: {start:\'oj-fwk-icon pcs-ts-removefilter-icon\'}\n                                                }">\n							</button>\n						</div>\n					</div>\n\n					<!-- /ko -->\n				</div>\n				<div class="oj-flex" id="row7" data-bind="visible : mode() === \'Search\'">\n					<button id="addFilter"\n							data-bind=" click: onClickAddFilter, ojComponent: {component: \'ojButton\',\n                                                                               label: \'Add Filter\',\n                                                                               chroming: \'half\',\n                                                                               menu: \'#filterMenu\',\n                                                                               icons: {start: \'oj-fwk-icon pcs-ts-add-filter-menu\'}}">\n					</button>\n					<ul id="filterMenu" data-bind="ojComponent: {component: \'ojMenu\', select: handleFilterMenuSelection}"\n						class="pcs-ts-serachable-fields-menu">\n						<!-- ko template: {name: \'menuItemTemplate\', foreach: availableSearchableFields, as: \'item\'} -->\n						<!-- /ko -->\n					</ul>\n				</div>\n			</div>\n		</div>\n		<div class="oj-flex oj-sm-flex-items-initial oj-dialog-footer pcs-ts-advanced-search-footer" id="row8">\n			<!--<div class="oj-flex-item">\n				<a data-bind="click: handleAdvancedOptions, text : showAdvancedOptions() ? bundle.pcs.tasksearch.hide_advanced_options :  bundle.pcs.tasksearch.show_advanced_options"></a>\n			</div>-->\n			<div class="oj-helper-margin-start-auto oj-flex-item" id="row7Col1">\n				<button id="cancelBtn"\n						data-bind="click: closeAdvanceSearchPopup, ojComponent: { component: \'ojButton\', label: bundle.pcs.tasksearch.cancel}"></button>\n				<button id="searchBtn"\n						class="oj-button-primary"\n						data-bind="click: handleSearch, ojComponent: { component: \'ojButton\', label:  mode() === \'Search\' ? bundle.pcs.tasksearch.search : bundle.pcs.tasksearch.ok }"></button>\n			</div>\n		</div>\n   </script>\n\n'}),define("pcs/customBindingHandlers/suggestItems",["knockout","jquery"],function(e,t){"use strict";e.bindingHandlers.suggestItems={init:function(e,n,r,i){function f(n,r){n.hover(function(){n.removeClass("pcs-ts-autosuggestion-menuitem-selected"),t(this).addClass("pcs-ts-autosuggestion-menuitem-selected"),u=n.index(this)+1}).mousedown(function(){r[u-1].action({element:t(e),selectedAutoSuggestion:r[u-1]})})}function l(n){var r="";if(n){n.forEach(function(e){var t=e.label,n=e.styleClass;r+="<li class='pcs-ts-autosuggestion-menu-items'><span class='"+n+"'></span>"+"<span class='pcs-ts-autosuggestion-menu-item'>"+t+"</span></li>"});var i=t(e).parent().find("ul");t(i).empty().append(r)}var s=t(e).parent().find("li");f(s,n)}var s=n()||[],o=s.length,u=0,a=t(e);t(e).parent().append("<div id='srchmenuroot' class='pcs-ts-autosuggestion-menu-root'><ul  class='pcs-ts-autosuggestion-menu-ul'></ul></div>"),t(e).siblings().css({top:26}),t(e).focus(function(){t(this).siblings().width(t(this).width()+5),t("#srchmenuroot").show()}).blur(function(){t(this).siblings().hide()}),a.keyup(function(n){var r=a.parent().find("li"),f=n.keyCode||n.which;switch(f){case 13:if(t(e).siblings().css("display")!=="none"){var c={},h=u;t("li:nth-child("+u+")",t(e).parent()).removeClass("pcs-ts-autosuggestion-menuitem-selected"),u=0,t(e).siblings().hide(),c.element=t(e),h===0?(c.selectedAutoSuggestion=s[h],s[h].action(c)):(c.selectedAutoSuggestion=s[h-1],s[h-1].action(c))}break;case 27:t("li:nth-child("+u+")",t(e).parent()).removeClass("pcs-ts-autosuggestion-menuitem-selected"),u=0,t(e).siblings().hide();break;case 38:t(e).siblings().css("display")!=="none"&&(u=u>1?u-1:o,r.removeClass("pcs-ts-autosuggestion-menuitem-selected"),t("li:nth-child("+u+")",t(e).parent()).addClass("pcs-ts-autosuggestion-menuitem-selected"));break;case 40:t(e).siblings().css("display")!=="none"&&(u=u<o?u+1:1,r.removeClass("pcs-ts-autosuggestion-menuitem-selected"),t("li:nth-child("+u+")",t(e).parent()).addClass("pcs-ts-autosuggestion-menuitem-selected"));break;default:var p=typeof i.refreshAutoSuggestions=="function";if(p){var d=i.refreshAutoSuggestions(n.currentTarget.value);s=d||{},u=0,o=s.length}l(s)}})}}}),define("pcs/tasksearch/filter/filterType",[],function(){"use strict";var e={DATE:"Date",STRING:"String",INTEGER:"Integer",DOUBLE:"Double",Number:"Number",FLOAT:"Float",LONG:"Long",USER:"User"};return{filterTypes:e}}),define("pcs/tasksearch/filter/filterOperator",["ojL10n!pcsMsg/nls/pcsSnippetsResource","pcs/tasksearch/filter/filterType"],function(e,t){"use strict";var n={operator:{OPERATOR_ON:"on",OPERATOR_WITH_IN:"within",OPERATOR_IN_LAST:"inlast",OPERATOR_BEFORE:"before",OPERATOR_AFTER:"after",OPERATOR_BETWEEN:"between",OPERATOR_IS:"is",OPERATOR_CONTAINS:"contains",OPERATOR_GREATER_THAN:"greaterthan",OPERATOR_LESSER_THAN:"lesserthan",OPERATOR_EQUALS:"equals"}},r=[{value:n.operator.OPERATOR_ON,label:e.pcs.tasksearch.on},{value:n.operator.OPERATOR_BEFORE,label:e.pcs.tasksearch.before},{value:n.operator.OPERATOR_AFTER,label:e.pcs.tasksearch.after},{value:n.operator.OPERATOR_BETWEEN,label:e.pcs.tasksearch.between}],i=[{value:n.operator.OPERATOR_IS,label:e.pcs.tasksearch.is},{value:n.operator.OPERATOR_CONTAINS,label:e.pcs.tasksearch.contains}],s=[{value:n.operator.OPERATOR_IS,label:e.pcs.tasksearch.is},{value:n.operator.OPERATOR_GREATER_THAN,label:e.pcs.tasksearch.greater_than},{value:n.operator.OPERATOR_LESSER_THAN,label:e.pcs.tasksearch.lesser_than},{value:n.operator.OPERATOR_BETWEEN,label:e.pcs.tasksearch.between}];return{operators:n,getAvailableDateFilterOperators:function(){return r},getAvailableStringFilterOperators:function(){return i},getFilterOperatorsByType:function(e){if(e&&t.filterTypes.DATE===e)return r;if(e&&t.filterTypes.STRING===e)return i;if(e&&t.filterTypes.NUMBER===e||e&&t.filterTypes.INTEGER===e||e&&t.filterTypes.DOUBLE===e||e&&t.filterTypes.FLOAT===e)return s}}}),define("pcs/tasksearch/filter/filterValueType",[],function(){"use strict";var e={DATE:"Date",STRING:"String",INTEGER:"Integer",DOUBLE:"Double",FLOAT:"Float",LONG:"Long",NUMBER:"Number",LIST:"List"};return{valueTypes:e}}),define("pcs/tasksearch/filter/filterValue",["knockout","pcs/tasksearch/filter/filterValueType"],function(e,t){"use strict";function n(n){var r=this;r.type=e.observable(n.type||"");if(t.valueTypes.LIST===n.type&&n.listOfValues){r.listOfValues=e.observableArray(n.listOfValues);var i=n.listOfValues.length>0?n.listOfValues[0].value:"";r.value=e.observableArray([i])}else r.listOfValues=e.observableArray(),r.value=e.observable("")}return n}),define("pcs/tasksearch/filter/filter",["knockout","jquery","ojL10n!pcsMsg/nls/pcsSnippetsResource","pcs/tasksearch/filter/filterOperator","pcs/tasksearch/filter/filterType","pcs/tasksearch/filter/filterValue","pcs/tasksearch/filter/filterValueType"],function(e,t,n,r,i,s,o){"use strict";function u(u){function l(e,i){var u="#"+e.currentTarget.id,f=t(u).siblings(".pcs-ts-filter-values"),l=i.value[0];if(r.operators.operator.OPERATOR_IN_LAST===l||r.operators.operator.OPERATOR_WITH_IN===l){t(f).empty(),a.values.removeAll();var c=[{value:"Days",label:n.pcs.tasksearch.days},{value:"Months",label:n.pcs.tasksearch.months},{value:"years",label:n.pcs.tasksearch.years}];a.values([new s({type:o.valueTypes.DATE}),new s({type:o.valueTypes.LIST,listOfValues:c})])}if(r.operators.operator.OPERATOR_BEFORE===l||r.operators.operator.OPERATOR_AFTER===l||r.operators.operator.OPERATOR_ON===l)t(f).empty(),a.values.removeAll(),a.values([new s({type:o.valueTypes.DATE})]);r.operators.operator.OPERATOR_BETWEEN===l&&(t(f).empty(),a.values.removeAll(),a.values([new s({type:o.valueTypes.DATE}),new s({type:o.valueTypes.DATE})]))}function c(e,n,i){var o="#"+e.currentTarget.id,u=t(o).siblings(".pcs-ts-filter-values"),f=n.value[0];if(r.operators.operator.OPERATOR_IS===f||r.operators.operator.OPERATOR_GREATER_THAN===f||r.operators.operator.OPERATOR_LESSER_THAN===f||r.operators.operator.OPERATOR_CONTAINS===f)t(u).empty(),a.values.removeAll(),a.values([new s({type:i})]);r.operators.operator.OPERATOR_BETWEEN===f&&(t(u).empty(),a.values.removeAll(),a.values([new s({type:i}),new s({type:i})]))}var a=this;a.name=u.name||"",a.displayName=u.displayName||"",a.type=e.observable(u.type||""),a.filterOperator=e.observableArray(u.filterOperator||[]);var f=u.filterOperators?u.filterOperators:r.getFilterOperatorsByType(u.type);a.filterOperators=e.observableArray(f||[]),a.values=e.observableArray([]),a.canDelete=u.canDelete||!1,a.isMust=e.observableArray([]),u.values?a.values(u.values):(a.type()===i.filterTypes.DATE&&(a.filterOperator([r.operators.operator.OPERATOR_ON]),a.values([new s({type:o.valueTypes.DATE})])),a.type()===i.filterTypes.STRING&&(a.filterOperator([r.operators.operator.OPERATOR_IS]),a.values([new s({type:o.valueTypes.STRING})])),a.type()===i.filterTypes.DOUBLE&&(a.filterOperator([r.operators.operator.OPERATOR_IS]),a.values([new s({type:o.valueTypes.DOUBLE})])),a.type()===i.filterTypes.INTEGER&&(a.filterOperator([r.operators.operator.OPERATOR_IS]),a.values([new s({type:o.valueTypes.INTEGER})]))),a.handleFilterOperatorChange=function(t,n){a.type()===i.filterTypes.DATE&&l(t,n),(a.type()===i.filterTypes.INTEGER||a.type()===i.filterTypes.DOUBLE)&&c(t,n,a.type())}}return u}),define("pcs/tasksearch/viewModel/process",[],function(){"use strict";return function(e){return{getProcessDefId:function(){return e.processDefId},getProcessName:function(){return e.hasOwnProperty("processName")?e.processName:""},getRevision:function(){return e.revision}}}}),define("pcs/tasksearch/viewModel/searchableField",[],function(){"use strict";return function(e){return{getFieldName:function(){return e.searchFieldName},getDisplayName:function(){return e.displayName},getDataType:function(){return e.dataType},getCategory:function(){return e.category},getProcessName:function(){return e.processName}}}}),define("pcs/tasksearch/viewModel/searchMetadata",["pcs/tasksearch/viewModel/process","pcs/tasksearch/viewModel/searchableField","pcs/data-services/DataServices"],function(e,t,n){"use strict";var r={processdefinitions:"/process-definitions",searchablefields:"/searchfields"},i=n.getInstance();return{getProcessDefinitions:function(){var t=r.processdefinitions;return new Promise(function(n,r){i.get(t).done(function(t){var r=t.items.map(function(t){return new e(t)});n(r)}).fail(function(e){r(e)})})},getSearchableFields:function(e){var n=r.searchablefields;return new Promise(function(r,s){var o={queryParams:e};i.get(n,o).done(function(e){var n=e.fields.map(function(e){return new t(e)});r(n)}).fail(function(e){s(e)})})}}}),define("pcs/tasksearch/viewModel/status",[],function(){"use strict";var e={ASSIGNED:"ASSIGNED",INFO_REQUESTED:"INFO_REQUESTED",WITHDRAWN:"WITHDRAWN",SUSPENDED:"SUSPENDED",ALERTED:"ALERTED",ERRORED:"ERRORED",EXPIRED:"EXPIRED",COMPLETED:"COMPLETED"};return{statusType:e}}),define("pcs/tasksearch/viewModel/assingee",[],function(){"use strict";var e={MY:"MY",MY_AND_GROUP:"MY_AND_GROUP",MY_AND_GROUP_ALL:"MY_AND_GROUP_ALL",REPORTEES:"REPORTEES",CREATOR:"CREATOR",REVIEWER:"REVIEWER",PREVIOUS:"PREVIOUS",ADMIN:"ADMIN",OWNER:"OWNER"};return{assigneeType:e}}),define("pcs/tasksearch/query/query",[],function(){"use strict";function e(e){var t=this;t.queryClauses=[],t.operator=e.operator||"MUST"}return e}),define("pcs/tasksearch/query/queryClause",[],function(){"use strict";function e(){var e=this;e.queryClauses=[],e.operator="MUST"}return e}),define("pcs/tasksearch/query/stringQueryClause",[],function(){"use strict";function e(e){var t=this;t.fieldName=e.fieldName||"",t.values=e.values||[],e.boost&&(t.boost=e.boost)}return e}),define("pcs/tasksearch/query/textQueryClause",[],function(){"use strict";function e(e){var t=this;t.fieldName=e.fieldName||"",t.values=e.values||[],e.boost&&(t.boost=e.boost)}return e}),define("pcs/tasksearch/query/wildcardQueryClause",[],function(){"use strict";function e(e){var t=this;t.fieldName=e.fieldName||"",t.expression=e.values||"",e.boost&&(t.boost=e.boost)}return e}),define("pcs/tasksearch/query/numericRangeQueryClause",[],function(){"use strict";function e(e){var t=this;t.fieldName=e.fieldName,t.minInclusive=e.minInclusive,t.maxInclusive=e.maxInclusive,t.numericRanges=e.numericRanges,e.boost&&(t.boost=e.boost)}return e}),define("pcs/tasksearch/query/numericRange",[],function(){"use strict";function e(e){var t=this;t.type=e.type,t.minValue=e.minValue,t.maxValue=e.maxValue,t.primitiveType=e.primitiveType}return e}),define("pcs/tasksearch/query/numericRangeType",[],function(){"use strict";var e={Integer:"IntegerRange",Long:"LongRange",Float:"FloatRange",Date:"LongRange",Double:"DoubleRange"},t={Integer:"Integer",Long:"Long",Float:"Float",Date:"Long",Double:"Double"};return{getNumericRangeTypeBasedOnType:function(n){return e[n]},getNumericRangePrimitiveTypeBasedOnType:function(n){return t[n]}}}),define("pcs/tasksearch/viewModel/taskSearchVM",["ojs/ojcore","knockout","jquery","ojL10n!pcsMsg/nls/pcsSnippetsResource","pcs/customBindingHandlers/suggestItems","pcs/tasksearch/filter/filter","pcs/tasksearch/filter/filterOperator","pcs/tasksearch/filter/filterType","pcs/tasksearch/filter/filterValueType","pcs/tasksearch/viewModel/searchMetadata","pcs/tasksearch/viewModel/status","pcs/tasksearch/viewModel/assingee","pcs/tasksearch/filter/filterValue","pcs/tasksearch/query/query","pcs/tasksearch/query/queryClause","pcs/tasksearch/query/stringQueryClause","pcs/tasksearch/query/textQueryClause","pcs/tasksearch/query/wildcardQueryClause","pcs/tasksearch/query/numericRangeQueryClause","pcs/tasksearch/query/numericRange","pcs/tasksearch/query/numericRangeType","pcs/pcs.identitybrowser","ojs/ojselectcombobox","ojs/ojbutton","ojs/ojmenu","ojs/ojknockout","ojs/ojpopup","ojs/ojdialog","ojs/ojdatetimepicker"],function(e,t,n,r,i,s,o,u,a,f,l,c,h,p,d,v,m,g,y,b,w){"use strict";return function(i,d){function N(){var e={};e.keyword=g.keyword(),g.selectedStatus().length>0&&(e.status=g.selectedStatus()),g.selectedAssignees()&&(e.assignees=g.selectedAssignees());var r=n("#fromUser"),i=r.find("#identityBrowser"),s=t.contextFor(i[0]);if(s){var o=s.$data,u=o.getUserIDs();u.length>0&&(e.fromUser=u)}g.selectedApplications().length>0&&(e.applications=g.selectedApplications());if(g.dueDateFilter().values()){var a=[],f=g.dueDateFilter().filterOperator()[0];g.dueDateFilter().values().forEach(function(e){(f===g.filterOperator.operators.operator.OPERATOR_ON||f===g.filterOperator.operators.operator.OPERATOR_BETWEEN||f===g.filterOperator.operators.operator.OPERATOR_AFTER||f===g.filterOperator.operators.operator.OPERATOR_BEFORE)&&e.type()===g.filterValueType.valueTypes.DATE&&e.value()&&a.push(e.value()),(f===g.filterOperator.operators.operator.OPERATOR_IN_LAST||f===g.filterOperator.operators.operator.OPERATOR_WITH_IN)&&e.value()&&(e.type()===g.filterValueType.valueTypes.INTEGER&&a.push(e.value()),e.type()===g.filterValueType.valueTypes.LIST&&a.push(e.value()[0]))}),a.length>0&&(f===g.filterOperator.operators.operator.OPERATOR_ON&&(e.toDueDate=a[0],e.fromDueDate=a[0]),f===g.filterOperator.operators.operator.OPERATOR_BETWEEN&&(e.fromDueDate=a[0],e.toDueDate=a[1]),f===g.filterOperator.operators.operator.OPERATOR_AFTER&&(e.fromDueDate=a[0],e.toDueDate=null),f===g.filterOperator.operators.operator.OPERATOR_BEFORE&&(e.fromDueDate=null,e.toDueDate=a[0]))}g.rootElement.trigger("taskSearch:searchByStandardFilters",[e])}function C(){var e=new p({operator:"MUST"}),r,i;if(g.containsText()){i={fieldName:x.PUBLIC_INFO_FIELD,values:[g.containsText()]};var s=new m(i);e.queryClauses.push({textQuery:s,operator:"MUST"})}g.selectedStatus().length>0&&(i={fieldName:x.SYSTEM_ATTRIBUTES_STATE,values:g.selectedStatus()},r=new v(i),e.queryClauses.push({stringQuery:r,operator:g.selectedStatus().length>1?"SHOULD":"MUST"})),g.selectedAssignees()&&(i={fieldName:x.ASSIGNEES,values:g.selectedAssignees()},r=new v(i),e.queryClauses.push({stringQuery:r,operator:"MUST"}));var o=n("#fromUser"),u=o.find("#identityBrowser"),a=t.contextFor(u[0]);if(a){var f=a.$data,l=f.getUserIDs();l.length>0&&(i={fieldName:x.SYSTEM_ATTRIBUTES_FROM_USER_ID,values:l},r=new v(i),e.queryClauses.push({stringQuery:r,operator:l.length>1?"SHOULD":"MUST"}))}g.selectedApplications().length>0&&(i={fieldName:x.PROCESS_DEF_ID,values:g.selectedApplications()},r=new v(i),e.queryClauses.push({stringQuery:r,operator:g.selectedApplications().length>1?"SHOULD":"MUST"}));var c=L(g.dueDateFilter());c&&e.queryClauses.push(c),g.selectedSearchableFields().forEach(function(t,n){var r=k(t,n);r&&e.queryClauses.push(r)});var h={query:e,start:0,offset:30,sorts:[],fields:E,language:"en"},d=JSON.stringify(h);console.log(d),g.rootElement.trigger("taskSearch:searchBySearchableFields",[h])}function k(e,t){if(e.type()===u.filterTypes.STRING)return A(e);if(e.type()===u.filterTypes.DATE)return L(e);if(e.type()===u.filterTypes.INTEGER||e.type()===u.filterTypes.DOUBLE||e.type()===u.filterTypes.FLOAT||e.type()===u.filterTypes.LONG)return M(e);if(e.type()===u.filterTypes.USER)return O(e,t)}function L(e){if(e.values()){var t=[],n=e.filterOperator()[0];e.values().forEach(function(e){(n===g.filterOperator.operators.operator.OPERATOR_ON||n===g.filterOperator.operators.operator.OPERATOR_BETWEEN||n===g.filterOperator.operators.operator.OPERATOR_AFTER||n===g.filterOperator.operators.operator.OPERATOR_BEFORE)&&e.type()===g.filterValueType.valueTypes.DATE&&e.value()&&t.push(e.value()),(n===g.filterOperator.operators.operator.OPERATOR_IN_LAST||n===g.filterOperator.operators.operator.OPERATOR_WITH_IN)&&e.value()&&(e.type()===g.filterValueType.valueTypes.INTEGER&&t.push(e.value()),e.type()===g.filterValueType.valueTypes.LIST&&t.push(e.value()[0]))});if(t.length>0){var r,i,s,o,u,a,f,l,c;r=w.getNumericRangeTypeBasedOnType(e.type()),i=w.getNumericRangePrimitiveTypeBasedOnType(e.type());if(n===g.filterOperator.operators.operator.OPERATOR_ON)return s=t[0]?t[0]:null,o=t[0]?t[0]:null,s&&(s=(new Date(s)).getTime()),o&&(o=(new Date(o)).getTime()),l={type:r,minValue:s,maxValue:o,primitiveType:i},u=new b(l),f=JSON.stringify(u).replace("type","@type"),u=JSON.parse(f),c={fieldName:e.name,minInclusive:!0,maxInclusive:!0,numericRanges:[u]},a=new y(c),{numericRangeQuery:a,operator:"MUST"};if(n===g.filterOperator.operators.operator.OPERATOR_BEFORE)return s=null,o=t[0]?t[0]:null,o&&(o=(new Date(o)).getTime()),l={type:r,minValue:s,maxValue:o,primitiveType:i},u=new b(l),f=JSON.stringify(u).replace("type","@type"),u=JSON.parse(f),c={fieldName:e.name,minInclusive:!0,maxInclusive:!0,numericRanges:[u]},a=new y(c),{numericRangeQuery:a,operator:"MUST"};if(n===g.filterOperator.operators.operator.OPERATOR_AFTER)return s=t[0]?t[0]:null,o=null,s&&(s=(new Date(s)).getTime()),l={type:r,minValue:s,maxValue:o,primitiveType:i},u=new b(l),f=JSON.stringify(u).replace("type","@type"),u=JSON.parse(f),c={fieldName:e.name,minInclusive:!0,maxInclusive:!0,numericRanges:[u]},a=new y(c),{numericRangeQuery:a,operator:"MUST"};if(n===g.filterOperator.operators.operator.OPERATOR_BETWEEN)return s=t[0]?t[0]:null,o=t[1]?t[1]:null,s&&(s=(new Date(s)).getTime()),o&&(o=(new Date(o)).getTime()),l={type:r,minValue:s,maxValue:o,primitiveType:i},u=new b(l),f=JSON.stringify(u).replace("type","@type"),u=JSON.parse(f),c={fieldName:e.name,minInclusive:!0,maxInclusive:!0,numericRanges:[u]},a=new y(c),{numericRangeQuery:a,operator:"MUST"}}}}function A(e){if(e.values()){var t=[];e.values().forEach(function(e){e.value()&&t.push(e.value())});if(t.length>0){var n={fieldName:e.name,values:t},r=new m(n);return{textQuery:r,operator:"MUST"}}}}function O(e,r){var i="#"+S+r,s=n(i),o=s.find("#identityBrowser"),u=t.contextFor(o[0]);if(u){var a=u.$data,f=a.getUserIDs();if(f.length>0){var l={fieldName:e.name,values:f},c=new v(l);return{stringQuery:c,operator:f.length>1?"SHOULD":"MUST"}}}}function M(e){if(e.values()){var t=[];e.values().forEach(function(e){e.value()&&t.push(e.value())});if(t.length>0){var n,r,i,s,o,u,a,f,l,c=e.filterOperator()[0];n=w.getNumericRangeTypeBasedOnType(e.type()),r=w.getNumericRangePrimitiveTypeBasedOnType(e.type());if(c===g.filterOperator.operators.operator.OPERATOR_IS)return i=t[0],s=t[0],f={type:n,minValue:i,maxValue:s,primitiveType:r},o=new b(f),a=JSON.stringify(o).replace("type","@type"),o=JSON.parse(a),l={fieldName:e.name,minInclusive:!0,maxInclusive:!0,numericRanges:[o]},u=new y(l),{numericRangeQuery:u,operator:"MUST"};if(c===g.filterOperator.operators.operator.OPERATOR_LESSER_THAN)return i=null,s=t[0],f={type:n,minValue:i,maxValue:s,primitiveType:r},o=new b(f),a=JSON.stringify(o).replace("type","@type"),o=JSON.parse(a),l={fieldName:e.name,minInclusive:!0,maxInclusive:!1,numericRanges:[o]},u=new y(l),{numericRangeQuery:u,operator:"MUST"};if(c===g.filterOperator.operators.operator.OPERATOR_GREATER_THAN)return i=t[0],s=null,f={type:n,minValue:i,maxValue:s,primitiveType:r},o=new b(f),a=JSON.stringify(o).replace("type","@type"),o=JSON.parse(a),l={fieldName:e.name,minInclusive:!1,maxInclusive:!0,numericRanges:[o]},u=new y(l),{numericRangeQuery:u,operator:"MUST"};if(c===g.filterOperator.operators.operator.OPERATOR_BETWEEN)return i=t[0],s=t[1],f={type:n,minValue:i,maxValue:s,primitiveType:r},o=new b(f),a=JSON.stringify(o).replace("type","@type"),o=JSON.parse(a),l={fieldName:e.name,minInclusive:!0,maxInclusive:!0,numericRanges:[o]},u=new y(l),{numericRangeQuery:u,operator:"MUST"}}}}var g=this;g.rootElement=n(d.element),g.bundle=r,g.filterOperator=o,g.filterValueType=a,g.filterType=u,g.showFilter=i.showFilter,g.mode=t.observable(i.mode||"Search"),g.idbID="pcs-search-idb";var E=[{"@type":"LongField",name:"systemAttributes.assignedDate",type:"Long",analyzed:!1},{"@type":"StringField",name:"systemAttributes.fromUser.displayName",type:"String",analyzed:!1},{"@type":"StringField",name:"systemAttributes.fromUser.id",type:"String",analyzed:!1},{"@type":"IntegerField",name:"systemAttributes.taskNumber",type:"Integer",analyzed:!1},{"@type":"IntegerField",name:"priority",type:"Integer",analyzed:!1},{"@type":"StringField",name:"systemAttributes.state",type:"String",analyzed:!1},{"@type":"StringField",name:"ownerRole",type:"String",analyzed:!1},{"@type":"LongField",name:"systemAttributes.updatedDate",type:"Long",analyzed:!1},{"@type":"StringField",name:"hasSubTasksFlag",type:"String",analyzed:!1},{"@type":"StringField",name:"isDocsEnabledFlag",type:"String",analyzed:!1},{"@type":"StringField",name:"isConversationEnabledFlag",type:"String",analyzed:!1},{"@type":"StringField",name:"creatorDisplayName",type:"String",analyzed:!1},{"@type":"StringField",name:"creator",type:"String",analyzed:!1},{"@type":"StringField",name:"processName",type:"String",analyzed:!0},{"@type":"StringField",name:"processId",type:"String",analyzed:!1},{"@type":"LongField",name:"dueDate",type:"Long",analyzed:!1},{"@type":"LongField",name:"systemAttributes.createdDate",type:"Long",analyzed:!1},{"@type":"DoubleField",name:"percentageComplete",type:"Double",analyzed:!1},{"@type":"StringField",name:"applicationContext",type:"String",analyzed:!1},{"@type":"StringField",name:"systemAttributes.acquiredBy",type:"String",analyzed:!1},{"@type":"StringField",name:"systemAttributes.updatedBy.id",type:"String",analyzed:!1},{"@type":"StringField",name:"systemAttributes.taskDefinitionName",type:"String",analyzed:!1},{"@type":"StringField",name:"sca.applicationName",type:"String",analyzed:!1},{"@type":"StringField",name:"sca.componentName",type:"String",analyzed:!1},{"@type":"StringField",name:"sca.compositeDN",type:"String",analyzed:!1},{"@type":"StringField",name:"sca.compositeName",type:"String",analyzed:!1},{"@type":"StringField",name:"sca.compositeVersion",type:"String",analyzed:!1},{"@type":"StringField",name:"workflowPattern",type:"String",analyzed:!1},{"@type":"StringField",name:"systemAttributes.taskNamespace",type:"String",analyzed:!1},{"@type":"StringArrayField",name:"comments",type:"String",analyzed:!1,value:[]},{"@type":"StringArrayField",name:"custom_actions",type:"String",analyzed:!1,value:[]},{"@type":"StringArrayField",name:"system_actions",type:"String",analyzed:!1,value:[]},{"@type":"StringField",name:"TaskDefinitionId",type:"String",analyzed:!1},{"@type":"StringField",name:"taskId",type:"String",analyzed:!1},{"@type":"StringField",name:"type",type:"String",analyzed:!1},{"@type":"StringArrayField",name:"updatedBy_history",type:"String",analyzed:!1,value:[]},{"@type":"StringArrayField",name:"assignee_user",type:"String",analyzed:!1,value:[]},{"@type":"StringArrayField",name:"assignee_application_role",type:"String",analyzed:!1,value:[]},{"@type":"StringField",name:"processDefId",type:"String",analyzed:!1}],S="generatedIdForSearchableFieldOfTypeUser",x={DUE_DATE:"dueDate",SYSTEM_ATTRIBUTES_STATE:"systemAttributes.state",SYSTEM_ATTRIBUTES_FROM_USER_ID:"systemAttributes.fromUser.id",SYSTEM_ATTRIBUTES_ASSIGNEES:"systemAttributes.assignees",ASSIGNEES:"assignees",PROCESS_DEF_ID:"processDefId",PRIORITY:"priority",PUBLIC_INFO_FIELD:"public_info_field"},T=[x.DUE_DATE,x.SYSTEM_ATTRIBUTES_STATE,x.SYSTEM_ATTRIBUTES_ASSIGNEES,x.SYSTEM_ATTRIBUTES_FROM_USER_ID];g.init=function(){g.matchCriterias=[{id:"All",label:r.pcs.tasksearch.all},{id:"Any",label:r.pcs.tasksearch.any}],g.matchCriteria=t.observable("All"),g.keyword=i.tasklistFilter&&i.tasklistFilter.keyword?t.observableArray([i.tasklistFilter.keyword]):t.observable(""),g.containsText=t.observable(""),g.showAdvancedOptions=t.observable(i.showAdvancedOptions||!1),g.selectedFilter=t.observable(),g.selectedStatus=i.tasklistFilter&&i.tasklistFilter.status?t.observableArray([i.tasklistFilter.status]):t.observableArray([l.statusType.ASSIGNED]),g.selectedAssignees=i.tasklistFilter&&i.tasklistFilter.assignees?t.observableArray([i.tasklistFilter.assignees]):t.observableArray([c.assigneeType.MY_AND_GROUP_ALL]),g.selectedApplications=i.tasklistFilter&&i.tasklistFilter.applications?t.observableArray([i.tasklistFilter.applications]):t.observableArray();var e={name:x.DUE_DATE,displayName:r.pcs.tasksearch.duedate,type:u.filterTypes.DATE},n=new s(e);g.dueDateFilter=t.observable(n),g.selectedSearchableFields=t.observableArray(),g.availableSearchableFields=t.observableArray(),g.autoSuggestionsOnTextEntered=[{value:"SHOW_ADVANCE_SEARCH",label:r.pcs.tasksearch.show_advance_search,styleClass:"advanced-icon",action:g.hanldeAutoSuggestionSelection}],g.availableStatus=[{value:l.statusType.ASSIGNED,label:r.pcs.tasksearch.assigned},{value:l.statusType.INFO_REQUESTED,label:r.pcs.tasksearch.info_requested},{value:l.statusType.WITHDRAWN,label:r.pcs.tasksearch.withdrawn},{value:l.statusType.SUSPENDED,label:r.pcs.tasksearch.suspended},{value:l.statusType.ALERTED,label:r.pcs.tasksearch.alerted},{value:l.statusType.ERRORED,label:r.pcs.tasksearch.errored},{value:l.statusType.EXPIRED,label:r.pcs.tasksearch.expired},{value:l.statusType.COMPLETED,label:r.pcs.tasksearch.completed}];var o=[{value:"1",label:r.pcs.tasksearch.lowest},{value:"2",label:r.pcs.tasksearch.low},{value:"3",label:r.pcs.tasksearch.normal},{value:"4",label:r.pcs.tasksearch.high},{value:"5",label:r.pcs.tasksearch.highest}];g.availableAssignees=[{value:c.assigneeType.MY,label:r.pcs.tasksearch.my_tasks},{value:c.assigneeType.MY_AND_GROUP,label:r.pcs.tasksearch.me_and_my_group},{value:c.assigneeType.MY_AND_GROUP_ALL,label:r.pcs.tasksearch.me_and_my_group_all},{value:c.assigneeType.CREATOR,label:r.pcs.tasksearch.started_by_me},{value:c.assigneeType.REPORTEES,label:r.pcs.tasksearch.reportees},{value:c.assigneeType.PREVIOUS,label:r.pcs.tasksearch.related},{value:c.assigneeType.REVIEWER,label:r.pcs.tasksearch.reviewed_by_me}],g.availableApplications=t.observableArray(),f.getProcessDefinitions().then(function(e){e.map(function(e){g.mode()==="Search"?g.availableApplications.push({label:e.getProcessName(),value:e.getProcessDefId()}):g.availableApplications.push({label:e.getProcessName(),value:e.getProcessName()})})}),g.mode()==="Search"&&f.getSearchableFields().then(function(e){var t={},n=[],r={};e.map(function(e){var i=!1;for(var u=0;u<n.length;u++)if(n[u].name===e.getCategory()){i=!0,r={name:e.getFieldName(),displayName:e.getDisplayName(),type:e.getDataType(),canDelete:!0},e.getFieldName()===x.PRIORITY&&(r={name:e.getFieldName(),displayName:e.getDisplayName(),type:e.getDataType(),canDelete:!0,filterOperators:[],values:[new h({type:a.valueTypes.LIST,listOfValues:o})]}),t=new s(r),T.indexOf(e.getFieldName())===-1&&n[u].items.push(t);break}i||(r={name:e.getFieldName(),displayName:e.getDisplayName(),type:e.getDataType(),canDelete:!0},e.getFieldName()===x.PRIORITY&&(r={name:e.getFieldName(),displayName:e.getDisplayName(),type:e.getDataType(),canDelete:!0,filterOperators:[],values:[new h({type:a.valueTypes.LIST,listOfValues:o})]}),t=new s(r),T.indexOf(e.getFieldName())===-1&&n.push({displayName:e.getCategory(),name:e.getCategory(),items:[t]}))}),g.availableSearchableFields(n)})},g.init(),g.onKeyUpSearchTextBox=function(e,t){var n=t.which?t.which:t.keyCode;n===13&&N()},g.handleFilterMenuSelection=function(e,t){var n=t.item.children("span").text(),r=JSON.parse(n),i=[];r.values.forEach(function(e){i.push(new h(e))}),r.values=i;var o=new s(r);g.selectedSearchableFields.push(o)},g.removeSelectedSearchableField=function(e){var t=g.selectedSearchableFields()[e];g.selectedSearchableFields.remove(t)},g.handleAdvancedOptions=function(){var e=g.showAdvancedOptions();e?g.showAdvancedOptions(!1):g.showAdvancedOptions(!0)},g.closeAdvanceSearchPopup=function(){n("#advanceSearchPopup").ojDialog("close")},g.refreshAutoSuggestions=function(e){return e.length===0?g.autoSuggestions:[{value:e,label:r.pcs.tasksearch.task_containing+" '"+e+" '",styleClass:"advanced-icon",action:g.hanldeAutoSuggestionSelection},{value:"SHOW_ADVANCE_SEARCH",label:r.pcs.tasksearch.show_advance_search,styleClass:"advanced-icon",action:g.hanldeAutoSuggestionSelection}]},g.generateUniqueIdForSearchableFieldOfTypeUser=function(e){return S+e},g.showAdvanceSearchPopup=function(e,t){n("#advanceSearchPopup").ojDialog("open"),n("#advSearchDialog").css({top:0}),window.setTimeout(function(){g.rootElement.trigger("taskSearch:loaded")},100)},g.hanldeAutoSuggestionSelection=function(e){var t=e.selectedAutoSuggestion.value;e.element.blur();if(t==="SHOW_ADVANCE_SEARCH")g.selectedFilter(""),n("#advanceSearchPopup").ojDialog("open"),n("#advSearchDialog").css({top:0});else{var r=new p({operator:"MUST"}),i,s;if(t===c.assigneeType.MY_AND_GROUP_ALL||t===c.assigneeType.CREATOR||t===c.assigneeType.ADMIN)s={fieldName:x.ASSIGNEES,values:[t]},i=new v(s),r.queryClauses.push({stringQuery:i,operator:"MUST"}),s={fieldName:x.SYSTEM_ATTRIBUTES_STATE,values:[l.statusType.ASSIGNED,l.statusType.INFO_REQUESTED]},i=new v(s),r.queryClauses.push({stringQuery:i,operator:"MUST"});else if(t==="DUE_SOON"){var o=new Date,a=new Date;a.setDate(a.getDate()+6),o&&(o=(new Date(o)).getTime()),a&&(a=(new Date(a)).getTime());var f={type:w.getNumericRangeTypeBasedOnType(u.filterTypes.DATE),minValue:o,maxValue:a,primitiveType:w.getNumericRangePrimitiveTypeBasedOnType(u.filterTypes.DATE)},h=new b(f),d=JSON.stringify(h).replace("type","@type");h=JSON.parse(d);var S={fieldName:x.DUE_DATE,minInclusive:!0,maxInclusive:!0,numericRanges:[h]},T=new y(S);r.queryClauses.push({numericRangeQuery:T,operator:"MUST"}),s={fieldName:x.SYSTEM_ATTRIBUTES_STATE,values:[l.statusType.ASSIGNED,l.statusType.INFO_REQUESTED]},i=new v(s),r.queryClauses.push({stringQuery:i,operator:"MUST"})}else s={fieldName:x.PUBLIC_INFO_FIELD,values:[t]},i=new m(s),r.queryClauses.push({textQuery:i,operator:"MUST"});var N={query:r,start:0,offset:30,sorts:[],fields:E,language:"en"};console.log(JSON.stringify(N)),g.rootElement.trigger("taskSearch:searchBySearchableFields",[N])}},g.autoSuggestions=[{value:c.assigneeType.CREATOR,label:r.pcs.tasksearch.tasks_i_created,styleClass:"created-tasks-icon",action:g.hanldeAutoSuggestionSelection}],i.isManager&&g.autoSuggestions.push({value:c.assigneeType.MY_AND_GROUP_ALL,label:r.pcs.tasksearch.tasks_assigned_to_my_team,styleClass:"team-tasks-icon",action:g.hanldeAutoSuggestionSelection}),g.autoSuggestions.push({value:"DUE_SOON",label:r.pcs.tasksearch.tasks_due_soon,styleClass:"due-icon",action:g.hanldeAutoSuggestionSelection}),i.showAdvancedSearch&&g.autoSuggestions.push({value:"SHOW_ADVANCE_SEARCH",label:r.pcs.tasksearch.show_advance_search,styleClass:"advanced-icon",action:g.hanldeAutoSuggestionSelection}),g.mode()==="Search"&&g.selectedApplications.subscribe(function(e){var t=g.availableSearchableFields();g.availableSearchableFields().forEach(function(e,n){e.name==="BusinessData"&&t.splice(n,1)});if(e.length>0){var n=[];e.forEach(function(e){n.push({processDN:e})}),f.getSearchableFields(n).then(function(e){var n={},r={};e.map(function(e){var i=!1,o="";for(var u=0;u<t.length;u++){o=e.getProcessName();if(t[u].name===e.getCategory()){i=!0,r={name:e.getFieldName(),displayName:e.getDisplayName(),type:e.getDataType(),canDelete:!0},n=new s(r);if(o){var a=t[u].items,f=!1;for(var l=0;l<a.length;l++)a[l].name===o&&(f=!0,a[l].items.push(n));if(!f){var c={name:o,displayName:o,items:[n]};t[u].items.push(c)}}break}}if(!i){r={name:e.getFieldName(),displayName:e.getDisplayName(),type:e.getDataType(),canDelete:!0},n=new s(r);if(o){var h={name:o,displayName:o,items:[n]};t.push({displayName:e.getCategory(),name:e.getCategory(),items:[h]})}}}),g.availableSearchableFields(t)})}else g.availableSearchableFields(t)}),g.onClickAddFilter=function(t,r){var i="#"+r.currentTarget.id,s=n(i).siblings(".pcs-ts-serachable-fields-menu");n(s).ojMenu("refresh")},g.handleSearch=function(){g.mode()==="Search"?C():N(),g.closeAdvanceSearchPopup()}}}),define("pcs/pcs.taskactions",["ojs/ojcore","knockout","jquery","text!pcs/tasklistActions/templates/pcs-task-actions.html","pcs/tasklistActions/viewModel/taskActionsVM","text!pcs/tasklistActions/templates/pcs-reassign.html","pcs/tasklistActions/viewModel/reassignVM","text!pcs/tasklistActions/templates/pcs-requestInfo.html","pcs/tasklistActions/viewModel/requestInfoVM","text!pcs/tasksearch/templates/tasksearchContainer.html","pcs/tasksearch/viewModel/taskSearchVM","pcs/pcs.identitybrowser","ojL10n!pcsMsg/nls/pcsSnippetsResource","jqueryui-amd/widget"],function(e,t,n,r,i){"use strict";n.widget("pcs.taskactions",{options:{hideSystemActions:!1,hideCustomActions:!1,systemActions:"SUSPEND,ESCALATE,RENEW,REASSIGN,INFO_REQUEST,WITHDRAW,ACQUIRE,PURGE,DELETE,RESUME,RELEASE",taskNumbers:"200007,200020,200022"},_create:function(){var e=this,n=this.options;n.rootElement=e.element;var s={taskactionParams:n};this.element.html(r);var o=new i(s);this.model=o,t.applyBindings(o,this.element[0])},destroy:function(){n.Widget.prototype.destroy.call(this)},_destroy:function(){console.log("Destroying taskactions"),this.model&&this.model.dispose()},_setOption:function(e,t){this.options[e]=t,n.Widget.prototype._setOption.apply(this,arguments)}})}),define("pcs/tasklistActions/viewModel/tasklistToolbarVM",["ojs/ojcore","knockout","jquery","pcs/pcs.taskactions","ojs/ojknockout","ojs/ojselectcombobox","ojs/ojbutton","ojs/ojmenu","ojs/ojtoolbar"],function(e,t,n){"use strict";function r(r,i){function f(e){return s.bundle.pcs.tasklist.sortTitleTxt+" "+s.bundle.pcs.tasklist[e]}function l(){t.components.isRegistered("task-search")||t.components.register("task-search",{template:{require:"text!pcs/tasksearch/templates/tasksearchContainer.html"},viewModel:{createViewModel:function(e,t){var n=require("pcs/tasksearch/viewModel/taskSearchVM");return new n(e,t)}}}),t.components.isRegistered("task-actions")||t.components.register("task-actions",{template:{require:"text!pcs/tasklistActions/templates/pcs-task-actions.html"},viewModel:{createViewModel:function(e,t){var n=require("pcs/tasklistActions/viewModel/taskActionsVM");return new n(e,t)}}})}function c(){s.rootElement.trigger("tasklistAction:sortSelect",[s.currentSort()[0],a]),l()}function h(e,t){if(!t)return;var n=t.filter(function(e){return e.isSelected()});s.isTaskSelected(n.length>0)}function p(){s.isSelected([])}function d(t,r){s.isSelected([]);var i=s.bundle.pcs.taskActions.actionPerformed;i=e.Translations.applyParameters(i,{0:r}),n("#pcs-tl-action-success-msg",s.rootElement).text(i),n("#pcs-tl-action-success-msg-container",s.rootElement).show().delay(5e3).fadeOut(2e3)}var s=this;s.rootElement=n(i.element),s.bundle=require("ojL10n!pcsMsg/nls/pcsSnippetsResource");var o={formatType:"date",pattern:"MMM d,h:mm a"},u=e.Validation.converterFactory("datetime").createConverter(o);s.refreshDate=t.observable(u.format(e.IntlConverterUtils.dateToLocalIso(new Date)));var a=r.selectedSortOrder.substring(0,r.selectedSortOrder.length-6);s.sortTasksBy=[{id:"dueDate",label:s.bundle.pcs.tasklist.dueDate},{id:"fromUserDisplayName",label:s.bundle.pcs.tasklist.fromUserDisplayName},{id:"processName",label:s.bundle.pcs.tasklist.processName},{id:"assignedDate",label:s.bundle.pcs.tasklist.assignedDate},{id:"updatedDate",label:s.bundle.pcs.tasklist.updatedDate},{id:"priority",label:s.bundle.pcs.tasklist.priority},{id:"title",label:s.bundle.pcs.tasklist.title}],s.hideFilter=r.hideFilter,s.hideSystemActions=r.hideSystemActions,s.hideCustomActions=r.hideCustomActions,s.hideSearch=r.hideSearch,s.hideSort=r.hideSort,s.hideRefresh=r.hideRefresh,s.hideSelectAll=r.hideSelectAll,s.currentSort=t.observableArray([r.selectedSortType]),s.sortTitleTxt=t.observable(f(a)),s.isTaskSelected=t.observable(!1),s.keywordSearchString=t.observable(""),s.isSelected=t.observableArray([]),s.taskactionParams={hideSystemActions:r.hideSystemActions,hideCustomActions:r.hideCustomActions,systemActions:r.systemActions},s.tasklistFilter=r.tasklistFilter,c(),n(document).on("tasklist:taskCheck",h),n(document).on("tasklist:taskSelect",p),n(document).on("taskAction:submit",d),s.onLeftMenuBtnClick=function(){s.rootElement.trigger("tasklistAction:leftMenuSelect",[])},s.onRefreshBtnClick=function(){var t=e.IntlConverterUtils.dateToLocalIso(new Date);s.refreshDate(u.format(t)),s.rootElement.trigger("tasklistAction:refresh",[t,s.currentSort()[0],a]),s.isSelected([])},s.onSortOptionChange=function(e,t){if(t.option==="value"){var n=t.value[0];s.rootElement.trigger("tasklistAction:sortSelect",[n,a])}},s.onDirectionBtnClick=function(e,t){a=a==="asc"?"desc":"asc",n(t.target).children().toggleClass("pcs-tl-sortd-icon"),s.sortTitleTxt(f(a)),s.rootElement.trigger("tasklistAction:sortSelect",[s.currentSort()[0],a])},s.isSelectedSubscription=s.isSelected.subscribe(function(e){s.rootElement.trigger("tasklistAction:selectAll",[e.length>0])}),s.dispose=function(){console.log("dispose in tasklistToolbarVM"),s.isSelectedSubscription.dispose()}}return r}),define("text!pcs/tasklist/templates/filters.html",[],function(){return'<!--\n Copyright (c) 2014, 2016, Oracle and/or its affiliates.\n The Universal Permissive License (UPL), Version 1.0\n -->\n<div id="pcs-filters"></div>\n<div id="pcs-left-panel" class="pcs-left-panel">\n	<div id="pcs-left-panel-container">\n		<div class="pcs-left-panel-header">\n			<h4 class="pcs-left-panel-text">Process Cloud Service</h4>\n		</div>\n\n		<!--<ul id="pcs-left-panel-section1">\n			<li data-bind="click: getInbox">Inbox</li>\n			<li data-bind="click: getFavourites">Favourites</li>\n		</ul>\n\n		<div id="pcs-left-panel-recent-search" class="demo-panel-contrast1 oj-contrast-marker">\n			<h4 class="pcs-left-panel-text">RECENT SEARCHES</h4>\n			<div class="recent-search-component" data-bind="ojComponent:{\n								component: \'ojNavigationList\',\n								drillMode: \'none\',\n								selection: filterNavItem.getSelectedFilter(),\n								navigationLevel: navigationLevel}">\n				<ul class="pcs-left-panel-navlist" data-bind="foreach: recentSearchesModule.getFilters()">\n					<li data-bind="attr: {id: $data}">\n						<a data-bind="text: $data, click: $parent.filterNavItem.setSelectedFilter">\n						</a>\n					</li>\n				</ul>\n				<a class="pcs-left-panel-more"\n				   data-bind="visible: recentSearchesModule.isShowMore, click: recentSearchesModule.clickMore">More...</a>\n			</div>\n		</div>\n		<br/>-->\n\n		<div id="pcs-left-panel-standard-filters" class="demo-panel-contrast1 oj-contrast-marker">\n			<h4 class="pcs-left-panel-text" data-bind="text:bundle.pcs.tasklist.stdFilters"></h4>\n			<div class="std-filters-component" data-bind="ojComponent:{\n								component: \'ojNavigationList\',\n								drillMode: \'none\',\n								selection: filterNavItem.getSelectedFilter(),\n								navigationLevel: navigationLevel}">\n				<ul class="pcs-left-panel-navlist" data-bind="foreach: standardFiltersModule.getFilters()">\n					<li data-bind="attr: {id: $data}">\n						<a data-bind="text: $data, click: $parent.filterNavItem.setSelectedFilter">\n						</a>\n					</li>\n				</ul>\n				<a class="pcs-left-panel-more"\n				   data-bind="visible: standardFiltersModule.isShowMore, click: standardFiltersModule.clickMore">More...</a>\n			</div>\n		</div>\n		<br/>\n		<div id="pcs-left-panel-saved-filters" class="demo-panel-contrast1 oj-contrast-marker">\n			<h4 class="pcs-left-panel-text" data-bind="text:bundle.pcs.tasklist.applications" ></h4>\n			<div class="saved-filters-component" data-bind="ojComponent:{\n								component: \'ojNavigationList\',\n								drillMode: \'none\',\n								selection: filterNavItem.getSelectedFilter(),\n								navigationLevel: navigationLevel}">\n				<ul class="pcs-left-panel-navlist" data-bind="foreach: savedFiltersModule.getFilters()">\n					<li data-bind="attr: {id: $data}">\n						<a data-bind="text: $data, click: $parent.filterNavItem.setSelectedFilter">\n						</a>\n					</li>\n				</ul>\n				<a class="pcs-left-panel-more"\n				   data-bind="visible: savedFiltersModule.isShowMore, click: savedFiltersModule.clickMore">More...</a>\n			</div>\n		</div>\n		<br/>\n	</div>\n</div>\n'}),define("pcs/tasklist/viewModel/filtersData",["jquery"],function(e){"use strict";function t(){var e=this;e.getRecentSearches=function(){var e=["Completed tasks created by Me","Assigned Tasks in Loan Approval Process","Tasks overdue in Vacation Approval Process"];return e},e.getStandardFilters=function(){var e=["My Filters","High Priority","Related to Me","Started By Me"];return e},e.getSavedFilters=function(){var e=["Retail Customers - Gold Customers","Credit Card Requests - US","New Hires - ST Department","New Hires - Waiting for budget Approval","Credit Card Requests - IN","Vacation Requests overdue"];return e}}return new t}),define("pcs/tasklist/viewModel/filters",["ojs/ojcore","knockout","jquery","pcs/tasklist/viewModel/filtersData","ojs/ojknockout","ojs/ojnavigationlist","ojs/ojconveyorbelt","ojs/ojradioset","ojs/ojswitch"],function(e,t,n,r){"use strict";function i(){var e=this;e.navigationLevel=t.observable("page"),e.bundle=require("ojL10n!pcsMsg/nls/pcsSnippetsResource"),e.recentSearchesModule=function(){var e=t.observableArray(r.getRecentSearches()),i=5,s=t.observable(!1),o=t.computed(function(){return s()?e():e.slice(0,i)});return{getFilters:function(){return o()},isShowMore:t.computed(function(){return s()?!1:e().length>i?!0:!1}),clickMore:function(){s(!0),n(".recent-search-component").ojNavigationList("refresh")}}}(),e.standardFiltersModule=function(){var e=t.observableArray(r.getStandardFilters()),i=5,s=t.observable(!1),o=t.computed(function(){return s()?e():e.slice(0,i)});return{getFilters:function(){return o()},isShowMore:t.computed(function(){return s()?!1:e().length>i?!0:!1}),clickMore:function(){s(!0),n(".std-filters-component").ojNavigationList("refresh")}}}(),e.savedFiltersModule=function(){var e=t.observableArray(r.getSavedFilters()),i=5,s=t.observable(!1),o=t.computed(function(){return s()?e():e.slice(0,i)});return{getFilters:function(){return o()},isShowMore:t.computed(function(){return s()?!1:e().length>i?!0:!1}),clickMore:function(){s(!0),n(".saved-filters-component").ojNavigationList("refresh")}}}(),e.filterNavItem=function(n){var r=t.observable(e.standardFiltersModule.getFilters()[0]);return{setSelectedFilter:function(){r(n)},getSelectedFilter:function(){return r}}}(),e.getInbox=function(){alert("Inbox selected")},e.getFavourites=function(){alert("Favourites")}}return new i}),define("pcs/pcs.tasklist",["ojs/ojcore","knockout","jquery","text!pcs/tasklist/templates/psc-tasklist-container.html","pcs/tasklist/viewModel/tasklistVM","text!pcs/tasklistActions/templates/pcs-tasklist-toolbar.html","pcs/tasklistActions/viewModel/tasklistToolbarVM","text!pcs/tasksearch/templates/tasksearchContainer.html","pcs/tasksearch/viewModel/taskSearchVM","text!pcs/tasklist/templates/filters.html","pcs/tasklist/viewModel/filters","ojL10n!pcsMsg/nls/pcsSnippetsResource","jqueryui-amd/widget"],function(e,t,n,r,i){"use strict";n.widget("pcs.tasklist",{options:{hideToolbar:!1,hideSystemActions:!1,hideCustomActions:!1,hideSearch:!1,hideSort:!1,hideRefresh:!1,hideFromUserName:!1,hideAssignedDate:!1,hideDueDate:!1,hideCreatedDate:!1,hideSummary:!1,pageSize:10,hideFilter:!1,hideSelectAll:!1,selectedSortType:"assignedDate",selectedSortOrder:"ascending",hideTaskDetails:!1,taskDetailOptions:"{}",systemActions:"SUSPEND,ESCALATE,RENEW,REASSIGN,INFO_REQUEST,WITHDRAW,ACQUIRE,PURGE,DELETE,RESUME,RELEASE",tasklistFilter:"{}"},_create:function(){var e=this,n=this.options;n.rootElement=e.element;var s={data:n};this.element.html(r);var o=new i(s);this.model=o,t.applyBindings(o,this.element[0])},destroy:function(){n.Widget.prototype.destroy.call(this)},_destroy:function(){console.log("Destroying tasklist"),this.model&&this.model.dispose()},_setOption:function(e,t){this.options[e]=t,n.Widget.prototype._setOption.apply(this,arguments)}})});