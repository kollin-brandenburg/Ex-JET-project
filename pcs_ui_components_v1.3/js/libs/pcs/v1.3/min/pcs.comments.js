/**
 * @license RequireJS text 2.0.12 Copyright (c) 2010-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/requirejs/text for details
 */

/*
 RequireJS i18n 2.0.2 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 Available via the MIT or new BSD license.
 see: http://github.com/requirejs/i18n for details
*/

define("text",["module"],function(e){"use strict";var t,n,r,i,s,o=["Msxml2.XMLHTTP","Microsoft.XMLHTTP","Msxml2.XMLHTTP.4.0"],u=/^\s*<\?xml(\s)+version=[\'\"](\d)*.(\d)*[\'\"](\s)*\?>/im,a=/<body[^>]*>\s*([\s\S]+)\s*<\/body>/im,f=typeof location!="undefined"&&location.href,l=f&&location.protocol&&location.protocol.replace(/\:/,""),c=f&&location.hostname,h=f&&(location.port||undefined),p={},d=e.config&&e.config()||{};t={version:"2.0.12",strip:function(e){if(e){e=e.replace(u,"");var t=e.match(a);t&&(e=t[1])}else e="";return e},jsEscape:function(e){return e.replace(/(['\\])/g,"\\$1").replace(/[\f]/g,"\\f").replace(/[\b]/g,"\\b").replace(/[\n]/g,"\\n").replace(/[\t]/g,"\\t").replace(/[\r]/g,"\\r").replace(/[\u2028]/g,"\\u2028").replace(/[\u2029]/g,"\\u2029")},createXhr:d.createXhr||function(){var e,t,n;if(typeof XMLHttpRequest!="undefined")return new XMLHttpRequest;if(typeof ActiveXObject!="undefined")for(t=0;t<3;t+=1){n=o[t];try{e=new ActiveXObject(n)}catch(r){}if(e){o=[n];break}}return e},parseName:function(e){var t,n,r,i=!1,s=e.indexOf("."),o=e.indexOf("./")===0||e.indexOf("../")===0;return s!==-1&&(!o||s>1)?(t=e.substring(0,s),n=e.substring(s+1,e.length)):t=e,r=n||t,s=r.indexOf("!"),s!==-1&&(i=r.substring(s+1)==="strip",r=r.substring(0,s),n?n=r:t=r),{moduleName:t,ext:n,strip:i}},xdRegExp:/^((\w+)\:)?\/\/([^\/\\]+)/,useXhr:function(e,n,r,i){var s,o,u,a=t.xdRegExp.exec(e);return a?(s=a[2],o=a[3],o=o.split(":"),u=o[1],o=o[0],(!s||s===n)&&(!o||o.toLowerCase()===r.toLowerCase())&&(!u&&!o||u===i)):!0},finishLoad:function(e,n,r,i){r=n?t.strip(r):r,d.isBuild&&(p[e]=r),i(r)},load:function(e,n,r,i){if(i&&i.isBuild&&!i.inlineText){r();return}d.isBuild=i&&i.isBuild;var s=t.parseName(e),o=s.moduleName+(s.ext?"."+s.ext:""),u=n.toUrl(o),a=d.useXhr||t.useXhr;if(u.indexOf("empty:")===0){r();return}!f||a(u,l,c,h)?t.get(u,function(n){t.finishLoad(e,s.strip,n,r)},function(e){r.error&&r.error(e)}):n([o],function(e){t.finishLoad(s.moduleName+"."+s.ext,s.strip,e,r)})},write:function(e,n,r,i){if(p.hasOwnProperty(n)){var s=t.jsEscape(p[n]);r.asModule(e+"!"+n,"define(function () { return '"+s+"';});\n")}},writeFile:function(e,n,r,i,s){var o=t.parseName(n),u=o.ext?"."+o.ext:"",a=o.moduleName+u,f=r.toUrl(o.moduleName+u)+".js";t.load(a,r,function(n){var r=function(e){return i(f,e)};r.asModule=function(e,t){return i.asModule(e,f,t)},t.write(e,a,r,s)},s)}};if(d.env==="node"||!d.env&&typeof process!="undefined"&&process.versions&&!!process.versions.node&&!process.versions["node-webkit"])n=require.nodeRequire("fs"),t.get=function(e,t,r){try{var i=n.readFileSync(e,"utf8");i.indexOf("ï»¿")===0&&(i=i.substring(1)),t(i)}catch(s){r&&r(s)}};else if(d.env==="xhr"||!d.env&&t.createXhr())t.get=function(e,n,r,i){var s=t.createXhr(),o;s.open("GET",e,!0);if(i)for(o in i)i.hasOwnProperty(o)&&s.setRequestHeader(o.toLowerCase(),i[o]);d.onXhr&&d.onXhr(s,e),s.onreadystatechange=function(t){var i,o;s.readyState===4&&(i=s.status||0,i>399&&i<600?(o=new Error(e+" HTTP status: "+i),o.xhr=s,r&&r(o)):n(s.responseText),d.onXhrComplete&&d.onXhrComplete(s,e))},s.send(null)};else if(d.env==="rhino"||!d.env&&typeof Packages!="undefined"&&typeof java!="undefined")t.get=function(e,t){var n,r,i="utf-8",s=new java.io.File(e),o=java.lang.System.getProperty("line.separator"),u=new java.io.BufferedReader(new java.io.InputStreamReader(new java.io.FileInputStream(s),i)),a="";try{n=new java.lang.StringBuffer,r=u.readLine(),r&&r.length()&&r.charAt(0)===65279&&(r=r.substring(1)),r!==null&&n.append(r);while((r=u.readLine())!==null)n.append(o),n.append(r);a=String(n.toString())}finally{u.close()}t(a)};else if(d.env==="xpconnect"||!d.env&&typeof Components!="undefined"&&Components.classes&&Components.interfaces)r=Components.classes,i=Components.interfaces,Components.utils["import"]("resource://gre/modules/FileUtils.jsm"),s="@mozilla.org/windows-registry-key;1"in r,t.get=function(e,t){var n,o,u,a={};s&&(e=e.replace(/\//g,"\\")),u=new FileUtils.File(e);try{n=r["@mozilla.org/network/file-input-stream;1"].createInstance(i.nsIFileInputStream),n.init(u,1,0,!1),o=r["@mozilla.org/intl/converter-input-stream;1"].createInstance(i.nsIConverterInputStream),o.init(n,"utf-8",n.available(),i.nsIConverterInputStream.DEFAULT_REPLACEMENT_CHARACTER),o.readString(n.available(),a),o.close(),n.close(),t(a.value)}catch(f){throw new Error((u&&u.path||"")+": "+f)}};return t}),define("text!pcs/comments/templates/pcs-comments.html",[],function(){return'<div class="oj-row oj-panel" data-bind=\'component: {\n    name: "commentComponent",\n	params : {data : data}\n}\'></div>\n'}),function(){function e(e,t,n,r,i,s){return t[e]||(e=e.replace(/^zh-(Hans|Hant)-([^-]+)$/,"zh-$2")),t[e]?(n.push(e),!0!==t[e]&&1!==t[e]||r.push(i+e+"/"+s),!0):!1}function t(e){var t=e.toLowerCase().split(/-|_/);e=[t[0]];var n=1,r;for(r=1;r<t.length;r++){var i=t[r],s=i.length;if(1==s)break;switch(n){case 1:if(n=2,4==s){e.push(i.charAt(0).toUpperCase()+i.slice(1));break};case 2:n=3,e.push(i.toUpperCase());break;default:e.push(i)}}if(!("zh"!=e[0]||1<e.length&&4==e[1].length)){t="Hans",n=1<e.length?e[1]:null;if("TW"===n||"MO"===n||"HK"===n)t="Hant";e.splice(1,0,t)}return e}function n(e,t){for(var r in t)t.hasOwnProperty(r)&&(null==e[r]?e[r]=t[r]:"object"==typeof t[r]&&"object"==typeof e[r]&&n(e[r],t[r]))}var r=/(^.*(^|\/)nls(\/|$))([^\/]*)\/?([^\/]*)/;define("ojL10n",["module"],function(i){var s=i.config?i.config():{};return{version:"2.0.1+",load:function(i,o,u,a){a=a||{},a.locale&&(s.locale=a.locale);var f=r.exec(i),l=f[1],c,h=f[5],p,d=[],v={},m,g="",w,E,S,T,N,C;f[5]?(l=f[1],i=l+h,c=f[4]):(h=f[4],c=s.locale,"undefined"!=typeof document?(c||(c=a.isBuild?"root":document.documentElement.lang)||(c=void 0===navigator?"root":navigator.language||navigator.userLanguage||"root"),s.locale=c):c="root"),p=t(c),w=s.noOverlay,E=s.defaultNoOverlayLocale;if(f=s.merge)if(S=f[l+h])f=r.exec(S),T=f[1],N=f[4];C=[];for(m=0;m<p.length;m++)f=p[m],g+=(g?"-":"")+f,C.push(g);a.isBuild?(d.push(i),S&&d.push(S),o(d,function(){u()})):("query"==s.includeLocale&&(i=o.toUrl(i+".js"),i+=(-1===i.indexOf("?")?"?":"&")+"loc="+c),a=[i],S&&a.push(S),o(a,function(t,r){var i=[],s,a=!1,f=w||!0===t.__noOverlay,c=E||t.__defaultNoOverlayLocale;for(m=C.length-1;0<=m&&(!a||!f);m--)a=e(C[m],t,i,d,l,h);f&&!a&&c&&e(c,t,i,d,l,h),e("root",t,i,d,l,h),s=i.length;if(r){a=!1,f=!0===r.__noOverlay,c=r.__defaultNoOverlayLocale;for(m=C.length-1;0<=m&&(!a||!f);m--)a=e(C[m],r,i,d,T,N);f&&!a&&c&&e(c,r,i,d,T,N),e("root",r,i,d,T,N)}o(d,function(){var e,a,f;for(e=s;e<i.length&&i[e];e++){f=i[e],a=r[f];if(!0===a||1===a)a=o(T+f+"/"+N);n(v,a)}for(e=0;e<s&&i[e];e++){f=i[e],a=t[f];if(!0===a||1===a)a=o(l+f+"/"+h);n(v,a)}v._ojLocale_=p.join("-"),u(v)})}))}}})}(),define("pcs/util/pcsUtil",["module","knockout","ojs/ojcore","jquery"],function(e,t,n,r){"use strict";function a(){var e={},t;if(window.location.href.indexOf("?")===-1)return e;var n=window.location.href.slice(window.location.href.indexOf("?")+1).split("&");for(var r=0;r<n.length;r++){t=n[r].split("=");var i=decodeURIComponent(t[0]),s=decodeURIComponent(t[1]),o=JSON.parse(s);e[i]=o}return e}var i={};r.CustomEvent=function(e){var t,n=e&&i[e];return n||(t=r.Callbacks(),n={publish:t.fire,subscribe:t.add,unsubscribe:t.remove},e&&(i[e]=n)),n};var s={addHandler:function(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent?e.attachEvent("on"+t,n):e["on"+t]=n},removeHandler:function(e,t,n){e.removeEventListener?e.removeEventListener(t,n,!1):e.detachEvent?e.detachEvent("on"+t,n):e["on"+t]=null}};String.prototype.startsWith||Object.defineProperty(String.prototype,"startsWith",{enumerable:!1,value:function(e,t){return t=t||0,this.substr(t,e.length)===e}}),String.prototype.endsWith||Object.defineProperty(String.prototype,"endsWith",{enumerable:!1,value:function(e,t){var n=this.toString();if(typeof t!="number"||!isFinite(t)||Math.floor(t)!==t||t>n.length)t=n.length;t-=e.length;var r=n.indexOf(e,t);return r!==-1&&r===t}});var o=function(e){typeof window.doADFProxyCall=="function"?window.doADFProxyCall(e):e&&window.location.assign(e)},u=function(e){function a(e){var t=e.split("\r\n"),n="text/plain",r="pcsFormUrl",i={contentType:n,fieldName:r};for(var s=1;s<t.length;s++){var o=t[s],u=o.match(/^.*filename="([^"]*)"/);if(u)i.fieldName=u[1];else{var a="Content-Type:";o.indexOf(a)>-1&&(u=o.substring(o.indexOf(a)+a.length)),u&&(i.contentType=u.trim())}}return i}var t=e.getResponseHeader("Content-Type"),n=e.response,r=t.match(/boundary=(?:'([^']+)'|([^;]+))/i);if(!r)throw new Error("Bad content-type header, no multipart boundary");var i=r[1]||r[2],s=typeof n!="string",o,u;i="\r\n--"+i;if(s){var f=new Uint8Array(n),l=32768,c=[];for(u=0;u<f.length;u+=l)c.push(String.fromCharCode.apply(null,f.subarray(u,u+l)));o=c.join("")}else o=n;o="\r\n"+o;var h=o.split(new RegExp(i)),p={};for(u=1;u<h.length-1;u++){var d="\r\n\r\n",v=h[u].substring(h[u].indexOf(d)+d.length),m=h[u].substring(0,h[u].indexOf(d)),g=a(m),y=!1;s&&!g.contentType.startsWith("text")&&(y=!0),p[g.fieldName]={data:v,contentType:g.contentType,fileName:g.fieldName}}return p},f=function(e){return r.ajax({type:"GET",url:e,dataType:"text",xhrFields:{withCredentials:!0}})};return t.bindingHandlers.formatDateInMillis={update:function(e,r,i){var s=t.unwrap(r());if(!s)return;var o={formatType:"date",pattern:i().datePattern},u=n.Validation.converterFactory("datetime").createConverter(o),a=u.format(n.IntlConverterUtils.dateToLocalIso(new Date(s)));t.bindingHandlers.text.update(e,function(){return a})}},{adfProxyCall:o,getAuthToken:f,multipartParse:u,getUrlParametersObject:a,eventHandler:s,initComponentForIFrame:function(e,t,n){if(!r.isEmptyObject(r.pcsConnection))t();else{r.pcsConnection={};if(!r.isEmptyObject(e)){e.testMode&&(r.pcsConnection.testMode=e.testMode),e.serverURL&&(r.pcsConnection.serverURL=e.serverURL);if(e.authInfo){r.pcsConnection.authInfo=e.authInfo,t();return}}var i=this,s=function(){var e=i.getServerURL();console.log("Script loaded and ready, getting token"),i.getAuthToken(e+"/bpm/workspace/auth/token").done(function(e){e&&e.startsWith("<html")?n.text("User cannot be authorized").show():(r.pcsConnection.authInfo="Bearer "+e,t())}).fail(function(e){n.text("User cannot be authorized").show()})},o=document.createElement("script");o.onload=s,o.onreadystatechange=function(){this.readyState==="complete"&&s()};var u=this.getServerURL();o.src=u+"/bpm/workspace/faces/js/homePage.js",document.getElementsByTagName("head")[0].appendChild(o)}},getCookie:function(e){var t;return(t=(new RegExp("(?:^|; )"+encodeURIComponent(e)+"=([^;]*)")).exec(document.cookie))?t[1]:null},getServerURL:function(){if(r.pcsConnection&&r.pcsConnection.serverURL)return r.pcsConnection.serverURL.endsWith("/")?r.pcsConnection.serverURL.substring(0,r.pcsConnection.serverURL.length-1):r.pcsConnection.serverURL;if(e.uri.indexOf(".")===0||e.uri.indexOf("/")===0)return window.location.origin;try{return(new URL(e.uri)).origin}catch(t){return window.location.origin}},getRestUri:function(){return"/bpm/api/3.0/"},getAuthInfo:function(){if(r.pcsConnection&&r.pcsConnection.authInfo){var e=r.pcsConnection.authInfo;return!e.startsWith("Bearer ")&&!e.startsWith("Basic ")&&(e="Bearer "+e),e}return""},getRestURL:function(){if(r.pcsConnection&&r.pcsConnection.restURL)return r.pcsConnection.restURL;var e=this.getServerURL()+this.getRestUri();return r.pcsConnection&&(r.pcsConnection.restURL=e),e},isTestMode:function(){return r.pcsConnection&&r.pcsConnection.testMode?!0:!1},taskIconColor:function(e){if(!e)return"grey";var t=0,n,r,i;for(n=0,i=e.length;n<i;n++)r=e.charCodeAt(n),t=(t<<5)-t+r,t|=0;var s=t,o=s&255;s>>=8;var u=s&255;s>>=8;var a=s&255;return"rgb("+a+","+u+","+o+")"},taskInitials:function(e){if(!e)return"NA";e=e.replace(" ","");var t=e.charAt(0).toUpperCase(),n="";for(var r=1;r<e.length;r++)if(e.charAt(r)===e.charAt(r).toUpperCase()){n=e.charAt(r);break}return t+n},getRandomInt:function(e,t){return Math.floor(Math.random()*(t-e+1))+e},unApplyBindings:function(e,n){e.find("*").each(function(){r(this).off(),r(this).unbind()}),e.off(),n?(t.cleanNode(e[0]),e.find("*").each(function(){r(this).remove()}),t.removeNode(e)):(t.cleanNode(e),e.find("*").each(function(){r(this).remove()}))}}}),define("pcs/comments/services/commentsDataService",["jquery","pcs/util/pcsUtil"],function(e,t){"use strict";function n(){var n=this;n.paths={taskCommentList:"tasks/{taskId}/comments",ProcessesCommentList:"processes/{processId}/comments"};var r=function(n){return t.adfProxyCall(),e.ajax({type:"GET",url:n,beforeSend:function(e){e.setRequestHeader("Authorization",t.getAuthInfo()),t.isTestMode()&&e.setRequestHeader("pcs_mode","dev")},xhrFields:{withCredentials:!0},contentType:"application/json",dataType:"json"})},i=function(n,r,i){return t.adfProxyCall(),console.log(r),e.ajax({type:"POST",url:n,data:r,contentType:i,dataType:"json",beforeSend:function(e){e.setRequestHeader("Authorization",t.getAuthInfo()),t.isTestMode()&&e.setRequestHeader("pcs_mode","dev")},xhrFields:{withCredentials:!0}})};n.getCommentList=function(e,i){var s;return e==="task"?s=t.getRestURL()+n.paths.taskCommentList.replace("{taskId}",i):e==="processes"&&(s=t.getRestURL()+n.paths.ProcessesCommentList.replace("{processId}",i)),r(s)},n.postComment=function(e,r,s,o){var u;return e==="task"?u=t.getRestURL()+n.paths.taskCommentList.replace("{taskId}",r):e==="processes"&&(u=t.getRestURL()+n.paths.ProcessesCommentList.replace("{processId}",r)),i(u,s,o)}}return new n}),define("text!pcs/comments/view/commentsContainer.html",[],function(){return'<div class="pcs-comments-detailBox">\n\n\n	<div class="pcs-comments-titleBox">\n		<h3><label class="pcs-comments-title" data-bind="text:bundle.pcs.comments.title"/></h3>\n	</div>\n\n	<div class="row pcs-comments-commontBox no-gutter" style="margin-top:20px;margin-right: 20px">\n\n		<div id="form-container" class="oj-form-layout pcs-comments-inputCommentContainer">\n			<div class="oj-form oj-sm-odd-cols-12 oj-md-odd-cols-12 oj-md-labels-inline">\n\n				<!--div class="oj-flex"-->\n					<!--div role="group" aria-labelledby="filter" class="oj-form" -->\n						<div class="oj-flex">\n							<div class="oj-flex-item" >\n								<textarea id="pcs-comments-inputComment" style="resize: both;"\n										  data-bind="ojComponent: {component: \'ojTextArea\',  rootAttributes: {style:\'max-width:100%\'},\n                                     value: commentStr, placeholder:bundle.pcs.comments.placeholder}" ></textarea>\n							</div>\n						<!--/div-->\n\n					<!--/div-->\n				</div>\n\n				<div class="oj-row oj-sm-text-align-end" style="display: inline-block;margin-top:5px">\n					<button id="pcs-comments-postComment" style="display: inline-block;text-align: center;"\n							data-bind="click: postComment,\n                               ojComponent: { component: \'ojButton\', label: bundle.pcs.comments.addCommentButton }">\n					</button>\n				</div>\n			</div>\n		</div>\n	</div>\n\n	<!--span id="pcs-comments-error-text" style="color:red;display:none" >Adding comment failed</span-->\n\n	<div id="pcs-comments-success-msg-container" style="display: none;margin-bottom:20px">\n		<span title="Success" role="img" class="oj-fwk-icon-status-confirmation oj-fwk-icon"></span>\n		<span id="pcs-comments-success-msg" class="pcs-comments-success-msg"></span>\n	</div>\n\n	<div id="pcs-comments-error-msg-container" class="pcs-comments-error-msg-container"  style="display: none">\n		<span class="oj-component-icon oj-message-status-icon oj-message-error-icon" role="img" id="pcs-comments-error-msg-icon" style="float: left ;margin-right:10px" ></span>\n		<pre id="pcs-comments-error-msg" class="pcs-comments-error-msg"></pre>\n	</div>\n\n	<div class="pcs-comments-actionBox">\n		<ul class="pcs-comments-commentList" data-bind="foreach:comments ">\n			<li>\n				<table width="100%" cellpadding="5">\n					<tr>\n						<td style="white-space:nowrap">\n							<div style="font-weight:bold" data-bind="text: updatedBy"/>\n						</td>\n						<td  width="99%">\n							<div style="font-weight:bold" data-bind="text: updatedDate"/>\n						</td>\n					</tr>\n					<tr>\n						<td colspan="2">\n							<div class="pcs-comments-commentStr">\n								<p data-bind="text: commentStr"/>\n							</div>\n						</td>\n					</tr>\n				</table>\n				<hr/>\n			</li>\n		</ul>\n		<div id="pcs-comments-overlay"/>\n	</div>\n</div>\n'}),define("pcs/comments/viewModel/commentsContainer",["ojs/ojcore","knockout","pcs/util/pcsUtil","pcs/comments/services/commentsDataService","ojs/ojknockout","ojs/ojdialog","ojs/ojbutton","ojs/ojinputtext","text!pcs/comments/view/commentsContainer.html","ojL10n!pcsMsg/nls/pcsSnippetsResource"],function(e,t,n,r){"use strict";function i(e){function i(e,t){t&&t!==""&&(e==="task"||e==="process")&&($("#pcs-comments-overlay").addClass("pcs-common-load-overlay"),r.getCommentList(e,t).done(function(e){if(e.comment)for(var t=e.comment.length-1;t>=0;t--)n._addCommentItem(e.comment[t]);$("#pcs-comments-overlay").removeClass("pcs-common-load-overlay"),n.rootElement.trigger("comments:loaded")}).fail(function(e,t,r){$("#pcs-comments-overlay").removeClass("pcs-common-load-overlay"),n.rootElement.trigger("comments:loaded")}))}var n=this;this.data=e.data,n.bundle=require("ojL10n!pcsMsg/nls/pcsSnippetsResource"),this.data.container=n,this.rootElement=n.data.rootElement,n.data.readOnly&&$(".pcs-comments-inputCommentContainer",n.rootElement).hide(),n.data.hideTitle&&$(".pcs-comments-titleBox",n.rootElement).hide(),n.comments=t.observableArray([]),n.commentStr=t.observable(""),(n.data.mode==="task"||n.data.mode==="process")&&i(n.data.mode,n.data.id);var s=function(e,t,n,r){this.commentStr=e,this.updatedBy=t,this.userId=n,this.updatedDate=r},o=function(e,t){this.commentStr=e,this.commentScope=t};n._addCommentItem=function(e){var t=new s(e.commentStr,e.updatedBy,e.userId,e.updateddDate);n.comments.unshift(t)},n.dispose=function(){console.log("dispose in comments Containor")},n.postComment=function(){var e=new o(n.commentStr(),"BPM"),t="application/json";$("#pcs-comments-overlay").addClass("pcs-common-load-overlay"),r.postComment(n.data.mode,n.data.id,JSON.stringify(e),t).done(function(t){if(t.comment){n.comments.removeAll();for(var r=t.comment.length-1;r>=0;r--)n._addCommentItem(t.comment[r])}n.rootElement.trigger("comments:commentAdded",[e]);var i=n.bundle.pcs.comments.add_comment_success;$("#pcs-comments-success-msg",n.rootElement).text(i),$("#pcs-comments-success-msg-container",n.rootElement).show().delay(5e3).fadeOut(2e3),n.commentStr(""),$("#pcs-comments-overlay").removeClass("pcs-common-load-overlay")}).fail(function(e,t,r){var i=n.bundle.pcs.comments.post_error;e&&e.status===0&&(i=n.bundle.pcs.common.server_not_reachable),e&&e.status===500?i=e.responseText:e&&e.status===401&&(i=n.bundle.pcs.common.access_error_msg),$("#pcs-comments-error-msg",n.rootElement).text(i),$("#pcs-comments-error-msg-container",n.rootElement).show().delay(5e3).fadeOut(2e3),$("#pcs-comments-overlay",n.rootElement).removeClass("pcs-common-load-overlay")})}}return i}),define("pcs/pcs.comments",["ojs/ojcore","knockout","jquery","text!pcs/comments/templates/pcs-comments.html","ojL10n!pcsMsg/nls/pcsSnippetsResource","jqueryui-amd/widget","pcs/comments/viewModel/commentsContainer","text!pcs/comments/view/commentsContainer.html"],function(e,t,n,r,i){"use strict";n.widget("pcs.comments",{options:{readOnly:!1,hideTitle:!1,mode:"task",id:-1},_create:function(){function o(){var e=this;t.components.isRegistered("commentComponent")||t.components.register("commentComponent",{template:{require:"text!pcs/comments/view/commentsContainer.html"},viewModel:{require:"pcs/comments/viewModel/commentsContainer"}}),e.data=s}var e=this;if(n.pcsConnection===undefined){this.element.html("<div style='color:red'>"+i.pcs.common.pcs_connection+" </div>");return}var s={rootElement:e.element,readOnly:e.options.readOnly,hideTitle:e.options.hideTitle,mode:e.options.mode,id:e.options.id},u=new o;e.model=u,this.element.html(r),t.applyBindings(u,this.element[0])},destroy:function(){n.Widget.prototype.destroy.call(this)},_destroy:function(){console.log("Destroying comments"),this.model&&this.model.data&&this.model.data.container&&this.model.data.container.dispose()},_setOption:function(e,t){this.options[e]=t,n.Widget.prototype._setOption.apply(this,arguments)},getComments:function(){var e=this.model.data.container.commentList();return e}})});